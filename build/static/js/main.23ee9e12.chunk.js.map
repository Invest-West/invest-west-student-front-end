{"version":3,"sources":["img/logo.png","img/document_icon.png","img/linkedin_logo.png","img/admin_logo.png","img/group_admin_help_my_dashboard.png","img/group_admin_help_navigation_bar.png","img/group_admin_help_notifications.png","img/group_admin_help_user_management.png","img/group_admin_help_inviting_a_new_user_01.png","img/group_admin_help_inviting_a_new_user_02.png","img/group_admin_help_inviting_a_new_user_03.png","img/group_admin_help_manage_access_requests.png","img/group_admin_help_manage_group_members.png","img/group_admin_help_viewing_an_offer.png","img/group_admin_help_accept_reject_offer.png","img/group_admin_help_accept_reject_2_offer.png","img/group_admin_help_edit_offer_01.png","img/group_admin_help_edit_offer_02.png","img/group_admin_help_temporarily_closing_an_offer.png","img/group_admin_help_reopening_a_temporarily_closed_offer.png","img/group_admin_help_manage_group_admins.png","img/group_admin_help_explore_offers.png","img/group_admin_help_explore_groups.png","img/group_admin_help_resources.png","img/group_admin_help_settings.png","img/group_admin_help_public_offer.png","img/group_admin_help_restricted_offer.png","img/group_admin_help_audit_log.png","img/group_admin_help_password.png","img/group_admin_help_change_password.png","img/group_admin_help_logging_out.png","img/investor_help_my_dashboard.png","img/investor_help_navigation_bar.png","img/investor_help_notifications.png","img/investor_help_viewing_offers.png","img/investor_help_viewing_offers_campaign.png","img/investor_help_exploring_groups.png","img/investor_help_resources.png","img/investor_help_editing_your_profile.png","img/investor_help_setting_up_business_profile.png","img/investor_help_reset_password.png","img/investor_help_change_password.png","img/investor_help_support_01.png","img/investor_help_support_02.png","img/investor_help_log_out.png","img/issuer_help_my_dashboard.png","img/issuer_help_navigation_bar.png","img/issuer_help_notifications.png","img/issuer_help_create_new_offer_01.png","img/issuer_help_create_new_offer_02.png","img/issuer_help_manage_offer.png","img/issuer_help_edit_offer.png","img/issuer_help_replying_to_comments_in_offer_01.png","img/issuer_help_replying_to_comments_in_offer_02.png","img/issuer_help_exploring_groups.png","img/issuer_help_resources.png","img/issuer_help_edit_profile_01.png","img/issuer_help_edit_profile_02.png","img/issuer_help_setting_business_profile_01.png","img/issuer_help_setting_business_profile_02.png","img/issuer_help_reset_password.png","img/issuer_help_change_password.png","img/issuer_help_support_01.png","img/issuer_help_support_02.png","img/issuer_help_log_out.png","img/front_page_cover_image.png","firebase/firebaseApp.jsx","redux-store/actions/uploadingStatusActions.jsx","shared-components/uploading-dialog/UploadingDialog.jsx","values/colors.jsx","shared-js-css-styles/SharedStyles.jsx","firebase/databaseConsts.jsx","utils/utils.jsx","redux-store/actions/feedbackSnackbarActions.jsx","redux-store/actions/editImageActions.jsx","shared-components/edit-image/EditImageDialog.jsx","redux-store/actions/editVideoActions.jsx","shared-components/edit-video/EditVideoDialog.jsx","shared-components/page-not-found/PageNotFound.jsx","shared-components/page-not-found/PageNotFoundWhole.jsx","models/admin.tsx","models/group_of_membership.tsx","models/user.tsx","router/routes.tsx","api/Api.tsx","redux-store/reducers/authenticationReducer.tsx","firebase/realtimeDBUtils.jsx","redux-store/actions/changePasswordActions.jsx","shared-components/change-password/ChangePasswordPage.jsx","redux-store/actions/manageGroupFromParamsActions.jsx","shared-components/nav-bars/HeaderWithoutDesc.jsx","pages/signin/Signin.jsx","redux-store/actions/authActions.jsx","redux-store/actions/dashboardSidebarActions.jsx","redux-store/actions/forumsActions.jsx","redux-store/actions/authenticationActions.tsx","api/repositories/UserRepository.tsx","redux-store/actions/manageGroupUrlActions.tsx","shared-components/nav-bars/SidebarContent.jsx","shared-components/profile/LetterAvatar.jsx","redux-store/actions/manageJSONCompareChangesDialogActions.jsx","shared-components/activities-components/JSONCompareChangesDialog.jsx","redux-store/actions/activitiesTableActions.jsx","shared-components/activities-components/ActivitiesTable.jsx","redux-store/actions/createBusinessProfileActions.jsx","redux-store/actions/editUserActions.jsx","redux-store/actions/uploadFilesActions.jsx","redux-store/actions/legalDocumentsActions.jsx","api/repositories/GroupRepository.tsx","api/repositories/OfferRepository.tsx","values/defaultThemes.jsx","redux-store/reducers/manageGroupUrlReducer.tsx","shared-components/offers-table/OffersTableActions.tsx","shared-components/explore-offers/ExploreOffersActions.tsx","shared-components/offers-table/OffersTableReducer.tsx","shared-js-css-styles/CustomLink.tsx","models/project.tsx","utils/colorUtils.tsx","shared-components/offers-table/OffersTable.tsx","shared-components/footer/Footer.tsx","shared-components/profile/Profile.jsx","redux-store/actions/notificationsActions.jsx","shared-components/notifications/NotificationsBox.jsx","shared-components/explore-groups/ExploreGroupsActions.tsx","shared-components/explore-offers/ExploreOffersReducer.tsx","models/group_properties.tsx","shared-components/explore-offers/OfferItem.tsx","shared-components/explore-offers/ExploreOffers.tsx","api/repositories/AccessRequestRepository.tsx","api/repositories/EmailRepository.tsx","shared-components/explore-groups/ExploreGroupsReducer.tsx","shared-components/explore-groups/GroupItem.tsx","shared-components/explore-groups/ExploreGroups.tsx","shared-components/feedback-snackbar/FeedbackSnackbarActions.tsx","shared-components/feedback-snackbar/FeedbackSnackbarReducer.tsx","pages/resources/ResourcesActions.tsx","pages/resources/ResourcesReducer.tsx","pages/resources/components/ContactResourceDialog.tsx","shared-components/feedback-snackbar/FeedbackSnackbarNew.tsx","pages/resources/pages/keltie/Keltie.tsx","pages/resources/ResourceItem.tsx","pages/resources/pages/founder-catalyst/FounderCatalyst.tsx","pages/resources/pages/grant-funding/GrantFunding.tsx","pages/resources/pages/merix-studio/merixStudio.tsx","pages/resources/Resources.tsx","utils/browser.ts","pages/dashboard-issuer/IssuerDashboard.jsx","pages/admin/components/manage-sectors/ManageSectorsActions.tsx","pages/dashboard-investor/InvestorDashboard.jsx","utils/emailUtils.jsx","redux-store/actions/invitationDialogActions.jsx","pages/admin/components/InvitationDialog.jsx","redux-store/actions/superAdminSettingsActions.jsx","api/repositories/SystemAttributesRepository.tsx","redux-store/actions/manageSystemAttributesActions.tsx","shared-components/documents-download/DocumentsDownloadActions.tsx","redux-store/reducers/manageSystemAttributesReducer.tsx","pages/admin/components/manage-sectors/ManageSectorsReducer.tsx","pages/admin/components/manage-sectors/ManageSectors.tsx","pages/admin/components/SuperAdminSettings.jsx","redux-store/actions/groupAdminSettingsActions.jsx","pages/admin/components/GroupAdminSettings.jsx","shared-components/info_overlay/InfoOverlay.jsx","redux-store/actions/invitedUsersActions.jsx","pages/admin/components/InvitedUsers.jsx","pages/admin/components/AddAngelNetWorkDialog.jsx","redux-store/actions/addAngelNetworkDialogActions.jsx","redux-store/actions/angelNetworksActions.jsx","pages/admin/components/AngelNetworks.jsx","redux-store/actions/manageJoinRequestsActions.jsx","pages/admin/components/JoinRequests.jsx","redux-store/actions/groupAdminsTableActions.jsx","pages/admin/components/GroupAdminsTable.jsx","pages/admin/AdminDashboard.jsx","shared-components/upload-documents/DocumentsUpload.jsx","shared-components/download-documents/DocumentsDownload.jsx","redux-store/actions/selectProjectVisibilityActions.jsx","shared-components/select-pitch-visibility/SelectPitchVisibility.jsx","pages/create-project/CreateProject.jsx","pages/profile/ProfilePageViewOnly.jsx","shared-components/select-pledge-visibility/SelectPledgeVisibility.jsx","redux-store/actions/createPledgeDialogActions.jsx","shared-components/create-pledge-dialog/CreatePledgeDialog.jsx","redux-store/actions/pledgesTableActions.jsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions.tsx","shared-components/documents-download/DocumentsDownload.tsx","shared-components/risk-warning/RiskWarning.tsx","pages/group-details/GroupDetailsActions.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer.tsx","pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialog.tsx","pages/project-details/ProjectDetails.jsx","pages/system-public-pages/PrivacyPolicyPage.jsx","pages/system-public-pages/TermsOfUsePage.jsx","pages/system-public-pages/RiskWarningPage.jsx","pages/system-public-pages/CreatePitchTermsAndConditionsPage.jsx","pages/system-public-pages/ContactUs.jsx","pages/system-public-pages/HelpPage.jsx","pages/signin/SignInActions.tsx","pages/group-details/GroupDetailsReducer.tsx","pages/group-details/GroupDetails.tsx","pages/system-public-pages/MarketingPreferencesPage.jsx","pages/profile/ProfilePageEditable.jsx","pages/front/Front.tsx","pages/reset-password/ResetPasswordActions.tsx","pages/signin/SignInReducer.tsx","pages/signin/SignInNew.tsx","shared-components/page-not-found/PageNotFoundNew.tsx","router/ErrorBoundary.jsx","shared-components/header/Header.tsx","router/GroupRoute.tsx","pages/signup/SignUpActions.tsx","pages/reset-password/ResetPasswordReducer.tsx","pages/reset-password/ResetPassword.tsx","pages/resources/pages/ResourceDetail.tsx","utils/passwordUtils.tsx","redux-store/actions/mediaQueryActions.tsx","pages/signup/SignUpReducer.tsx","models/invited_user.tsx","pages/signup/SignUpNew.tsx","router/router.tsx","shared-components/feedback-snackbar/FeedbackSnackbar.jsx","redux-store/actions/clubAttributesActions.jsx","redux-store/actions/manageSystemIdleTimeActions.tsx","redux-store/actions/manageSystemGroupsActions.jsx","redux-store/reducers/manageSystemIdleTimeReducer.tsx","App.jsx","serviceWorker.js","shared-components/profile/ProfileActions.tsx","redux-store/reducers/authReducer.jsx","redux-store/reducers/createBusinessProfileReducer.jsx","redux-store/reducers/editUserReducer.jsx","redux-store/reducers/editImageReducer.jsx","redux-store/reducers/editVideoReducer.jsx","redux-store/reducers/uploadFilesReducer.jsx","redux-store/reducers/uploadingStatusReducer.jsx","redux-store/reducers/changePasswordReducer.jsx","redux-store/reducers/clubAttributesReducer.jsx","shared-components/forums/CreateForum.jsx","shared-components/forums/CreateThread.jsx","shared-components/forums/IndividualForum.jsx","shared-components/forums/CreateReply.jsx","shared-components/forums/IndividualThread.jsx","shared-components/forums/Forums.jsx","redux-store/reducers/forumsReducer.jsx","redux-store/reducers/notificationsReducer.jsx","redux-store/reducers/dashboardSidebarReducer.jsx","redux-store/reducers/mediaQueryReducer.tsx","redux-store/reducers/superAdminSettingsReducer.jsx","redux-store/reducers/groupAdminSettingsReducer.jsx","redux-store/reducers/legalDocumentsReducer.jsx","redux-store/reducers/invitedUsersReducer.jsx","redux-store/reducers/invitationDialogReducer.jsx","redux-store/reducers/addAngelNetworkDialogReducer.jsx","redux-store/reducers/manageGroupFromParamsReducer.jsx","redux-store/reducers/angelNetworksReducer.jsx","redux-store/reducers/manageJoinRequestsReducer.jsx","redux-store/reducers/pledgesTableReducer.jsx","redux-store/reducers/feedbackSnackbarReducer.jsx","redux-store/reducers/activitiesTableReducer.jsx","redux-store/reducers/manageJSONCompareChangesDialogReducer.jsx","redux-store/reducers/groupAdminsTableReducer.jsx","redux-store/reducers/createPledgeDialogReducer.jsx","redux-store/reducers/selectProjectVisiblityReducer.jsx","redux-store/reducers/manageSystemGroupsReducer.jsx","redux-store/actions/manageMarketingPreferencesActions.jsx","redux-store/reducers/manageMarketingPreferencesReducer.jsx","redux-store/actions/createProjectActions.jsx","redux-store/reducers/createProjectReducer.jsx","shared-components/documents-download/DocumentsDownloadReducer.tsx","shared-components/profile/components/edit-image-dialog/EditImageDialogActions.tsx","shared-components/profile/components/business-profile/BusinessProfileActions.tsx","shared-components/profile/ProfileReducer.tsx","redux-store/reducers/index.tsx","index.tsx"],"names":["firebaseApp","firebase","initializeApp","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","UPLOADING","DISMISS_UPLOADING_STATUS","UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE","UPLOAD_DONE_MODE","UPLOAD_ERROR","UploadingDialog","this","props","forwardRef","mode","progress","dismiss","Dialog","ref","open","fullWidth","DialogTitle","DialogContent","column","ProgressBar","variant","striped","now","label","Typography","style","marginTop","DialogActions","Button","color","size","disabled","onClick","margin","Component","connect","state","uploadingStatus","dispatch","type","React","forwardedRef","black","white","red_700","dark_green","gray_50","gray_100","gray_200","gray_300","gray_400","gray_600","blue_gray_50","blue_gray_600","blue_gray_700","background_a","background_b","background_c","background_d","background_e","background_f","background_g","background_h","background_i","background_j","background_k","background_l","background_m","background_n","background_o","background_p","background_q","background_r","background_s","background_t","background_u","background_v","background_w","background_x","background_y","background_z","primaryColor","secondaryColor","errorColor","kick_starter_background_color","kick_starter_background_color_1","kick_starter_gray_box_border","sharedStyles","StyleSheet","create","nav_link_hover","appColors","textDecoration","cursor","nav_link_white_text_hover_without_changing_text_color","nav_link_hover_without_changing_text_color","page_title","marginLeft","hamburger_button","tab_title","textTransform","fontSize","kick_starter_border_box","border","boxShadow","no_text_transform","error_text","white_text","black_text","StyledTableCell","classes","makeStyles","root","background","cellColor","textColor","useStyles","TableCell","className","colSpan","component","SlideTransitionUp","Slide","direction","SlideTransitionDown","GROUP_PROPERTIES_CHILD","ADMINISTRATORS_CHILD","CLUB_ATTRIBUTES_CHILD","USERS_CHILD","PROJECTS_CHILD","ACTIVITIES_LOG_CHILD","REQUESTS_TO_JOIN_CHILD","CONTACT_US_ENQUIRIES_CHILD","MARKETING_PREFERENCES_CHILD","INVITED_USERS_CHILD","BUSINESS_PROFILE_CHILD","ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD","COMMENTS_CHILD","COMMENT_REPLIES_CHILD","PLEDGES_CHILD","VOTES_CHILD","PLEDGE_FAQS_CHILD","NOTIFICATIONS_CHILD","FORUMS_CHILD","FORUM_THREADS_CHILD","FORUM_THREAD_REPLIES_CHILD","LEGAL_DOCUMENTS_CHILD","LOGOS_CHILD","INTRO_VIDEOS_CHILD","PROFILE_PICTURES_CHILD","PROJECT_SUPPORTING_DOCUMENTS_CHILD","PROJECT_PRESENTATION_DOCUMENT_CHILD","PROJECT_COVER_CHILD","PROJECT_STATUS_DRAFT","USER_TITLES","FINANCIAL_ROUNDS","MAX_FILE_SIZE_IN_BYTES","MAX_VIDEO_OR_IMAGE_SIZE_IN_MB","MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES","MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS","STORAGE_FILE_NAME_ID_SPLIT","getCurrentDate","Date","getTime","getDateWithDaysFurtherThanToday","days","neededDate","currentDate","setDate","getDate","dateInReadableFormat","milliseconds","toLocaleDateString","dateTimeInReadableFormat","date","toLocaleTimeString","passwordBlacklist","checkPasswordStrength","password","strength","length","match","findIndex","badPassword","toLowerCase","convertQuillDeltaToHTML","ops","QuillDeltaToHtmlConverter","convert","dateDiff","Math","abs","toFixed","getNumberFromInputString","inputString","includes","commaSplits","split","invalidSeparator","forEach","part","index","commaFreeString","replace","isNaN","number","parseFloat","constructStorageFileName","document","newStorageID","originalName","file","name","nameSplits","DB_CONST","isValidLinkedInURL","url","startsWith","getLogoFromGroup","getLogoType","groupProperties","hasOwnProperty","plainLogo","logo","logoWithText","shouldAProjectBeEdited","user","project","status","id","issuerID","Pitch","isValidHexColorCode","hexColorCode","test","isValidWebURL","isProjectLive","isProjectInLivePitchPhase","isProjectInLivePledgePhase","isDraftProject","isProjectWaitingToGoLive","isProjectRejectedToGoLive","isProjectSuccessful","isProjectFailed","isProjectTemporarilyClosed","temporarilyClosed","CLOSE_FEEDBACK_SNACKBAR","closeFeedbackSnackbar","SET_FEEDBACK_SNACKBAR_CONTENT","setFeedbackSnackbarContent","message","position","RESET_STATES_WHEN_SNACKBAR_CLOSED","TOGGLE_EDIT_IMAGE_DIALOG","toggleEditImageDialog","getState","auth","SET_IMAGE_EDITOR_REFERENCE","LOADING_IMAGE_FILE","IMAGE_FILES_LOADED","LOADING_PREVIOUS_IMAGE","FINISHED_LOADING_PREVIOUS_IMAGE","IMAGE_ZOOM_CHANGED","CANCEL_EDITING_CURRENT_IMAGE","EDITED_IMAGE_OBTAINED","getEditedImage","imgEditor","a","Promise","resolve","reject","getCroppingRect","x","getImage","toBlob","blob","CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE","uploadImage","editImageState","imgPreIndex","firebaseStorage","storage","firebaseDB","database","storageID","storageLocation","imgName","BusinessProfile","child","delete","myUtils","profilePicture","storageRef","uploadTask","put","on","snapshot","bytesTransferred","totalBytes","error","getDownloadURL","then","imgDownloadURL","imgUploadedObj","prevNodeImgs","firebaseRef","push","splice","imgItem","removed","set","waitForUploading","catch","EditImageDialog","renderSelectedPreviousPhotoStatus","msg","profilePic","align","isMobile","previousPhotos","imgPreEdited","imgPreEditedLoaded","imgEdited","imgZoom","onClose","setEditorReference","handleImageFilesChanged","handleImageFileError","handleSliderChanged","onPreviousImageItemClick","cancelEditingCurrentImage","viewEditedImagePreview","saveEditedImage","other","maxWidth","fullScreen","padding","Container","fluid","Row","noGutters","Col","xs","sm","md","lg","backgroundColor","colors","paddingTop","paddingBottom","paddingLeft","paddingRight","vAlignContent","grow","hAlignContent","IconButton","Divider","width","marginBottom","css","styles","img_drop_zone","onChange","onError","accepts","maxFileSize","minFileSize","multiple","clickable","marginRight","height","image","borderRadius","disableBoundaryChecks","disableHiDPIScaling","scale","top","zIndex","CircularProgress","Slider","min","max","step","value","Image","src","window","URL","createObjectURL","roundedCircle","thumbnail","objectFit","sort","photo1","photo2","map","previousPhoto","previous_img_item_selected","editImage","editImageDialogOpen","MediaQueryState","editImageActions","editor","files","manageFeedbackSnackbar","trim","Blob","code","feedbackSnackbarActions","event","newValue","zoom","fetch","response","selectedIndex","textAlign","opacity","TOGGLE_EDIT_VIDEO_DIALOG","toggleEditVideoDialog","VIDEO_TYPE_CHOSEN","VIDEO_URL_CHANGED","VIDEO_FILE_CHANGED","CREATE_BUSINESS_PROFILE_SAVE_VIDEO","PREVIOUS_VIDEO_SELECTED","CANCEL_EDITING_CURRENT_VIDEO","uploadVideo","editVideoState","video","videoPreIndex","downloadedPreviousVideo","videoName","videoUploadedObj","dateUploaded","utils","putUploadedVideoToFirebaseRealtime","videoUploadTask","videoDownloadURL","prevNodeVideos","EditVideoDialog","renderSelectedPreviousVideoStatus","allowVideoUpload","videoTypeSelected","previousVideos","videoChosen","chooseVideoType","handleVideoURLChanged","handleVideoFileChanged","handleVideoFileError","cancelEditingCurrentVideo","handlePreviousVideoItemClick","handleSaveVideo","video_drop_zone","TextField","placeholder","playing","controls","video1","video2","previousVideo","playsinline","previous_video_item_selected","manageClubAttributes","clubAttributes","editVideo","editVideoDialogOpen","editVideoActions","videoType","target","PageNotFound","page_not_found_text","explain_text","fontWeight","PageNotFoundWhole","isAdmin","JSON","parse","stringify","getHomeGroup","groups","group","isHomeGroup","UserTitles","HearAbout","isIssuer","isInvestor","Routes","baseGroup","nonGroupFront","groupFront","nonGroupSignIn","groupSignIn","superAdminSignIn","nonGroupSignUp","groupSignUp","nonGroupAdminDashboard","groupAdminDashboard","groupIssuerDashboard","groupInvestorDashboard","nonGroupViewUserProfile","groupViewUserProfile","nonGroupEditUserProfile","groupEditUserProfile","nonGroupCreateOffer","groupCreateOffer","nonGroupViewOffer","groupViewOffer","nonGroupViewPledge","groupViewPledge","nonGroupViewGroup","groupViewGroup","nonGroupViewResourceDetail","groupViewResourceDetail","nonGroupContactUs","groupContactUs","groupHelp","nonGroupTermsOfUse","nonGroupPrivacyPolicy","nonGroupRiskWarning","nonGroupCreatePitchTermsAndConditions","nonGroupMarketingPreferences","nonGroupAuthAction","error404","isProtectedRoute","route","isRouteReservedForSuperAdmin","isGroupAdminRoute","isIssuerDashboardRoute","isInvestorDashboardRoute","isSignInRoute","isSuperAdminSignInRoute","isSignUpRoute","isErrorRoute","isSystemPublicRoute","constructPublicRoute","constructHomeRoute","routeParams","ManageGroupUrlState","AuthenticationState","currentUser","groupUserName","currentAdmin","superAdmin","groupsOfMembership","adminGroup","homeGroup","filter","groupOfMembership","constructSignInRoute","constructSignUpRoute","invitedUserID","constructContactUsRoute","constructDashboardRoute","constructProjectDetailRoute","projectID","constructCreateProjectRoute","params","undefined","edit","admin","issuer","constructGroupDetailRoute","viewedGroupUserName","constructViewResourceDetailRoute","resourceName","GROUP_PATH","FRONT","SIGN_IN","ADMIN","ADMIN_INVEST_WEST_SUPER","DASHBOARD_ISSUER","DASHBOARD_ISSUER_INVEST_WEST_SUPER","DASHBOARD_INVESTOR","DASHBOARD_INVESTOR_INVEST_WEST_SUPER","USER_PROFILE","USER_PROFILE_INVEST_WEST_SUPER","EDIT_USER_PROFILE","EDIT_USER_PROFILE_INVEST_WEST_SUPER","PLEDGE","PLEDGE_INVEST_WEST_SUPER","CREATE_OFFER","EDIT_OFFER","CREATE_OFFER_INVEST_WEST_SUPER","EDIT_OFFER_INVEST_WEST_SUPER","PROJECT_DETAILS","PROJECT_DETAILS_INVEST_WEST_SUPER","VIEW_GROUP_DETAILS","VIEW_GROUP_DETAILS_INVEST_WEST_SUPER","CONTACT_US","CONTACT_US_INVEST_WEST_SUPER","HELP","HELP_INVEST_WEST_SUPER","TERMS_OF_USE","PRIVACY_POLICY","CREATE_PITCH_TERMS_AND_CONDITIONS","ApiRoutes","retrieveSystemAttributesRoute","systemAttributesBaseRoute","updateSystemAttributesRoute","requestResetPasswordRoute","authBaseRoute","verifyAuthRoute","sendEmailRoute","emailBaseRoute","createUser","usersBaseRoute","retrieveUser","retrieveInvitedUser","updateUser","listGroupsOfMembership","exportUsersCsvRoute","listGroups","groupsBaseRoute","retrieveGroup","addMembersToGroup","listGroupMembers","listProjectsRoute","projectsBaseRoute","sendProjectBackToIssuerRoute","exportProjectsToCsvRoute","addGroupAdminRoute","groupAdminsBaseRoute","listAccessRequestsRoute","accessRequestsBaseRoute","removeAccessRequestRoute","createAccessRequestRoute","uploadSingleFileRoute","fileBaseRoute","testRoute","AuthenticationStatus","Api","baseUrl","endPoint","queryParameters","fullUrl","buildQueryParameters","encodeURI","requestType","optionalParams","formDataRequest","Error","buildUrl","idToken","getIdToken","bodyData","requestBody","buildFormData","config","method","data","timeout","headers","_boundary","axios","request","parseResponse","parseError","console","log","statusCode","isRequestSuccessful","result","key","endsWith","toString","formData","FormData","append","httpError","detail","trackActivity","userID","activityType","interactedObjectLocation","interactedObjectID","activitySummary","action","time","FETCH_ACTIVITIES_BY_USER","fetchActivitiesBy","shouldLoadUserProfile","fetchBy","activitiesRef","orderByChild","equalTo","activities","once","snapshots","exists","val","numChildren","all","activity","getUserBasedOnID","userProfile","ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT","sendNotification","title","db","loadGroupAdminsBasedOnGroupID","groupID","groupAdmins","doesUserExist","email","userExists","userIsAnAdmin","loadGroupsUserIsIn","groupsUserIsIn","invitedUser","anid","invitedBy","userInGroupStatus","groupUserIsIn","angelNetwork","isInvestWest","groupDetails","loadAngelNetworkBasedOnANID","loadAngelNetworkBasedOnGroupUserName","loadAngelNetworks","angelNetworks","startAt","displayNameLower","loadAngelNetworksInvitedAUser","angelNetworksInvitedUser","Invitor","Invitee","angelNetworkInvitedUser","displayName","getUser","uid","warn","createForum","forumObj","forumID","LOAD_LIVE_FORUMS","LOAD_DELETED_FORUMS","loadForums","forums","forum","deleted","author","editForum","editedForum","update","deleteForum","createThread","threadObj","threadID","editThread","editedThread","deleteThread","LOAD_LIVE_THREADS","loadThreads","forumSelected","threads","thread","createThreadReply","replyObj","replyID","editThreadReply","editedThreadReply","deleteThreadReply","threadReplyID","loadThreadReplies","threadSelected","replies","reply","loadClubAttributes","loadInvitedUsers","invitedUsers","officialUserID","officialUser","loadRequestsToJoin","requestsRef","requests","groupToJoin","getInvitedUserBasedOnIDOrEmail","idOrEmail","loadAParticularProject","loadPledges","LOAD_PLEDGES_ORDER_BY_PROJECT","pledges","toggleProjectLivelinessTemporarily","shouldSendNotificationForIssuer","projectBeforeUpdating","projectName","ROUTES","before","after","loadVotes","LOAD_VOTES_ORDER_BY_PROJECT","votes","listOfInvestorsToBeNotified","vote","investorID","pledge","notifications","notification","makeProjectGoLiveDecision","decisionObj","projectBeforeDecision","decision","visibility","projectVisibilitySetting","emailType","emailInfo","makeProjectGoToPledgePhaseDecision","makeProjectPledgeGoLiveDecision","PrimaryOffer","loadComments","comments","comment","commentedBy","pledgesRef","amount","investor","votesRef","voted","loadNotifications","deleteAllNotifications","remove","loadMarketingPreferences","marketingPreferencesRef","marketingPreferences","marketingPreference","updateMarketingPreferencesSetting","field","accepted","settings","updateGroupPropertiesSetting","bringPitchBackToLive","newPitchExpiryDate","expiredDate","CHANGE_PASSWORD_TEXT_CHANGED","RESET_CHANGE_PASSWORD","RE_AUTHENTICATING_USER","ERROR_CHANGING_PASSWORD","changePassword","passwords","newPassword","newPasswordVerified","PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED","PASSWORD_CHANGE_NOT_STRONG_ENOUGH","signInWithEmailAndPassword","currentPassword","credential","updatePassword","PASSWORD_CHANGE_SUCCESS","PASSWORD_CHANGE_FAIL","PASSWORD_CHANGE_RE_AUTH_FAILED","ChangePasswordPage","passwordChangeResponseCode","handleTextChanged","reset","requestChangePassword","responseCode","onCloseMessage","PasswordUpdate","renderMessage","changing_password_text_background","changePasswordActions","realtimeDBUtils","errorCode","SET_GROUP_USER_NAME_FROM_PARAMS","setGroupUserNameFromParams","manageGroupFromParams","SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING","setExpectedAndCurrentPathsForChecking","expectedPath","currentPath","LOADING_ANGEL_NETWORK","ANGEL_NETWORK_LOADED","loadAngelNetwork","groupPropertiesLoaded","angelNetworkBeingLoaded","firebaseUser","shouldLoadOtherData","angelNetworkListener","ANGEL_NETWORK_PROPERTIES_CHANGED","HeaderWithoutDesc","authStatus","span","order","AUTH_SUCCESS","to","navigation_text","widht","logo_field","alt","require","default","href","manageGroupFromParamsActions","Signin","setState","resetPassword","handleSignin","preventDefault","resetEmailSent","signin","openResetPasswordDialog","resetPasswordDialogOpen","handleCloseResetPasswordDialog","resetEmail","resetChecking","resetError","handleSendResetEmail","sendPasswordResetEmail","handleClickShowPassword","showPassword","renderAuthStatus","authenticating","reset_email_sent","errorMsg","auth_error","firebaseAuth","resetAuthStatus","path","prevProps","prevState","history","pathname","search","overflow","offset","Paper","elevation","square","onSubmit","paragraph","FormControl","InputProps","endAdornment","InputAdornment","edge","aria-label","onTextChanged","onSendEmailClick","ResetPasswordDialog","userLoaded","authActions","handleClose","renderReset","reset_email_error_text","reset_password_actions_layout","no_margin","hover","INITIALIZE_AUTH_STATE","RESET_AUTH_STATUS","SIGNING_IN","AUTHENTICATING","FINISHED_AUTHENTICATING","logOutWithIndirectDispatch","TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP","USER_PROFILE_LOADED","AUTH_LOADING_GROUPS_USER_IS_IN","AUTH_GROUPS_USER_IS_IN_LOADED","signOut","LOG_OUT","logout","userListener","groupsUserIsInListener","CURRENT_USER_PROFILE_HAS_CHANGED","GROUPS_USER_IS_IN_HAVE_CHANGED","TOGGLE_SIDEBAR","toggleSidebar","checkSidebarDocked","isLaptop","isDesktop","sidebarDocked","dashboardSidebar","sidebarOpen","LOADING_FORUMS","FINISHED_LOADING_FORUMS","ERROR_LOADING_FORUMS","GO_BACK_TO_FORUMS_MAIN","TOGGLE_CREATE_NEW_FORUM","toggleCreateNewForum","forumEdited","ERROR_CREATING_NEW_FORUM","FORUMS_INPUT_CHANGED","handleForumsInputChanged","targetName","targetValue","manageForums","LOADING_THREADS_IN_A_FORUM","FINISHED_LOADING_THREADS_IN_A_FORUM","GO_BACK_TO_FORUMS_LIST","TOGGLE_CREATE_NEW_THREAD","toggleCreateNewThread","threadEdited","ERROR_CREATING_NEW_THREAD","LOADING_REPLIES_IN_A_THREAD","FINISHED_LOADING_REPLIES_IN_A_THREAD","GO_BACK_TO_THREADS_LIST","TOGGLE_THREAD_REPLY","toggleThreadReply","threadReplyEdited","ERROR_CREATING_THREAD_REPLY","MANAGE_FORUMS_TABLE_PAGE_CHANGED","changePage","table","newPage","MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED","changeRowsPerPage","parseInt","FORUMS_QUILL_CHANGED","THREAD_CONTENT_QUILL","THREAD_REPLY_CONTENT_QUILL","handleQuillChanged","getText","quill","getContents","forumsListener","forumThreadsListener","forumThreadRepliesListener","FORUMS_CHANGED","stopListeningForForumsChanged","off","THREADS_CHANGED","stopListeningForThreadsChanged","THREAD_REPLIES_CHANGED","stopListeningForThreadRepliesChanged","AuthenticationEvents","initialState","NotInitialized","authIsNotInitialized","isAuthenticating","Authenticating","successfullyAuthenticated","Authenticated","hasAuthenticationError","authenticationReducer","StartAuthenticating","CompleteAuthentication","completeAuthenticationAction","SignOut","Unauthenticated","UpdateUserChanges","updateUserChangesAction","updatedUser","UserRepository","ManageGroupUrlEvents","signIn","authenticationCompleteAction","currentFirebaseUser","setPersistence","Firebase","Auth","Persistence","LOCAL","retrieveUserResponse","validSuperAdminSignIn","routePath","listGroupsOfMembershipResponse","HOME_TAB","PROFILE_TAB","MY_OFFERS_TAB","SETTINGS_TAB","CHANGE_PASSWORD_TAB","RESOURCES_TAB","EXPLORE_GROUPS_TAB","EXPLORE_OFFERS_TAB","MY_ACTIVITIES_TAB","GROUP_ACTIVITIES_TAB","SidebarContent","onLogoutClick","dashboardProps","signOutNew","onForumsTabClick","goBackToForumsMain","Link","website","List","ListItem","button","ListItemIcon","ListItemText","dashboardSidebarActions","LetterAvatar","getBackgroundColor","firstName","lastName","textVariant","Avatar","toUpperCase","JSON_COMPARE_CHANGES_DIALOG_SET_DATA","JSON_COMPARE_CHANGES_DIALOG_RESET_DATA","JSONCompareChangesDialog","dialogOpen","jsonBefore","jsonAfter","resetData","theme","collapseStringsAfterLength","enableClipboard","copy","navigator","clipboard","writeText","manageJSONCompareChangesDialog","ACTIVITIES_TABLE_SET_TABLE_USER","setTableUser","newUser","prevTableUser","manageActivitiesTable","tableUser","ACTIVITIES_TABLE_LOADING_ACTIVITIES","ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES","ACTIVITIES_TABLE_PAGE_CHANGED","ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED","activitiesListener","ACTIVITIES_IN_TABLE_CHANGED","stopListeningForActivitiesChanged","ActivitiesTable","loadData","loadingActivities","activitiesLoaded","loadActivities","addListener","startListeningForActivitiesChanged","renderTableRows","page","rowsPerPage","jsonCompareDialog_setData","TableRow","slice","activity1","activity2","overflowX","Table","TableHead","TableBody","TableFooter","TablePagination","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","SelectProps","native","onChangePage","onChangeRowsPerPage","allActivities","groupAdmin","activitiesTableActions","existingActivity","adminIndex","manageJSONCompareChangesActions","ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED","TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY","TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY","CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION","TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR","putBusinessProfileToFirebaseDB","businessProfile","SET_ORIGINAL_USER_AND_EDITED_USER","setOriginalUserAndEditedUser","previouslySetUser","editUser","originalUser","allowEditing","userHomeGroup","requestedToJoin","EDIT_PERSONAL_INFORMATION","EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION","RESET_PERSONAL_INFORMATION","RESET_BUSINESS_PROFILE","COMMIT_PERSONAL_INFORMATION_CHANGES","COMMIT_BUSINESS_PROFILE_CHANGES","originalUserListener","EDIT_USER_ORIGINAL_USER_CHANGED","stopOriginalUserChangedListener","FILE_UPLOAD_CHANGED","FILE_UPLOAD_ERROR","CLOSE_FILE_UPLOAD_ERROR_SNACKBAR","RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED","DELETE_UPLOADED_LEGAL_DOCUMENT","DELETE_UPLOADED_PITCH_COVER","DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","DELETE_TO_BE_UPLOADED_FILE","DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_COVER","DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT","DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_A_LEGAL_DOCUMENT","FINISHED_UPLOADING_A_PITCH_COVER","FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT","FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT","FINISHED_UPLOADING_ALL_FILES","uploadIndividualFile","totalFiles","fileRef","storageFileName","extension","fileDownloadURL","percentDone","legalDocument","fileName","readableSize","sizeReadable","downloadURL","fileDBRef","formattedCover","fileType","fileExtension","formattedPresentationDocument","formattedSupportingDocument","putFilesReferencesToDatabase","legalDocumentsUserID","legalDocuments","existingLegalDocuments","filesDBReferences","uploadFiles","filesReferencesToBeUploaded","LEGAL_DOCUMENTS_SET_USER","LOADING_LEGAL_DOCUMENTS","FINISHED_LOADING_LEGAL_DOCUMENTS","legalDocumentsListener","LEGAL_DOCUMENTS_CHANGED","GroupRepository","FetchProjectsOrderByOptions","FetchProjectsPhaseOptions","defaultTheme","responsiveFontSizes","createMuiTheme","palette","primary","main","secondary","text","typography","fontFamily","groupNameFromUrl","groupLoaded","loadingGroup","groupRouteTheme","validGroupUrl","isValidatingGroupUrl","routeContainsGroupName","successfullyValidatedGroupUrl","getGroupRouteTheme","manageGroupUrlReducer","SetGroupUrl","setGroupUrlAction","ValidatingGroupUrl","FinishedValidatingGroupUrl","finishedValidatingGroupUrlAction","blueGrey","OffersTableEvents","OfferRepository","options","fetchOptions","orderBy","Phase","link","createElement","download","setAttribute","body","appendChild","click","removeChild","ExploreOffersEvents","fetchOffers","OffersTableLocalState","tableUserGroupsOfMembership","visibilityFilter","groupFilter","phaseFilter","fetchOffersOptions","phase","completeAction","CompleteFetchingOffers","offerInstances","shouldFetchOffers","Issuer","Investor","Group","FetchingOffers","filterOffersByName","nameFilter","FilterOffersByName","isFilteringByName","offerInstance","projectDetail","offerInstancesFilteredByName","fetchingOffers","offersFetched","filteringOffersByName","currentPage","exportingCsv","isFetchingOffers","successfullyFetchedOffers","hasOffersForCurrentFilters","isFilteringOffersByName","hasErrorFetchingOffers","hasErrorExportingCsv","errorExportingCsv","hasGroupsSelect","groupsSelect","offersTableReducer","SetTableUser","setTableUserAction","completeFetchingOffersAction","FilterChanged","filterChangedAction","filterOffersByNameAction","CancelFilteringOffersByName","ChangePage","changePageAction","ChangeRowsPerPage","changeRowsPerPageAction","ExportingCsv","CompleteExportingCsv","completeExportingCsvAction","CustomLink","link_style","childComponent","activeColor","activeUnderline","isDraftProjectNotSubmitted","isProjectPitchExpiredWaitingForAdminToCheck","isProjectWaitingForPledgeToBeCreated","isProjectWaitingForPledgeToBeChecked","isProjectCreatedByGroupAdmin","createdByGroupAdmin","isImagePitchCover","pitchCover","isProjectPublic","isProjectRestricted","isProjectPrivate","shouldHideProjectInformationFromUser","isProjectOwner","toRGBWithOpacity","rgbColor","colorString","get","rgb","hex","OffersTable","directTableUser","setUser","filterChanged","cancelFilteringOffersByName","exportCsv","tableAdmin","TableContainer","Box","ImportExportOutlined","CreateOutlined","display","alignItems","bgcolor","grey","InputBase","startAdornment","Search","justifyContent","Refresh","paddingY","Select","input","OutlinedInput","MenuItem","LivePitch","TemporarilyClosed","ExpiredPitch","flexDirection","fundRequired","Number","toLocaleString","postedDate","ManageSystemAttributesState","currentTableUser","shouldSetTableUser","groupsOfMembershipResponse","isTableAdminUser","fetchGroups","allGroupsResponse","Footer","paddingX","borderTop","borderColor","minHeightScreen","bottom","marginY","Profile","legalDocuments_userID","userLegalDocumentsLoaded","userLegalDocumentsBeingLoaded","legalDocuments_setUserID","getUserLegalDocuments","handleEditUser","editUserLocally","property","handleCreateBusinessProfileTextChanged","fieldType","handleFilesChanged","deleteToBeUploadedFile","deleteUploadedFile","renderBusinessProfile","userEdited","createBusinessProfile","resetCreatingBusinessProfile","addNewDirector","newDirectorText","searchAddress","toggleEnterAddressManually","toggleExpandBusinessProfileFillingForInvestor","uploadBusinessProfile","logoItem","maxHeight","videoItem","FormLabel","companyName","editUserActions","sector","Sectors","companyWebsite","cancelEditingUser","commitUserProfileChanges","expandBusinessProfileFilling","required","createBusinessProfileActions","upload_files_area_style","logoToBeUploaded","OverlayTrigger","trigger","placement","flip","overlay","Tooltip","videoToBeUploaded","shouldUploadButtonBeDisabled","directors","startListeningForLegalDocumentsChanged","stopListeningForLegalDocumentsChanged","linkedin","FormHelperText","userLegalDocuments","legalDocumentsLoaded","legalDocumentsBeingLoaded","toBeUploadedLegalDocuments","filesToBeUploaded","fileUploadErrorMessage","fileUploadErrorSnackbarOpen","fieldName","fieldValue","Object","assign","toggleAddNewDirector","addNewDirectorTemporarily","isEditingExistingBusinessProfile","director","deleteDirectorTemporarily","userRef","legalDocumentsActions","updatedLegalDocuments","doc","reader","FileReader","addEventListener","fileRead","preview","LegalDocuments","readAsDataURL","uploadFilesActions","handleFileError","errorMessage","charAt","closeFileUploadSnackbarError","resetErrorMessageWhenFileUploadSnackbarExited","updatedFilesToBeUploaded","pitchPresentationDocument","pitchSupportingDocuments","updateLegalDocuments","waitingForUploadingReferences","address_list","enter_address_manually","TOGGLE_NOTIFICATIONS","toggleNotifications","notificationsAnchorEl","manageNotifications","notificationBellRef","NOTIFICATIONBELL_REF","notificationRefUpdated","LOADING_NOTIFICATIONS","FINISHED_LOADING_NOTIFICATIONS","notificationsListener","NOTIFICATIONS_LIST_CHANGED","NotificationsBox","wrapperRef","createRef","handleClickOutside","bind","loadingNotifications","notificationsLoaded","startListeningForNotificationsChanged","stopListeningForNotificationsChanged","removeEventListener","current","contains","deleteANotification","Popper","Boolean","anchorEl","disablePortal","transition","modifiers","enabled","preventOverflow","boundariesElement","TransitionProps","Fade","clear_all_text","minHeight","overflowY","notifications_placeholder_icon","notification1","notification2","divider","notification_item","notification_item_icon","notificationsActions","existingNotification","notificationIndex","ExploreGroupsEvents","ExploreOffersLocalState","searchFilter","sectorFilter","maxOffersPerPage","Live","isSearchFilterActive","exploreOffersReducer","ClearSearchFilter","PaginationChanged","paginationChangedAction","getGroupLogo","CoverMaxHeight","OfferItem","cover","getPitchCover","light","right","noWrap","description","ExploreOffers","clearSearchFilter","paginationChanged","onSearchEnter","paginationPages","paginationIndices","startIndex","endIndex","calculatePaginationIndices","systemAttributes","Pagination","Visibility","Sector","AccessRequestRepository","requestID","ClientEmailTypes","ExploreGroupsLocalState","accessRequestsInstances","FetchingGroups","CompleteFetchingGroups","groupsResponse","fetchAccessRequests","accessRequestInstancesResponse","accessRequestInstances","filterGroupsByGroupFilter","groupsFiltered","satisfiedFilter","accessRequestInstance","FilterGroupsByGroupFilter","maxGroupsPerPage","fetchingGroups","groupsFetched","filteringGroupsByName","isFetchingGroups","successfullyFetchedGroups","isFilteringGroupsByName","hasGroupsForCurrentFilters","isSendingAccessRequest","sendingAccessRequestToGroup","isRemovingAccessRequest","removingAccessRequestFromGroup","exploreGroupsReducer","completeFetchingGroupsAction","FilterGroupsByName","CancelFilterGroupsByName","filterGroupsByGroupFilterAction","SendingAccessRequest","sendingAccessRequestAction","errorSendingAccessRequest","CompleteSendingAccessRequest","completeSendingAccessRequestAction","updatedAccessRequestInstances","RemovingAccessRequest","removingAccessRequestAction","errorRemovingAccessRequest","CompleteRemovingAccessRequest","completeRemovingAccessRequestAction","GroupItem","sendAccessRequest","removeAccessRequest","groupMember","find","hasRequestedToAccessGroup","Card","CardActionArea","CheckCircle","CardActions","sendingAction","createAccessRequest","currentAccessRequestInstances","removingAction","accessRequestIndex","accessRequest","ExploreGroups","filterGroupsByName","cancelFilteringGroupsByName","xl","FeedbackSnackbarEvents","EmailRepository","FeedbackSnackbarTypes","openFeedbackSnackbar","Open","snackbarType","ResourcesEvents","Success","feedbackSnackbarReducerNew","openFeedbackSnackbarAction","Close","toggleContactResourceDialog","DetailedPageToggleContactDialog","detailedPageContactDialogOpen","detailedPageSendingContactEmail","isDetailedPageSendingContactEmail","resourcesReducer","DetailedPageSendingContactEmail","detailedPageErrorSendingContactEmail","DetailedPageCompleteSendingContactEmail","detailedPageCompleteSendingContactEmailAction","ContactResourceDialog","resourceEmail","ResourcesLocalState","toggle","sendContactEmail","receiver","sender","userName","userCompanyName","sendEmail","ContactResource","FeedbackSnackbarNew","FeedbackSnackbarLocalState","close","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","TransitionComponent","transitionDuration","enter","exit","Alert","severity","keltieLogo","sullivanFountainImg","richardLawrenceImg","keltieDocuments","keltieVideos","Keltie","rel","AttachFile","clone","ResourceItem","resource","founderCatalystLogo","justynWaterworthImg","samSimpsonImg","charlesFrankImg","founderCatalystResources","FounderCatalyst","grantFundingLogo","grantFundingResources","img","GrantFunding","MerixSolution","MerixSolution3","MerixStudioResources","MerixStudio","resources","Resources","fallbackStore","Map","safeGetItem","sKey","localStorage","getItem","has","safeRemoveItem","removeItem","ManageSectorsEvents","IssuerDashboard","setDataForComponents","editUserProfile_userEdited","editUserProfile_setOriginalUserAndEditedUser","renderPageContent","queryString","location","tab","renderPageTitle","notificationBell","redirectTo","sidebar","shadow","docked","onSetOpen","transitions","content","Badge","badgeContent","invisible","InvestorDashboard","clubAttributesLoaded","isValidEmailAddress","serverURL","requestConfig","post","TOGGLE_INVITATION_DIALOG","toggleInvitationDialog","INVITATION_DIALOG_INPUT_CHANGED","INVITATION_DIALOG_SEND_BUTTON_CLICKED","INVITATION_DIALOG_SEND_RESULT_CHANGED","SEND_INVITATION_PROCESSING","SEND_INVITATION_INVITED_BEFORE","SEND_INVITATION_USER_CANNOT_BE_INVITED","SEND_INVITATION_ERROR_HAPPENED","SEND_INVITATION_SUCCESS","InvitationDialog","renderRespondCode","sendResult","sendStatusExtraInfo","res","invitationDialogOpen","userType","sendButtonClick","handleInputChanged","sendInvitation","disableTypography","RadioGroup","row","FormControlLabel","control","Radio","manageInvitationDialog","invitationDialogActions","currentGroupAdmin","invitedBefore","userIsAnIssuerOfAnotherGroup","extraInfo","invitedID","invitedDate","emailUtils","groupName","groupLogo","groupWebsite","websiteURL","receiverName","signupURL","SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED","SUPER_ADMIN_SETTINGS_INPUT_CHANGED","SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED","SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","SystemAttributesRepository","ManageSystemAttributesEvents","setSectors","sectors","SetSectors","toggleAddNewSector","ToggleAddNewSector","DocumentsDownloadEvents","systemAttributesLoaded","loadingSystemAttributes","isLoadingSystemAttributes","manageSystemAttributesReducer","LoadingSystemAttributes","FinishedLoadingSystemAttributes","finishedAction","addingNewSector","newSector","savingSectors","isSavingSectorsChanges","manageSectorsReducer","setSectorsAction","AddNewSectorTextChanged","addNewSectorTextChangedAction","SavingSectorsChanges","errorSavingSectors","CompletedSavingSectorsChanges","completedSavingSectorsChanges","ManageSectors","ManageSectorsLocalState","addNewSector","deleteSector","saveSectorsChanges","cancelSectorsChanges","eSector","updateSystemAttributes","SuperAdminSettings","handleExpandPledgeFAQPanel","FAQ","isExpanded","handleQuillEditorChanged","delta","source","initializeClubAttributesEdited","clubAttributesEdited","addNewPledgeFAQ","addedPledgeQuestion","addedPledgeAnswer","expandedPledgeFAQ","editExpandedPledgeFAQ","editedPledgeQuestion","editedPledgeAnswer","toggleAddNewPledgeFAQ","submitNewPledgeFAQ","toggleEditExpandedPledgeFAQ","saveEditedPledgeFAQ","deleteExistingPledgeFAQ","saveEditedQuill","Checkbox","checked","labelPlacement","supportEmail","multiline","rowsMax","ExpansionPanel","frequently_asked_question_box","expanded","ExpansionPanelSummary","expandIcon","question","ExpansionPanelDetails","answer","modules","privacyPolicy","termsOfUse","riskWarningFooter","rows","riskWarning","createPitchTermsAndConditions","superAdminSettings","isPropertyOfClubAttributes","superAdminSettingsActions","faq","editedFAQ","toolbar","GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED","GROUP_ADMIN_SETTINGS_CHANGED","GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED","GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS","GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR","GroupAdminSettings","initializeGroupAttributesEdited","groupAttributesEdited","groupDescription","handlePitchExpiryDateChanged","handleSavePitchExpiryDate","handleCancelEditingPitchExpiryDate","saveGroupDetails","cancelEditingGroupDetails","saveColor","cancelEditingColor","helperText","autoOk","inputVariant","format","minDate","defaultPitchExpiryDate","InputAdornmentProps","projectVisibility","groupAdminSettings","isPropertyOfGroupAttributes","updateValue","shouldUpdateDatabase","groupAdminSettingsActions","NaN","groupSettings","InfoOverlay","LOADING_INVITED_USERS","FINISHED_LOADING_INVITED_USERS","INVITED_USERS_TOGGLE_SEARCH_MODE","INVITED_USERS_SEARCH_VARIABLE_CHANGED","getUpdatedInvitedUsers","sourceInvitedUsers","searchText","filterRegistrationStatus","filterUserType","filterMembers","filterGroup","currentGroupProperties","matchedInvitedUsers","satisfiedRegistrationStatusFilter","satisfiedUserTypeFilter","satisfiedGroupMembersFilter","satisfiedGroupFilter","FILTER_REGISTRATION_STATUS_ALL","FILTER_GROUP_MEMBERS_ALL","FILTER_HOME_MEMBERS","FILTER_PLATFORM_MEMBERS","INVITED_USERS_CHANGE_PAGE","INVITED_USERS_CHANGE_ROWS_PER_PAGE","INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED","INVITED_USERS_REQUESTING_CSV_STATE_CHANGED","invitedUsersListener","INVITED_USERS_CHANGED","InvitedUsers","invitedUsersLoaded","startListeningForInvitedUsersChanged","renderInvitedUsersRows","invitedUsersPage","invitedUsersRowsPerPage","invitedUsersInSearchMode","resendInvite","renderedInvitedUsers","matchedUsersInvitedByTheGroup","user1","user2","matchedUsersRequestedToJoin","requestedToJoinDate","renderInvitedUserRegistrationStatus","joinedDate","msgObj","invitedUsersBeingLoaded","invitedUserSearchText","systemGroups","groupsLoaded","requestingCsv","addingMembersFromOneGroupToAnotherGroup","toggleSearchMode","exportToCsv","addMembersFromOneGroupToAnotherGroup","InputLabel","labelWidth","basis","renderInvitedUsersTable","handleChangeTablePage","handleChangeTableRowsPerPage","manageSystemGroups","prevMatchedInvitedUsers","newSearchText","newRegistrationStatusFilter","newUserTypeFilter","newGroupFilter","newMembersFilter","invitedUsersActions","shouldAddInvitedUser","existingInvitedUser","shouldChangeInvitedUser","invitedUserIndex","fromGroup","toGroup","addUserType","AddAngelNetworkDialog","uploadMode","uploadProgress","addAngelNetworkDialogOpen","angelNetworkName","angelNetworkUsername","loadingPlainLogo","imgUploadError","loadingLogoWithText","imgUploadErrorSnackbarOpen","addButtonClicked","toggleAddAngelNetworkDialog","addNewAngelNetwork","closeErrorSnackbar","resetImageFileErrorMessageWhenSnackbarExited","onExited","SnackbarContent","manageAddAngelNetworkDialog","addResult","addAngelNetworkDialogActions","TOGGLE_ADD_ANGEL_NETWORK_DIALOG","ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED","handleAddAngelNetworkInputChanged","ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED","ADD_ANGEL_NETWORK_RESULT_CHANGED","uploadLogo","uploadedPlainLogo","uploadedLogoWithText","newGroupProperties","dateAdded","makeInvestorsContactDetailsVisibleToIssuers","adder","newGroupAdminEmail","ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE","ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED","ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR","ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR","closeImageFileErrorSnackbar","ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED","LOADING_ANGEL_NETWORKS","FINISHED_LOADING_ANGEL_NETWORKS","ANGEL_NETWORKS_TABLE_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED","ANGEL_NETWORKS_TABLE_INPUT_CHANGED","TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE","angelNetworksListener","ANGEL_NETWORKS_IN_TABLE_CHANGED","AngelNetworks","inComponentDidMount","loadingAngelNetworks","angelNetworksLoaded","startListeningForAngelNetworksChanged","renderAngelNetworksTable","inSearchMode","handleAngelNetworksTableInputChanged","angelNetwork1","angelNetwork2","renderAngelNetworkRows","matchedAngelNetworks","renderedAngelNetworks","stopListeningForAngelNetworksChanged","manageAngelNetworks","angelNetworksActions","existingAN","angelNetworkIndex","MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS","MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE","MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED","joinRequestsListener","MANAGE_JOIN_REQUESTS_CHANGED","stopListeningForJoinRequestsChanged","JoinRequests","loadingJoinRequests","joinRequestsLoaded","loadJoinRequests","attachListener","joinRequests","startListeningForJoinRequestsChanged","renderJoinRequestsRows","matchedJoinRequests","acceptJoinRequest","rejectJoinRequest","renderedJoinRequests","joinRequest","requestedDate","handleJoinRequestsTableInputChanged","joinRequest1","joinRequest2","manageJoinRequests","manageJoinRequestsActions","pushKey","existingJoinRequest","GROUP_ADMINS_TABLE_SET_GROUP","GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS","GROUP_ADMINS_TABLE_PAGE_CHANGED","GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE","GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED","GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG","GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED","groupAdminsListener","GROUP_ADMINS_TABLE_CHANGED","stopListeningForGroupAdminsChanged","ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL","ADD_NEW_GROUP_ADMIN_STATUS_CHECKING","ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED","GroupAdminsTable","tableGroup","loadingGroupAdmins","groupAdminsLoaded","loadGroupAdmins","addListeners","startListeningForGroupAdminsChanged","getRenderedGroupAdmins","superGroupAdmin","searchedGroupAdmins","groupAdmin1","groupAdmin2","addNewGroupAdminDialogOpen","addNewGroupAdminStatus","handleAddNewGroupAdmin","toggleAddNewGroupAdminDialog","fli","manageGroupAdminsTable","groupAdminsTableActions","existingGroupAdmin","newGroupAdmin","AddGroupAdminDialog","renderStatusMessage","tex","AdminDashboard","activitiesTable_setUser","groupAdminsTable_setGroup","projectsAwaitingDecision","Accordion","card_style","AccordionSummary","AccordionDetails","card_details_expansion","currentUserLoaded","onMouseDown","e","AddAngelNetWorkDialog","newGroup","prevTableGroup","onDeleteDocument","documents","preview_icon","file_name","file_size","DocumentsDownload","onDocumentClick","deleteEnable","SELECT_PROJECT_VISIBILITY_SET_PROJECT","setProject","HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED","handleProjectVisibilityChanged","SelectPitchVisibility","manageSelectProjectVisibility","selectProjectVisibilityActions","initState","recoveredFromPreviousState","projectBeforeEdited","projectEdited","projectEditedLoaded","requestToLoadData","projectIDToBeLoadedAfterSavingFirstTime","saveProgress","progressBeingSaved","draftBeingDeleted","createProject","activeStep","groupIssuerCreateOfferFor","pitchSector","pitchProjectName","pitchProjectDescription","pitchExpiryDate","financialRound","detailsAboutEarlierFundraisingRounds","pitchInvestorsCommitted","pitchCoverVideoURL","pitchCoverTypeSelected","pitchPresentationText","pitchPresentationPlainText","pitchPublishCheck","pitchNextStepButtonTarget","pitchPublishErrorMessageShowed","uploadFileProgress","uploadFileMode","openUploadingProgressDialog","acceptedTermsAndConditions","agreedToShareRaisePublicly","agreedToReceiveLocalInvestmentInfo","qibSpecialNews","CreatePitchPageMain","navigateToTheSamePageWithActiveStepSaved","selectProjectVisibility_setProject","projectEditedSaveModeRefListener","orderByKey","investorsCommitted","presentationText","loadError","handleNextStepClick","coverItem","presentationDocument","uploadProject","handleSaveProgressClick","handleBackClick","handleSelectPitchCoverTypeClick","supportingDocuments","handleCreatePitchInputChanged","handlePitchEditorChanged","presentationItem","projectRef","projectStorageRef","uploadMultipleFiles","successful","updatedProject","edited","pitchSupportingDocumentsRealtimeDB","presentationPlainText","pitchPresentationDocumentRealtimeDB","pitchCoverRealtimeDB","acceptedTCsObj","projectObj","filesArray","pitchStorageRef","docRef","handleDeleteDocument","attachNextStepButtonRef","handlePopoverErrorMessageClose","handleDownloadDocumentDeleteClick","updatedProjectEdited","handleCloseErrorSnackbar","reason","errorSnackbarOpen","handleDateChanged","handleCheckboxChanged","handleDeleteDraftClick","deleteMultiplesOnStorage","selectedProjectVisibilitySetting","reload","deleteASingleFileOnStorage","isAuthenticated","previousState","createProjectState","onSelectPitchCoverTypeClick","onFilesChanged","onFilesError","onInputChanged","onPitchEditorChanged","onPopoverErrorMessageClose","onNextStepClick","onBackClick","onDownloadDocumentDeleteClick","onDateChanged","onCheckboxChanged","onSaveProgressClick","onDeleteDraftClick","CreateProject","renderPitchPublishErrorMessage","Stepper","alternativeLabel","Step","StepLabel","round","playsInline","file_drop_zone","Overlay","show","Popover","Fab","thickness","left","renderUploadFileMode","ProfilePageViewOnly","userToBeViewedLoaded","userToBeViewed","userToBeViewedInvitedLoaded","loadingUserToBeViewed","loadUserToBeViewedProfile","userToBeViewedID","userToBeViewedInvited","renderUserStatus","statusMessage","pictureItem","divider_style","SelectPledgeVisibility","TOGGLE_CREATE_PLEDGE_DIALOG","toggleCreatePledgeDialog","CREATE_PLEDGE_DIALOG_SET_PROJECT","CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED","CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED","CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED","CREATE_PLEDGE_STATUS_VALID","CREATE_PLEDGE_STATUS_MISSING_FIELDS","CREATE_PLEDGE_STATUS_INVALID_FUND","CREATE_PLEDGE_STATUS_INVALID_DATE","CreatePledgeDialog","renderCreatePledgeError","createStatus","postMoneyValuation","extraNotes","createPledge","AppBar","Toolbar","totalRaise","manageCreatePledgeDialog","creatPledgeDialogActions","primaryOfferObj","shouldSendNotificationToIssuer","MANAGE_PLEDGES_TABLE_SET_PROJECT","MANAGE_PLEDGES_TABLE_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES","MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE","MANAGE_PLEDGES_TABLE_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED","MANAGE_PLEDGES_TABLE_INPUT_CHANGED","pledgesListener","MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED","ContactPitchOwnerDialogEvents","shouldShowRiskWarningOnDownload","DocumentsDownloadLocalState","onAcceptRiskWarningClick","onCancelRiskWarningClick","riskWarningTextSplits","join","openRiskWarningDialog","whiteSpace","shouldShowRiskWarning","OpenRiskWarningDialog","selectedDocument","CloseRiskWarningDialog","RiskWarning","splits","urlText","GroupDetailsEvents","toggleContactPitchOwnerDialog","projectOwnerEmail","ToggleContactDialog","contactDialogOpen","sendingContactEmail","isSendingContactEmail","contactPitchOwnerDialogReducer","toggleContactDialogAction","SendingContactEmail","errorSendingContactEmail","CompleteSendingContactEmail","completeSendingContactEmailFunction","ContactPitchOwnerDialog","ContactPitchOwnerDialogLocalState","toggleContactDialog","ContactPitchOwner","MAX_COVER_HEIGHT_IN_MOBILE_MODE","MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE","ProjectDetailsMain","dataLoaded","dataBeingLoaded","projectLoaded","mainBody","adminOfferStatesActiveStep","votesLoaded","currentUserPledgeIndex","investorPledge","investorPledgeLoaded","pledgesLoaded","projectIssuer","projectIssuerLoaded","loadDataWhenUIElementsChange","pledgesTable_setProject","commentsLoaded","votesListener","existingVote","voteIndex","updatedVotes","voteRemovedID","existingPledge","pledgeIndex","updatedPledges","currentPledge","pledgeRemovedID","returnedComments","updatedComments","repliedBy","commentsWithReplies","commentsListener","currenComment","currentComment","currentCommentText","existingComment","commentIndex","commentsRepliesListener","correspondingCommentIndex","commentID","existingReply","replyIndex","handleVotePitch","voteVal","currentVoteObj","getInvestorVote","newVoteObj","attachProjectChangedListener","projectListener","detachProjectChangedListener","handleDocumentClick","handleMakeProjectGoLiveDecision","handleMakeProjectGoToPledgePhaseDecision","handleMakeProjectPledgeGoLiveDecision","handleMainBodyTabChanged","handlePostACommentClick","commentDialogOpen","handleCloseCommentDialog","commentText","commentSubmitClick","changedPitchExpiryDate","handleSubmitCommentClick","commenterANID","commentedDate","handleCancelUpdateCurrentComment","handleSubmitUpdateCurrentComment","newComment","handleToggleReplyToComment","replyEdited","replyingToComment","replyText","handleSubmitCommentReply","updatedCommentReply","replyBeforeUpdating","replyAfterUpdating","repliedDate","commentReply","handleDeleteCommentReply","commentReplyID","handleAdminOfferStatesStepClick","toggleRejectFeedback","addingRejectFeedback","rejectFeedback","sendProjectBackToIssuer","sendingProjectBack","feedback","userBeingLoaded","pledgesTable_stopListeningForPledgesChanged","createPledgeDialog_toggleDialog","createPledgeDialog_setProject","onVote","onMakeProjectGoLiveDecision","onMakeProjectGoToPledgePhaseDecision","onMakeProjectPledgeGoLiveDecision","onTabChanged","onPostACommentClick","onCancelUpdateCurrentComment","onSubmitUpdateCurrentComment","onToggleReplyToComment","onSubmitCommentReply","onDeleteCommentReply","onAdminOfferStatesStepClick","onCommentTextChanged","onSubmitCommentClick","ProjectDetails","sortedComments","comment1","comment2","currentCommentIndex","reverse","reply1","reply2","shouldHideInformation","gray_text","pip","renderProjectStatus","renderInvestorSelfCertifyReminder","sticky_body_sections_bar","Tabs","indicatorColor","scrollButtons","Tab","main_body_section","nonLinear","orientation","completed","StepButton","StepContent","admin_state_control_box","dangerouslySetInnerHTML","__html","border_box","stt","shouldVoteDisabled","displayVote","yesVotes","noVotes","investorVoteIndex","CommentDialog","DialogContentText","CommentReplyInputArea","prevProject","managePledgesTable","pledgesTableActions","createPledgeDialogActions","faq_box","PrivacyPolicyPage","TermsOfUsePage","RiskWarningPage","CreatePitchTermsAndConditionsPage","subjects","subject","phone","submitClick","sending","hasSetData","ContactUs","onSubmitClick","senderName","senderPhone","dbRef","enquiryID","groupContacted","HelpPage","autoSwitchToAppropriateHelpTab","helpType","autoSwitching","handleTabChanged","expandedPanel","handleExpandPanel","panel","renderGroupAdminHelp","image_style","renderInvestorHelp","renderIssuerHelp","SignInEvents","loadingData","sendingAccessRequest","removingAccessRequest","successfullyLoadedData","members","offers","groupDetailsReducer","LoadingData","CompleteLoadingData","completeLoadingDataAction","GroupDetails","GroupDetailsLocalState","hasErrorLoadingData","hasAccessRequestsBeenSatisfied","getGroup","groupResponse","fetchGroupMembers","membersResponse","offersResponse","MarketingPreferencesPage","ProfilePageEditable","userToBeEditedID","editUserProfile_startOriginalUserChangedListener","userToBeEdited","userToBeEditedLoaded","loadingUserToBeEdited","activitiesTable_stopListeningForActivitiesChanged","editUserProfile_stopOriginalUserChangedListener","adminLoaded","projectsTable_user","projectsTable","userChanged","Front","flexGrow","ResetPasswordEvents","toggleResetPasswordDialog","ToggleResetPasswordDialog","signInEmail","signInPassword","errorSignInEmail","errorSignInPassword","showResetPasswordDialog","resetPasswordDialogEmail","resetPasswordDialogProcessing","resetPasswordDialogEmailSent","isProcessingResetPasswordRequest","signInReducer","ResetAllStates","TextChanged","textChangedAction","TogglePasswordVisibility","SignInEmailError","SignInPasswordError","ClearErrors","ProcessingResetPasswordRequest","resetPasswordDialogError","CompleteProcessingResetPasswordRequest","mapStateToProps","SignInLocalState","mapDispatchToProps","togglePasswordVisibility","onSignInClick","allowSignIn","onSendResetPasswordClick","SignInNew","ResetPasswordDialogComponent","ErrorBoundary","hasError","errorInfo","componentStack","children","Header","homUrl","dashboardUrl","signInUrl","navigatingFromSignInOrSignUpToDashboard","navigatingToSignIn","navigatingToError","GroupRoute","authListener","validateRouteAndAuthentication","updateRouteAndParams","loadSystemAttributes","validateGroupUrl","attachAuthListener","onAuthStateChanged","detachAuthListener","sValue","setItem","safeSetItem","dashboardRoute","shouldRedirectToError","showHeader","getSystemAttributes","shouldValidateGroupUrl","validatingGroupUrlAction","finishedLoadingGroupUrlAction","retrievedGroup","SignUpEvents","verifyingCode","codeVerified","actionCode","confirmedPassword","resettingPassword","passwordReset","isResettingPassword","hasErrorResettingPassword","errorResettingPassword","resetPasswordReducer","VerifyingCode","CompleteVerifyingCode","completeVerifyingCodeAction","errorVerifyingCode","ConfirmingResetPassword","CompleteConfirmingResetPassword","completeConfirmingResetPasswordAction","ResetPassword","oobCode","verifyCode","ResetPasswordLocalState","confirmPasswordReset","hasErrorVerifyingCode","successfullyResettingPassword","verifyPasswordResetCode","ResourceDetail","resourceIndex","MediaQueryEvents","invitedUserLoaded","loadingInvitedUser","discover","confirmedEmail","acceptMarketingPreferences","creatingAccount","hasErrorLoadingInvitedUser","errorLoadingInvitedUser","notFoundInvitedUser","isCreatingAccount","hasErrorCreatingAccount","errorCreatingAccount","signUpReducer","LoadingInvitedUser","CompleteLoadingInvitedUser","completeLoadingInvitedUserAction","InputFieldChanged","inputFieldChangedAction","CreatingAccount","successfullyCreatedAccount","CompleteCreatingAccount","completeCreatingAccountAction","hasRegistered","SignUpNew","invitedUserId","loadInvitedUser","SignUpLocalState","handleInputFieldChanged","createAccount","inputFieldType","inputFieldName","inputFieldValue","inputFieldChecked","toLocaleLowerCase","signUp","isPublicRegistration","AppRouter","exact","render","FeedbackSnackbar","resetStatesWhenSnackbarClosed","LOADING_CLUB_ATTRIBUTES","CLUB_ATTRIBUTES_LOADED","CLUB_ATTRIBUTES_CHANGED","screenSizeQueries","mobileScreen","matchMedia","tabletScreen","laptopScreen","desktopScreen","ManageSystemIdleTimeEvents","listener","MediaQueryChanged","LOADING_SYSTEM_GROUPS","FINISHED_LOADING_SYSTEM_GROUPS","groupsListener","SYSTEM_GROUPS_CHANGED","nowIdle","nowActive","manageSystemIdleTimeReducer","OnActive","OnIdle","App","cancelAllListeners","stopListeningForUserProfileChanges","stopListeningForGroupsUserIsIn","joinRequestsTable_stopListeningForJoinRequestsChanged","adminDashboard_stopListeningForInvitedUsersChanged","groupAdminsTable_stopListeningForGroupAdminsChanged","stopListeningForSystemGroupsChanged","loadClubAttributesIfNotLoaded","clubAttributesBeingLoaded","loadSystemGroups","loadingGroups","attachListeners","initializeAuthState","getUserProfileAndValidateUser","startListeningForClubAttributesChanged","startListeningForUserProfileChanges","startListeningForAngelNetworkChanged","startListeningForGroupsUserIsIn","startListeningForSystemGroupsChanged","getTheme","addMediaQueryListeners","removeMediaQueryListeners","stopListeningForAngelNetworkChanged","stopListeningForClubAttributesChanged","onIdle","DateFnsUtils","signingIn","preventValidatingUserWhenSigningUp","groupFound","matches","forumsActions","existingGroup","groupIndex","hostname","ProfileEvents","loadingGroupsUserIsIn","groupsUserIsInLoaded","authReducer","shouldPrevent","singingIn","createBusinessProfileReducer","editUserReducer","editImageReducer","editVideoReducer","uploadFilesReducer","uploadingStatusReducer","uploadingStatusActions","changePasswordReducer","clubAttributesReducer","clubAttributesActions","CreateForum","createForumName","createForumDesc","createForumError","createNewForum","createForumAuthor","forumBeforeEditing","forumAfterEditing","lastEdited","dateCreated","CreateThread","createThreadName","createThreadBriefDesc","createThreadMessage","createThreadError","createNewThread","threadBeforeEditing","threadAfterEditing","IndividualForum","tableChangePage","tableChangeRowsPerPage","renderThreads","forumThreadsLoaded","forumThreads","threadsSortedMode","threadsTablePage","threadsTableRowsPerPage","clickOnAParticularThread","sortedThreads","SORT_BY_CURRENT_USER","thread1","thread2","SORT_BY_LAST","SORT_BY_OLDEST","ButtonBase","threadsLoadMode","goBackToForumsList","threadBeforeChanging","threadAfterChanging","CreateReply","threadReplySubject","threadReplyMessage","createThreadReplyError","submitThreadReply","thread_reply_style","forumThreadSelected","threadReplyBeforeEditing","threadReplyAfterEditing","replyDate","AVATAR_MAX_HEIGHT","IndividualThread","renderReplies","forumThreadReplies","threadInReplyMode","forumThreadRepliesLoaded","goBackToThreadsList","threadReplies","threadReplyBeforeChanging","threadReplyAfterChanging","Forums","addAndRemoveListeners","forumsLoaded","startListeningForForumsChanged","startListeningForThreadsChanged","startListeningForThreadRepliesChanged","renderContent","modeForums","forumsSortedMode","forumsLoadMode","forumsTablePage","forumsTableRowsPerPage","sortedForums","forum1","forum2","renderForums","clickOnAParticularForum","onForumClick","toggleEditForum","ForumRow","existingForum","forumsChanged","existingForumIndex","existingThread","threadsChanged","existingThreadIndex","repliesChanged","existingReplyIndex","forumBeforeChanging","forumAfterChanging","forumsReducer","notificationsReducer","mediaQueryActions","dashboardSidebarReducer","isTablet","mediaQueryReducer","superAdminSettingsReducer","groupAdminSettingsReducer","manageANIDFromParamsActions","legalDocumentsReducer","invitedUsersReducer","invitationDialogReducer","addAngelNetworkDialogReducer","manageGroupFromParamsReducer","angelNetworksReducer","manageJoinRequestsReducer","loadingPledges","matchedPledges","pledgesTableReducer","feedbackSnackbarReducer","activitiesTableReducer","manageJSONCompareChangesDialogReducer","manageJSONCompareChangesDialogActions","groupAdminsTableReducer","createPledgeDialogReducer","selectProjectVisibilityReducer","manageSystemGroupsReducer","manageSystemGroupsActions","LOADING_MARKETING_PREFERENCES","FINISHED_LOADING_MARKETING_PREFERENCES","loadingMarketingPreferences","marketingPreferencesLoaded","manageMarketingPreferencesReducer","manageMarketingPreferencesActions","CREATE_PROJECT_SET_COMPONENT_PROPS","CREATE_PROJECT_LOADING_DATA","CREATE_PROJECT_FINISHED_LOADING_DATA","CREATE_PROJECT_DRAFT_PROJECT_CHANGED","componentContext","createNewPitch","pitchExpiredDate","snackbarErrorMessage","createProjectReducer","createProjectActions","context","projectChanged","documentsDownloadReducer","openRiskWarningDialogAction","InputCategories","EditImageDialogEvents","BusinessProfileEvents","AddressStates","EditImageDialogModes","initialEditImageDialogState","AddPhoto","rotate","savingImage","deletingImage","hasInitiallySetCopiedUser","PersonalDetailsState","BusinessProfileState","editedBusinessProfile","EditImageDialogState","profileReducer","SetCopiedUser","setCopiedUserAction","copiedUser","firstTimeSetCopiedUser","ToggleDialog","toggleDialogAction","rawImage","SetEditor","setEditorAction","ChangeMode","changeModeAction","SuccessfullySelectedImage","successfullySelectedImageAction","selectedImage","SliderChanged","sliderChangedAction","SavingImage","savingImageAction","saving","DeletingImage","deletingImageAction","deleting","CheckBoxChanged","businessProfileCheckBoxChangedAction","rootReducer","combineReducers","ManageSystemIdleTimeState","newExploreGroupsReducer","ProfileLocalState","manageMarketingPreferences","manageCreateProject","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"kIAAA,OAAe,cAA0B,kC,uDCAzC,OAAe,48N,uDCAf,OAAe,wkK,iCCAf,OAAe,cAA0B,wC,uDCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,qE,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,oE,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,2E,iCCAzC,OAAe,cAA0B,mF,iCCAzC,OAAe,cAA0B,kE,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,+D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,8D,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,mE,iCCAzC,OAAe,cAA0B,4D,iCCAzC,OAAe,cAA0B,qD,iCCAzC,OAAe,cAA0B,gE,iCCAzC,OAAe,cAA0B,uE,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,2D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,wD,iCCAzC,OAAe,cAA0B,uD,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,6D,iCCAzC,OAAe,cAA0B,sD,iCCAzC,OAAe,cAA0B,oD,iCCAzC,OAAe,cAA0B,0E,iCCAzC,OAAe,cAA0B,0E,iCCAzC,OAAe,cAA0B,0D,iCCAzC,OAAe,cAA0B,mD,iCCAzC,OAAe,cAA0B,yD,iCCAzC,OAAe,cAA0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","file":"static/js/main.23ee9e12.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.5e7ff337.png\";","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAC0FBMVEUAAAAA//8Af/8AqqoAf78AmcwAqtQAkdoAn98AjcYAmcwAotAAlNQAnNcAkdoAmcwAj88AltIAm9QAk9YAltAAm9IAlNQAmNYAk9cAl88AmtEAldMAlNUAl88AmtAAltIAmNMAlNQAl9UAltEAmdIAldMAl9QAlNUAltAAldIAl9MAlNQAltUAmNIAldMAl9QAmNIAldMAl9MAmdQAltEAmNEAldIAldMAltQAmNEAltIAl9IAldMAltMAmNQAltEAl9IAldIAltMAmNMAltQAl9EAldIAl9IAmNMAltMAl9QAltIAl9IAmNMAltMAl9QAltEAl9IAldIAltMAl9MAltQAl9EAldIAltIAl9MAltMAl9QAltIAl9IAmNIAltMAl9MAltQAl9IAmNIAltIAl9MAltMAl9QAmNIAltIAl9MAltMAl9MAldEAltIAl9IAltMAl9MAltMAltIAl9IAltIAl9MAltMAl9MAl9IAltIAl9IAltMAl9MAl9MAltIAl9IAltEAl9MAltMAltIAl9IAltIAl9MAltMAldMAl9IAltIAl9IAltMAldMAl9MAltIAl9IAltEAl9MAl9MAltMAl9IAltIAldMAl9MAltIAl9IAltEAldMAl9MAl9IAltEAldMAl9MAltMAl9IAltIAl9EAl9MAldMAl9MAltIAl9IAl9EAl9MAltMAl9IAldEAl9MAltMAl9MAldEAl9EAldMAl9MAltIAldIAl9EAldMAl9MAltMAl9IAl9EAldEAl9MAltMAl9MAl9IAldEAl9EAldMAl9MAltMAldIAl9EAldEAl9MAltMAldMAl9EAldEAl9EAltMAldMAl9IAldEAl9EAldMAl9MAl9MAldIAl9EAldEAl9MAl9MAldMAl9EAldEAl9EAltMAldMAl9MAldEAl9EAldEAldMAl9MAldMAl9EAldEAl9NBjL3XAAAA73RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExYXGBkaGxwdHyAhIiMkJScoKSorLC4vMDE0NTY5Ojs8PT4/QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpbXF1eX2BhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ent8fX5/gIGCg4SFhoeI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\"","export default __webpack_public_path__ + \"static/media/admin_logo.ba46fba4.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_my_dashboard.bd396a1f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_navigation_bar.9371ce16.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_notifications.5cb03a6b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_user_management.f70fb039.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_01.188cd7b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_02.43a3a338.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_inviting_a_new_user_03.d21bb154.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_access_requests.28fe688a.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_members.441a6d6f.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_viewing_an_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_offer.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_accept_reject_2_offer.ef822bde.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_01.e60ce2ca.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_edit_offer_02.6811f18b.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_temporarily_closing_an_offer.2af2fa2e.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_reopening_a_temporarily_closed_offer.a6df5162.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_manage_group_admins.56a845b1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_offers.c2b77876.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_explore_groups.6d981bb7.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_resources.46aab3b9.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_settings.db022052.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_public_offer.9199adf5.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_restricted_offer.47d1cb14.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_audit_log.7ba81ce1.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_password.6b0f1016.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_change_password.d432f2e0.png\";","export default __webpack_public_path__ + \"static/media/group_admin_help_logging_out.d5b27005.png\";","export default __webpack_public_path__ + \"static/media/investor_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/investor_help_navigation_bar.484f4980.png\";","export default __webpack_public_path__ + \"static/media/investor_help_notifications.591a0a3c.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers.e803e5a3.png\";","export default __webpack_public_path__ + \"static/media/investor_help_viewing_offers_campaign.c87eedb6.png\";","export default __webpack_public_path__ + \"static/media/investor_help_exploring_groups.2626dbb8.png\";","export default __webpack_public_path__ + \"static/media/investor_help_resources.d795f034.png\";","export default __webpack_public_path__ + \"static/media/investor_help_editing_your_profile.7557feb5.png\";","export default __webpack_public_path__ + \"static/media/investor_help_setting_up_business_profile.4f382457.png\";","export default __webpack_public_path__ + \"static/media/investor_help_reset_password.3367ff8a.png\";","export default __webpack_public_path__ + \"static/media/investor_help_change_password.ee808f9b.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_01.3369ce18.png\";","export default __webpack_public_path__ + \"static/media/investor_help_support_02.360ef7c1.png\";","export default __webpack_public_path__ + \"static/media/investor_help_log_out.b96d7eaf.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_my_dashboard.2972de8d.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_navigation_bar.c03a1c44.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_notifications.ee71f277.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_01.7ef3c24c.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_create_new_offer_02.e6fe49c4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_manage_offer.3aaa83e4.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_offer.6dc9997a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_01.6baa1cf8.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_replying_to_comments_in_offer_02.e5dcb344.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_exploring_groups.2ddf42d1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_resources.394adc7a.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_01.f76d41fd.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_edit_profile_02.5ba1a9b1.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_01.740f5dec.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_setting_business_profile_02.4487dfd3.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_reset_password.6e395e52.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_change_password.a3ecf01b.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_01.866d8280.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_support_02.39aafbdc.png\";","export default __webpack_public_path__ + \"static/media/issuer_help_log_out.7f3b30bd.png\";","export default __webpack_public_path__ + \"static/media/front_page_cover_image.2b9aa708.png\";","/** \n * This file contains Firebase connection setup.\n * \n * This file will only be imported in the App.jsx file to initialize Firebase.\n */\n\nimport firebase from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/storage';\n\nconst config = {\n    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n    authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_FIREBASE_DATABASE_URL,\n    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.REACT_APP_FIREBASE_APP_ID\n};\nconst firebaseApp = firebase.initializeApp(config);\nexport default firebaseApp;","export const UPLOADING = 'UPLOADING';\nexport const uploading = (mode, progress) => {\n    return {\n        type: UPLOADING,\n        mode,\n        progress\n    }\n};\n\nexport const DISMISS_UPLOADING_STATUS = 'DISMISS_UPLOADING_STATUS';\nexport const dismissUploadingStatus = () => {\n    return {\n        type: DISMISS_UPLOADING_STATUS\n    }\n};","import React, {Component} from 'react';\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    Typography\n} from '@material-ui/core';\nimport FlexView from 'react-flexview';\nimport {ProgressBar} from 'react-bootstrap';\nimport {connect} from 'react-redux';\nimport * as uploadingStatusActions from '../../redux-store/actions/uploadingStatusActions';\n\n// Upload states\nexport const UPLOAD_NONE = 0;\nexport const UPLOAD_LOGO_FIRST_TIME_MODE = 1; // upload logo first time together with business profile information\nexport const UPLOAD_LOGO_MODE = 2; // upload logo separately later times\nexport const UPLOAD_PROFILE_PICTURE_MODE = 3;\nexport const UPLOAD_VIDEO_FIRST_TIME_MODE = 4;\nexport const UPLOAD_VIDEO_MODE = 5;\nexport const UPLOAD_LEGAL_DOCUMENTS_MODE = 6;\nexport const UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION = 7;\nexport const UPLOAD_PITCH_COVER_MODE = 8;\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 9;\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 10;\nexport const UPLOAD_DONE_MODE = 11;\nexport const UPLOAD_ERROR = 12;\n//--------------------------------------------------------------------\n\nconst mapStateToProps = state => {\n    return {\n        mode: state.uploadingStatus.mode,\n        progress: state.uploadingStatus.progress\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        dismiss: () => dispatch(uploadingStatusActions.dismissUploadingStatus())\n    }\n};\n\nclass UploadingDialog extends Component {\n\n    render() {\n\n        const {\n            forwardRef,\n\n            mode,\n            progress,\n\n            dismiss\n        } = this.props;\n\n        return (\n            <Dialog\n                ref={forwardRef}\n                open={mode !== UPLOAD_NONE}\n                fullWidth\n            >\n                <DialogTitle>\n                    {\n                        mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE\n                            ?\n                            \"Uploading logo\"\n                            :\n                            (\n                                mode === UPLOAD_PROFILE_PICTURE_MODE\n                                    ?\n                                    \"Uploading profile picture\"\n                                    :\n                                    (\n                                        mode === UPLOAD_VIDEO_MODE || mode === UPLOAD_VIDEO_FIRST_TIME_MODE\n                                            ?\n                                            \"Uploading video\"\n                                            :\n                                            (\n                                                mode === UPLOAD_LEGAL_DOCUMENTS_MODE\n                                                    ?\n                                                    \"Uploading documents\"\n                                                    :\n                                                    (\n                                                        mode === UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION\n                                                            ?\n                                                            \"Uploading business profile\"\n                                                            :\n                                                            (\n                                                                mode === UPLOAD_ERROR\n                                                                    ?\n                                                                    \"Error uploading\"\n                                                                    :\n                                                                    (\n                                                                        mode === UPLOAD_DONE_MODE\n                                                                            ?\n                                                                            \"Upload done\"\n                                                                            :\n                                                                            \"\"\n                                                                    )\n                                                            )\n                                                    )\n                                            )\n                                    )\n                            )\n                    }\n                </DialogTitle>\n                <DialogContent>\n                    <FlexView column>\n                        <ProgressBar variant=\"success\" striped now={progress} label={`${progress}%`} />\n                        <Typography variant=\"body2\" style={{ marginTop: 10 }} >\n                            {\n                                mode !== UPLOAD_DONE_MODE\n                                    ?\n                                    \"Please wait while we're uploading your files...\"\n                                    :\n                                    \"Your files have successfully uploaded.\"\n                            }\n                        </Typography>\n                    </FlexView>\n                </DialogContent>\n                <DialogActions>\n                    <Button variant=\"outlined\" color=\"primary\" size=\"small\" disabled={mode !== UPLOAD_DONE_MODE && mode !== UPLOAD_ERROR} onClick={dismiss} style={{ margin: 8 }}>Close</Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(\n    React.forwardRef((props, ref) => <UploadingDialog {...props} forwardedRef={ref}/>)\n);","/** This file contains all of the colors that will be used */\n\nexport const black = \"#000000\";\nexport const white = \"#FFFFFF\";\n\nexport const red = \"#FF0000\";\nexport const red_700 = \"#D32F2F\";\n\nexport const dark_green = \"#4C8484\";\nexport const dark_green_50 = \"#5DA2A2\";\n\n// obtain using this website: https://hihayk.github.io/scale/#4/6/58/94/-51/-17/100/14/4C8484/76/132/132\nexport const dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100 = \"#F3F7F9\";\n\nexport const gray_50 = \"#FAFAFA\";\nexport const gray_100 = \"#F5F5F5\";\nexport const gray_200 = \"#EEEEEE\";\nexport const gray_300 = \"#E0E0E0\";\nexport const gray_400 = \"#BDBDBD\";\nexport const gray_500 = \"#9E9E9E\";\nexport const gray_600 = \"#757575\";\nexport const gray_700 = \"#616161\";\nexport const gray_800 = \"#424242\";\n\nexport const pink_500 = \"#E91E63\";\n\nexport const blue_900 = \"#0D47A1\";\n\nexport const blue_gray_50 = \"#ECEFF1\";\nexport const blue_gray_100 = \"#CFD8DC\";\nexport const blue_gray_600 = \"#546E7A\";\nexport const blue_gray_700 = \"#455A64\";\n\n//---- Background color for letter avatar --------------------\nexport const background_a = \"#58B99D\";\nexport const background_b = \"#4A9D86\";\nexport const background_c = \"#EAC545\";\nexport const background_d = \"#E79F3C\";\nexport const background_e = \"#65C87A\";\nexport const background_f = \"#55AB68\";\nexport const background_g = \"#C45C24\";\nexport const background_h = \"#5197D5\";\nexport const background_i = \"#437FB4\";\nexport const background_j = \"#C8473F\";\nexport const background_k = \"#D65745\";\nexport const background_l = \"#B14334\";\nexport const background_m = \"#925EB1\";\nexport const background_n = \"#844A87\";\nexport const background_o = \"#BEC3C6\";\nexport const background_p = \"#38495C\";\nexport const background_q = \"#303E4E\";\nexport const background_r = \"#98A4A6\";\nexport const background_s = \"#818C8D\";\nexport const background_t = \"#DE8DBD\";\nexport const background_u = \"#CA76AA\";\nexport const background_v = \"#E99B89\";\nexport const background_w = \"#9DA282\";\nexport const background_x = \"#AF935E\";\nexport const background_y = \"#E5B547\";\nexport const background_z = \"#9D473B\";\n//------------------------------------------------------------\n\n//---------------------------------------------------------------------\n/**\n * Theme colors - MUST BE DEFINED LAST so that other colors can be referenced\n */\nexport const primaryColor = dark_green;\nexport const secondaryColor = pink_500;\nexport const errorColor = \"#E15241\";\n\nexport const kick_starter_background_color = \"#FBFBFA\";\nexport const kick_starter_background_color_1 = \"#F7F7F6\";\nexport const kick_starter_gray_box_border = \"#DCDEDD\";\nexport const kick_starter_signup_background = \"#FCFCFB\";\nexport const kick_starter_gray_background = \"#F0F0F0\";\n\nexport const crowdcube_risk_warning_background = \"#2C383B\";\nexport const crowdcube_risk_warning_link_before_cover = \"#D98E34\";\nexport const crowdcube_risk_warning_link_after_cover = \"#CA6B2D\";\n//---------------------------------------------------------------------\n","import React from 'react';\nimport { StyleSheet } from 'aphrodite';\nimport {\n    TableCell,\n    Slide\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport * as appColors from '../values/colors';\n\nconst sharedStyles = StyleSheet.create({\n    nav_link_hover: {\n        ':hover': {\n            color: appColors.blue_gray_700,\n            textDecoration: 'none',\n            cursor: 'pointer'\n        }\n    },\n\n    nav_link_white_text_hover_without_changing_text_color: {\n        color: appColors.white,\n        ':hover': {\n            textDecoration: 'none'\n        }\n    },\n\n    nav_link_hover_without_changing_text_color: {\n        ':hover': {\n            textDecoration: 'none'\n        }\n    },\n\n    page_title: {\n        marginLeft: 20,\n        color: appColors.white\n    },\n\n    hamburger_button: {\n        color: appColors.white,\n        marginLeft: 10\n    },\n\n    tab_title: {\n        textTransform: \"none\",\n        fontSize: \"0.9em\"\n    },\n\n    kick_starter_border_box: {\n        border: `1px solid ${appColors.kick_starter_gray_box_border}`,\n        boxShadow: 'none'\n    },\n\n    no_text_transform: {\n        textTransform: \"none\"\n    },\n\n    error_text: {\n        color: appColors.errorColor\n    },\n\n    white_text: {\n        color: appColors.white\n    },\n\n    black_text: {\n        color: appColors.black\n    }\n});\nexport default sharedStyles;\n\n/**\n * Styled table cell\n *\n * @param props\n * @returns {*}\n * @constructor\n */\nexport function StyledTableCell(props) {\n    const useStyles = makeStyles({\n        root: {\n            background: props => props.cellColor,\n            color: props.textColor\n        }\n    });\n    const classes = useStyles(props);\n    return (\n        <TableCell\n            className={classes.root}\n            colSpan={props.colSpan}\n        >\n            {props.component}\n        </TableCell>\n    );\n}\n\n/**\n * Slide transition - direction up\n *\n * @param props\n * @returns {*}\n * @constructor\n */\nexport const SlideTransitionUp = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"up\" />);\n\n/**\n * Slide transition - direction down\n *\n * @param props\n * @returns {*}\n * @constructor\n */\nexport const SlideTransitionDown = React.forwardRef((props, ref) => <Slide {...props} ref={ref} direction=\"down\" />);","/**\r\n * This file contains all Firebase paths and constant values.\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE NODES ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Groups node\r\nexport const GROUP_PROPERTIES_CHILD = \"AngelNetworkProperties\";\r\n\r\n// Admins node\r\nexport const ADMINISTRATORS_CHILD = \"Administrators\";\r\n\r\n// System's attributes node\r\nexport const CLUB_ATTRIBUTES_CHILD = \"ClubAttributes\";\r\n\r\n// Users node\r\nexport const USERS_CHILD = \"Users\";\r\n\r\n// Projects node\r\nexport const PROJECTS_CHILD = \"Projects\";\r\n\r\n// Activities log node\r\nexport const ACTIVITIES_LOG_CHILD = \"ActivitiesLog\";\r\n\r\n// Access requests to a group node\r\nexport const REQUESTS_TO_JOIN_CHILD = \"RequestsToJoin\";\r\n\r\n// Contact us enquiries node\r\nexport const CONTACT_US_ENQUIRIES_CHILD = \"ContactUsEnquiries\";\r\n\r\n// Marketing preferences node\r\nexport const MARKETING_PREFERENCES_CHILD = \"MarketingPreferences\";\r\n\r\n// Invited users node\r\nexport const INVITED_USERS_CHILD = \"InvitedUsers\";\r\n\r\n// Business profile node\r\nexport const BUSINESS_PROFILE_CHILD = \"BusinessProfile\";\r\n\r\n// Accepted create pitch T&Cs node\r\nexport const ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD = \"AcceptedCreatePitchTermsAndConditions\";\r\n\r\n// Project comments node\r\nexport const COMMENTS_CHILD = \"Comments\";\r\n\r\n// Project comment replies node\r\nexport const COMMENT_REPLIES_CHILD = \"CommentReplies\";\r\n\r\n// Pledges node\r\nexport const PLEDGES_CHILD = \"Pledges\";\r\n\r\n// Project votes node\r\nexport const VOTES_CHILD = \"Votes\";\r\n\r\n// Pledge FAQs node\r\nexport const PLEDGE_FAQS_CHILD = \"PledgeFAQs\";\r\n\r\n// Notifications node\r\nexport const NOTIFICATIONS_CHILD = \"Notifications\";\r\n\r\n// Forums node\r\nexport const FORUMS_CHILD = \"Forums\";\r\n\r\n// Forum threads node\r\nexport const FORUM_THREADS_CHILD = \"ForumThreads\";\r\n\r\n// Forum thread replies node\r\nexport const FORUM_THREAD_REPLIES_CHILD = \"ForumThreadReplies\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE STORAGE DIRECTORIES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\n\r\n// Plain logos directory\r\nexport const PLAIN_LOGOS_CHILD = \"PlainLogos\";\r\n\r\n// Logos with text directory\r\nexport const LOGOS_WITH_TEXT_CHILD = \"LogosWithText\";\r\n\r\n// Legal documents directory\r\nexport const LEGAL_DOCUMENTS_CHILD = \"LegalDocuments\";\r\n\r\n// Logos directory\r\nexport const LOGOS_CHILD = \"Logos\";\r\n\r\n// Videos directory\r\nexport const INTRO_VIDEOS_CHILD = \"Videos\";\r\n\r\n// Profile pictures directory\r\nexport const PROFILE_PICTURES_CHILD = \"ProfilePictures\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FIREBASE DATABASE ATTRIBUTES ----------------------------------------------------------------------------------------\r\n *\r\n * @type {string}\r\n */\r\nexport const PROJECT_SUPPORTING_DOCUMENTS_CHILD = \"supportingDocuments\";\r\n\r\nexport const PROJECT_PRESENTATION_DOCUMENT_CHILD = \"presentationDocument\";\r\n\r\nexport const PROFILE_PICTURE_CHILD = \"profilePicture\";\r\n\r\nexport const PROJECT_COVER_CHILD = \"cover\";\r\n\r\nexport const LOGO_CHILD = \"logo\";\r\n\r\nexport const INTRO_VIDEO_CHILD = \"video\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * ACTIVITY LOG TYPES --------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const ACTIVITY_TYPE_CLICK = 1; // profile, pitch/offer\r\nexport const ACTIVITY_TYPE_VIEW = 2; // profile, pitch/offer, group\r\nexport const ACTIVITY_TYPE_DOWNLOAD = 3; // download documents\r\nexport const ACTIVITY_TYPE_POST = 4; // comments, forums, threads, replies, pledges, likes, changes password\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVITED USER STATUS -------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a user in a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const INVITED_USER_NOT_REGISTERED = 0;\r\nexport const INVITED_USER_DECLINED_TO_REGISTER = 1;\r\nexport const INVITED_USER_STATUS_ACTIVE = 2;\r\nexport const INVITED_USER_STATUS_LEFT = 3;\r\nexport const INVITED_USER_STATUS_KICKED_OUT = 4;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * GROUP STATUS --------------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the status of a group.\r\n *\r\n * @type {number}\r\n */\r\nexport const GROUP_STATUS_ACTIVE = 1;\r\nexport const GROUP_STATUS_SUSPENDED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TYPE -----------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const TYPE_INVESTOR = 1;\r\nexport const TYPE_ISSUER = 2;\r\nexport const TYPE_ADMIN = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT VISIBILITY --------------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the visibility of a project (offer).\r\n *\r\n * @type {number}\r\n */\r\nexport const PROJECT_VISIBILITY_PRIVATE = 1;\r\nexport const PROJECT_VISIBILITY_RESTRICTED = 2;\r\nexport const PROJECT_VISIBILITY_PUBLIC = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * INVESTOR AGREEMENT TYPE ---------------------------------------------------------------------------------------------\r\n *\r\n * This value is used to determine the investors' self-certification type.\r\n *\r\n * @type {number}\r\n */\r\nexport const HIGH_NET_WORTH_INVESTOR_AGREEMENT = 1;\r\nexport const SELF_CERTIFIED_SOPHISTICATED_INVESTOR_AGREEMENT = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT STATUS ------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\n\r\n// --- Project overall status ---\r\nexport const PROJECT_STATUS_DRAFT = -2; // project has not been published yet\r\nexport const PROJECT_STATUS_REJECTED = -1; // this status means the project failed even before it is publicly showed\r\nexport const PROJECT_STATUS_BEING_CHECKED = 0; // the project (offer) must be checked by admin first\r\nexport const PROJECT_STATUS_PITCH_PHASE = 1;\r\nexport const PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED = 2;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED = 3;\r\nexport const PROJECT_STATUS_PRIMARY_OFFER_PHASE = 4;\r\nexport const PROJECT_STATUS_SUCCESSFUL = 5;\r\nexport const PROJECT_STATUS_FAILED = 6;\r\n\r\n// --- Pitch status only ---\r\nexport const PITCH_STATUS_ON_GOING = 1;\r\nexport const PITCH_STATUS_ACCEPTED = 2;\r\nexport const PITCH_STATUS_REJECTED = 3;\r\n// when the admin accepts a pitch, its status will change to this state (pitch accepted and waiting for primary offer to be created)\r\n// when the issuer creates a primary offer, the pitch's status will change to PITCH_STATUS_ACCEPTED\r\nexport const PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER = 4;\r\n// this status means the pitch has expired but admin has not accepted or rejected it\r\nexport const PITCH_STATUS_WAITING_FOR_ADMIN = 5;\r\n\r\n// --- Pledge status only ---\r\nexport const PRIMARY_OFFER_STATUS_ON_GOING = 1;\r\nexport const PRIMARY_OFFER_STATUS_EXPIRED = 2;\r\nexport const PRIMARY_OFFER_STATUS_REJECTED = 3;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT STATUS ----------------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_STATUS_POSTED = 1;\r\nexport const COMMENT_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * PROJECT COMMENT REPLY STATUS ----------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const COMMENT_REPLY_STATUS_POSTED = 1;\r\nexport const COMMENT_REPLY_STATUS_EDITED = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * CONTROL IF A PLEDGE IS NEWLY CREATED OR EDITED ----------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const MAKE_A_NEW_PLEDGE = 1;\r\nexport const EDIT_A_PLEDGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * USER TITLES ---------------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const USER_TITLES = [\"Please select\", \"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Mx\", \"Dr.\", \"Prof.\"];\r\n\r\nexport const HEAR_ABOUT = [\"Please select\", \"Google\", \"Newsletter\", \"Linkedin\", \"Event\"];\r\n\r\n/**\r\n * FINANCIAL ROUNDS ----------------------------------------------------------------------------------------------------\r\n *\r\n * @type {string[]}\r\n */\r\nexport const FINANCIAL_ROUNDS = [\"Yes\", \"No\"];\r\n\r\nexport const EIS_BADGE = [\"Yes\", \"No\"];\r\n\r\nexport const SEIS_BADGE = [\"Yes\", \"No\"];\r\n\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * MULTIMEDIA TYPE (VIDEO OR IMAGE) ------------------------------------------------------------------------------------\r\n *\r\n * @type {number}\r\n */\r\nexport const FILE_TYPE_VIDEO = 1;\r\nexport const FILE_TYPE_IMAGE = 2;\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * FILE CONFIGURATION ---------------------------------------------------------------------------------------------\r\n *\r\n * @type {number|string}\r\n */\r\nexport const MAX_FILE_SIZE_IN_MB = 15;\r\nexport const MAX_FILE_SIZE_IN_BYTES = 15000000;\r\n\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_MB = 30;\r\nexport const MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES = 30000000;\r\n\r\nexport const MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER = 2;\r\nexport const MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS = 10;\r\n\r\nexport const STORAGE_FILE_NAME_ID_SPLIT = \"-invest-west-\";\r\n/**\r\n * ./// ----------------------------------------------------------------------------------------------------------------\r\n */","import * as DB_CONST from '../firebase/databaseConsts';\n\nimport {QuillDeltaToHtmlConverter} from 'quill-delta-to-html';\n\n/**\n * This function will return the current date in milliseconds.\n */\nexport const getCurrentDate = () => {\n    const date = new Date();\n    return date.getTime();\n};\n\n\n/**\n * This function is used to calculate the date that is n days further than today\n *\n * @param days\n * @returns {number}\n */\nexport const getDateWithDaysFurtherThanToday = days => {\n    let neededDate = new Date();\n    const currentDate = new Date();\n    neededDate.setDate(currentDate.getDate() + days);\n    return neededDate.getTime();\n};\n\n/**\n * This function will return a readable date format (DD/MM/YYYY)\n *\n * This function will take 1 parameter: milliseconds\n *\n * @param {*} milliseconds\n */\nexport const dateInReadableFormat = milliseconds => {\n    const date = new Date(milliseconds);\n    return date.toLocaleDateString();\n};\n\n/**\n * This function will return a readable date format (DD/MM/YYYY, HH:mm:ss)\n *\n * This function will take 1 parameter: milliseconds\n *\n * @param {*} milliseconds\n */\nexport const dateTimeInReadableFormat = milliseconds => {\n    const date = new Date(milliseconds);\n    return `${date.toLocaleDateString()} ${date.toLocaleTimeString()}`;\n};\n\n/**\n * This function will return a readable date format (dayOfWeek, month date year hour)\n *\n * @param milliseconds\n */\nexport const fullDateTimeInReadableFormat = milliseconds => {\n    const date = new Date(milliseconds);\n    const dayList = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n    const monthList = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\n    let dayOfWeek = dayList[date.getDay()];\n    let month = monthList[date.getMonth()];\n    let hour = date.getHours();\n    let minute = date.getMinutes();\n    let second = date.getSeconds();\n\n    hour = (hour >= 12) ? hour - 12 : hour;\n    let prepand = (hour >= 12) ? \" PM \" : \" AM \";\n\n    if (hour === 0 && prepand === ' PM ') {\n        if (minute === 0 && second === 0) {\n            hour = 12;\n            prepand = ' Noon';\n        } else {\n            hour = 12;\n            prepand = ' PM';\n        }\n    }\n    if (hour === 0 && prepand === ' AM ') {\n        if (minute === 0 && second === 0) {\n            hour = 12;\n            prepand = ' Midnight';\n        } else {\n            hour = 12;\n            prepand = ' AM';\n        }\n    }\n    return `${dayOfWeek}, ${month} ${date.getDate()} ${date.getFullYear()} ${hour}:${minute} ${prepand}`;\n};\n\nexport const PASSWORD_VERY_WEAK = 1;\nexport const PASSWORD_WEAK = 2;\nexport const PASSWORD_GOOD = 3;\nexport const PASSWORD_STRONG = 4;\nexport const PASSWORD_VERY_STRONG = 5;\nconst passwordBlacklist = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\n\n/**\n * This function is used to check the strength of the password.\n *\n * @param {*} password\n */\nexport const checkPasswordStrength = password => {\n    let strength = 0;\n    const minLength = 8;\n    // If the password length is less than or equal to minLength\n    if (password.length < minLength) {\n        strength = PASSWORD_VERY_WEAK;\n    } else {\n        strength = PASSWORD_GOOD;\n    }\n\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\n        // strength = PASSWORD_WEAK;\n    }\n\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\n    if (password.length > minLength &&\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\n        // strength = PASSWORD_GOOD;\n    }\n\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\n        // strength = PASSWORD_STRONG;\n    }\n\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\n        // strength = PASSWORD_VERY_STRONG;\n    }\n\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\n        strength = PASSWORD_VERY_WEAK;\n    }\n\n    return strength;\n};\n\n\n/**\n * Convert a Delta object (obtained using ReactQuill to create rich text) to HTML\n *\n * @param {*} ops\n */\nexport const convertQuillDeltaToHTML = ops => {\n    if (!ops) {\n        return null;\n    }\n    let cfg = {};\n    /**\n     * Delta object obtained using ReactQuill has the following format:\n     * {\n     *      \"ops\": [\n     *          {},\n     *          {}\n     *      ]\n     * }\n     *\n     * This object is stored in the database.\n     * However, we only need the \"ops\" array to convert to HTML.\n     * So, after converting the JSON string to JSON, we need to retrieve the \"ops\" array so that the HTML tree can be created.\n     */\n    let converter = new QuillDeltaToHtmlConverter(ops, cfg);\n    return converter.convert();\n};\n\n\n/**\n * This function is used to calculate the difference in date between a specified date (in milliseconds) and the current date\n *\n * @param {*} milliseconds\n */\nexport const dateDiff = (milliseconds) => {\n    const currentDate = new Date();\n    if (milliseconds - currentDate.getTime() < 0) {\n        return 0;\n    }\n    const dateDiff = Math.abs(milliseconds - currentDate.getTime()); // difference\n    return (dateDiff / (24 * 60 * 60 * 1000)).toFixed(0); //Convert values days and return value\n};\n\n/**\n * This function will find addresses based on postcode\n *\n * @param {*} postcode\n */\nexport const findAddress = async (postcode) => {\n    const GET_ADDRESS_API_KEY = \"Wbj4a1np5EejXhsnpv3RXQ19730\";\n    const addressQuery = `https://api.getAddress.io/find/${postcode}?api-key=${GET_ADDRESS_API_KEY}&sort=True&format=True`;\n\n    return new Promise((resolve, reject) => {\n        fetch(addressQuery)\n            .then(results => {\n                return results.json();\n            })\n            .then(data => {\n                let results = {\n                    apiAddresses: [], // addresses to store information to database\n                    formattedAddresses: [], // displayed addresses\n                    error: false\n                };\n                // no addresses can be found\n                if (!data.addresses) {\n                    results.error = true;\n                    return resolve(results);\n                }\n                data.addresses\n                    .forEach(address => {\n                        results.apiAddresses.push(address);\n                        // each address consists of 5 elements (address 1, address 2, address 3, town/city, postcode)\n                        let formattedAddress = \"\";\n                        address.forEach((element, index) => {\n                            if (element !== \"\") {\n                                formattedAddress += (element + \", \");\n                            }\n                        });\n                        formattedAddress = formattedAddress.trim();\n                        if (formattedAddress[formattedAddress.length - 1] === \",\") {\n                            formattedAddress = formattedAddress.slice(0, formattedAddress.length - 1);\n                        }\n                        results.formattedAddresses.push(formattedAddress);\n                    });\n                return resolve(results);\n            });\n    });\n};\n\n/**\n * This function is used to calculate the equity gain based on the amount of money pledged\n * @param moneyPledge\n * @param fundTarget\n * @param equityOffered\n */\nexport const calculateEquityGain = (moneyPledge, fundTarget, equityOffered) => {\n    return ((moneyPledge * equityOffered) / fundTarget).toFixed(2);\n};\n\n/**\n * This function is used to calculate the amount of money pledged for this project\n *\n * @param pledges\n * @returns {number}\n */\nexport const calculatePledgesAmount = pledges => {\n\n    let pledgesAmount = 0;\n\n    if (!pledges || pledges.length === 0) {\n        return pledgesAmount;\n    }\n\n    pledges.forEach(pledge => {\n        if (pledge.amount !== '') {\n            pledgesAmount += pledge.amount;\n        }\n    });\n\n    return pledgesAmount;\n};\n\n/**\n * This function is used to convert a string to a number\n * Note: in this case, comma is considered the thousands-separator\n *\n * @param inputString\n * @returns {null|number}\n */\nexport const getNumberFromInputString = inputString => {\n\n    // user enters decimal numbers\n    if (inputString.includes('.')) {\n        return null;\n    }\n\n    let commaSplits = inputString.split(',');\n\n    if (commaSplits.length > 1) {\n        let invalidSeparator = false;\n        // check if the input string has valid comma separators\n        commaSplits.forEach((part, index) => {\n            if (index === 0) {\n                if (part.length > 3 || part.length < 1) {\n                    invalidSeparator = true;\n                }\n            } else {\n                if (part.length !== 3) {\n                    invalidSeparator = true;\n                }\n            }\n        });\n\n        if (invalidSeparator) {\n            return null;\n        }\n    }\n\n    let commaFreeString = inputString.replace(/,/g, '');\n    // check if the string is a number\n    if (isNaN(commaFreeString) === true) {\n        return null;\n    }\n\n    let number = parseFloat(commaFreeString);\n    if (number < 0) {\n        return null;\n    }\n\n    return number;\n};\n\n/**\n * Construct file name to be uploaded to firebase storage\n *\n * @param document\n * @param newStorageID\n * @returns {string}\n */\nexport const constructStorageFileName = (document, newStorageID) => {\n\n    let constructedName = '';\n\n    let originalName = document.file.name;\n    let nameSplits = originalName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT);\n    // file downloaded from invest west server\n    if (nameSplits.length > 1) {\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + nameSplits[1];\n    }\n    // file from user's computer\n    else {\n        constructedName = newStorageID + DB_CONST.STORAGE_FILE_NAME_ID_SPLIT + originalName;\n    }\n\n    return constructedName;\n};\n\n/**\n * Check if a LinkedIn URL is valid\n *\n * @param url\n * @returns {boolean|boolean | *}\n */\nexport const isValidLinkedInURL = url => {\n    if (!url) {\n        return true;\n    }\n    return url.startsWith(\"https://www.linkedin.com/in/\");\n};\n\nexport const GET_PLAIN_LOGO = 1;\nexport const GET_LOGO_WITH_TEXT = 2;\nexport const getLogoFromGroup = (getLogoType, groupProperties) => {\n    if (!groupProperties) {\n        return null;\n    }\n\n    switch (getLogoType) {\n        case GET_PLAIN_LOGO:\n            if (!groupProperties.hasOwnProperty('plainLogo')\n                || (groupProperties.hasOwnProperty('plainLogo') && groupProperties.plainLogo === null)\n            ) {\n                return null;\n            }\n            return groupProperties.plainLogo[groupProperties.plainLogo.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\n        case GET_LOGO_WITH_TEXT:\n            if (!groupProperties.hasOwnProperty('logoWithText')\n                || (groupProperties.hasOwnProperty('logoWithText') && groupProperties.logoWithText === null)\n            ) {\n                return null;\n            }\n            return groupProperties.logoWithText[groupProperties.logoWithText.findIndex(logo => !logo.hasOwnProperty('removed'))].url;\n        default:\n            return null;\n    }\n};\n\n/**\n * Get the user's home group\n *\n * @param groupsUserIsIn\n * @returns {*}\n */\nexport const getUserHomeGroup = groupsUserIsIn => {\n    const index = groupsUserIsIn.findIndex(group => group.invitedUser.requestedToJoin === false);\n    if (index !== -1) {\n        return groupsUserIsIn[index];\n    } else {\n        return null;\n    }\n};\n\n/**\n * Check if a project can be edited\n *\n * @param user\n * @param project\n * @returns {boolean}\n */\nexport const shouldAProjectBeEdited = (user, project) => {\n    if (user.type === DB_CONST.TYPE_INVESTOR) {\n        return false;\n    }\n\n    if (user.type === DB_CONST.TYPE_ADMIN) {\n        return !(project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL\n            || project.status === DB_CONST.PROJECT_STATUS_FAILED\n            || project.status === DB_CONST.PROJECT_STATUS_REJECTED\n        );\n    }\n\n    // user is an issuer, but not the owner of the project\n    if (user.id !== project.issuerID) {\n        return false;\n    }\n\n    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT\n        || project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\n    ) {\n        return true;\n    }\n\n    if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\n        return project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\n    }\n\n    return false;\n};\n\n/**\n * Check if a hex color code is valid\n *\n * @param hexColorCode\n * @returns {boolean}\n */\nexport const isValidHexColorCode = (hexColorCode) => {\n    let RegExp = /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i;\n    return RegExp.test(hexColorCode);\n};\n\n/**\n * Check if a website URL is valid\n *\n * @param url\n * @returns {boolean}\n */\nexport const isValidWebURL = (url) => {\n    let RegExp = /^(http|https):\\/\\/(([a-zA-Z0-9$\\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])){3})|localhost|([a-zA-Z0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\\/(([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\\/([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\\?([a-zA-Z0-9$\\-_.+!*'(),;:@&=/?]|%[0-9a-fA-F]{2})*)?(#([a-zA-Z0-9$\\-_.+!*'(),;:@&=/?]|%[0-9a-fA-F]{2})*)?)?$/;\n    return RegExp.test(url);\n};\n\n/**\n * Check is an email address is valid\n *\n * @param email\n * @returns {boolean}\n */\nexport const isValidEmailAddress = (email) => {\n    let RegExp = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return RegExp.test(email.trim().toLowerCase());\n}\n\n/**\n * Check if a project is live\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectLive = project => {\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\n};\n\n/**\n * Check if a project is a draft\n *\n * @param project\n * @returns {boolean}\n */\nexport const isDraftProject = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\n};\n\n/**\n * Check if a project is waiting to go live\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectWaitingToGoLive = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\n};\n\n/**\n * Check if a project is rejected to go live\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectRejectedToGoLive = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\n};\n\n/**\n * Check if a project is in live project phase\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectInLivePitchPhase = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\n};\n\n/**\n * Check if the project has expired and waiting for admin to make decision\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectPitchExpiredWaitingForAdminToCheck = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\n};\n\n/**\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\n *\n * @param project\n * @returns {boolean|boolean}\n */\nexport const isProjectWaitingForPledgeToBeCreated = project => {\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\n        )\n        || (\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\n        );\n}\n\n/**\n * Check if a project's pledge is waiting to be checked\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectWaitingForPledgeToBeChecked = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\n}\n\n/**\n * Check if a project is in live pledge phase\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectInLivePledgePhase = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\n};\n\n/**\n * Check if a project has ended with at least 1 pledge\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectSuccessful = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\n};\n\n/**\n * Check if a project has ended with no pledges\n * @param project\n * @returns {boolean}\n */\nexport const isProjectFailed = project => {\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\n};\n\n/**\n * Check if a project is temporarily closed\n *\n * @param project\n * @returns {boolean}\n */\nexport const isProjectTemporarilyClosed = project => {\n    return project.hasOwnProperty('temporarilyClosed') && project.temporarilyClosed === true;\n};","export const CLOSE_FEEDBACK_SNACKBAR = 'CLOSE_FEEDBACK_SNACKBAR';\nexport const closeFeedbackSnackbar = () => {\n    return {\n        type: CLOSE_FEEDBACK_SNACKBAR\n    }\n};\n\nexport const SET_FEEDBACK_SNACKBAR_CONTENT= 'SET_FEEDBACK_SNACKBAR_CONTENT';\nexport const setFeedbackSnackbarContent = (message, color, position) => {\n    return {\n        type: SET_FEEDBACK_SNACKBAR_CONTENT,\n        message,\n        color,\n        position\n    }\n};\n\nexport const RESET_STATES_WHEN_SNACKBAR_CLOSED = 'RESET_STATES_WHEN_SNACKBAR_CLOSED';\nexport const resetStatesWhenSnackbarClosed = () => {\n    return {\n        type: RESET_STATES_WHEN_SNACKBAR_CLOSED\n    }\n};","import {\n    UPLOAD_PROFILE_PICTURE_MODE,\n    UPLOAD_LOGO_FIRST_TIME_MODE,\n    UPLOAD_LOGO_MODE,\n    UPLOAD_ERROR,\n    UPLOAD_DONE_MODE\n} from '../../shared-components/uploading-dialog/UploadingDialog';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as myUtils from '../../utils/utils';\nimport {UPLOADING} from  './uploadingStatusActions';\nimport firebase from '../../firebase/firebaseApp';\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\n\nexport const TOGGLE_EDIT_IMAGE_DIALOG = 'TOGGLE_EDIT_IMAGE_DIALOG';\nexport const toggleEditImageDialog = mode => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: TOGGLE_EDIT_IMAGE_DIALOG,\n            mode, // upload logo (first time or not) or profile picture\n            user: getState().auth.user\n        });\n    }\n};\n\nexport const SET_IMAGE_EDITOR_REFERENCE = 'SET_IMAGE_EDITOR_REFERENCE';\nexport const setImageEditorReference = editor => {\n    return {\n        type: SET_IMAGE_EDITOR_REFERENCE,\n        editor\n    }\n};\n\nexport const LOADING_IMAGE_FILE = 'LOADING_IMAGE_FILE';\nexport const IMAGE_FILES_LOADED = 'IMAGE_FILES_LOADED';\nexport const handleImageFilesChanged = files => {\n    return (dispatch, getState) => {\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\n            return;\n        }\n\n        dispatch({\n            type: LOADING_IMAGE_FILE\n        });\n\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\n\n        dispatch({\n            type: IMAGE_FILES_LOADED,\n            blob\n        });\n    }\n};\n\nexport const handleImageFileError = (error, file) => {\n    if (error.code === 2) {\n        return {\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n            message: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\n            color: \"error\",\n            position: \"bottom\"\n        };\n    }\n};\n\nexport const LOADING_PREVIOUS_IMAGE = 'LOADING_PREVIOUS_IMAGE';\nexport const FINISHED_LOADING_PREVIOUS_IMAGE = 'FINISHED_LOADING_PREVIOUS_IMAGE';\nexport const handlePreviousImageItemClick = index => {\n    return (dispatch, getState) => {\n\n        dispatch({\n            type: LOADING_PREVIOUS_IMAGE\n        });\n\n        // send request through a CORS proxy can avoid cors problem\n        // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\n        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n\n        fetch(proxyUrl + getState().editImage.previousPhotos[index].url)\n            .then(response => {\n                return response.blob();\n            })\n            .then(blob => {\n                dispatch({\n                    type: FINISHED_LOADING_PREVIOUS_IMAGE,\n                    selectedIndex: index,\n                    blob,\n                });\n            });\n    }\n};\n\nexport const IMAGE_ZOOM_CHANGED = 'IMAGE_ZOOM_CHANGED';\nexport const handleZoomSliderChanged = (event, newValue) => {\n    return {\n        type: IMAGE_ZOOM_CHANGED,\n        zoom: newValue\n    }\n};\n\nexport const CANCEL_EDITING_CURRENT_IMAGE = 'CANCEL_EDITING_CURRENT_IMAGE';\nexport const cancelEditingCurrentImage = () => {\n    return {\n        type: CANCEL_EDITING_CURRENT_IMAGE\n    }\n};\n\nexport const EDITED_IMAGE_OBTAINED = 'EDITED_IMAGE_OBTAINED';\nexport const viewEditedImagePreview = () => {\n    return (dispatch, getState) => {\n        const imgEditor = getState().editImage.imgEditor;\n\n        getEditedImage(imgEditor)\n            .then(blob => {\n                dispatch({\n                    type: EDITED_IMAGE_OBTAINED,\n                    blob\n                });\n            });\n    }\n};\n/**\n * Util function to get edited image\n *\n * @param imgEditor\n * @returns {Promise<unknown>}\n */\nconst getEditedImage = async (imgEditor) => {\n    return new Promise((resolve, reject) => {\n        if (imgEditor && !isNaN(imgEditor.getCroppingRect().x)) {\n            // This returns a HTMLCanvasElement, it can be made into a data URL or a blob,\n            // drawn on another canvas, or added to the DOM.\n            imgEditor.getImage().toBlob(blob => {\n                return resolve(blob);\n            }, 'image/jpg');\n        }\n        else {\n            return reject();\n        }\n    });\n};\n\nexport const CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE = 'CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE';\nexport const handleSaveEditedImage = () => {\n    return (dispatch, getState) => {\n        if (getState().editImage.mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\n            getEditedImage(getState().editImage.imgEditor)\n                .then(blob => {\n                    dispatch({\n                        type: CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE,\n                        blob\n                    });\n                });\n            return;\n        }\n\n        getEditedImage(getState().editImage.imgEditor)\n            .then(blob => {\n                // dismiss edit image dialog\n                dispatch({\n                    type: TOGGLE_EDIT_IMAGE_DIALOG,\n                    waitForUploading: true\n                });\n                // start uploading image\n                uploadImage(dispatch, getState().auth.user, getState().editImage, blob);\n            });\n    }\n};\n\n/**\n * This function is used to upload an image (logo or profile picture)\n *\n * @returns {Promise<*>}\n */\nexport const uploadImage = async (dispatch, user, editImageState, blob) => {\n    const {\n        mode,\n        imgPreIndex\n    } = editImageState;\n\n    let firebaseStorage = firebase.storage();\n    let firebaseDB = firebase.database();\n\n    if (mode !== UPLOAD_PROFILE_PICTURE_MODE && mode !== UPLOAD_LOGO_FIRST_TIME_MODE && mode !== UPLOAD_LOGO_MODE) {\n        return;\n    }\n\n    dispatch({\n        type: UPLOADING,\n        mode,\n        progress: 0\n    });\n\n    let storageID = 0;\n    let storageLocation = '';\n\n    // upload logo\n    if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\n\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\n        if (imgPreIndex !== -1) {\n            // don't need to check for BusinessProfile and logo nodes here because imgPreIndex only be set if the user already has images uploaded\n            const imgName = user.BusinessProfile.logo[imgPreIndex].storageID;\n            // delete old image\n            await firebaseStorage\n                .ref(DB_CONST.USERS_CHILD)\n                .child(user.id)\n                .child(`${DB_CONST.LOGOS_CHILD}/${imgName}`)\n                .delete();\n        } else {\n            // do nothing here\n        }\n        storageID = myUtils.getCurrentDate();\n        storageLocation = `${DB_CONST.LOGOS_CHILD}/${storageID}`;\n    }\n    // upload profile picture\n    else if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\n\n        // edit previous image --> overwrite existing one in the storage instead of saving a new entry\n        if (imgPreIndex !== -1) {\n            // don't need to check for profilePicture node here because imgPreIndex only be set if the user already has images uploaded\n            const imgName = user.profilePicture[imgPreIndex].storageID;\n            // delete old image\n            await firebaseStorage\n                .ref(DB_CONST.USERS_CHILD)\n                .child(user.id)\n                .child(`${DB_CONST.PROFILE_PICTURES_CHILD}/${imgName}`)\n                .delete();\n        } else {\n            // do nothing here\n        }\n        storageID = myUtils.getCurrentDate();\n        storageLocation = `${DB_CONST.PROFILE_PICTURES_CHILD}/${storageID}`;\n    }\n    // mode invalid\n    else {\n        return;\n    }\n\n    const storageRef = firebaseStorage\n        .ref(DB_CONST.USERS_CHILD)\n        .child(user.id)\n        .child(storageLocation);\n\n    return new Promise((resolve, reject) => {\n        // upload logo to firebase storage\n        const uploadTask = storageRef.put(blob);\n        uploadTask.on('state_changed', snapshot => {\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            dispatch({\n                type: UPLOADING,\n                mode,\n                progress: progress.toFixed(0)\n            });\n            // handle error\n        }, error => {\n\n            dispatch({\n                type: UPLOADING,\n                mode: UPLOAD_ERROR,\n                progress: 100\n            });\n\n            return reject(error);\n            // logo successfully uploaded\n        }, () => {\n\n            // get download URL of the uploaded logo\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\n\n                const imgUploadedObj = {\n                    storageID: storageID,\n                    url: imgDownloadURL\n                };\n\n                let prevNodeImgs = [];\n                let firebaseRef = firebaseDB\n                    .ref(DB_CONST.USERS_CHILD)\n                    .child(user.id);\n\n                // upload logo\n                if (mode === UPLOAD_LOGO_MODE || mode === UPLOAD_LOGO_FIRST_TIME_MODE) {\n                    // user has not uploaded any images\n                    if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\n                        prevNodeImgs = [];\n                        prevNodeImgs.push(imgUploadedObj);\n                    }\n                    // user has uploaded images\n                    else {\n                        prevNodeImgs = user.BusinessProfile.logo;\n\n                        // edit previous image --> don't to save new, just need to edit the node instead\n                        if (imgPreIndex !== -1) {\n                            prevNodeImgs.splice(imgPreIndex, 1);\n                            prevNodeImgs.forEach(imgItem => {\n                                imgItem.removed = true;\n                            });\n                            prevNodeImgs.push(imgUploadedObj);\n                        }\n                        // upload new image\n                        else {\n                            prevNodeImgs.forEach(imgItem => {\n                                imgItem.removed = true;\n                            });\n                            prevNodeImgs.push(imgUploadedObj);\n                        }\n                    }\n\n                    firebaseRef = firebaseRef\n                        .child(DB_CONST.BUSINESS_PROFILE_CHILD)\n                        .child(DB_CONST.LOGO_CHILD);\n                }\n                // upload profile picture\n                else {\n                    // user has not uploaded any images\n                    if (!user.profilePicture) {\n                        prevNodeImgs = [];\n                        prevNodeImgs.push(imgUploadedObj);\n                    } else {\n                        prevNodeImgs = user.profilePicture;\n\n                        // edit previous image --> don't to save new, just need to edit the node instead\n                        if (imgPreIndex !== -1) {\n                            prevNodeImgs.splice(imgPreIndex, 1);\n                            prevNodeImgs.forEach(imgItem => {\n                                imgItem.removed = true;\n                            });\n                            prevNodeImgs.push(imgUploadedObj);\n                        }\n                        // upload new image\n                        else {\n                            prevNodeImgs.forEach(imgItem => {\n                                imgItem.removed = true;\n                            });\n                            prevNodeImgs.push(imgUploadedObj);\n                        }\n                    }\n\n                    firebaseRef = firebaseRef\n                        .child(DB_CONST.PROFILE_PICTURE_CHILD);\n                }\n\n                // update firebase realtime database\n                firebaseRef\n                    .set(prevNodeImgs)\n                    .then(() => {\n                        dispatch({\n                            type: UPLOADING,\n                            mode: UPLOAD_DONE_MODE,\n                            progress: 100\n                        });\n\n                        dispatch({\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\n                            waitForUploading: false\n                        });\n\n                        return resolve();\n                    })\n                    .catch(error => {\n                        dispatch({\n                            type: UPLOADING,\n                            mode: UPLOAD_ERROR,\n                            progress: 100\n                        });\n\n                        dispatch({\n                            type: TOGGLE_EDIT_IMAGE_DIALOG,\n                            waitForUploading: false\n                        });\n\n                        return reject(error);\n                    });\n            });\n        });\n    });\n};\n\n\n\n\n","import React, {Component} from 'react';\nimport {\n    Button,\n    Dialog,\n    DialogContent,\n    Divider,\n    IconButton,\n    Typography,\n    CircularProgress,\n    Slider\n} from '@material-ui/core';\nimport {\n    Container,\n    Row,\n    Col,\n    Image\n} from 'react-bootstrap';\nimport AddIcon from '@material-ui/icons/Add';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ImageIcon from '@material-ui/icons/Image';\nimport FlexView from 'react-flexview';\nimport Files from 'react-files';\nimport {css, StyleSheet} from 'aphrodite';\nimport AvatarEditor from 'react-avatar-editor';\n\nimport {\n    UPLOAD_PROFILE_PICTURE_MODE\n} from '../uploading-dialog/UploadingDialog';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nimport * as colors from '../../values/colors';\n\nimport {connect} from 'react-redux';\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\n\nconst mapStateToProps = state => {\n    return {\n        user: state.auth.user,\n\n        open: state.editImage.editImageDialogOpen,\n        mode: state.editImage.mode,\n        previousPhotos: state.editImage.previousPhotos,\n        imgPreEdited: state.editImage.imgPreEdited,\n        imgPreEditedLoaded: state.editImage.imgPreEditedLoaded,\n        imgPreIndex: state.editImage.imgPreIndex,\n        imgEdited: state.editImage.imgEdited,\n        imgZoom: state.editImage.imgZoom,\n\n        isMobile: state.MediaQueryState.isMobile\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onClose: () => dispatch(editImageActions.toggleEditImageDialog(null)),\n        setEditorReference: (editor) => dispatch(editImageActions.setImageEditorReference(editor)),\n        handleImageFilesChanged: (files) => dispatch(editImageActions.handleImageFilesChanged(files)),\n        handleImageFileError: (error, file) => dispatch(editImageActions.handleImageFileError(error, file)),\n        handleSliderChanged: (event, newValue) => dispatch(editImageActions.handleZoomSliderChanged(event, newValue)),\n        onPreviousImageItemClick: (index) => dispatch(editImageActions.handlePreviousImageItemClick(index)),\n        cancelEditingCurrentImage: () => dispatch(editImageActions.cancelEditingCurrentImage()),\n        viewEditedImagePreview: () => dispatch(editImageActions.viewEditedImagePreview()),\n        saveEditedImage: () => dispatch(editImageActions.handleSaveEditedImage()),\n\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\n    }\n};\n\nclass EditImageDialog extends Component {\n    render() {\n        const {\n            forwardedRef,\n            isMobile,\n\n            user,\n\n            open,\n            mode,\n            previousPhotos,\n            imgPreEdited,\n            imgPreEditedLoaded,\n            imgPreIndex,\n            imgEdited,\n            imgZoom,\n\n            onClose,\n            setEditorReference,\n            handleImageFilesChanged,\n            handleImageFileError,\n            handleSliderChanged,\n            onPreviousImageItemClick,\n            cancelEditingCurrentImage,\n            viewEditedImagePreview,\n            saveEditedImage,\n\n            closeFeedbackSnackbar,\n\n            ...other\n        } = this.props;\n\n        return (\n            <Dialog\n                ref={forwardedRef}\n                open={open}\n                maxWidth=\"sm\"\n                fullWidth\n                fullScreen={isMobile}\n                onClose={onClose}\n                {...other}\n            >\n                <DialogContent style={{ padding: 0 }} >\n                    <Container fluid style={{ padding: 0 }} >\n                        <Row noGutters >\n\n                            <Col xs={12} sm={12} md={12} lg={12}\n                                style={{\n                                    backgroundColor: colors.kick_starter_background_color_1,\n                                    paddingTop: 6,\n                                    paddingBottom: 6,\n                                    paddingLeft: 15,\n                                    paddingRight: 15\n                                }}\n                            >\n                                <FlexView vAlignContent=\"center\" >\n                                    <FlexView grow={8} >\n                                        <Typography variant=\"body1\" >\n                                            {\n                                                mode === UPLOAD_PROFILE_PICTURE_MODE\n                                                    ?\n                                                    \"Upload profile picture\"\n                                                    :\n                                                    \"Upload logo\"\n                                            }\n                                        </Typography>\n                                    </FlexView>\n\n                                    <FlexView grow={1} hAlignContent=\"right\" >\n                                        <IconButton onClick={onClose} >\n                                            <CloseIcon fontSize=\"small\" />\n                                        </IconButton>\n                                    </FlexView>\n                                </FlexView>\n                            </Col>\n\n                            <Col xs={12} sm={12} md={12} lg={12} >\n                                <Divider/>\n                            </Col>\n\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 18 }} >\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ marginBottom: 25 }} >Upload a new photo or choose from your previous photos</Typography>\n                                    <Files\n                                        className={css(styles.img_drop_zone)}\n                                        onChange={handleImageFilesChanged}\n                                        onError={handleImageFileError}\n                                        accepts={['image/png', 'image/jpg', 'image/jpeg']}\n                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\n                                        minFileSize={0}\n                                        multiple\n                                        clickable\n                                        onClick={closeFeedbackSnackbar}\n                                    >\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"center\" >\n                                            <AddIcon fontSize=\"small\" style={{ marginRight: 8 }} />\n                                            Upload photo\n                                        </FlexView>\n                                    </Files>\n\n                                    <FlexView marginTop={22} hAlignContent=\"center\" style={{ position: 'relative', width: \"100%\", height: 325 }} >\n                                        <AvatarEditor\n                                            ref={setEditorReference}\n                                            image={imgPreEdited}\n                                            width={270}\n                                            height={270}\n                                            border={25}\n                                            borderRadius={150}\n                                            disableBoundaryChecks={false}\n                                            disableHiDPIScaling={false}\n                                            scale={imgZoom}\n                                            style={{\n                                                position: 'absolute',\n                                                top: 0\n                                            }}\n                                        />\n                                        {\n                                            imgPreEditedLoaded\n                                                ?\n                                                null\n                                                :\n                                                <FlexView\n                                                    hAlignContent=\"center\"\n                                                    vAlignContent=\"center\"\n                                                    style={{ position: 'absolute', width: \"100%\", height: \"100%\", top: 0, zIndex: 1 }}\n                                                >\n                                                    <CircularProgress color=\"primary\" />\n                                                </FlexView>\n                                        }\n                                    </FlexView>\n\n                                    {\n                                        this.renderSelectedPreviousPhotoStatus()\n                                    }\n\n                                    <FlexView width={310} marginTop={15} vAlignContent=\"center\" >\n                                        <ImageIcon fontSize=\"small\"/>\n                                        <Slider\n                                            min={1}\n                                            max={2.5}\n                                            step={0.001}\n                                            value={imgZoom}\n                                            onChange={handleSliderChanged}\n                                            style={{ marginLeft: 11, marginRight: 11 }}\n                                        />\n                                        <ImageIcon fontSize=\"large\"/>\n                                    </FlexView>\n\n                                    <FlexView marginTop={15} hAlignContent=\"right\" >\n                                        <Button\n                                            size=\"medium\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            variant=\"outlined\"\n                                            color=\"primary\"\n                                            onClick={() => cancelEditingCurrentImage()}\n                                        >Cancel</Button>\n                                        <Button\n                                            size=\"medium\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            disabled={!imgPreEdited}\n                                            onClick={() => viewEditedImagePreview()}\n                                            style={{ marginLeft: 16, marginRight: 16 }} >Preview</Button>\n                                        <Button\n                                            size=\"medium\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            variant=\"contained\"\n                                            color=\"primary\"\n                                            disabled={!imgPreEdited}\n                                            onClick={() => saveEditedImage()}\n                                        >Save</Button>\n                                    </FlexView>\n\n                                    {\n                                        !imgEdited\n                                            ?\n                                            null\n                                            :\n                                            (\n                                                <FlexView marginTop={20} width={270} height={270} >\n                                                    <Image\n                                                        src={window.URL.createObjectURL(imgEdited)}\n                                                        roundedCircle\n                                                        thumbnail\n                                                        style={{ width: \"100%\", height: \"auto\", objectFit: \"scale-down\" }}\n                                                    />\n                                                </FlexView>\n                                            )\n                                    }\n\n                                </FlexView>\n                            </Col>\n\n                            <Col xs={12} sm={12} md={12} lg={12} >\n                                <Divider/>\n                            </Col>\n\n                            {\n                                // previous photos set to null --> don't want to display previous photos\n                                !previousPhotos\n                                    ?\n                                    null\n                                    :\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 15 }} >\n                                        <Typography variant=\"body1\" color=\"textSecondary\" >Your photos</Typography>\n\n                                        <Row noGutters style={{ padding: 12 }} >\n                                            {\n                                                previousPhotos\n                                                    .sort((photo1, photo2) => photo2.storageID - photo1.storageID)\n                                                    .map((previousPhoto, index) => (\n                                                        <Col\n                                                            key={index}\n                                                            xs={6}\n                                                            sm={4}\n                                                            md={3}\n                                                            lg={3}\n                                                            onClick={() => onPreviousImageItemClick(index)}\n                                                        >\n                                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ width: \"100%\", padding: 5 }} >\n                                                                <Image\n                                                                    key={index}\n                                                                    src={previousPhoto.url}\n                                                                    className={css(styles.previous_img_item_selected)}\n                                                                    style={{\n                                                                        height: 128,\n                                                                        width: 128,\n                                                                        objectFit: \"contain\"\n                                                                    }}\n                                                                />\n                                                            </FlexView>\n                                                        </Col>\n                                                    ))\n                                            }\n                                        </Row>\n                                    </Col>\n                            }\n                        </Row>\n                    </Container>\n                </DialogContent>\n            </Dialog>\n        )\n    }\n\n    /**\n     * Render selected previous photo's status\n     *\n     * @returns {null|*}\n     */\n    renderSelectedPreviousPhotoStatus = () => {\n        const {\n            user,\n            imgPreIndex,\n            mode\n        } = this.props;\n\n        let msg = '';\n\n        if (imgPreIndex === -1) {\n            return null;\n        }\n\n        // upload profile picture\n        if (mode === UPLOAD_PROFILE_PICTURE_MODE) {\n            // user has no previous profile pictures\n            if (!user.profilePicture) {\n                return null;\n            }\n            // user has previous profile pictures\n            else {\n                // the selected photo is not the current profile picture\n                if (imgPreIndex !== user.profilePicture.findIndex(profilePic => !profilePic.hasOwnProperty('removed'))) {\n                    msg = 'This photo is a previous profile picture.';\n                } else {\n                    msg = 'This photo is the current profile picture.';\n                }\n            }\n        }\n        // upload logo\n        else {\n            // user has no previous logos\n            if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.logo)) {\n                return null;\n            }\n            // user has previous logos\n            else {\n                // the selected photo is not the current logo\n                if (imgPreIndex !== user.BusinessProfile.logo.findIndex(logo => !logo.hasOwnProperty('removed'))) {\n                    msg = 'This photo is a previous logo.';\n                } else {\n                    msg = 'This photo is the current logo.';\n                }\n            }\n        }\n\n        return (\n            <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 12 }}>{msg}</Typography>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(\n    React.forwardRef((props, ref) => (<EditImageDialog {...props} forwardedRef={ref}/>))\n);\n\nconst styles = StyleSheet.create({\n\n    img_drop_zone: {\n        paddingTop: 10,\n        paddingBottom: 10,\n        paddingLeft: 30,\n        paddingRight: 30,\n        textAlign: 'center',\n        border: `1px solid ${colors.gray_400}`,\n\n        ':hover': {\n            backgroundColor: colors.gray_100,\n            cursor: 'pointer'\n        }\n    },\n\n    previous_img_item_selected: {\n        ':hover': {\n            border: `4px solid ${colors.primaryColor}`,\n            cursor: 'pointer',\n            opacity: 0.90\n        }\n    }\n});","import {\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\n    UPLOAD_DONE_MODE,\n    UPLOAD_ERROR\n} from '../../shared-components/uploading-dialog/UploadingDialog';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as utils from '../../utils/utils';\nimport {UPLOADING} from  './uploadingStatusActions';\nimport firebase from '../../firebase/firebaseApp';\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\n\nexport const TOGGLE_EDIT_VIDEO_DIALOG = 'TOGGLE_EDIT_VIDEO_DIALOG';\nexport const toggleEditVideoDialog = mode => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\n            mode, // upload video (first time or not)\n            user: getState().auth.user\n        });\n    }\n};\n\nexport const VIDEO_TYPE_CHOSEN = 'VIDEO_TYPE_CHOSEN';\nexport const chooseVideoType = videoType => {\n    return {\n        type: VIDEO_TYPE_CHOSEN,\n        videoType\n    }\n};\n\nexport const VIDEO_URL_CHANGED = 'VIDEO_URL_CHANGED';\nexport const handleVideoURLChanged = event => {\n    return {\n        type: VIDEO_URL_CHANGED,\n        url: event.target.value\n    }\n};\n\nexport const VIDEO_FILE_CHANGED = 'VIDEO_FILE_CHANGED';\nexport const handleVideoFilesChanged = files => {\n    return (dispatch, getState) => {\n        if (getState().manageFeedbackSnackbar.message.trim().length > 0 || getState().manageFeedbackSnackbar.open) {\n            return;\n        }\n        const blob = new Blob([files[files.length - 1]], {type: 'video/mp4'});\n        dispatch({\n            type: VIDEO_FILE_CHANGED,\n            blob\n        });\n    }\n};\n\nexport const VIDEO_FILE_ERROR = 'VIDEO_FILE_ERROR';\nexport const handleVideoFileError = (error, file) => {\n    if (error.code === 2) {\n        return {\n            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n            message: `Video is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\n            color: \"error\",\n            position: \"bottom\"\n        };\n    }\n};\n\nexport const CREATE_BUSINESS_PROFILE_SAVE_VIDEO = 'CREATE_BUSINESS_PROFILE_SAVE_VIDEO';\nexport const handleSaveVideo = () => {\n    return (dispatch, getState) => {\n        if (getState().editVideo.mode === UPLOAD_VIDEO_FIRST_TIME_MODE) {\n            dispatch({\n                type: CREATE_BUSINESS_PROFILE_SAVE_VIDEO,\n                video: getState().editVideo.videoChosen\n            });\n            return;\n        }\n        // dismiss edit image dialog\n        dispatch({\n            type: TOGGLE_EDIT_VIDEO_DIALOG,\n            waitForUploading: true\n        });\n        // start uploading image\n        uploadVideo(dispatch, getState().auth.user, getState().editVideo, getState().editVideo.videoChosen);\n    }\n};\n\nexport const PREVIOUS_VIDEO_SELECTED = 'PREVIOUS_VIDEO_SELECTED';\nexport const handlePreviousVideoItemClick = index => {\n    return {\n        type: PREVIOUS_VIDEO_SELECTED,\n        selectedIndex: index\n    }\n};\n\nexport const CANCEL_EDITING_CURRENT_VIDEO = 'CANCEL_EDITING_CURRENT_VIDEO';\nexport const cancelEditingCurrentVideo = () => {\n    return {\n        type: CANCEL_EDITING_CURRENT_VIDEO\n    }\n};\n\n/**\n * This function is used to upload intro video to firebase storage\n *\n * @param dispatch\n * @param user\n * @param editVideoState\n * @param video\n * @returns {Promise<unknown>}\n */\nexport const uploadVideo = async (dispatch, user, editVideoState, video) => {\n\n    const {\n        mode,\n        videoPreIndex\n    } = editVideoState;\n\n    dispatch({\n        type: UPLOADING,\n        mode,\n        progress: 0\n    });\n\n    let downloadedPreviousVideo = null;\n\n    // edit previous image --> overwrite existing one in the storage instead of saving a new entry\n    // video entry with storageID = \"\" is the one not stored in Firebase storage\n    if (videoPreIndex !== -1) {\n        // select previously uploaded video as the current video\n        if (user.BusinessProfile.video[videoPreIndex].storageID !== \"\") {\n            // send request through a CORS proxy can avoid cors problem\n            // src: https://stackoverflow.com/questions/43262121/trying-to-use-fetch-and-pass-in-mode-no-cors?rq=1\n            const proxyUrl = 'https://cors-anywhere.herokuapp.com/';\n\n            await fetch(proxyUrl + user.BusinessProfile.video[videoPreIndex].url)\n                .then(response => {\n                    return response.blob();\n                })\n                .then(blob => {\n                    downloadedPreviousVideo = blob;\n                });\n\n            // don't need to check for BusinessProfile and video nodes here because videoPreIndex only be set if the user already has videos uploaded\n            const videoName = user.BusinessProfile.video[videoPreIndex].storageID;\n            // delete old video, don't need to wait for this to complete as the file will be deleted anyway\n            firebase.storage()\n                .ref(DB_CONST.USERS_CHILD)\n                .child(user.id)\n                .child(`${DB_CONST.INTRO_VIDEOS_CHILD}/${videoName}`)\n                .delete();\n        }\n        // select previous video URL as the current video\n        else {\n            const videoUploadedObj = {\n                storageID: \"\",\n                dateUploaded: utils.getCurrentDate(),\n                url: video\n            };\n\n            return new Promise((resolve, reject) => {\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\n                    .then(() => {\n                        return resolve();\n                    })\n                    .catch(error => {\n                        return reject(error);\n                    });\n            });\n        }\n    } else {\n        // do nothing here\n    }\n\n    // upload a new video URL\n    if (typeof (video) === \"string\") {\n        const videoUploadedObj = {\n            storageID: \"\",\n            dateUploaded: utils.getCurrentDate(),\n            url: video\n        };\n\n        return new Promise((resolve, reject) => {\n            putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\n                .then(() => {\n                    return resolve();\n                })\n                .catch(error => {\n                    return reject(error);\n                });\n        });\n    }\n\n    const storageID = utils.getCurrentDate();\n    const storageLocation = `${DB_CONST.INTRO_VIDEOS_CHILD}/${storageID}`;\n\n    const storageRef = firebase.storage()\n        .ref(DB_CONST.USERS_CHILD)\n        .child(user.id)\n        .child(storageLocation);\n\n    return new Promise((resolve, reject) => {\n        // upload logo to firebase storage\n        const videoUploadTask = storageRef.put(downloadedPreviousVideo ? downloadedPreviousVideo : video);\n        videoUploadTask.on('state_changed', snapshot => {\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            dispatch({\n                type: UPLOADING,\n                mode,\n                progress: progress.toFixed(0)\n            });\n            // handle error\n        }, error => {\n\n            dispatch({\n                type: UPLOADING,\n                mode: UPLOAD_ERROR,\n                progress: 100\n            });\n\n            return reject(error);\n            // video successfully uploaded\n        }, () => {\n\n            // get download URL of the uploaded video\n            videoUploadTask.snapshot.ref.getDownloadURL().then(videoDownloadURL => {\n\n                const videoUploadedObj = {\n                    storageID: storageID,\n                    dateUploaded: storageID,\n                    url: videoDownloadURL\n                };\n\n                putUploadedVideoToFirebaseRealtime(dispatch, user, videoUploadedObj, videoPreIndex)\n                    .then(() => {\n                        return resolve();\n                    })\n                    .catch(error => {\n                        return reject(error);\n                    });\n            });\n        });\n    });\n};\n\n/**\n * Handle to put the uploaded video to Firebase realtime\n *\n * @param dispatch\n * @param user\n * @param videoUploadedObj\n * @param videoPreIndex\n * @returns {Promise<unknown>}\n */\nconst putUploadedVideoToFirebaseRealtime = async (dispatch, user, videoUploadedObj, videoPreIndex) => {\n\n    return new Promise((resolve, reject) => {\n        let prevNodeVideos = [];\n        let firebaseRef = firebase.database()\n            .ref(DB_CONST.USERS_CHILD)\n            .child(user.id)\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\n            .child(DB_CONST.INTRO_VIDEO_CHILD);\n\n        // user has not uploaded any videos\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\n            prevNodeVideos = [];\n            prevNodeVideos.push(videoUploadedObj);\n        }\n        // user has uploaded videos\n        else {\n            prevNodeVideos = user.BusinessProfile.video;\n\n            // edit previous video --> don't need to save new, just need to edit the node instead\n            if (videoPreIndex !== -1) {\n                prevNodeVideos.splice(videoPreIndex, 1);\n                prevNodeVideos.forEach(imgItem => {\n                    imgItem.removed = true;\n                });\n                prevNodeVideos.push(videoUploadedObj);\n            }\n            // upload new video\n            else {\n                prevNodeVideos.forEach(imgItem => {\n                    imgItem.removed = true;\n                });\n                prevNodeVideos.push(videoUploadedObj);\n            }\n        }\n\n        firebaseRef\n            .set(prevNodeVideos)\n            .then(() => {\n                dispatch({\n                    type: UPLOADING,\n                    mode: UPLOAD_DONE_MODE,\n                    progress: 100\n                });\n\n                dispatch({\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\n                    waitForUploading: false\n                });\n\n                return resolve();\n            })\n            .catch(error => {\n\n                dispatch({\n                    type: UPLOADING,\n                    mode: UPLOAD_ERROR,\n                    progress: 100\n                });\n\n                dispatch({\n                    type: TOGGLE_EDIT_VIDEO_DIALOG,\n                    waitForUploading: false\n                });\n\n                return reject(error);\n            });\n    });\n};\n\n\n","import React, { Component } from 'react';\nimport {\n    Button,\n    Dialog,\n    DialogContent,\n    Divider,\n    IconButton,\n    Typography,\n    TextField\n} from '@material-ui/core';\nimport {\n    Container,\n    Row,\n    Col\n} from 'react-bootstrap';\nimport AddIcon from '@material-ui/icons/Add';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FlexView from 'react-flexview';\nimport Files from 'react-files';\nimport { css, StyleSheet } from 'aphrodite';\nimport ReactPlayer from 'react-player';\n\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport * as colors from '../../values/colors';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nimport {connect} from 'react-redux';\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\n\nexport const VIDEO_UPLOAD_FILE_SELECTED = 1;\nexport const VIDEO_UPLOAD_URL_SELECTED = 2;\n\nconst mapStateToProps = state => {\n    return {\n        user: state.auth.user,\n\n        allowVideoUpload:\n            state.manageClubAttributes.clubAttributes && state.manageClubAttributes.clubAttributes.hasOwnProperty('allowVideoUpload')\n                ?\n                state.manageClubAttributes.clubAttributes.allowVideoUpload\n                :\n                false,\n\n        open: state.editVideo.editVideoDialogOpen,\n        mode: state.editVideo.mode,\n\n        videoTypeSelected: state.editVideo.videoTypeSelected,\n        videoChosen: state.editVideo.videoChosen,\n        previousVideos: state.editVideo.previousVideos,\n        videoPreIndex: state.editVideo.videoPreIndex,\n\n        isMobile: state.MediaQueryState.isMobile\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        onClose: () => dispatch(editVideoActions.toggleEditVideoDialog(null)),\n        chooseVideoType: (videoType) => dispatch(editVideoActions.chooseVideoType(videoType)),\n        handleVideoURLChanged: (event) => dispatch(editVideoActions.handleVideoURLChanged(event)),\n        handleVideoFileChanged: (files) => dispatch(editVideoActions.handleVideoFilesChanged(files)),\n        handleVideoFileError: (error, file) => dispatch(editVideoActions.handleVideoFileError(error, file)),\n        cancelEditingCurrentVideo: () => dispatch(editVideoActions.cancelEditingCurrentVideo()),\n        handlePreviousVideoItemClick: (index) => dispatch(editVideoActions.handlePreviousVideoItemClick(index)),\n        handleSaveVideo: () => dispatch(editVideoActions.handleSaveVideo()),\n\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar())\n    }\n};\n\nclass EditVideoDialog extends Component {\n\n    render() {\n\n        const {\n            forwardedRef,\n\n            isMobile,\n            open,\n            user,\n\n            allowVideoUpload,\n            videoTypeSelected,\n\n            previousVideos,\n            videoChosen,\n            videoPreIndex,\n\n            onClose,\n            chooseVideoType,\n            handleVideoURLChanged,\n            handleVideoFileChanged,\n            handleVideoFileError,\n            cancelEditingCurrentVideo,\n            handlePreviousVideoItemClick,\n            handleSaveVideo,\n\n            closeFeedbackSnackbar,\n\n            ...other\n        } = this.props;\n\n        return (\n            <Dialog\n                ref={forwardedRef}\n                open={open}\n                maxWidth=\"sm\"\n                fullWidth\n                fullScreen={isMobile}\n                onClose={onClose}\n                {...other}\n            >\n                <DialogContent style={{ padding: 0 }} >\n                    <Container fluid style={{ padding: 0 }} >\n                        <Row noGutters>\n\n                            <Col xs={12} sm={12} md={12} lg={12}\n                                style={{\n                                    backgroundColor: colors.kick_starter_background_color_1,\n                                    paddingTop: 6,\n                                    paddingBottom: 6,\n                                    paddingLeft: 15,\n                                    paddingRight: 15\n                                }}\n                            >\n                                <FlexView vAlignContent=\"center\">\n                                    <FlexView grow={8} >\n                                        <Typography variant=\"body1\">Upload introduction video</Typography>\n                                    </FlexView>\n\n                                    <FlexView grow={1} hAlignContent=\"right\" >\n                                        <IconButton onClick={onClose} >\n                                            <CloseIcon fontSize=\"small\" />\n                                        </IconButton>\n                                    </FlexView>\n                                </FlexView>\n                            </Col>\n\n                            <Col xs={12} sm={12} md={12} lg={12} >\n                                <Divider />\n                            </Col>\n\n                            <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 18 }} >\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\" style={{ marginBottom: 25 }} >Upload a new video or choose from your previous videos</Typography>\n\n                                    {\n                                        allowVideoUpload\n                                            ?\n                                            <FlexView>\n                                                <Button\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED ? \"contained\" : \"outlined\"}\n                                                    color=\"primary\"\n                                                    className={css(sharedStyles.no_text_transform)}\n                                                    onClick={\n                                                        () => chooseVideoType(\n                                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\n                                                                ?\n                                                                null\n                                                                :\n                                                                VIDEO_UPLOAD_FILE_SELECTED\n                                                        )\n                                                    }\n                                                >\n                                                    {\n                                                        videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\n                                                            ?\n                                                            \"Cancel upload a video\"\n                                                            :\n                                                            \"Upload a video\"\n                                                    }\n                                                </Button>\n                                                <Button\n                                                    variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\n                                                    color=\"primary\"\n                                                    className={css(sharedStyles.no_text_transform)}\n                                                    onClick={\n                                                        () => chooseVideoType(\n                                                            videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\n                                                                ?\n                                                                null\n                                                                :\n                                                                VIDEO_UPLOAD_URL_SELECTED\n                                                        )\n                                                    }\n                                                    style={{ marginLeft: 20 }}\n                                                >\n                                                    {\n                                                        videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\n                                                            ?\n                                                            \"Cancel upload a video URL\"\n                                                            :\n                                                            \"Upload a video URL\"\n                                                    }\n                                                </Button>\n                                            </FlexView>\n                                            :\n                                            <Button\n                                                variant={videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED ? \"contained\" : \"outlined\"}\n                                                color=\"primary\"\n                                                className={css(sharedStyles.no_text_transform)}\n                                                onClick={() => chooseVideoType(VIDEO_UPLOAD_URL_SELECTED)}\n                                            >\n                                                {\n                                                    videoTypeSelected === VIDEO_UPLOAD_URL_SELECTED\n                                                        ?\n                                                        \"Cancel upload a video URL\"\n                                                        :\n                                                        \"Upload a video URL\"\n                                                }\n                                            </Button>\n                                    }\n\n                                    {/** Upload video field (upload file or URL) */}\n                                    {\n                                        !videoTypeSelected\n                                            ?\n                                            null\n                                            :\n                                            videoTypeSelected === VIDEO_UPLOAD_FILE_SELECTED\n                                                ?\n                                                <FlexView column marginTop={20} >\n                                                    <Files\n                                                        className={css(styles.video_drop_zone)}\n                                                        onChange={handleVideoFileChanged}\n                                                        onError={handleVideoFileError}\n                                                        accepts={['video/mp4']}\n                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\n                                                        minFileSize={0}\n                                                        multiple\n                                                        clickable\n                                                        onClick={closeFeedbackSnackbar}\n                                                    >\n                                                        <FlexView vAlignContent=\"center\" hAlignContent=\"center\" >\n                                                            <AddIcon fontSize=\"small\" style={{ marginRight: 8 }} />\n                                                            Upload video\n                                                        </FlexView>\n                                                    </Files>\n                                                </FlexView>\n                                                :\n                                                <TextField\n                                                    name=\"videoChosen\"\n                                                    placeholder=\"Enter your video URL\"\n                                                    variant=\"outlined\"\n                                                    value={\n                                                        !videoChosen\n                                                            ?\n                                                            ''\n                                                            :\n                                                            typeof(videoChosen) === \"string\"\n                                                                ?\n                                                                videoChosen\n                                                                :\n                                                                ''\n                                                    }\n                                                    fullWidth\n                                                    onChange={handleVideoURLChanged}\n                                                    style={{\n                                                        marginTop: 20\n                                                    }}\n                                                />\n                                    }\n\n                                    {/** Preview video */}\n                                    {\n                                        !videoChosen\n                                            ?\n                                            null\n                                            :\n                                            <FlexView marginTop={20} hAlignContent=\"center\" style={{ width: \"100%\" }} >\n                                                <ReactPlayer\n                                                    url={\n                                                        typeof(videoChosen) === \"string\"\n                                                            ?\n                                                            videoChosen\n                                                            :\n                                                            window.URL.createObjectURL(videoChosen)\n                                                    }\n                                                    playing={false}\n                                                    controls={true}\n                                                    width=\"100%\"\n                                                    height={280}\n                                                />\n                                            </FlexView>\n                                    }\n\n                                    {/** Previous/current video status */}\n                                    {\n                                        this.renderSelectedPreviousVideoStatus()\n                                    }\n\n                                    {/** Cancel/Save */}\n                                    {\n                                        !videoChosen\n                                            ?\n                                            null\n                                            :\n                                            <FlexView marginTop={20} hAlignContent=\"right\" >\n                                                <Button\n                                                    size=\"medium\"\n                                                    className={css(sharedStyles.no_text_transform)}\n                                                    variant=\"outlined\"\n                                                    color=\"primary\"\n                                                    onClick={() => cancelEditingCurrentVideo()}\n                                                    style={{ marginRight: 8 }}\n                                                >Cancel\n                                                </Button>\n                                                <Button\n                                                    size=\"medium\"\n                                                    className={css(sharedStyles.no_text_transform)}\n                                                    variant=\"contained\"\n                                                    color=\"primary\"\n                                                    disabled={!videoChosen}\n                                                    onClick={handleSaveVideo}\n                                                    style={{\n                                                        marginLeft: 8\n                                                    }}\n                                                >Save\n                                                </Button>\n                                            </FlexView>\n                                    }\n                                </FlexView>\n                            </Col>\n\n                            {/** Divider */}\n                            <Col xs={12} sm={12} md={12} lg={12} >\n                                <Divider style={{ marginTop: 8 }} />\n                            </Col>\n\n                            {/** Previous videos */}\n                            {\n                                // previous videos set to null --> don't want to display previous videos\n                                !previousVideos\n                                    ?\n                                    null\n                                    :\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 15 }} >\n                                        <Typography variant=\"body1\" color=\"textSecondary\">Your videos</Typography>\n\n                                        <Row noGutters style={{ padding: 12 }} >\n                                            {\n                                                previousVideos\n                                                    .sort((video1, video2) => video2.dateUploaded - video1.dateUploaded)\n                                                    .map((previousVideo, index) => (\n                                                        <Col\n                                                            key={index}\n                                                            xs={6}\n                                                            sm={4}\n                                                            md={4}\n                                                            lg={4}\n                                                            onClick={() => handlePreviousVideoItemClick(index)}\n                                                        >\n                                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ width: \"100%\", padding: 10 }} >\n                                                                <ReactPlayer\n                                                                    url={previousVideo.url}\n                                                                    playing={false}\n                                                                    controls={false}\n                                                                    playsinline={false}\n                                                                    width=\"100%\"\n                                                                    height=\"auto\"\n                                                                    className={css(styles.previous_video_item_selected)}\n                                                                />\n                                                            </FlexView>\n                                                        </Col>\n                                                    ))\n                                            }\n                                        </Row>\n                                    </Col>\n                            }\n                        </Row>\n                    </Container>\n                </DialogContent>\n            </Dialog>\n        )\n    }\n\n    renderSelectedPreviousVideoStatus = () => {\n        const {\n            user,\n            videoPreIndex,\n        } = this.props;\n\n        let msg = '';\n\n        if (videoPreIndex === -1) {\n            return null;\n        }\n\n        // user has no previous videos\n        if (!user.BusinessProfile || (user.BusinessProfile && !user.BusinessProfile.video)) {\n            return null;\n        }\n        // user has previous videos\n        else {\n            // the selected photo is not the current video\n            if (videoPreIndex !== user.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))) {\n                msg = 'This video is a previous introduction video.';\n            }\n            else {\n                msg = 'This video is the current introduction video.';\n            }\n        }\n\n        return (\n            <Typography align=\"center\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 12 }}>{msg}</Typography>\n        );\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(\n    React.forwardRef((props, ref) => <EditVideoDialog {...props} forwardedRef={ref} />)\n);\n\nconst styles = StyleSheet.create({\n\n    video_drop_zone: {\n        paddingTop: 10,\n        paddingBottom: 10,\n        paddingLeft: 30,\n        paddingRight: 30,\n        textAlign: 'center',\n        border: `1px solid ${colors.gray_400}`,\n\n        ':hover': {\n            backgroundColor: colors.gray_100,\n            cursor: 'pointer'\n        }\n    },\n\n    previous_video_item_selected: {\n        ':hover': {\n            border: `4px solid ${colors.primaryColor}`,\n            cursor: 'pointer',\n            opacity: 0.90\n        }\n    }\n});","import React, { Component } from \"react\";\nimport {\n    Typography\n} from \"@material-ui/core\";\nimport FlexView from \"react-flexview\";\nimport { StyleSheet, css } from \"aphrodite\";\nimport * as colors from \"../../values/colors\";\n\nexport default class PageNotFound extends Component {\n    render() {\n        return (\n            <FlexView column hAlignContent=\"center\" marginTop={50} marginLeft=\"10%\" marginRight=\"10%\" >\n                <Typography className={css(styles.error_text)} >404 Error</Typography>\n                <Typography className={css(styles.page_not_found_text)} >Page not found</Typography>\n                <Typography className={css(styles.explain_text)} >We are sorry, the page you requested could not be found.</Typography>\n            </FlexView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    error_text: {\n        fontSize: 65,\n        color: colors.primaryColor,\n        textAlign: 'center'\n    },\n\n    page_not_found_text: {\n        fontSize: 50,\n        fontWeight: 'bold',\n        marginTop: 30,\n        marginBottom: 20,\n        textAlign: 'center'\n    },\n\n    explain_text: {\n        fontSize: 40,\n        color: colors.gray_600,\n        textAlign: 'center'\n    }\n});","import React, {Component} from 'react';\nimport FlexView from 'react-flexview';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport PageNotFound from './PageNotFound';\n\nimport * as colors from '../../values/colors';\n\nexport default class PageNotFoundWhole extends Component {\n    render() {\n        return (\n            <Container fluid style={{ padding: 0 }} >\n                <Row noGutters style={{ backgroundColor: colors.white }} >\n                    <Col xs={12} md={12} lg={12} >\n                        <FlexView height={1} style={{ backgroundColor: colors.gray_300 }} />\n                    </Col>\n                    <Col xs={12} md={12} lg={12} >\n                        <PageNotFound/>\n                    </Col>\n                </Row>\n            </Container>\n        );\n    }\n}","/**\n * Admin interface\n */\nimport User from \"./user\";\n\nexport default interface Admin {\n    id: string;\n    anid: string;\n    email: string;\n    superAdmin: boolean;\n    superGroupAdmin: boolean;\n    type: number;\n    isInvestWest: boolean;\n    dateAdded?: number; // superAdmin doesn't have this field\n}\n\n/**\n * Check if a user is an admin\n *\n * @param user\n */\nexport const isAdmin = (user: User | Admin): Admin | null => {\n    if (\"anid\" in user) {\n        return JSON.parse(JSON.stringify(user));\n    }\n    return null;\n}","import GroupProperties from \"./group_properties\";\n\nexport default interface GroupOfMembership {\n    group: GroupProperties;\n    joinedDate: number;\n    isHomeGroup: boolean;\n    userInGroupStatus: number;\n}\n\nexport const getHomeGroup = (groups: GroupOfMembership[]): GroupOfMembership | null => {\n    const index = groups.findIndex(group => group.isHomeGroup);\n    if (index !== -1) {\n        return groups[index];\n    }\n    return null;\n}","/**\r\n * User interface\r\n *\r\n * \"none\" means this user profile doesn't actually exist\r\n */\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../firebase/databaseConsts\";\r\nimport Admin from \"./admin\";\r\nimport Address from \"./address\";\r\n\r\nexport const UserTitles = [\"Ms.\", \"Mrs.\", \"Miss\", \"Mr.\", \"Mx\", \"Dr.\", \"Prof.\"];\r\nexport const HearAbout = [\"Google\", \"Newsletter\", \"Linkedin\", \"Event\"];\r\n\r\nexport default interface User {\r\n    id: string | \"none\";\r\n    email: string;\r\n    linkedin?: string;\r\n    firstName: string | \"none\";\r\n    lastName: string | \"none\";\r\n    title: string | \"none\";\r\n    discover: string | \"none\";\r\n    profilePicture?: ProfileImage[];\r\n    BusinessProfile?: BusinessProfile;\r\n    type: number;\r\n}\r\n\r\nexport interface BusinessProfile {\r\n    companyName: string;\r\n    companyWebsite: string;\r\n    sector: string;\r\n    logo: ProfileImage[];\r\n    video?: ProfileVideo[];\r\n}\r\n\r\nexport interface ProfileImage {\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport interface ProfileVideo {\r\n    storageID: number;\r\n    dateUploaded: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\nexport const isIssuer = (user: User | Admin) => {\r\n    return user.type === TYPE_ISSUER;\r\n}\r\n\r\nexport const isInvestor = (user: User | Admin) => {\r\n    return user.type === TYPE_INVESTOR;\r\n}\r\n\r\nexport const hasBusinessProfile = (user: User) => {\r\n    return user.BusinessProfile !== undefined;\r\n}\r\n\r\nexport const getProfilePicture = (user: User): string | null => {\r\n    if (!user.profilePicture) {\r\n        return null;\r\n    }\r\n\r\n    const index: number = user.profilePicture.findIndex((profilePicture: ProfileImage) =>\r\n        profilePicture.removed === undefined);\r\n\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return user.profilePicture[index].url;\r\n}","import Admin, {isAdmin} from \"../models/admin\";\nimport GroupOfMembership, {getHomeGroup} from \"../models/group_of_membership\";\nimport {AuthenticationState} from \"../redux-store/reducers/authenticationReducer\";\nimport {ManageGroupUrlState} from \"../redux-store/reducers/manageGroupUrlReducer\";\nimport User, {isInvestor} from \"../models/user\";\n\nexport interface CreateProjectRouteParams {\n    edit?: string;\n    admin?: string;\n    issuer?: string;\n}\n\nexport default class Routes {\n    static baseGroup: string = \"/groups/:groupUserName\";\n\n    static nonGroupFront: string = \"/\";\n    static groupFront: string = `${Routes.baseGroup}`;\n\n    static nonGroupSignIn: string = \"/groups/invest-west/signin\";\n    static groupSignIn: string = `${Routes.baseGroup}/signin`;\n    static superAdminSignIn: string = \"/signin/super-admin\";\n\n    static nonGroupSignUp:string = \"/groups/invest-west/signup\";\n    static groupSignUp: string = `${Routes.baseGroup}/signup/:id?`;\n\n    static nonGroupAdminDashboard: string = \"/admin\";\n    static groupAdminDashboard: string = `${Routes.baseGroup}/admin`;\n\n    static groupIssuerDashboard: string = `${Routes.baseGroup}/dashboard/issuer`;\n\n    static groupInvestorDashboard: string = `${Routes.baseGroup}/dashboard/investor`;\n\n    static nonGroupViewUserProfile: string = \"/view-profile/:userID\";\n    static groupViewUserProfile: string = `${Routes.baseGroup}/view-profile/:userID`;\n\n    static nonGroupEditUserProfile: string = \"/edit-profile/:userID\";\n    static groupEditUserProfile: string = `${Routes.baseGroup}/edit-profile/:userID`;\n\n    static nonGroupCreateOffer: string = \"/create-offer\";\n    static groupCreateOffer: string = `${Routes.baseGroup}/create-offer`;\n\n    static nonGroupViewOffer: string = \"/projects/:projectID\";\n    static groupViewOffer: string = `${Routes.baseGroup}/projects/:projectID`;\n\n    static nonGroupViewPledge: string = \"/pledge\";\n    static groupViewPledge: string = `${Routes.baseGroup}/pledge`;\n\n    static nonGroupViewGroup: string = \"/view-group-details/:viewedGroupUserName\";\n    static groupViewGroup: string = `${Routes.baseGroup}/view-group-details/:viewedGroupUserName`;\n\n    static nonGroupViewResourceDetail: string = \"/resources/:resourceName\";\n    static groupViewResourceDetail: string = `${Routes.baseGroup}/resources/:resourceName`;\n\n    static nonGroupContactUs: string = \"/contact-us\";\n    static groupContactUs: string = `${Routes.baseGroup}/contact-us`;\n\n    static groupHelp: string = `${Routes.baseGroup}/help`;\n\n    static nonGroupTermsOfUse: string = \"/terms-of-use\";\n    static nonGroupPrivacyPolicy: string = \"/privacy-policy\";\n    static nonGroupRiskWarning: string = \"/risk-warning-footer\";\n    static nonGroupCreatePitchTermsAndConditions: string = \"/create-project-terms-and-conditions\";\n    static nonGroupMarketingPreferences: string = \"/marketing-preferences\";\n\n    static nonGroupAuthAction: string = \"/auth/action\";\n\n    static error404: string = \"/error/404\";\n\n    /**\n     * Check if a route is a protected one\n     *\n     * @param route\n     */\n    public static isProtectedRoute = (route: string) => {\n        return route !== Routes.nonGroupFront\n            && route !== Routes.groupFront\n            && route !== Routes.nonGroupSignIn\n            && route !== Routes.groupSignIn\n            && route !== Routes.nonGroupSignUp\n            && route !== Routes.groupSignUp\n            && route !== Routes.nonGroupContactUs\n            && route !== Routes.groupContactUs\n            && route !== Routes.nonGroupPrivacyPolicy\n            && route !== Routes.nonGroupTermsOfUse\n            && route !== Routes.nonGroupRiskWarning\n            && route !== Routes.nonGroupCreatePitchTermsAndConditions\n            && route !== Routes.nonGroupMarketingPreferences\n            && route !== Routes.nonGroupAuthAction\n            && route !== Routes.error404;\n    }\n\n    /**\n     * Check if a route is reserved just for super admin\n     *\n     * @param route\n     */\n    public static isRouteReservedForSuperAdmin = (route: string) => {\n        return route === Routes.nonGroupAdminDashboard\n            || route === Routes.nonGroupViewUserProfile\n            || route === Routes.nonGroupEditUserProfile\n            || route === Routes.nonGroupCreateOffer\n            || route === Routes.nonGroupViewOffer\n            || route === Routes.nonGroupViewPledge\n            || route === Routes.nonGroupViewGroup;\n    }\n\n    /**\n     * Check if a route is dedicated for a group admin\n     *\n     * @param route\n     */\n    public static isGroupAdminRoute = (route: string) => {\n        return route === Routes.groupAdminDashboard;\n    }\n\n    /**\n     * Check if a route is dedicated for an issuer\n     *\n     * @param route\n     */\n    public static isIssuerDashboardRoute = (route: string) => {\n        return route === Routes.groupIssuerDashboard;\n    }\n\n    /**\n     * Check  if a route is dedicated for an investor\n     *\n     * @param route\n     */\n    public static isInvestorDashboardRoute = (route: string) => {\n        return route === Routes.groupInvestorDashboard;\n    }\n\n    /**\n     * Check if a route is a sign in route\n     *\n     * @param route\n     */\n    public static isSignInRoute = (route: string) => {\n        return route === Routes.nonGroupSignIn || route === Routes.groupSignIn || route === Routes.superAdminSignIn;\n    }\n\n    /**\n     * Check if a route is a super admin sign in route\n     *\n     * @param route\n     */\n    public static isSuperAdminSignInRoute = (route: string) => {\n        return route === Routes.superAdminSignIn;\n    }\n\n    /**\n     * Check if a route is a sign up route\n     *\n     * @param route\n     */\n    public static isSignUpRoute = (route: string) => {\n        return route === Routes.nonGroupSignUp || route === Routes.groupSignUp;\n    }\n\n    /**\n     * Check if a route is an error route\n     *\n     * @param route\n     */\n    public static isErrorRoute = (route: string) => {\n        return route === Routes.error404;\n    }\n\n    /**\n     * Check if a route is a system public route\n     *\n     * @param route\n     */\n    public static isSystemPublicRoute = (route: string) => {\n        return route === Routes.nonGroupPrivacyPolicy\n            || route === Routes.nonGroupRiskWarning\n            || route === Routes.nonGroupTermsOfUse\n            || route === Routes.nonGroupCreatePitchTermsAndConditions\n            || route === Routes.nonGroupMarketingPreferences;\n    }\n\n    /**\n     * Construct public route\n     *\n     * @param route\n     */\n    public static constructPublicRoute = (route: \"privacyPolicy\" | \"riskWarning\" | \"termsOfUse\" | \"createPitchTermsAndConditions\" | \"marketingPreferences\") => {\n        switch (route) {\n            case \"privacyPolicy\":\n                return Routes.nonGroupPrivacyPolicy;\n            case \"riskWarning\":\n                return Routes.nonGroupRiskWarning;\n            case \"termsOfUse\":\n                return Routes.nonGroupTermsOfUse;\n            case \"createPitchTermsAndConditions\":\n                return Routes.nonGroupCreatePitchTermsAndConditions;\n            case \"marketingPreferences\":\n                return Routes.nonGroupMarketingPreferences;\n        }\n    }\n\n    /**\n     * Construct home route (navigate to Front page)\n     *\n     * @param routeParams\n     * @param ManageGroupUrlState\n     * @param AuthenticationState\n     */\n    public static constructHomeRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\n                                        AuthenticationState: AuthenticationState) => {\n        let route: string = \"\";\n\n        if (!AuthenticationState.currentUser) {\n            if (!routeParams.groupUserName) {\n                return Routes.nonGroupFront;\n            } else {\n                return Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\n            }\n        }\n\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\n        // an admin MUST use the correct sign in page to sign in\n        if (currentAdmin) {\n            // current admin is a super admin\n            if (currentAdmin.superAdmin) {\n                route = Routes.nonGroupFront;\n            }\n            // current admin is not a super admin\n            else {\n                if (AuthenticationState.groupsOfMembership.length === 1) {\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\n                    route = Routes.groupFront.replace(\":groupUserName\", adminGroup.group.groupUserName);\n                }\n            }\n        }\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\n        else {\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\n            if (routeParams.groupUserName) {\n                if (AuthenticationState.groupsOfMembership\n                    .filter(groupOfMembership =>\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\n                ) {\n                    route = Routes.groupFront.replace(\":groupUserName\", routeParams.groupUserName);\n                } else if (homeGroup) {\n                    route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\n                }\n            } else if (homeGroup) {\n                route = Routes.groupFront.replace(\":groupUserName\", homeGroup.group.groupUserName);\n            }\n        }\n\n        if (!route) {\n            return Routes.nonGroupFront;\n        }\n\n        return route;\n    }\n\n    /**\n     * Construct sign in route (navigate to Sign in page)\n     *\n     * @param routeParams\n     */\n    public static constructSignInRoute = (routeParams: any) => {\n        if (routeParams.groupUserName) {\n            return Routes.groupSignIn.replace(\":groupUserName\", routeParams.groupUserName);\n        } else {\n            return Routes.nonGroupSignIn;\n        }\n    }\n\n    /**\n     * Construct sign up route + with a default value of IW group\n     *\n     * @param groupUserName\n     * @param invitedUserID\n     */\n    public static constructSignUpRoute = (groupUserName: string, invitedUserID?: string) => {\n        if (groupUserName) {\n            return Routes.groupSignUp\n                .replace(\":groupUserName\", groupUserName)\n                .replace(invitedUserID ? \":id?\" : \"/:id?\", invitedUserID ?? \"\");\n        } else {\n            return Routes.nonGroupSignUp;\n        }\n    }\n\n    /**\n     * Construct sign in route (navigate to Sign in page)\n     *\n     * @param routeParams\n     */\n    public static constructContactUsRoute = (routeParams: any) => {\n        if (routeParams.groupUserName) {\n            return Routes.groupContactUs.replace(\":groupUserName\", routeParams.groupUserName);\n        } else {\n            return Routes.nonGroupContactUs;\n        }\n    }\n\n\n    /**\n     * Construct dashboard route (navigate to Dashboard page)\n     *\n     * @param routeParams\n     * @param ManageGroupUrlState\n     * @param AuthenticationState\n     */\n    public static constructDashboardRoute = (routeParams: any, ManageGroupUrlState: ManageGroupUrlState,\n                                             AuthenticationState: AuthenticationState) => {\n        let route: string = \"\";\n\n        if (!AuthenticationState.currentUser) {\n            return Routes.constructSignInRoute(routeParams);\n        }\n\n        const currentAdmin: Admin | null = isAdmin(AuthenticationState.currentUser);\n        // an admin MUST use the correct sign in page to sign in\n        if (currentAdmin) {\n            // current admin is a super admin\n            // --> redirect to super admin dashboard\n            if (currentAdmin.superAdmin) {\n                route = Routes.nonGroupAdminDashboard;\n            }\n                // current admin is not a super admin\n            // --> redirect to group admin dashboard\n            else {\n                if (AuthenticationState.groupsOfMembership.length === 1) {\n                    const adminGroup: GroupOfMembership = AuthenticationState.groupsOfMembership[0];\n                    route = Routes.groupAdminDashboard.replace(\":groupUserName\", adminGroup.group.groupUserName);\n                }\n            }\n        }\n            // an investor or an issuer can use any sign in page (group sign in page) to sign in,\n        // except the Invest West sign in page (with no group parameter) as it is reserved for the super admins only\n        else {\n            const homeGroup: GroupOfMembership | null = getHomeGroup(AuthenticationState.groupsOfMembership);\n            if (routeParams.groupUserName) {\n                if (AuthenticationState.groupsOfMembership\n                    .filter(groupOfMembership =>\n                        groupOfMembership.group.groupUserName === routeParams.groupUserName).length > 0\n                ) {\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", routeParams.groupUserName);\n                    } else {\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", routeParams.groupUserName);\n                    }\n                } else if (homeGroup) {\n                    if (isInvestor(AuthenticationState.currentUser as User)) {\n                        route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\n                    } else {\n                        route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\n                    }\n                }\n            } else if (homeGroup) {\n                if (isInvestor(AuthenticationState.currentUser as User)) {\n                    route = Routes.groupInvestorDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\n                } else {\n                    route = Routes.groupIssuerDashboard.replace(\":groupUserName\", homeGroup.group.groupUserName);\n                }\n            }\n        }\n\n        if (route === \"\") {\n            return Routes.constructSignInRoute(routeParams);\n        }\n        route += \"?tab=Home\";\n        return route;\n    }\n\n    /**\n     * Construct view project (offer) route\n     *\n     * @param groupUserName\n     * @param projectID\n     */\n    public static constructProjectDetailRoute = (groupUserName: string | null, projectID: string) => {\n        let route;\n        if (groupUserName) {\n            route = Routes.groupViewOffer.replace(\":groupUserName\", groupUserName);\n        } else {\n            route = Routes.nonGroupViewOffer;\n        }\n        route = route.replace(\":projectID\", projectID);\n        return route;\n    }\n\n    /**\n     * Construct create project (offer) route\n     *\n     * @param groupUserName\n     * @param params\n     */\n    public static constructCreateProjectRoute = (groupUserName: string | null, params?: CreateProjectRouteParams) => {\n        let route;\n        if (groupUserName) {\n            route = Routes.groupCreateOffer.replace(\":groupUserName\", groupUserName);\n        } else {\n            route = Routes.nonGroupCreateOffer;\n        }\n\n        if (params !== undefined) {\n            // edit an offer\n            if (params.edit) {\n                route += `?edit=${params.edit}`;\n            }\n            // group admin creates an offer on behalf of an issuer\n            else if (params.admin && params.issuer) {\n                route += `?admin=${params.admin}&issuer=${params.issuer}`;\n            }\n        }\n\n        return route;\n    }\n\n    /**\n     * Construct view group route\n     *\n     * @param groupUserName\n     * @param viewedGroupUserName\n     */\n    public static constructGroupDetailRoute = (groupUserName: string | null, viewedGroupUserName: string) => {\n        let route;\n        if (groupUserName) {\n            route = Routes.groupViewGroup.replace(\":groupUserName\", groupUserName);\n        } else {\n            route = Routes.nonGroupViewGroup;\n        }\n        route = route.replace(\":viewedGroupUserName\", viewedGroupUserName);\n        return route;\n    }\n\n    /**\n     * Construct view resource detail route\n     *\n     * @param groupUserName\n     * @param resourceName\n     */\n    public static constructViewResourceDetailRoute = (groupUserName: string | null, resourceName: string) => {\n        let route;\n        if (groupUserName) {\n            route = Routes.groupViewResourceDetail\n                .replace(\":groupUserName\", groupUserName)\n                .replace(\":resourceName\", resourceName);\n        } else {\n            route = Routes.nonGroupViewResourceDetail.replace(\":resourceName\", resourceName);\n        }\n        return route;\n    }\n}\n\n\n//------------------- OLD ROUTES ---------------------------------------------------------------------------------------\nexport const ORIGINAL_WEB_URL = \"https://investwest.online\";\n\n// angel network path INCLUDING Invest West angel network\nexport const GROUP_PATH = \"/groups/:groupUserName\";\n\n// front with angel network logo\nexport const FRONT = GROUP_PATH;\n// front with Invest West page --> Only for Invest West super admins\nexport const FRONT_INVEST_WEST_SUPER = \"/\";\n\n// sign in with angel network logo --> only allow admins and users belong to this angel network to login\nexport const SIGN_IN = `${GROUP_PATH}/signin`;\n// sign in with Invest West logo --> only allow Invest West super admins to login\nexport const SIGN_IN_INVEST_WEST_SUPER = \"/signin\";\n\n// admin dashboard of an angel network --> only allow admins of the angel network to interact\nexport const ADMIN = `${GROUP_PATH}/admin`;\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\nexport const ADMIN_INVEST_WEST_SUPER = \"/admin\";\n\n// issuer dashboard of an angel network --> only allow issuers of the angel network to interact\nexport const DASHBOARD_ISSUER = `${GROUP_PATH}/dashboard/issuer`;\n// issuer dashboard of Invest West --> only allow Invest West super admins to interact\nexport const DASHBOARD_ISSUER_INVEST_WEST_SUPER = \"/dashboard/issuer\";\n\n// investor dashboard of an angel network --> only allow investors of the angel network to interact\nexport const DASHBOARD_INVESTOR = `${GROUP_PATH}/dashboard/investor`;\n// investor dashboard of Invest West --> only allow Invest West super admins to interact\nexport const DASHBOARD_INVESTOR_INVEST_WEST_SUPER = \"/dashboard/investor\";\n\n// sign up page for an angel network --> only users who have been invited by this angel network can see\nexport const SIGN_UP = `${GROUP_PATH}/signup/:id`;\n// sign up page for Invest West --> only Invest West super admins can interact\nexport const SIGN_UP_INVEST_WEST_SUPER = \"/signup/:id\";\n\n// view a user's profile while logged in under an angel network\nexport const USER_PROFILE = `${GROUP_PATH}/view-profile/:userID`;\n// view a user's profile while logged in under Invest West super admins\nexport const USER_PROFILE_INVEST_WEST_SUPER = \"/view-profile/:userID\";\n\n// edit a user's profile for group admins\nexport const EDIT_USER_PROFILE = `${GROUP_PATH}/edit-profile/:userID`;\n// edit a user's profile for super admins\nexport const EDIT_USER_PROFILE_INVEST_WEST_SUPER = \"/edit-profile/:userID\";\n\n// pledge under an angel network\nexport const PLEDGE = `${GROUP_PATH}/pledge`;\n// pledge under Invest West Invest West super admins\nexport const PLEDGE_INVEST_WEST_SUPER = \"/pledge\";\n\n// create an offer under an angel network\nexport const CREATE_OFFER = `${GROUP_PATH}/create-offer`;\nexport const EDIT_OFFER = `${CREATE_OFFER}?edit=:projectID`;\nexport const GROUP_ADMIN_CREATE_OFFER_ON_BEHALF_OF_ISSUER = `${CREATE_OFFER}?admin=:adminID&issuer=:issuerID`;\n// create an offer under Invest West super admins\nexport const CREATE_OFFER_INVEST_WEST_SUPER = \"/create-offer\";\nexport const EDIT_OFFER_INVEST_WEST_SUPER = `${CREATE_OFFER_INVEST_WEST_SUPER}?edit=:projectID`;\n\n// view offer's details under an angel network\nexport const PROJECT_DETAILS = `${GROUP_PATH}/projects/:projectID`;\n// view offer's details under Invest West super admins\nexport const PROJECT_DETAILS_INVEST_WEST_SUPER = \"/projects/:projectID\";\n\nexport const VIEW_GROUP_DETAILS = `${GROUP_PATH}/view-group-details/:groupID`;\nexport const VIEW_GROUP_DETAILS_INVEST_WEST_SUPER = \"/view-group-details/:groupID\";\n\nexport const CONTACT_US = `${GROUP_PATH}/contact-us`;\nexport const CONTACT_US_INVEST_WEST_SUPER = \"/contact-us\";\n\nexport const CONTACT_US_2 = `${GROUP_PATH}/contact-us-2`;\nexport const CONTACT_US_INVEST_WEST_SUPER_2 = \"/contact-us-2\";\n\nexport const HELP = `${GROUP_PATH}/help`;\nexport const HELP_INVEST_WEST_SUPER = \"/help\";\n\nexport const TERMS_OF_USE = \"/terms-of-use\";\nexport const PRIVACY_POLICY = \"/privacy-policy\";\nexport const RISK_WARNING = \"/risk-warning-footer\";\nexport const CREATE_PITCH_TERMS_AND_CONDITIONS = \"/create-project-terms-and-conditions\";\nexport const ABOUT_US = \"/about-us\";\nexport const MARKETING_PREFERENCES = \"/marketing-preferences\";\n\nexport const ERROR_404 = \"/error/404\";","import axios, {AxiosError, AxiosRequestConfig, AxiosResponse, Method} from \"axios\";\r\nimport firebase from \"../firebase/firebaseApp\";\r\nimport HttpResponseError from \"./ResponseError\";\r\n\r\n/**\r\n * Api routes\r\n */\r\n\r\nexport class ApiRoutes {\r\n    static systemAttributesBaseRoute = \"/system-attributes\";\r\n    static retrieveSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/retrieve\";\r\n    static updateSystemAttributesRoute = ApiRoutes.systemAttributesBaseRoute + \"/update\";\r\n\r\n    static authBaseRoute = \"/auth\";\r\n    static requestResetPasswordRoute = ApiRoutes.authBaseRoute + \"/request-reset-password\";\r\n    static verifyAuthRoute = ApiRoutes.authBaseRoute + \"/verify\";\r\n    \r\n\r\n    static emailBaseRoute = \"/email\";\r\n    static sendEmailRoute = ApiRoutes.emailBaseRoute + \"/send\";\r\n\r\n    static usersBaseRoute = \"/users\";\r\n    static createUser = ApiRoutes.usersBaseRoute + \"/create\";\r\n    static retrieveUser = ApiRoutes.usersBaseRoute + \"/:uid/retrieve\";\r\n    static retrieveInvitedUser = ApiRoutes.usersBaseRoute + \"/:invitedUserID/retrieve-invited\";\r\n    static updateUser = ApiRoutes.usersBaseRoute + \"/update\";\r\n    static listGroupsOfMembership = ApiRoutes.usersBaseRoute + \"/:uid/groups-of-membership\";\r\n    static exportUsersCsvRoute = ApiRoutes.usersBaseRoute + \"/export\";\r\n\r\n    static groupsBaseRoute = \"/groups\";\r\n    static listGroups = ApiRoutes.groupsBaseRoute + \"/list\";\r\n    static retrieveGroup = ApiRoutes.groupsBaseRoute + \"/:groupUserName\";\r\n    static addMembersToGroup = ApiRoutes.groupsBaseRoute + \"/:group/add-members\";\r\n    static listGroupMembers = ApiRoutes.groupsBaseRoute + \"/:group/list-members\";\r\n\r\n    static projectsBaseRoute = \"/projects\";\r\n    static listProjectsRoute = ApiRoutes.projectsBaseRoute + \"/list\";\r\n    static sendProjectBackToIssuerRoute = ApiRoutes.projectsBaseRoute + \"/send-back-to-issuer\";\r\n    static exportProjectsToCsvRoute = ApiRoutes.projectsBaseRoute + \"/export\";\r\n\r\n    static groupAdminsBaseRoute = \"/group-admins\";\r\n    static addGroupAdminRoute = ApiRoutes.groupAdminsBaseRoute + \"/add\";\r\n\r\n    static accessRequestsBaseRoute = \"/access-requests\";\r\n    static listAccessRequestsRoute = ApiRoutes.accessRequestsBaseRoute + \"/list\";\r\n    static createAccessRequestRoute = ApiRoutes.accessRequestsBaseRoute + \"/create\";\r\n    static removeAccessRequestRoute = ApiRoutes.createAccessRequestRoute + \"/remove\";\r\n\r\n    static fileBaseRoute = \"/file\";\r\n    static uploadSingleFileRoute = ApiRoutes.fileBaseRoute + \"/upload-single\";\r\n\r\n    static testRoute = \"/test\";\r\n}\r\n\r\nexport interface RequestOptionalParams {\r\n    requestBody: any | null;\r\n    queryParameters: any | null;\r\n}\r\n\r\n/**\r\n * Api class\r\n */\r\nexport default class Api {\r\n    baseUrl: string | undefined = process.env.REACT_APP_BACK_END_BASE_URL;\r\n\r\n    /**\r\n     * Build request URL\r\n     *\r\n     * @param endPoint\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private buildUrl(endPoint: string, queryParameters: any): string {\r\n        let fullUrl = this.baseUrl + endPoint + Api.buildQueryParameters(queryParameters);\r\n        return encodeURI(fullUrl);\r\n    }\r\n\r\n    /**\r\n     * Build query parameters\r\n     *\r\n     * @param queryParameters\r\n     * @private\r\n     */\r\n    private static buildQueryParameters(queryParameters: any): string {\r\n        if (queryParameters === null) {\r\n            return \"\";\r\n        }\r\n\r\n        let result: string = \"?\";\r\n\r\n        for (let key in queryParameters) {\r\n            if (queryParameters.hasOwnProperty(key)) {\r\n                let value = queryParameters[key];\r\n                if (value !== undefined && value !== null) {\r\n                    if (!result.endsWith(\"?\")) {\r\n                        result += \"&\";\r\n                    }\r\n                    result += `${key}=${value.toString()}`;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.endsWith(\"?\")) {\r\n            result = \"\";\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Build form data\r\n     *\r\n     * @param data\r\n     * @private\r\n     */\r\n    private static buildFormData(data: any): FormData | null {\r\n        if (data === null) {\r\n            return null;\r\n        }\r\n\r\n        const formData = new FormData();\r\n\r\n        for (let key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                let value = data[key];\r\n                if (value !== undefined && value !== null) {\r\n                    formData.append(key, value);\r\n                }\r\n            }\r\n        }\r\n\r\n        return formData;\r\n    }\r\n\r\n    /**\r\n     * Send request\r\n     *\r\n     * @param requestType\r\n     * @param endPoint\r\n     * @param optionalParams\r\n     * @param formDataRequest\r\n     */\r\n    public async request(requestType: Method,\r\n                         endPoint: string,\r\n                         optionalParams?: RequestOptionalParams | null,\r\n                         formDataRequest?: boolean\r\n    ): Promise<AxiosResponse> {\r\n        if (endPoint === null || endPoint.length === 0) {\r\n            throw new Error(\"Empty url\");\r\n        }\r\n\r\n        const url: string = this.buildUrl(\r\n            endPoint,\r\n            optionalParams !== undefined && optionalParams !== null && optionalParams.queryParameters !== null\r\n                ? optionalParams.queryParameters\r\n                : null\r\n        );\r\n\r\n        let currentUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n        try {\r\n            let idToken: string | null = null;\r\n\r\n            if (currentUser) {\r\n                idToken = await currentUser.getIdToken();\r\n            }\r\n\r\n            let bodyData: any;\r\n\r\n            if (formDataRequest !== undefined && formDataRequest) {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? Api.buildFormData(optionalParams.requestBody)\r\n                    : null;\r\n            }\r\n            else {\r\n                bodyData = optionalParams !== undefined && optionalParams !== null\r\n                && optionalParams.requestBody !== null\r\n                    ? optionalParams.requestBody\r\n                    : null;\r\n            }\r\n\r\n            const config: AxiosRequestConfig = {\r\n                method: requestType,\r\n                url: url,\r\n                data: bodyData,\r\n                timeout: 20000 // timeout in 20 seconds\r\n            };\r\n\r\n            if (idToken) {\r\n                config.headers = {\r\n                    \"Authorization\": idToken\r\n                }\r\n\r\n                if (formDataRequest !== undefined && formDataRequest) {\r\n                    config.headers = {\r\n                        ...config.headers,\r\n                        // @ts-ignore\r\n                        \"Content-Type\": `multipart/form-data; boundary=${bodyData._boundary}`\r\n                    }\r\n                }\r\n            }\r\n\r\n            let response: AxiosResponse = await axios.request(config);\r\n\r\n            return this.parseResponse(response);\r\n        } catch (exception) {\r\n            const error = Api.parseError(exception);\r\n            console.log(`Failed to request. Status code: ${error.statusCode}. Cause: ${error.message}`);\r\n            throw new Error(error.statusCode + \" \" + error.message);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parse response\r\n     *\r\n     * @param response\r\n     * @private\r\n     */\r\n    private parseResponse(response: AxiosResponse) {\r\n        if (response === null) {\r\n            throw new Error(\"Null response.\");\r\n        }\r\n\r\n        if (this.isRequestSuccessful(response)) {\r\n            return response;\r\n        }\r\n\r\n        throw new Error(\"Response error.\");\r\n    }\r\n\r\n    /**\r\n     * Parse error\r\n     *\r\n     * @param error\r\n     * @private\r\n     */\r\n    private static parseError(error: AxiosError) {\r\n        let httpError: HttpResponseError = {\r\n            statusCode: -1,\r\n            message: \"\"\r\n        };\r\n\r\n        // client received an error response (5xx, 4xx) form the server\r\n        if (error.response) {\r\n            if (error.response.data) {\r\n                httpError = {\r\n                    statusCode: error.response.data.code,\r\n                    message: error.response.data.detail ?? error.response.data.message\r\n                }\r\n            }\r\n        }\r\n        // client never received a response, or request never left\r\n        else if (error.request) {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Server is not responding.\"\r\n            }\r\n        }\r\n        // anything else\r\n        else {\r\n            httpError = {\r\n                statusCode: -1,\r\n                message: \"Unexpected error.\"\r\n            }\r\n        }\r\n\r\n        return httpError;\r\n    }\r\n\r\n    /**\r\n     * Check if a request is successful by checking the response code\r\n     *\r\n     * @param response\r\n     */\r\n    public isRequestSuccessful(response: AxiosResponse): boolean {\r\n        return response != null && response.status >= 200 && response.status < 300;\r\n    }\r\n}","import User from \"../../models/user\";\r\nimport Admin from \"../../models/admin\";\r\nimport {\r\n    AuthenticationAction,\r\n    AuthenticationEvents,\r\n    CompleteAuthenticationAction,\r\n    UpdateUserChangesAction\r\n} from \"../actions/authenticationActions\";\r\nimport Error from \"../../models/error\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\n\r\nexport enum AuthenticationStatus {\r\n    NotInitialized,\r\n    Authenticating,\r\n    Authenticated,\r\n    Unauthenticated\r\n}\r\n\r\nexport interface AuthenticationState {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    error?: Error\r\n}\r\n\r\nconst initialState: AuthenticationState = {\r\n    status: AuthenticationStatus.NotInitialized,\r\n    currentUser: null,\r\n    groupsOfMembership: []\r\n}\r\n\r\nexport const authIsNotInitialized = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.NotInitialized;\r\n}\r\n\r\nexport const isAuthenticating = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticating;\r\n}\r\n\r\nexport const successfullyAuthenticated = (state: AuthenticationState) => {\r\n    return state.status === AuthenticationStatus.Authenticated && state.currentUser && state.error === undefined;\r\n}\r\n\r\nexport const hasAuthenticationError = (state: AuthenticationState) => {\r\n    return state.error !== undefined;\r\n}\r\n\r\nconst authenticationReducer = (state = initialState, action: AuthenticationAction) => {\r\n    switch (action.type) {\r\n        case AuthenticationEvents.StartAuthenticating:\r\n            return {\r\n                ...initialState,\r\n                status: AuthenticationStatus.Authenticating\r\n            }\r\n        case AuthenticationEvents.CompleteAuthentication:\r\n            const completeAuthenticationAction: CompleteAuthenticationAction = (action as CompleteAuthenticationAction);\r\n            if (completeAuthenticationAction.status === AuthenticationStatus.Authenticated) {\r\n                console.log('Successfully logged in!'); // Add this line\r\n            }          \r\n            return {\r\n                ...state,\r\n                status: completeAuthenticationAction.status,\r\n                currentUser: completeAuthenticationAction.currentUser\r\n                    ? JSON.parse(JSON.stringify(completeAuthenticationAction.currentUser)) : state.currentUser,\r\n                groupsOfMembership: JSON.parse(JSON.stringify(completeAuthenticationAction.groupsOfMembership)),\r\n                error: completeAuthenticationAction.error\r\n            }\r\n        case AuthenticationEvents.SignOut:\r\n            return {\r\n                ...state,\r\n                status: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? AuthenticationStatus.Unauthenticated\r\n                    : state.status,\r\n                currentUser: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? null\r\n                    : state.currentUser,\r\n                groupsOfMembership: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? []\r\n                    : state.groupsOfMembership,\r\n                error: state.status === AuthenticationStatus.NotInitialized\r\n                || state.status === AuthenticationStatus.Authenticated\r\n                    ? undefined\r\n                    : state.error\r\n            }\r\n        case AuthenticationEvents.UpdateUserChanges:\r\n            const updateUserChangesAction: UpdateUserChangesAction = action as UpdateUserChangesAction;\r\n            return {\r\n                ...state,\r\n                currentUser: updateUserChangesAction.updatedUser\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authenticationReducer;","/**\r\n * This file contains all of the utility functions relating to Firebase database.\r\n */\r\n\r\nimport firebase from \"./firebaseApp\";\r\n\r\nimport * as ROUTES from \"../router/routes\";\r\nimport * as DB_CONST from \"./databaseConsts\";\r\nimport * as utils from \"../utils/utils\";\r\nimport Api, {ApiRoutes} from \"../api/Api\";\r\n\r\n/**\r\n * This function is used to track activities of a user\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectLocation\r\n * @param interactedObjectID\r\n * @param activitySummary\r\n * @param action\r\n * @param value\r\n */\r\nexport const trackActivity = (\r\n    {\r\n        userID, // user id (note that this id is the official user id for group admins and super admins)\r\n        activityType,\r\n        interactedObjectLocation = null, // main node in database (when changing password, this is null)\r\n        interactedObjectID = null, // object's id (when changing password, this is null)\r\n        activitySummary, // brief summary of the activity\r\n        action = null,\r\n        value = null // optional --> track changes of a node if it does.\r\n        // Format:\r\n        //  + value: {before: node_before_changed, after: node_after_changed} --> if there are changes\r\n        //  + value: node_object --> if the node has just been created\r\n    }\r\n) => {\r\n    const id = firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .push()\r\n        .key;\r\n\r\n    firebase\r\n        .database()\r\n        .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\r\n        .child(id)\r\n        .set({\r\n            id,\r\n            userID,\r\n            activityType,\r\n            interactedObjectLocation,\r\n            interactedObjectID,\r\n            activitySummary,\r\n            action,\r\n            value,\r\n            time: utils.getCurrentDate()\r\n        })\r\n        .then(() => {\r\n            // do nothing\r\n        })\r\n        .catch(error => {\r\n            // handle error\r\n        });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_ACTIVITIES_BY_USER = 'FETCH_ACTIVITIES_BY_USER';\r\nexport const FETCH_ACTIVITIES_BY_TYPE = 'FETCH_ACTIVITIES_BY_TYPE';\r\nexport const FETCH_ACTIVITIES_BY_INTERACTED_OBJECT = 'FETCH_ACTIVITIES_BY_INTERACTED_OBJECT';\r\n\r\n/**\r\n * Fetch activities\r\n *\r\n * @param userID\r\n * @param activityType\r\n * @param interactedObjectID\r\n * @param shouldLoadUserProfile\r\n * @param fetchBy\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchActivitiesBy = async (\r\n    {\r\n        userID = null,\r\n        activityType = null,\r\n        interactedObjectID = null,\r\n        // this should only be set to True when loading activities for a group\r\n        // as a group has multiple group admins and each of them can perform different activities\r\n        shouldLoadUserProfile = false,\r\n        fetchBy = null // fetch mode\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (!fetchBy) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activitiesRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\r\n\r\n        switch (fetchBy) {\r\n            case FETCH_ACTIVITIES_BY_USER: {\r\n                if (!userID) {\r\n                    return reject(\"Invalid call. userID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('userID')\r\n                    .equalTo(userID);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_TYPE: {\r\n                if (!activityType) {\r\n                    return reject(\"Invalid call. activityType is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('activityType')\r\n                    .equalTo(activityType);\r\n\r\n                break;\r\n            }\r\n            case FETCH_ACTIVITIES_BY_INTERACTED_OBJECT: {\r\n                if (!interactedObjectID) {\r\n                    return reject(\"Invalid call. interactedObjectID is null.\");\r\n                }\r\n\r\n                activitiesRef = activitiesRef\r\n                    .orderByChild('interactedObjectID')\r\n                    .equalTo(interactedObjectID);\r\n\r\n                break;\r\n            }\r\n            default:\r\n                return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        let activities = [];\r\n\r\n        activitiesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(activities);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    activities.push(snapshot.val());\r\n                });\r\n\r\n                if (shouldLoadUserProfile) {\r\n                    Promise.all(\r\n                        activities.map(activity => {\r\n                            return new Promise((resolve, reject) => {\r\n                                getUserBasedOnID(activity.userID)\r\n                                    .then(user => {\r\n                                        activity.userProfile = user;\r\n                                        return resolve(activities);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        // handle error\r\n                                        return reject(error);\r\n                                    });\r\n                            });\r\n                        })\r\n                    ).then(() => {\r\n                        return resolve(activities);\r\n                    }).catch(error => {\r\n                        // handle error\r\n                        return reject(error);\r\n                    });\r\n                } else {\r\n                    return resolve(activities);\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_GROUP_INVITATION = \"Invited %group% to Invest West platform.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION = \"Invited %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION = \"Resent invitation email to %userName% to %group% as an %userType%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH = \"Published %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH = \"Rejected %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE = \"Moved %project% to pledge phase.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH = \"Closed %project% pitch.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE = \"Published %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE = \"Rejected %project% pledge.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE = \"Created pledge for %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT = \"Edited %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT = \"Created %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM = \"Clicked to view %group%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_GROUP_DETAILS = \"Viewed %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_NEW_PLEDGE = \"Made new pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_PLEDGE = \"Edited pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CANCELLED_PLEDGE = \"Cancelled pledge for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_PROJECT_ITEM = \"Clicked to view %project%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS = \"Viewed %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT = \"Made a vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT = \"Edited vote for %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT = \"Commented in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT = \"Edited comment in %project% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE = \"Uploaded business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE = \"Updated business profile.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS = \"Updated personal details.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE = \"Updated business profile of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS = \"Updated personal details of %user%.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM = \"Created \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD = \"Created \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD = \"Replied to \\\"%thread%\\\" thread in \\\"%forum%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD = \"Changed password.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY = \"Made an enquiry to %group% group.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY = \"Closed %project% temporarily.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN = \"Opened %project% again.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN = \"Added %groupAdminEmail% as a group admin.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM = \"Deleted \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM = \"Edited \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD = \"Edited \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD = \"Deleted \\\"%threadName%\\\" thread in \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY = \"Edited reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY = \"Deleted reply in \\\"%threadName%\\\" thread of \\\"%forumName%\\\" forum.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT = \"Replied to a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT = \"Deleted a reply of a comment in %projectName% offer.\";\r\nexport const ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT = \"Edited a reply of a comment in %projectName% offer.\";\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Send a notification\r\n *\r\n * @param title\r\n * @param message\r\n * @param userID\r\n * @param action\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const sendNotification = async ({title = \"\", message = \"\", userID = \"\", action = \"\"}) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const id = db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .push()\r\n            .key;\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .child(id)\r\n            .set({\r\n                id,\r\n                title,\r\n                message,\r\n                userID,\r\n                action,\r\n                date: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(\"Failed to send notification.\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Log enquiries from users\r\n *\r\n * @param enquiry\r\n */\r\nexport const logContactUsEnquiry = (\r\n    {\r\n        userID = null, // anonymous user --> userID = null, otherwise, not null\r\n        anid = null, // null = Invest West, not null = group\r\n        email,\r\n        name,\r\n        phone = null,\r\n        subject,\r\n        description\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        const dbRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.CONTACT_US_ENQUIRIES_CHILD);\r\n\r\n        const enquiryID = dbRef.push().key;\r\n\r\n        dbRef\r\n            .child(enquiryID)\r\n            .set({\r\n                userID,\r\n                groupContacted: anid,\r\n                email,\r\n                name,\r\n                phone,\r\n                subject,\r\n                description,\r\n                id: enquiryID,\r\n                time: utils.getCurrentDate()\r\n            })\r\n            .then(() => {\r\n                return resolve(enquiryID);\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all admins of a group based on groupID (anid)\r\n *\r\n * @param groupID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupAdminsBasedOnGroupID = async (groupID) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let groupAdmins = [];\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('anid')\r\n            .equalTo(groupID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupAdmins);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    groupAdmins.push(snapshot.val());\r\n                });\r\n\r\n                return resolve(groupAdmins);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to check if an email has already been used.\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const doesUserExist = async (email) => {\r\n    return new Promise((resolve, reject) => {\r\n        const firebaseDB = firebase.database();\r\n        // check admin first\r\n        firebaseDB\r\n            .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n                if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                    let admin = null;\r\n                    snapshots.forEach(snapshot => {\r\n                        admin = snapshot.val();\r\n                    });\r\n\r\n                    // admin exists\r\n                    return resolve({\r\n                        userExists: true,\r\n                        userIsAnAdmin: true,\r\n                        admin: admin\r\n                    });\r\n                }\r\n\r\n                firebaseDB\r\n                    .ref(DB_CONST.USERS_CHILD)\r\n                    .orderByChild('email')\r\n                    .equalTo(email.toLowerCase())\r\n                    .once('value', snapshots => {\r\n                        if (snapshots && snapshots.val() && snapshots.numChildren() > 0) {\r\n\r\n                            let user = null;\r\n                            snapshots.forEach(snapshot => {\r\n                                user = snapshot.val();\r\n                            });\r\n\r\n                            // normal user exists\r\n                            return resolve({\r\n                                userExists: true,\r\n                                userIsAnAdmin: false,\r\n                                user: user\r\n                            });\r\n                        } else {\r\n                            // user does not exist\r\n                            return resolve({\r\n                                userExists: false\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load all the groups that the user is in\r\n *\r\n * @param userID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadGroupsUserIsIn = async (userID) => {\r\n\r\n    let groupsUserIsIn = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // search through the InvitedUsers node\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('officialUserID')\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(groupsUserIsIn);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    // search for invited user with the officialID matched\r\n                    if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                        groupsUserIsIn.push({\r\n                            invitedUser: invitedUser,\r\n                            anid: invitedUser.invitedBy,\r\n                            userInGroupStatus: invitedUser.status\r\n                        });\r\n                    }\r\n                });\r\n\r\n                Promise.all(groupsUserIsIn.map(groupUserIsIn => {\r\n                    return new Promise((resolve, reject) => {\r\n                        firebase\r\n                            .database()\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(groupUserIsIn.anid)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\r\n                                groupUserIsIn.groupDetails = angelNetwork;\r\n                                return resolve(groupUserIsIn);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(groupsUserIsIn);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on anid\r\n *\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnANID = async (anid) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists()) {\r\n                    return reject(\"Angel network not found\");\r\n                }\r\n\r\n                return resolve(snapshot.val());\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load angel network based on groupUserName\r\n *\r\n * @param groupUserName\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworkBasedOnGroupUserName = async (groupUserName) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .orderByChild('groupUserName')\r\n            .equalTo(groupUserName)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No group found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    return resolve(snapshot.val());\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const SEARCH_ANGEL_NETWORKS_NONE = 0;\r\nexport const SEARCH_ANGEL_NETWORKS_BY_NAME = 1;\r\n/**\r\n * Load angel networks\r\n *\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworks = async ({name = null, email = null}, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (mode !== SEARCH_ANGEL_NETWORKS_NONE\r\n            && mode !== SEARCH_ANGEL_NETWORKS_BY_NAME\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        let angelNetworks = [];\r\n\r\n        let angelNetworksRef;\r\n\r\n        if (mode === SEARCH_ANGEL_NETWORKS_NONE) {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\r\n        } else {\r\n            angelNetworksRef = firebase\r\n                .database()\r\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                .orderByChild('displayNameLower',)\r\n                .startAt(name.toLowerCase());\r\n        }\r\n\r\n        angelNetworksRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworks);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const angelNetwork = snapshot.val();\r\n                    if (mode === SEARCH_ANGEL_NETWORKS_BY_NAME) {\r\n                        if (angelNetwork.displayNameLower.includes(name.toLowerCase())) {\r\n                            angelNetworks.push(snapshot.val());\r\n                        }\r\n                    } else {\r\n                        angelNetworks.push(snapshot.val());\r\n                    }\r\n                });\r\n\r\n                return resolve(angelNetworks);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the angel networks that invited the user with the specified email\r\n *\r\n * @param email\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadAngelNetworksInvitedAUser = async (email) => {\r\n\r\n    const db = firebase.database();\r\n    let angelNetworksInvitedUser = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild('email')\r\n            .equalTo(email.toLowerCase())\r\n            .once('value', snapshots => {\r\n\r\n                // user has not been invited by any angel networks\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(angelNetworksInvitedUser);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    const invitedUser = snapshot.val();\r\n                    angelNetworksInvitedUser.push({\r\n                        Invitor: invitedUser.invitedBy,\r\n                        Invitee: invitedUser\r\n                    });\r\n                });\r\n\r\n                Promise.all(angelNetworksInvitedUser.map(angelNetworkInvitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(angelNetworkInvitedUser.Invitor)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                angelNetworkInvitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(angelNetworksInvitedUser);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(angelNetworksInvitedUser);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to remove a join request\r\n *\r\n * @param requestID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const removeAJoinRequest = async (requestID) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\r\n            .child(requestID)\r\n            .remove()\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user object from firebase realtime db.\r\n *\r\n * Parameter:\r\n *  - type: 0 - retrieve a normal user (issuer, investor), 1 - retrieve an admin\r\n *  - firebaseUser\r\n *\r\n * @param {*} type\r\n * @param {*} userID\r\n */\r\nexport const getUser = async (type, userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        // if type === 0, a normal user (issuer, investor) will be returned \r\n        if (type === 0) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    //console.log(\"User snapshot value:\", snapshot.val());\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n        // if type === 1, an admin will be returned\r\n        else if (type === 1) {\r\n            firebase\r\n                .database()\r\n                .ref(DB_CONST.ADMINISTRATORS_CHILD)\r\n                .child(userID)\r\n                .once('value', snapshot => {\r\n                    //console.log(\"Admin snapshot value:\", snapshot.val());\r\n                    // if the user's node does not exist\r\n                    if (!snapshot || !snapshot.exists()) {\r\n                        return reject(\"User not found\");\r\n                    }\r\n\r\n                    // return a user object from firebase realtime db\r\n                    return resolve(snapshot.val());\r\n                })\r\n                .catch(error => {\r\n                    return reject(\"User not found\");\r\n                });\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will return a user's profile based on the uid provided.\r\n *\r\n * @param {*} uid\r\n */\r\nexport const getUserBasedOnID = async (uid) => {\r\n    return new Promise((resolve, reject) => {\r\n        if (!uid) {\r\n            console.warn(\"Null id provided\");\r\n            return resolve(null);\r\n        }\r\n\r\n        // get normal user\r\n        getUser(0, uid)\r\n            .then(user => {\r\n                return resolve(user);\r\n            })\r\n            .catch(error => {\r\n                // get admin\r\n                getUser(1, uid)\r\n                    .then(admin => {\r\n                        // admin is a group admin\r\n                        if (!admin.superAdmin) {\r\n                            loadAngelNetworkBasedOnANID(admin.anid)\r\n                                .then(groupDetails => {\r\n                                    admin.groupDetails = groupDetails;\r\n                                    return resolve(admin);\r\n                                })\r\n                                .catch(error => {\r\n                                    console.error(\"Error loading group details:\", error);\r\n                                    return resolve(null);\r\n                                });\r\n                        }\r\n                        // admin is a super admin\r\n                        else {\r\n                            return resolve(admin);\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        console.warn(\"Admin not found for uid:\", uid);\r\n                        return resolve(null);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a forums\r\n *\r\n * Parameters:\r\n *      + forumObj with the following structure\r\n *\r\n * {\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor: userID\r\n * }\r\n * @param {*} forumObj\r\n */\r\nexport const createForum = async (forumObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const forumID = db.ref(DB_CONST.FORUMS_CHILD).push().key;\r\n        forumObj.id = forumID;\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumObj.id)\r\n            .set(forumObj)\r\n            .then(() => {\r\n                return resolve(forumID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_FORUMS = \"LOAD_LIVE_FORUMS\";\r\nexport const LOAD_DELETED_FORUMS = \"LOAD_DELETED_FORUMS\";\r\n/**\r\n * This function is used to load all forums.\r\n *\r\n * A forums object has the following structure:\r\n *\r\n * {\r\n *      id,\r\n *      forumName,\r\n *      forumDesc,\r\n *      forumAuthor,\r\n * \r\n *      ...\r\n * }\r\n */\r\nexport const loadForums = async (mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        let forums = [];\r\n\r\n        if (mode !== LOAD_LIVE_FORUMS && mode !== LOAD_DELETED_FORUMS) {\r\n            return reject(\"Invalid mode.\");\r\n        }\r\n\r\n        const db = firebase.database();\r\n\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .once('value', snapshots => {\r\n\r\n                // no forums\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(forums);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let forum = snapshot.val();\r\n                    if (mode === LOAD_LIVE_FORUMS) {\r\n                        if (!forum.hasOwnProperty('deleted')\r\n                            || (forum.hasOwnProperty('deleted') && forum.deleted === false)) {\r\n                            forums.push(forum);\r\n                        }\r\n                    } else {\r\n                        if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\r\n                            forums.push(forum);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(forums.map(forum => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(forum.author.id)\r\n                            .then(user => {\r\n                                forum.author = user;\r\n                                return resolve(forums);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(forums);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a forum\r\n *\r\n * @param editedForum\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editForum = async (editedForum) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(editedForum.id)\r\n            .update(editedForum)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a forum by adding a property called 'deleted' with the value = true\r\n *\r\n * @param forumID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteForum = async (forumID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUMS_CHILD)\r\n            .child(forumID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a thread within a forums\r\n *\r\n * @param {*} threadObj\r\n */\r\nexport const createThread = async (threadObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const threadID = db.ref(DB_CONST.FORUM_THREADS_CHILD).push().key;\r\n        threadObj.id = threadID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadObj.id)\r\n            .set(threadObj)\r\n            .then(() => {\r\n                return resolve(threadID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit a thread\r\n *\r\n * @param editedThread\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThread = async (editedThread) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(editedThread.id)\r\n            .update(editedThread)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread by adding a property called 'deleted' with the value = true\r\n *\r\n * @param threadID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThread = async (threadID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .child(threadID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const LOAD_LIVE_THREADS = \"LOAD_LIVE_THREADS\";\r\nexport const LOAD_DELETED_THREADS = \"LOAD_DELETED_THREADS\";\r\n/**\r\n * This function is used to load the details of the author for each thread.\r\n * The reason for creating this function is that the author of each thread is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param mode\r\n * @param {*} forumSelected\r\n */\r\nexport const loadThreads = async (mode, forumSelected) => {\r\n    const db = firebase.database();\r\n    let threads = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREADS_CHILD)\r\n            .orderByChild(\"forumID\")\r\n            .equalTo(forumSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(threads);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let thread = snapshot.val();\r\n\r\n                    if (mode === LOAD_LIVE_THREADS) {\r\n                        if (!thread.hasOwnProperty('deleted')\r\n                            || (thread.hasOwnProperty('deleted') && thread.deleted === false)) {\r\n                            threads.push(thread);\r\n                        }\r\n                    } else {\r\n                        if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\r\n                            threads.push(thread);\r\n                        }\r\n                    }\r\n                });\r\n\r\n                Promise.all(threads.map(thread => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(thread.author.id)\r\n                            .then(user => {\r\n                                thread.author = user;\r\n                                return resolve(threads);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(threads);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to create a reply to a thread.\r\n *\r\n * @param {*} replyObj\r\n */\r\nexport const createThreadReply = async (replyObj) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const replyID = db.ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD).push().key;\r\n        replyObj.id = replyID;\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(replyObj.id)\r\n            .set(replyObj)\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to edit an existing thread reply\r\n *\r\n * @param editedThreadReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const editThreadReply = async (editedThreadReply) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(editedThreadReply.id)\r\n            .update(editedThreadReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete a thread reply\r\n *\r\n * @param threadReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteThreadReply = async (threadReplyID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .child(threadReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            })\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load the details of the author for each thread reply.\r\n * The reason for creating this function is that the author of each thread reply is stored in Firebase just by a userID.\r\n * Therefore, in order to load the user details, we need this function.\r\n *\r\n * @param {*} threadSelected\r\n */\r\nexport const loadThreadReplies = async (threadSelected) => {\r\n    const db = firebase.database();\r\n    let replies = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\r\n            .orderByChild(\"threadID\")\r\n            .equalTo(threadSelected.id)\r\n            .once('value', snapshots => {\r\n\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(replies);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let replyObj = snapshot.val();\r\n                    replies.push(replyObj);\r\n                });\r\n\r\n                Promise.all(replies.map(reply => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(reply.author.id)\r\n                            .then(user => {\r\n                                reply.author = user;\r\n                                return resolve(replies);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    })\r\n                })).then(() => {\r\n                    return resolve(replies);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function will load club attributes\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadClubAttributes = async () => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\r\n            .once('value', snapshot => {\r\n                const clubAttributes = snapshot.val();\r\n                return resolve(clubAttributes);\r\n            });\r\n    });\r\n};\r\n\r\n/**\r\n * This function is used to load invited users of an angel network or ALL for super admin\r\n *\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadInvitedUsers = async (anid) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        let invitedUsers = [];\r\n\r\n        let dbRef;\r\n\r\n        // load invited users of an angel network\r\n        if (anid) {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD)\r\n                .orderByChild('invitedBy')\r\n                .equalTo(anid);\r\n        }\r\n        // load ALL invited users\r\n        else {\r\n            dbRef = db\r\n                .ref(DB_CONST.INVITED_USERS_CHILD);\r\n        }\r\n\r\n        dbRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(invitedUsers);\r\n                }\r\n                snapshots.forEach(snapshot => {\r\n                    let user = snapshot.val();\r\n                    invitedUsers.push(user);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\r\n                            .then(angelNetwork => {\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n\r\n                                if (invitedUser.hasOwnProperty('officialUserID')) {\r\n                                    getUserBasedOnID(invitedUser.officialUserID)\r\n                                        .then(officialUser => {\r\n                                            invitedUser.officialUser = officialUser;\r\n                                            return resolve(invitedUsers);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(invitedUsers);\r\n                                }\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                return reject({error: \"No users\"});\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load requests to join (users request to join angel networks)\r\n *\r\n * @param userID\r\n * @param anid\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadRequestsToJoin = async ({userID = null, anid = null}) => {\r\n    return new Promise((resolve, reject) => {\r\n        let requestsRef = firebase\r\n            .database()\r\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD);\r\n\r\n        if (userID && anid) {\r\n            return reject(\"userID and anid cannot be defined at the same time\");\r\n        }\r\n\r\n        if (userID) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('userID')\r\n                .equalTo(userID);\r\n        }\r\n\r\n        if (anid) {\r\n            requestsRef = requestsRef\r\n                .orderByChild('groupToJoin')\r\n                .equalTo(anid);\r\n        }\r\n\r\n        if (!requestsRef) {\r\n            return reject(\"Error happened\");\r\n        }\r\n\r\n        let requests = [];\r\n\r\n        requestsRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(requests);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    requests.push(snapshot.val());\r\n                });\r\n\r\n                Promise.all(requests.map(request => {\r\n                    return new Promise((resolve, reject) => {\r\n                        getUserBasedOnID(request.userID)\r\n                            .then(userProfile => {\r\n\r\n                                request.userProfile = userProfile;\r\n\r\n                                loadAngelNetworkBasedOnANID(request.groupToJoin)\r\n                                    .then(angelNetwork => {\r\n\r\n                                        request.group = angelNetwork;\r\n\r\n                                        return resolve(requests);\r\n                                    })\r\n                                    .catch(error => {\r\n                                        return reject(error);\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(requests);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load an invited user based on the official user IF\r\n *\r\n * @param idOrEmail\r\n * @param mode\r\n * @returns {Promise<*>}\r\n */\r\nexport const GET_INVITED_USER_BASED_ON_INVITED_ID = 1;\r\nexport const GET_INVITED_USER_BASED_ON_OFFICIAL_ID = 2;\r\nexport const GET_INVITED_USER_BASED_ON_EMAIL = 3;\r\nexport const getInvitedUserBasedOnIDOrEmail = async (idOrEmail, mode) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let invitedUsers = [];\r\n\r\n        if (mode !== GET_INVITED_USER_BASED_ON_INVITED_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n            && mode !== GET_INVITED_USER_BASED_ON_EMAIL\r\n        ) {\r\n            return reject(\"Incorrect mode\");\r\n        }\r\n\r\n        db\r\n            .ref(DB_CONST.INVITED_USERS_CHILD)\r\n            .orderByChild(\r\n                mode === GET_INVITED_USER_BASED_ON_INVITED_ID\r\n                    ?\r\n                    'id'\r\n                    :\r\n                    mode === GET_INVITED_USER_BASED_ON_OFFICIAL_ID\r\n                        ?\r\n                        'officialUserID'\r\n                        :\r\n                        'email'\r\n            )\r\n            .equalTo(idOrEmail)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return reject(\"No invited users found.\");\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let invitedUser = snapshot.val();\r\n                    invitedUsers.push(invitedUser);\r\n                });\r\n\r\n                Promise.all(invitedUsers.map(invitedUser => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n                            .child(invitedUser.invitedBy)\r\n                            .once('value', snapshot => {\r\n                                const angelNetwork = snapshot.val();\r\n                                invitedUser.Invitor = {\r\n                                    anid: angelNetwork.anid,\r\n                                    displayName: angelNetwork.displayName,\r\n                                    logo: angelNetwork.logo\r\n                                };\r\n                                return resolve(invitedUsers);\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                }))\r\n                    .then(() => {\r\n                        return resolve(invitedUsers);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\nexport const FETCH_PROJECTS_ORDER_BY_NONE = 0;\r\nexport const FETCH_PROJECTS_ORDER_BY_VISIBILITY = 1;\r\nexport const FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK = 2;\r\nexport const FETCH_PROJECTS_ORDER_BY_ISSUER = 3;\r\nexport const FETCH_PROJECTS_ORDER_BY_STATUS = 4;\r\n\r\nexport const FETCH_PROJECTS_IN_ANY_PHASE = 111;\r\nexport const FETCH_LIVE_PROJECTS = 222;\r\nexport const FETCH_SUCCESSFUL_PROJECTS = 333;\r\nexport const FETCH_FAILED_PROJECTS = 444;\r\n\r\n/**\r\n * This function is used to fetch projects with filter parameters and limit parameter\r\n *\r\n * @param visibility\r\n * @param angelNetwork\r\n * @param issuer\r\n * @param projectsWithStatus\r\n * @param orderBy\r\n * @param limit\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const fetchProjectsBy = async (\r\n    {\r\n        visibility = null, // fetch projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\r\n        angelNetwork = null, // fetch projects by angel network\r\n        issuer = null, // fetch projects by issuer\r\n        sector = null, // fetch projects by sector\r\n        projectsWithStatus = FETCH_LIVE_PROJECTS, // fetch projects by status\r\n        fetchOrderBy = null // mode to use orderByChild\r\n    },\r\n    limit = 100000 // number of instances to be loaded\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        let projects = [];\r\n\r\n        const db = firebase.database();\r\n        let projectsRef = db.ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n        switch (fetchOrderBy) {\r\n            case FETCH_PROJECTS_ORDER_BY_NONE:\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_VISIBILITY:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('visibility')\r\n                    .equalTo(visibility);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ANGEL_NETWORK:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('anid')\r\n                    .equalTo(angelNetwork);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_ISSUER:\r\n                projectsRef = projectsRef\r\n                    .orderByChild('issuerID')\r\n                    .equalTo(issuer);\r\n                break;\r\n            case FETCH_PROJECTS_ORDER_BY_STATUS:\r\n                if (projectsWithStatus === FETCH_LIVE_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .startAt(DB_CONST.PROJECT_STATUS_PITCH_PHASE)\r\n                        .endAt(DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE);\r\n                } else if (projectsWithStatus === FETCH_SUCCESSFUL_PROJECTS) {\r\n                    projectsRef = projectsRef\r\n                        .orderByChild('status')\r\n                        .equalTo(DB_CONST.PROJECT_STATUS_SUCCESSFUL);\r\n                }\r\n                break;\r\n            default:\r\n                return reject(\"Incorrect mode to fetch projects\");\r\n        }\r\n\r\n        projectsRef\r\n            .limitToLast(limit)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(projects);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let project = snapshot.val();\r\n\r\n                    if (projectsWithStatus) {\r\n                        switch (projectsWithStatus) {\r\n                            case FETCH_PROJECTS_IN_ANY_PHASE:\r\n                                projects.push(project);\r\n                                break;\r\n                            case FETCH_LIVE_PROJECTS:\r\n                                if (utils.isProjectLive(project) && !utils.isProjectTemporarilyClosed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_SUCCESSFUL_PROJECTS:\r\n                                if (utils.isProjectSuccessful(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            case FETCH_FAILED_PROJECTS:\r\n                                if (utils.isProjectFailed(project)) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                            default:\r\n                                if (project.status === projectsWithStatus) {\r\n                                    projects.push(project);\r\n                                }\r\n                                break;\r\n                        }\r\n                    } else {\r\n                        projects.push(project);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    projects.map(project => {\r\n                        return new Promise((resolve, reject) => {\r\n                            loadAngelNetworkBasedOnANID(project.anid)\r\n                                .then(group => {\r\n                                    project.group = group;\r\n                                    getUserBasedOnID(project.issuerID)\r\n                                        .then(user => {\r\n                                            project.issuer = user;\r\n                                            // only load pledges when a project is in pledge phase\r\n                                            // or it has gone through pledge phase and closed\r\n                                            if (utils.isProjectInLivePledgePhase(project)\r\n                                                || utils.isProjectSuccessful(project)\r\n                                                || utils.isProjectFailed(project)\r\n                                            ) {\r\n                                                // load pledges\r\n                                                loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                    .then(pledges => {\r\n                                                        project.pledges = pledges;\r\n                                                        return resolve(projects);\r\n                                                    })\r\n                                                    .catch(error => {\r\n                                                        // error in loading pledges\r\n                                                        return reject(error);\r\n                                                    });\r\n                                            } else {\r\n                                                return resolve(projects);\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            return reject(error);\r\n                                        });\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                )\r\n                    .then(() => {\r\n                        return resolve(projects);\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load a particular project from its id\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadAParticularProject = async (projectID) => {\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectID)\r\n            .once('value', snapshot => {\r\n                if (!snapshot || !snapshot.exists() || !snapshot.val()) {\r\n                    return reject(\"No project found.\");\r\n                }\r\n\r\n                let project = snapshot.val();\r\n\r\n                loadAngelNetworkBasedOnANID(project.anid)\r\n                    .then(group => {\r\n                        project.group = group;\r\n\r\n                        getUserBasedOnID(project.issuerID)\r\n                            .then(issuer => {\r\n                                project.issuer = issuer;\r\n\r\n                                // projects in pitch phase cannot have any pledges\r\n                                if (project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                                    // load pledges\r\n                                    loadPledges(projectID, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                        .then(pledges => {\r\n                                            project.pledges = pledges;\r\n                                            return resolve(project);\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // error in loading pledges\r\n                                            return reject(error);\r\n                                        });\r\n                                } else {\r\n                                    return resolve(project);\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(\"Couldn't load project issuer\");\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(\"Couldn't load group\");\r\n                    });\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Close a live project temporarily or open a temporarily closed project again\r\n *\r\n * @param admin\r\n * @param project\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleProjectLivelinessTemporarily = async (admin, project) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        let shouldSendNotificationForIssuer = false;\r\n        if (project.issuer.type === DB_CONST.TYPE_ISSUER) {\r\n            shouldSendNotificationForIssuer = true;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\r\n\r\n        project.temporarilyClosed = !project.hasOwnProperty('temporarilyClosed')\r\n            ?\r\n            true\r\n            :\r\n            !project.temporarilyClosed;\r\n\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    project.temporarilyClosed === true\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_A_LIVE_PROJECT_TEMPORARILY\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_OPEN_A_TEMPORARILY_CLOSED_PROJECT_AGAIN;\r\n\r\n                // track admin activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeUpdating,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send notification to the issuer\r\n                if (shouldSendNotificationForIssuer) {\r\n                    sendNotification({\r\n                        title:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                `${project.projectName} has been closed temporarily`\r\n                                :\r\n                                `${project.projectName} has been opened again`\r\n                        ,\r\n                        message:\r\n                            project.temporarilyClosed\r\n                                ?\r\n                                \"This investment opportunity has been closed temporarily by your group admin. We will notify you when it is opened again.\"\r\n                                :\r\n                                \"This investment opportunity has been opened again. The students can now interact with it.\"\r\n                        ,\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                        .then(() => {\r\n                            // do nothing\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                }\r\n\r\n                // Send notifications to investors who voted or pledged\r\n                // load votes\r\n                loadVotes(project.id, null, LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        let listOfInvestorsToBeNotified = [];\r\n                        votes.forEach(vote => {\r\n                            listOfInvestorsToBeNotified.push(vote.investorID);\r\n                        });\r\n\r\n                        // load pledges\r\n                        loadPledges(project.id, null, LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n                                pledges.forEach(pledge => {\r\n                                    if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                        listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                    }\r\n                                });\r\n\r\n                                let notifications = [];\r\n                                listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                    const notification = {\r\n                                        title:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                `${project.projectName} has been closed temporarily`\r\n                                                :\r\n                                                `${project.projectName} has been opened again`\r\n                                        ,\r\n                                        message:\r\n                                            project.temporarilyClosed\r\n                                                ?\r\n                                                \"This investment opportunity has been closed temporarily by the group admin. We will notify you when it is opened again.\"\r\n                                                :\r\n                                                \"This investment opportunity has been opened again. You can now interact with it as usual.\"\r\n                                        ,\r\n                                        userID: investorID,\r\n                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                                    };\r\n                                    notifications.push(notification);\r\n                                });\r\n\r\n                                // push all the notifications to firebase\r\n                                Promise.all(notifications.map(notification => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        sendNotification(notification)\r\n                                            .then(() => {\r\n                                                return resolve();\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })).then(() => {\r\n                                    // do nothing\r\n                                }).catch(error => {\r\n                                    // handle error\r\n                                });\r\n                            });\r\n                    });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoLiveDecision = async (admin, project, decisionObj) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n        projectBeforeDecision.issuer = null;\r\n        projectBeforeDecision.pledges = null;\r\n        projectBeforeDecision.group = null;\r\n\r\n        // project goes live\r\n        if (decisionObj.decision) {\r\n            project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n            project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        }\r\n        // project cannot go live\r\n        else {\r\n            project.status = DB_CONST.PROJECT_STATUS_REJECTED;\r\n            project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n        }\r\n\r\n        project.issuer = null;\r\n        project.pledges = null;\r\n        project.group = null;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            let activitySummary =\r\n                decisionObj.decision\r\n                    ?\r\n                    ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PITCH\r\n                    :\r\n                    ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PITCH;\r\n\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendEmailRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        emailType: 2,\r\n                        emailInfo: {\r\n                            projectID: project.id\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n\r\n            // track admin activity\r\n            trackActivity({\r\n                userID: admin.id,\r\n                activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                interactedObjectID: project.id,\r\n                activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                value: {\r\n                    before: projectBeforeDecision,\r\n                    after: project\r\n                }\r\n            });\r\n\r\n            // send a notification to notify the issuer\r\n            await\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your offer has been published.`\r\n                            :\r\n                            `Unfortunately your offer has been rejected. Contact your course's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                });\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project can go to the Pledge phase\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decision\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectGoToPledgePhaseDecision = async (admin, project, decision) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project can go to the Pledge phase --> the issuer can create their Pledge\r\n    if (decision) {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER;\r\n    }\r\n    // project cannot go to Pledge phase --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_MOVED_PITCH_TO_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_CLOSED_PITCH;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decision\r\n                            ?\r\n                            `Congratulations! Your investment opportunity has moved to the pledge phase. You can now create your pledge page. Your pledge page will be checked by the course admin before publication.`\r\n                            :\r\n                            `Unfortunately your investment opportunity has been rejected. Contact your course's administrator for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Make decision whether a project's Pledge can go live\r\n *\r\n * @param admin\r\n * @param project\r\n * @param decisionObj\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const makeProjectPledgeGoLiveDecision = async (admin, project, decisionObj) => {\r\n\r\n    let projectBeforeDecision = JSON.parse(JSON.stringify(project));\r\n    projectBeforeDecision.issuer = null;\r\n    projectBeforeDecision.pledges = null;\r\n    projectBeforeDecision.group = null;\r\n\r\n    // project's Pledge can go live --> the investors can start pledging it\r\n    if (decisionObj.decision) {\r\n        project.visibility = decisionObj.projectVisibilitySetting === -1 ? project.visibility : decisionObj.projectVisibilitySetting;\r\n        project.status = DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n    }\r\n    // project's pledge cannot go to live --> it failed\r\n    else {\r\n        project.status = DB_CONST.PROJECT_STATUS_FAILED;\r\n        project.PrimaryOffer.status = DB_CONST.PRIMARY_OFFER_STATUS_REJECTED;\r\n    }\r\n\r\n    project.issuer = null;\r\n    project.pledges = null;\r\n    project.group = null;\r\n\r\n    const db = firebase.database();\r\n    return new Promise((resolve, reject) => {\r\n        db.ref(DB_CONST.PROJECTS_CHILD)\r\n            .child(project.id)\r\n            .update(project)\r\n            .then(() => {\r\n                let activitySummary =\r\n                    decisionObj.decision\r\n                        ?\r\n                        ACTIVITY_SUMMARY_TEMPLATE_PUBLISHED_PLEDGE\r\n                        :\r\n                        ACTIVITY_SUMMARY_TEMPLATE_REJECTED_PLEDGE;\r\n                // track admin's activity\r\n                trackActivity({\r\n                    userID: admin.id,\r\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                    interactedObjectID: project.id,\r\n                    activitySummary: activitySummary.replace(\"%project%\", project.projectName),\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                    value: {\r\n                        before: projectBeforeDecision,\r\n                        after: project\r\n                    }\r\n                });\r\n\r\n                // send a notification to notify the issuer\r\n                sendNotification({\r\n                    title: project.projectName,\r\n                    message:\r\n                        decisionObj.decision\r\n                            ?\r\n                            `Congratulations! Your project has been published.`\r\n                            :\r\n                            `Unfortunately your project has been rejected. Contact your course's admin for further information.`\r\n                    ,\r\n                    userID: project.issuerID,\r\n                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                })\r\n                    .then(() => {\r\n                        return resolve();\r\n                    })\r\n                    .catch(error => {\r\n                        return reject(error);\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                return reject(\"Process failed\");\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all comments of a project\r\n *\r\n * @param projectID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadComments = async (projectID) => {\r\n    const db = firebase.database();\r\n\r\n    let comments = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(comments);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let comment = snapshot.val();\r\n                    comments.push(comment);\r\n                });\r\n\r\n                Promise.all(\r\n                    comments.map(comment => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(comment.commentedBy)\r\n                                .then(user => {\r\n                                    comment.author = user;\r\n                                    return resolve(comments);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(comments);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load pledges of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_PLEDGES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_PLEDGES_ORDER_BY_INVESTOR = 2;\r\nexport const loadPledges = async (projectID = null, investorID = null, mode) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        let pledgesRef = db.ref(DB_CONST.PLEDGES_CHILD);\r\n        if (projectID && mode === LOAD_PLEDGES_ORDER_BY_PROJECT) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"projectID\")\r\n                .equalTo(projectID);\r\n        } else if (investorID && mode === LOAD_PLEDGES_ORDER_BY_INVESTOR) {\r\n            pledgesRef = pledgesRef\r\n                .orderByChild(\"investorID\")\r\n                .equalTo(investorID);\r\n        } else {\r\n            return reject(\"Invalid mode\");\r\n        }\r\n\r\n        let pledges = [];\r\n\r\n        pledgesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(pledges);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let pledge = snapshot.val();\r\n                    if (pledge.amount !== \"\") {\r\n                        pledges.push(pledge);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    pledges.map(pledge => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(pledge.investorID)\r\n                                .then(investor => {\r\n                                    pledge.investor = investor;\r\n                                    return resolve(pledges);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(pledges);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load votes of a project\r\n *\r\n * @param projectID\r\n * @param investorID\r\n * @param mode\r\n * @returns {Promise<void>}\r\n */\r\nexport const LOAD_VOTES_ORDER_BY_PROJECT = 1;\r\nexport const LOAD_VOTES_ORDER_BY_INVESTOR = 2;\r\nexport const loadVotes = async (projectID = null, investorID = null, mode) => {\r\n    const db = firebase.database();\r\n    let votesRef = db.ref(DB_CONST.VOTES_CHILD);\r\n    if (projectID && mode === LOAD_VOTES_ORDER_BY_PROJECT) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"projectID\")\r\n            .equalTo(projectID);\r\n    } else if (investorID && mode === LOAD_VOTES_ORDER_BY_INVESTOR) {\r\n        votesRef = votesRef\r\n            .orderByChild(\"investorID\")\r\n            .equalTo(investorID);\r\n    } else {\r\n        return null;\r\n    }\r\n\r\n    let votes = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        votesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(votes);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let vote = snapshot.val();\r\n                    if (vote.voted !== \"\") {\r\n                        votes.push(vote);\r\n                    }\r\n                });\r\n\r\n                Promise.all(\r\n                    votes.map(vote => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(vote.investorID)\r\n                                .then(investor => {\r\n                                    vote.investor = investor;\r\n                                    return resolve(votes);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(votes);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to load all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const loadNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    let notifications = [];\r\n\r\n    return new Promise((resolve, reject) => {\r\n        db\r\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n            .orderByChild(\"userID\")\r\n            .equalTo(userID)\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(notifications);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let notification = snapshot.val();\r\n                    notifications.push(notification);\r\n                });\r\n\r\n                return resolve(notifications);\r\n            })\r\n    });\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * This function is used to delete all notifications of a user\r\n *\r\n * @param userID\r\n * @returns {Promise<*>}\r\n */\r\nexport const deleteAllNotifications = async (userID) => {\r\n    const db = firebase.database();\r\n\r\n    return new Promise((resolve, reject) => {\r\n        // load all notifications of the specified user\r\n        loadNotifications(userID)\r\n            .then(notifications => {\r\n                // delete them all\r\n                Promise.all(notifications.map(notification => {\r\n                    return new Promise((resolve, reject) => {\r\n                        db\r\n                            .ref(DB_CONST.NOTIFICATIONS_CHILD)\r\n                            .child(notification.id)\r\n                            .remove()\r\n                            .then(() => {\r\n                                return resolve();\r\n                            })\r\n                            .catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                    });\r\n                })).then(() => {\r\n                    return resolve();\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    })\r\n};\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Post a comment reply\r\n *\r\n * @param commentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const postCommentReply = commentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        const replyID = db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(replyID)\r\n            .set({\r\n                ...commentReply,\r\n                id: replyID\r\n            })\r\n            .then(() => {\r\n                return resolve(replyID);\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load replies of comments\r\n *\r\n * @param comments\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadCommentsReplies = comments => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n\r\n        let updatedComments = [...comments];\r\n\r\n        Promise.all(\r\n            updatedComments.map(comment => {\r\n                return new Promise((resolve, reject) => {\r\n                    let replies = [];\r\n\r\n                    db\r\n                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                        .orderByChild('commentID')\r\n                        .equalTo(comment.id)\r\n                        .once('value', snapshots => {\r\n                            if (!snapshots\r\n                                || !snapshots.exists()\r\n                                || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                            ) {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }\r\n\r\n                            snapshots.forEach(snapshot => {\r\n                                const reply = snapshot.val();\r\n                                if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                    // do nothing\r\n                                } else {\r\n                                    replies.push(snapshot.val());\r\n                                }\r\n                            });\r\n\r\n                            Promise.all(\r\n                                replies.map(reply => {\r\n                                    return new Promise((resolve, reject) => {\r\n                                        getUserBasedOnID(reply.repliedBy)\r\n                                            .then(user => {\r\n                                                reply.author = user;\r\n                                                return resolve(replies);\r\n                                            })\r\n                                            .catch(error => {\r\n                                                return reject(error);\r\n                                            });\r\n                                    });\r\n                                })\r\n                            ).then(() => {\r\n                                comment.replies = replies;\r\n                                return resolve(updatedComments);\r\n                            }).catch(error => {\r\n                                return reject(error);\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            })\r\n        ).then(() => {\r\n            return resolve(updatedComments);\r\n        }).catch(error => {\r\n            return reject(error);\r\n        });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Delete a reply of a comment\r\n *\r\n * @param commentReplyID\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const deleteCommentReply = commentReplyID => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(commentReplyID)\r\n            .child('deleted')\r\n            .set(true)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a comment reply\r\n *\r\n * @param updatedCommentReply\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateCommentReply = updatedCommentReply => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        db\r\n            .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n            .child(updatedCommentReply.id)\r\n            .update(updatedCommentReply)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Load marketing preferences\r\n *\r\n * @param userID: null --> load all, not null --> load for a particular user\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const loadMarketingPreferences = (userID) => {\r\n    return new Promise((resolve, reject) => {\r\n        const db = firebase.database();\r\n        const marketingPreferencesRef =\r\n            userID\r\n                ?\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                    .orderByChild(\"userID\")\r\n                    .equalTo(userID)\r\n                :\r\n                db\r\n                    .ref(DB_CONST.MARKETING_PREFERENCES_CHILD);\r\n\r\n        let marketingPreferences = [];\r\n\r\n        marketingPreferencesRef\r\n            .once('value', snapshots => {\r\n                if (!snapshots\r\n                    || !snapshots.exists()\r\n                    || (snapshots && (!snapshots.val() || snapshots.numChildren() === 0))\r\n                ) {\r\n                    return resolve(marketingPreferences);\r\n                }\r\n\r\n                snapshots.forEach(snapshot => {\r\n                    let marketingPreference = snapshot.val();\r\n                    marketingPreferences.push(marketingPreference);\r\n                });\r\n\r\n                Promise.all(\r\n                    marketingPreferences.map(marketingPreference => {\r\n                        return new Promise((resolve, reject) => {\r\n                            getUserBasedOnID(marketingPreference.userID)\r\n                                .then(user => {\r\n                                    marketingPreference.user = user;\r\n                                    return resolve(marketingPreferences);\r\n                                })\r\n                                .catch(error => {\r\n                                    return reject(error);\r\n                                });\r\n                        });\r\n                    })\r\n                ).then(() => {\r\n                    return resolve(marketingPreferences);\r\n                }).catch(error => {\r\n                    return reject(error);\r\n                });\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Turn on/off marketing preferences\r\n *\r\n * @param userID\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const toggleMarketingPreferences = async (\r\n    {\r\n        userID,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n\r\n        if (!userID || !value) {\r\n            return reject(\"Missing arguments\");\r\n        }\r\n\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: value,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    marketingPreferences[0].accepted = value;\r\n                    marketingPreferences[0].date = utils.getCurrentDate();\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .set(marketingPreferences[0])\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update a sub settings inside marketing preferences\r\n *\r\n * @param userID\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateMarketingPreferencesSetting = async (\r\n    {\r\n        userID,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        loadMarketingPreferences(userID)\r\n            .then(marketingPreferences => {\r\n                // user has not registered for Marketing preferences before\r\n                if (marketingPreferences.length === 0) {\r\n                    const id = firebase.database().ref(DB_CONST.MARKETING_PREFERENCES_CHILD).push().key;\r\n\r\n                    const marketingPreferences = {\r\n                        accepted: true,\r\n                        date: utils.getCurrentDate(),\r\n                        id,\r\n                        userID,\r\n                        settings: {\r\n                            field: value\r\n                        }\r\n                    };\r\n\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(id)\r\n                        .set(marketingPreferences)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n                // user has registered for Marketing preferences before\r\n                else {\r\n                    firebase\r\n                        .database()\r\n                        .ref(DB_CONST.MARKETING_PREFERENCES_CHILD)\r\n                        .child(marketingPreferences[0].id)\r\n                        .child('settings')\r\n                        .child(field)\r\n                        .set(value)\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                }\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Update group properties setting\r\n *\r\n * @param anid\r\n * @param field\r\n * @param value\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const updateGroupPropertiesSetting = async (\r\n    {\r\n        anid,\r\n        field,\r\n        value\r\n    }\r\n) => {\r\n    return new Promise((resolve, reject) => {\r\n        firebase\r\n            .database()\r\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\r\n            .child(anid)\r\n            .child('settings')\r\n            .child(field)\r\n            .set(value)\r\n            .then(() => {\r\n                return resolve();\r\n            })\r\n            .catch(error => {\r\n                return reject(error);\r\n            });\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */\r\n\r\n/**\r\n * Bring an expired pitch back to live by setting a new expiry date\r\n *\r\n * @param project\r\n * @param newPitchExpiryDate\r\n * @returns {Promise<unknown>}\r\n */\r\nexport const bringPitchBackToLive = async ({project, newPitchExpiryDate}) => {\r\n    return new Promise(async (resolve, reject) => {\r\n        project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n        project.status = DB_CONST.PROJECT_STATUS_PITCH_PHASE;\r\n        project.Pitch.expiredDate = newPitchExpiryDate;\r\n\r\n        try {\r\n            await firebase\r\n                .database()\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id)\r\n                .update(project);\r\n\r\n            return resolve();\r\n        } catch (error) {\r\n            return reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n * ---------------------------------------------------------------------------------------------------------------------\r\n */","import {\n    PASSWORD_CHANGE_FAIL,\n    PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED,\n    PASSWORD_CHANGE_NOT_STRONG_ENOUGH, PASSWORD_CHANGE_RE_AUTH_FAILED,\n    PASSWORD_CHANGE_SUCCESS\n} from '../../shared-components/change-password/ChangePasswordPage';\nimport * as utils from '../../utils/utils';\nimport firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const CHANGE_PASSWORD_TEXT_CHANGED = 'CHANGE_PASSWORD_TEXT_CHANGED';\nexport const handleTextChanged = event => {\n    return {\n        type: CHANGE_PASSWORD_TEXT_CHANGED,\n        name: event.target.name,\n        value: event.target.value\n    }\n};\n\nexport const RESET_CHANGE_PASSWORD = 'RESET_CHANGE_PASSWORD';\nexport const reset = () => {\n    return {\n        type: RESET_CHANGE_PASSWORD\n    }\n};\n\nexport const RE_AUTHENTICATING_USER = 'RE_AUTHENTICATING_USER';\nexport const ERROR_CHANGING_PASSWORD = 'ERROR_CHANGING_PASSWORD';\nexport const requestChangePassword = () => {\n    return (dispatch, getState) => {\n\n        dispatch({\n            type: RE_AUTHENTICATING_USER\n        });\n\n        const passwords = {\n            currentPassword: getState().changePassword.currentPassword,\n            newPassword: getState().changePassword.newPassword,\n            newPasswordVerified: getState().changePassword.newPasswordVerified\n        };\n\n        const currentUser = getState().auth.user;\n\n        changePassword(currentUser.email, passwords)\n            .then(responseCode => {\n                dispatch({\n                    type: RESET_CHANGE_PASSWORD,\n                    responseCode\n                });\n\n                realtimeDBUtils\n                    .trackActivity({\n                        userID: firebase.auth().currentUser.uid,\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CHANGED_PASSWORD\n                    });\n            })\n            .catch(errorCode => {\n                dispatch({\n                    type: ERROR_CHANGING_PASSWORD,\n                    errorCode\n                });\n            });\n    }\n};\n\nconst changePassword = async (email, passwords) => {\n    return new Promise((resolve, reject) => {\n        if (passwords.newPassword !== passwords.newPasswordVerified) {\n            return reject(PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED);\n        }\n\n        const passwordStrength = utils.checkPasswordStrength(passwords.newPassword);\n        if (passwordStrength === utils.PASSWORD_VERY_WEAK) {\n            return reject(PASSWORD_CHANGE_NOT_STRONG_ENOUGH);\n        }\n\n        firebase\n            .auth()\n            .signInWithEmailAndPassword(email, passwords.currentPassword)\n            .then(credential => {\n                firebase\n                    .auth()\n                    .currentUser\n                    .updatePassword(passwords.newPassword)\n                    .then(() => {\n                        return resolve(PASSWORD_CHANGE_SUCCESS);\n                    })\n                    .catch(error => {\n                        return reject(PASSWORD_CHANGE_FAIL)\n                    });\n            })\n            .catch(error => {\n                return reject(PASSWORD_CHANGE_RE_AUTH_FAILED);\n            });\n    });\n};","import React, {Component} from 'react';\nimport {\n    Container,\n    Row,\n    Col\n} from 'react-bootstrap';\nimport {\n    Button,\n    TextField,\n    Typography,\n    IconButton\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FlexView from 'react-flexview';\nimport {css, StyleSheet} from 'aphrodite';\n\nimport * as colors from '../../values/colors';\n\nimport {connect} from 'react-redux';\nimport * as changePasswordActions from '../../redux-store/actions/changePasswordActions';\n\nexport const PASSWORD_CHANGE_NONE = 0;\nexport const PASSWORD_CHANGE_RE_AUTH = 1;\nexport const PASSWORD_CHANGE_SUCCESS = 2;\nexport const PASSWORD_CHANGE_FAIL = 3;\nexport const PASSWORD_CHANGE_RE_AUTH_FAILED = 4;\nexport const PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED = 5;\nexport const PASSWORD_CHANGE_NOT_STRONG_ENOUGH = 6;\n\nconst mapStateToProps = state => {\n    return {\n        currentPassword: state.changePassword.currentPassword,\n        newPassword: state.changePassword.newPassword,\n        newPasswordVerified: state.changePassword.newPasswordVerified,\n        passwordChangeResponseCode: state.changePassword.passwordChangeResponseCode\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        handleTextChanged: (event) => dispatch(changePasswordActions.handleTextChanged(event)),\n        reset: () => dispatch(changePasswordActions.reset()),\n        requestChangePassword: () => dispatch(changePasswordActions.requestChangePassword())\n    }\n};\n\nclass ChangePasswordPage extends Component {\n\n    render() {\n        const {\n            currentPassword,\n            newPassword,\n            newPasswordVerified,\n            passwordChangeResponseCode,\n\n            handleTextChanged,\n            reset,\n            requestChangePassword\n        } = this.props;\n\n        return (\n            <Container fluid style={{ padding: 0 }} >\n                <Row noGutters >\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 24 }} >\n                        <FlexView column >\n                            <Typography align=\"left\" variant=\"h6\" color=\"primary\">Update your password</Typography>\n                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 10, marginBottom: 18 }}>Update your password regularly to protect your account better. Password must contain at least 8 characters.</Typography>\n                            <TextField\n                                label=\"Current password\"\n                                name=\"currentPassword\"\n                                value={currentPassword}\n                                type=\"password\"\n                                margin=\"normal\"\n                                variant=\"outlined\"\n                                onChange={handleTextChanged}\n                            />\n\n                            <TextField\n                                label=\"New password\"\n                                name=\"newPassword\"\n                                value={newPassword}\n                                type=\"password\"\n                                margin=\"normal\"\n                                variant=\"outlined\"\n                                error={\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\n                                }\n                                onChange={handleTextChanged}\n                            />\n\n                            <TextField\n                                label=\"Verify password\"\n                                name=\"newPasswordVerified\"\n                                value={newPasswordVerified}\n                                type=\"password\"\n                                margin=\"normal\"\n                                variant=\"outlined\"\n                                error={\n                                    passwordChangeResponseCode === PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED\n                                }\n                                onChange={handleTextChanged}\n                            />\n\n                            <Row noGutters >\n                                <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 20 }} >\n                                    <PasswordUpdate\n                                        responseCode={passwordChangeResponseCode}\n                                        onCloseMessage={reset}\n                                    />\n                                </Col>\n                                <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 20 }} >\n                                    <FlexView hAlignContent=\"right\" width=\"100%\" >\n                                        <FlexView marginRight={20} >\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={reset}>Cancel</Button>\n                                        </FlexView>\n                                        <FlexView>\n                                            <Button\n                                                variant=\"contained\"\n                                                color=\"primary\"\n                                                onClick={requestChangePassword}\n                                                disabled={\n                                                    currentPassword.length === 0 ||\n                                                    newPassword.length === 0 ||\n                                                    newPasswordVerified.length === 0\n                                                }>\n                                                Save\n                                            </Button>\n                                        </FlexView>\n                                    </FlexView>\n                                </Col>\n                            </Row>\n                        </FlexView>\n                    </Col>\n                </Row>\n            </Container>\n        );\n    }\n}\n\nclass PasswordUpdate extends Component {\n\n    onCloseMessage = () => {\n        this.props.onCloseMessage();\n    };\n\n    renderMessage = () => {\n        switch (this.props.responseCode) {\n            case PASSWORD_CHANGE_RE_AUTH: {\n                return {message: \"Re-authenticating ...\", color: colors.dark_green};\n            }\n            case PASSWORD_CHANGE_FAIL: {\n                return {message: \"Failed to change password\", color: colors.red_700};\n            }\n            case PASSWORD_CHANGE_SUCCESS: {\n                return {\n                    message: \"Password changed successfully\",\n                    color: colors.dark_green\n                };\n            }\n            case PASSWORD_CHANGE_RE_AUTH_FAILED: {\n                return {message: \"Failed to re-authenticate\", color: colors.red_700};\n            }\n            case PASSWORD_CHANGE_NOT_MATCH_WITH_VERIFIED: {\n                return {\n                    message: \"New passwords not match with each other\",\n                    color: colors.red_700\n                };\n            }\n            case PASSWORD_CHANGE_NOT_STRONG_ENOUGH: {\n                return {\n                    message:\n                        \"Password must have at least 8 characters\",\n                    color: colors.red_700\n                };\n            }\n            default:\n                return null;\n        }\n    };\n\n    render() {\n        const {\n            responseCode\n        } = this.props;\n        return (\n            responseCode === PASSWORD_CHANGE_NONE\n                ?\n                null\n                :\n                <FlexView grow={1} style={{ backgroundColor: this.renderMessage().color }} vAlignContent=\"center\" >\n\n                    <FlexView className={css(styles.changing_password_text_background)} >\n                        <Typography align=\"left\" variant=\"subtitle1\" color=\"inherit\" >{this.renderMessage().message}</Typography>\n                    </FlexView>\n\n                    <FlexView\n                        grow\n                        vAlignContent=\"center\"\n                        hAlignContent=\"right\"\n                        style={{ padding: 4 }}\n                    >\n                        <IconButton onClick={this.onCloseMessage} >\n                            <CloseIcon fontSize=\"small\" style={{ color: colors.white }} />\n                        </IconButton>\n                    </FlexView>\n                </FlexView>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChangePasswordPage);\n\nconst styles = StyleSheet.create({\n\n    changing_password_text_background: {\n        color: colors.white,\n        marginLeft: 15,\n        marginTop: 10,\n        marginBottom: 10\n    }\n});","import firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const SET_GROUP_USER_NAME_FROM_PARAMS = 'SET_GROUP_USER_NAME_FROM_PARAMS';\nexport const setGroupUserNameFromParams = groupUserName => {\n    return (dispatch, getState) => {\n        const prevGroupUserName = getState().manageGroupFromParams.groupUserName;\n\n        // if the newly set groupUserName is different from the current groupUserName, check again\n        if (prevGroupUserName !== groupUserName) {\n            dispatch({\n                type: SET_GROUP_USER_NAME_FROM_PARAMS,\n                groupUserName\n            });\n        }\n    }\n};\n\nexport const SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING = 'SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING';\nexport const setExpectedAndCurrentPathsForChecking = (expectedPath, currentPath) => {\n    return {\n        type: SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING,\n        expectedPath,\n        currentPath\n    }\n};\n\nexport const LOADING_ANGEL_NETWORK = 'LOADING_ANGEL_NETWORK';\nexport const ANGEL_NETWORK_LOADED = 'ANGEL_NETWORK_LOADED';\nexport const loadAngelNetwork = () => {\n    return (dispatch, getState) => {\n        return new Promise((resolve, reject) => {\n            const {\n                groupUserName,\n                groupProperties,\n                groupPropertiesLoaded,\n                angelNetworkBeingLoaded,\n\n                expectedPath,\n                currentPath\n            } = getState().manageGroupFromParams;\n\n            const firebaseUser = firebase.auth().currentUser;\n\n            // angel network has not been loaded before\n            if (!groupProperties && !groupPropertiesLoaded && !angelNetworkBeingLoaded) {\n                dispatch({\n                    type: LOADING_ANGEL_NETWORK\n                });\n\n                // path expected and current path not matched\n                if (expectedPath !== currentPath) {\n                    dispatch({\n                        type: ANGEL_NETWORK_LOADED,\n                        angelNetwork: null,\n                        shouldLoadOtherData: false\n                    });\n                    resolve();\n                    return;\n                }\n\n                // groupUserName is not specified --> Invest West super\n                if (!groupUserName) {\n                    // the user is logged in\n                    if (firebaseUser) {\n                        realtimeDBUtils\n                            .getUserBasedOnID(firebaseUser.uid)\n                            .then(user => {\n                                if (user.type === DB_CONST.TYPE_ADMIN) {\n                                    if (user.superAdmin) {\n                                        dispatch({\n                                            type: ANGEL_NETWORK_LOADED,\n                                            angelNetwork: null,\n                                            shouldLoadOtherData: true\n                                        });\n                                    } else {\n                                        dispatch({\n                                            type: ANGEL_NETWORK_LOADED,\n                                            angelNetwork: null,\n                                            shouldLoadOtherData: false\n                                        });\n                                    }\n                                } else {\n                                    dispatch({\n                                        type: ANGEL_NETWORK_LOADED,\n                                        angelNetwork: null,\n                                        shouldLoadOtherData: false\n                                    });\n                                }\n                                resolve();\n                            })\n                            .catch(error => {\n                                console.error('Error loading user:', error);\n                                dispatch({\n                                    type: ANGEL_NETWORK_LOADED,\n                                    angelNetwork: null,\n                                    shouldLoadOtherData: false\n                                });\n                                reject(error);\n                            });\n                    }\n                    // the user is not logged in\n                    else {\n                        dispatch({\n                            type: ANGEL_NETWORK_LOADED,\n                            angelNetwork: null,\n                            shouldLoadOtherData: true\n                        });\n                        resolve();\n                        return;\n                    }\n                    return;\n                }\n\n                // angel network has been loaded before\n                if (groupProperties) {\n                    // if anid = null (Invest West) or anid = angel network's anid\n                    // do not need to load the angel network again\n                    if (groupUserName === groupProperties.groupUserName) {\n                        dispatch({\n                            type: ANGEL_NETWORK_LOADED,\n                            angelNetwork: groupProperties,\n                            shouldLoadOtherData: true\n                        });\n                        resolve();\n                        return;\n                    }\n                    // if the loaded angel network's anid is not the same as the anid specified in the URL --> load again\n                    else {\n                        dispatch({\n                            type: SET_GROUP_USER_NAME_FROM_PARAMS,\n                            groupUserName\n                        });\n\n                        dispatch({\n                            type: LOADING_ANGEL_NETWORK\n                        });\n                    }\n                }\n\n                realtimeDBUtils\n                    .loadAngelNetworkBasedOnGroupUserName(groupUserName)\n                    .then(angelNetwork => {\n                        dispatch({\n                            type: ANGEL_NETWORK_LOADED,\n                            angelNetwork,\n                            shouldLoadOtherData: true\n                        });\n                        resolve();\n                    })\n                    .catch(error => {\n                        console.error('Error loading angel network:', error);\n                        dispatch({\n                            type: ANGEL_NETWORK_LOADED,\n                            angelNetwork: null,\n                            shouldLoadOtherData: false\n                        });\n                        reject(error);\n                    });\n            }\n        });\n    }\n};\n\n//----------------------------------------------------------------------------------------------------------------------\nlet angelNetworkListener = null;\n\nexport const ANGEL_NETWORK_PROPERTIES_CHANGED = 'ANGEL_NETWORK_PROPERTIES_CHANGED';\nexport const startListeningForAngelNetworkChanged = () => {\n    return (dispatch, getState) => {\n        if (!angelNetworkListener) {\n            const {\n                groupProperties\n            } = getState().manageGroupFromParams;\n\n            if (groupProperties) {\n                if (angelNetworkListener) {\n                    return;\n                }\n                angelNetworkListener = firebase\n                    .database()\n                    .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n                    .child(groupProperties.anid)\n                    .on('child_changed', snapshot => {\n                        const key = snapshot.key;\n                        const value = snapshot.val();\n                        dispatch({\n                            type: ANGEL_NETWORK_PROPERTIES_CHANGED,\n                            key,\n                            value\n                        });\n                    });\n            }\n            else {\n                if (angelNetworkListener) {\n                    angelNetworkListener.off('child_changed');\n                    angelNetworkListener = null;\n                }\n            }\n        }\n    }\n};\n\nexport const stopListeningForAngelNetworkChanged = () => {\n    return (dispatch, getState) => {\n        if (angelNetworkListener) {\n            angelNetworkListener.off('child_changed');\n            angelNetworkListener = null;\n        }\n    }\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview/lib/index';\r\nimport {StyleSheet, css} from 'aphrodite';\r\nimport {Typography} from '@material-ui/core';\r\nimport {NavLink} from 'react-router-dom';\r\nimport {\r\n    Container,\r\n    Col,\r\n    Row\r\n} from 'react-bootstrap';\r\nimport HomeIcon from '@material-ui/icons/HomeOutlined';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as utils from '../../utils/utils';\r\nimport {\r\n    AUTH_SUCCESS\r\n} from '../../pages/signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        user: state.auth.user,\r\n        authStatus: state.auth.authStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName))\r\n    }\r\n};\r\n\r\nclass HeaderWithoutDesc extends Component {\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            user,\r\n            authStatus\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0, backgroundColor: colors.white }} >\r\n                <Row noGutters >\r\n                    <Col xs={{span: 12, order: 2}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}} >\r\n                        {\r\n                            !groupProperties\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView vAlignContent=\"center\" height=\"100%\" marginLeft={10} >\r\n                                    {\r\n                                        !user || authStatus !== AUTH_SUCCESS\r\n                                            ?\r\n                                            <NavLink\r\n                                                to={groupUserName ? ROUTES.FRONT.replace(\":groupUserName\", groupUserName) : ROUTES.FRONT_INVEST_WEST_SUPER}\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                            >\r\n                                                <Typography variant=\"body1\" className={css(styles.navigation_text)} >\r\n                                                    <HomeIcon style={{ marginBottom: 6, marginRight: 5 }} />\r\n                                                    Home\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                            :\r\n                                            <NavLink\r\n                                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                to={\r\n                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        `${groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        :\r\n                                                        (\r\n                                                            user.type === DB_CONST.TYPE_ISSUER\r\n                                                                ?\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                                                :\r\n                                                                `${groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Home`\r\n                                                        )\r\n                                                }>\r\n                                                <Typography variant=\"body1\" className={css(styles.navigation_text)} >\r\n                                                    <HomeIcon style={{ marginBottom: 6, marginRight: 5 }} />\r\n                                                    My dashboard\r\n                                                </Typography>\r\n                                            </NavLink>\r\n                                    }\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                    <Col xs={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 1}} >\r\n                        <FlexView style={{ padding: 8 }} column height=\"100%\" widht=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" >\r\n                            {\r\n                                !groupProperties\r\n                                    ?\r\n                                    <a href={ROUTES.ORIGINAL_WEB_URL} className={css(sharedStyles.nav_link_hover_without_changing_text_color)} >\r\n                                        <FlexView hAlignContent=\"center\" column className={css(styles.logo_field)} >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography variant=\"body1\" color=\"primary\" >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Default student\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </a>\r\n                                    :\r\n                                    <NavLink\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                        to={\r\n                                            groupUserName\r\n                                                ?\r\n                                                ROUTES.FRONT.replace(\":groupUserName\", groupUserName)\r\n                                                :\r\n                                                ROUTES.FRONT_INVEST_WEST_SUPER\r\n                                        }\r\n                                    >\r\n                                        <FlexView hAlignContent=\"center\" column className={css(styles.logo_field)} >\r\n                                            <img\r\n                                                className={css(styles.logo)}\r\n                                                alt=\"logo\"\r\n                                                src={\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        require('../../img/logo.png').default\r\n                                                        :\r\n                                                        utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\r\n                                                }\r\n                                            />\r\n                                            <Typography variant=\"body1\" color=\"primary\" >\r\n                                                {\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        \"Default student\"\r\n                                                        :\r\n                                                        groupProperties.displayName\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </NavLink>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={{span: 12, order: 3}} md={{span: 12, order: 3}} lg={{span: 12, order: 3}} >\r\n                        <FlexView height={1} style={{ backgroundColor: colors.gray_300 }} />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HeaderWithoutDesc);\r\n\r\nconst styles = StyleSheet.create({\r\n    logo: {\r\n        width: \"auto\",\r\n        height: 38,\r\n        marginBottom: 2\r\n    },\r\n\r\n    logo_field: {\r\n        ':hover': {\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    navigation_text: {\r\n        margin: 15,\r\n        padding: 8,\r\n        color: colors.black,\r\n        ':hover': {\r\n            cursor: 'pointer',\r\n            backgroundColor: colors.gray_100\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\nimport FlexView from 'react-flexview';\nimport {StyleSheet, css} from 'aphrodite';\nimport {\n    Button,\n    TextField,\n    Dialog,\n    DialogTitle,\n    Typography,\n    Paper,\n    InputAdornment,\n    IconButton,\n    FormControl\n} from '@material-ui/core';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport HashLoader from 'react-spinners/HashLoader';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport {NavLink} from 'react-router-dom';\n\nimport firebase from '../../firebase/firebaseApp';\n\nimport HeaderWithoutDesc from '../../shared-components/nav-bars/HeaderWithoutDesc';\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\n\nimport * as colors from '../../values/colors';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as ROUTES from '../../router/routes';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport {connect} from 'react-redux';\nimport * as authActions from '../../redux-store/actions/authActions';\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\n\nexport const INVALID_AUTH_NONE = 0;\nexport const INVALID_AUTH_USER_NOT_EXIST = 1;\nexport const INVALID_AUTH_USER_DECLINED_TO_REGISTER = 2;\nexport const INVALID_AUTH_USER_LEFT = 3;\nexport const INVALID_AUTH_USER_KICKED_OUT = 4;\nexport const AUTH_SUCCESS = 5;\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        user: state.auth.user,\n        userLoaded: state.auth.userLoaded,\n\n        authenticating: state.auth.authenticating,\n        authStatus: state.auth.authStatus\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\n\n        resetAuthStatus: () => dispatch(authActions.resetAuthStatus()),\n        signin: (email, password) => dispatch(authActions.signin(email, password))\n    }\n};\n\nclass Signin extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.firebaseAuth = firebase.auth();\n        this.firebaseDB = firebase.database();\n\n        this.state = {\n            email: '',\n            password: '',\n            showPassword: false,\n\n            error: {\n                email: false,\n                password: false\n            },\n\n            resetPassword: {\n                resetPasswordDialogOpen: false,\n                resetEmail: '',\n\n                resetChecking: false,\n                resetError: false,\n                resetEmailSent: false\n            }\n        }\n    }\n\n    componentDidMount() {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n            resetAuthStatus,\n\n            setGroupUserNameFromParams,\n            setExpectedAndCurrentPathsForChecking,\n            loadAngelNetwork\n        } = this.props;\n\n        const match = this.props.match;\n\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.SIGN_IN : ROUTES.SIGN_IN_INVEST_WEST_SUPER, match.path);\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            resetAuthStatus();\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n            groupUserName,\n\n            authenticating,\n            user,\n\n            authStatus,\n\n            loadAngelNetwork\n        } = this.props;\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            if (!authenticating && authStatus === AUTH_SUCCESS) {\n                switch (user.type) {\n                    case DB_CONST.TYPE_ADMIN:\n                        this.props.history.push({\n                            pathname: groupUserName ? ROUTES.ADMIN.replace(\":groupUserName\", groupUserName) : ROUTES.ADMIN_INVEST_WEST_SUPER,\n                            search: '?tab=Home'\n                        });\n                        return;\n                    case DB_CONST.TYPE_INVESTOR:\n                        this.props.history.push({\n                            pathname: groupUserName ? ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER,\n                            search: '?tab=Home'\n                        });\n                        return;\n                    case DB_CONST.TYPE_ISSUER:\n                        this.props.history.push({\n                            pathname: groupUserName ? ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName) : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER,\n                            search: '?tab=Home'\n                        });\n                        return;\n                    default:\n                        return;\n                }\n            }\n        }\n    }\n\n    /**\n     * Capture the changes in input fields and update the corresponding states\n     */\n    handleTextChanged = event => {\n        // get the name of the input field\n        const name = event.target.name;\n        // get the value of the input field\n        const value = event.target.value;\n\n        if (name === \"resetEmail\") {\n            this.setState({\n                resetPassword: {\n                    ...this.state.resetPassword,\n                    [name]: value\n                }\n            });\n        } else {\n            this.setState({\n                [name]: value\n            });\n        }\n    };\n\n    /**\n     * Check if pre-conditions met (password and email are filled?) before signing the user in.\n     */\n    handleSignin = event => {\n        event.preventDefault();\n\n        const email = this.state.email.trim().toLowerCase();\n        const password = this.state.password;\n\n        this.setState({\n            resetPassword: {\n                ...this.state.resetPassword,\n                resetEmailSent: false\n            }\n        });\n\n        if (email.length > 0 && password.length > 0) {\n            this.setState({\n                authStatus: false,\n                error: {\n                    email: false,\n                    password: false\n                }\n            });\n\n            this.props.signin(email, password);\n\n        } else {\n            if (email.length === 0 && password.length === 0) {\n                this.setState({\n                    authStatus: false,\n                    error: {\n                        email: true,\n                        password: true\n                    }\n                });\n            } else {\n                if (email.length === 0 && password.length > 0) {\n                    this.setState({\n                        authStatus: false,\n                        error: {\n                            email: true,\n                            password: false\n                        }\n                    });\n                } else if (password.length === 0 && email.length > 0) {\n                    this.setState({\n                        authStatus: false,\n                        error: {\n                            email: false,\n                            password: true\n                        }\n                    });\n                }\n            }\n        }\n    };\n\n    /**\n     * Open Reset Password Dialog\n     */\n    openResetPasswordDialog = () => {\n        this.setState({\n            resetPassword: {\n                ...this.state.resetPassword,\n                resetPasswordDialogOpen: true,\n                // set resetEmailSent state to false to ensure the message of successfully sent email (if have) will disappear\n                resetEmailSent: false\n            }\n        });\n    };\n\n    /**\n     * Reset all states relating Reset Password Dialog when the dialog is closed.\n     */\n    handleCloseResetPasswordDialog = () => {\n        this.setState({\n            resetPassword: {\n                ...this.state.resetPassword,\n                resetPasswordDialogOpen: false,\n                resetEmail: '',\n                resetChecking: false,\n                resetError: false,\n            }\n        });\n    };\n\n    /**\n     * Send an email reset password to the user.\n     */\n    handleSendResetEmail = () => {\n        const email = this.state.resetPassword.resetEmail;\n        this.setState({\n            resetPassword: {\n                ...this.state.resetPassword,\n                // set resetChecking state to true to indicate that the email the user input is being checked\n                resetChecking: true\n            }\n        });\n        firebase\n            .auth()\n            .sendPasswordResetEmail(email)\n            .then(() => {\n                this.setState({\n                    resetPassword: {\n                        ...this.state.resetPassword,\n                        resetEmailSent: true\n                    }\n                });\n                this.handleCloseResetPasswordDialog();\n            })\n            .catch(error => {\n                this.setState({\n                    resetPassword: {\n                        ...this.state.resetPassword,\n                        resetChecking: false,\n                        resetError: true\n                    }\n                });\n            });\n    };\n\n    /**\n     * Click to show password\n     */\n    handleClickShowPassword = () => {\n        this.setState({\n            showPassword: !this.state.showPassword\n        });\n    };\n\n    /**\n     * Render UI elements when the signing credentials are being checked\n     */\n    renderAuthStatus = () => {\n        const {\n            groupProperties,\n            authenticating,\n            authStatus\n        } = this.props;\n\n        if (this.state.resetPassword.resetEmailSent) {\n            return (\n                <FlexView\n                    width=\"100%\"\n                    className={css(styles.reset_email_sent)}\n                    marginBottom={20}\n                >\n                    <Typography\n                        variant=\"body2\"\n                        align=\"left\"\n                    >\n                        An email with password reset instructions has been sent to your email address\n                    </Typography>\n                </FlexView>\n            );\n        } else {\n            if (authenticating) {\n                return (\n                    <FlexView hAlignContent=\"center\" marginBottom={20} >\n                        <HashLoader\n                            color={\n                                !groupProperties\n                                    ?\n                                    colors.primaryColor\n                                    :\n                                    groupProperties.settings.primaryColor\n                            }\n                        />\n                    </FlexView>\n                );\n            } else {\n                let errorMsg = '';\n                switch (authStatus) {\n                    case INVALID_AUTH_NONE:\n                        return null;\n                    case AUTH_SUCCESS:\n                        return null;\n                    case INVALID_AUTH_USER_NOT_EXIST:\n                        errorMsg = \"Email or password is invalid, or you are not a member of this course.\";\n                        break;\n                    case INVALID_AUTH_USER_DECLINED_TO_REGISTER:\n                        errorMsg = \"You decided not to join this course.\";\n                        break;\n                    case INVALID_AUTH_USER_LEFT:\n                        errorMsg = \"You have left this course.\";\n                        break;\n                    case INVALID_AUTH_USER_KICKED_OUT:\n                        errorMsg = \"Unfortunately, you are no longer a member of this course.\";\n                        break;\n                    default:\n                        return null;\n                }\n\n                return (\n                    <FlexView\n                        className={css(styles.auth_error)}\n                        marginBottom={20}\n                    >\n                        <Typography\n                            variant=\"body2\"\n                            align=\"left\"\n                        >\n                            {errorMsg}\n                        </Typography>\n                    </FlexView>\n                );\n            }\n        }\n\n    };\n\n    render() {\n        const {\n            groupProperties,\n            groupPropertiesLoaded,\n            shouldLoadOtherData\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\" >\n                    <HashLoader color={colors.primaryColor} />\n                </FlexView>\n            );\n        }\n\n        if (!shouldLoadOtherData) {\n            return <PageNotFoundWhole/>;\n        }\n\n        return (\n            <Container fluid style={{ padding: 0, position: \"fixed\", top: 0, height: \"100%\", overflow: \"auto\", backgroundColor: colors.gray_200 }} >\n                <Row noGutters >\n\n                    <HeaderWithoutDesc/>\n\n                    <Col xs={{span: 12, offset: 0}} md={{span: 6, offset: 3}} lg={{span: 6, offset: 3}} style={{ padding: 20 }}>\n                        <FlexView column marginTop={80} marginBottom={40} hAlignContent=\"center\" vAlignContent=\"center\">\n                            {/** Sign in card */}\n                            <Paper elevation={0} square className={css(sharedStyles.kick_starter_border_box)} style={{padding: 30}}>\n                                <form onSubmit={this.handleSignin} >\n                                    <FlexView column >\n                                        <FlexView column hAlignContent=\"center\" marginBottom={35} >\n                                            <Typography variant=\"h4\" align=\"center\" paragraph color=\"primary\">Sign in to your account</Typography>\n                                            <Typography variant=\"body1\" align=\"center\">Connecting businesses and investors across the South West of England</Typography>\n                                        </FlexView>\n\n                                        {this.renderAuthStatus()}\n\n                                        <FormControl>\n                                            <TextField label=\"Email address\" name=\"email\" margin=\"normal\" variant=\"outlined\" error={this.state.error.email} onChange={this.handleTextChanged}/>\n                                        </FormControl>\n\n                                        <FormControl>\n                                            <TextField\n                                                label=\"Password\"\n                                                name=\"password\"\n                                                type={this.state.showPassword ? \"text\" : \"password\"}\n                                                margin=\"normal\"\n                                                variant=\"outlined\"\n                                                error={this.state.error.password}\n                                                onChange={this.handleTextChanged}\n                                                InputProps={{\n                                                    endAdornment: (\n                                                        <InputAdornment position=\"end\" >\n                                                            <IconButton edge=\"end\" aria-label=\"Toggle password visibility\" onClick={this.handleClickShowPassword} >\n                                                                {\n                                                                    !this.state.showPassword\n                                                                        ?\n                                                                        <VisibilityOff/>\n                                                                        :\n                                                                        <Visibility/>\n                                                                }\n                                                            </IconButton>\n                                                        </InputAdornment>\n                                                    ),\n                                                }}\n                                            />\n                                        </FormControl>\n\n                                        <FlexView marginTop={35} marginBottom={45} >\n                                            <Typography variant=\"body1\" align=\"left\" >\n                                                By clicking Sign In, you agree to our\n                                                <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover)} style={{ color: !groupProperties ? colors.primaryColor : groupProperties.settings.primaryColor }}>\n                                                    <b> &nbsp;Terms of use&nbsp; </b>\n                                                </NavLink>\n                                                and our\n                                                <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover)} style={{ color: !groupProperties ? colors.primaryColor : groupProperties.settings.primaryColor }} >\n                                                    <b> &nbsp;Privacy policy. </b>\n                                                </NavLink>\n                                            </Typography>\n                                        </FlexView>\n\n                                        <FormControl>\n                                            <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\" className={css(sharedStyles.no_text_transform)}>Sign in</Button>\n                                        </FormControl>\n\n                                        <FlexView hAlignContent=\"center\" marginTop={25} onClick={this.openResetPasswordDialog} >\n                                            <Typography variant=\"body1\" color=\"primary\" className={css(sharedStyles.nav_link_hover)}>Forgot your password?</Typography>\n                                        </FlexView>\n                                    </FlexView>\n                                </form>\n                            </Paper>\n                        </FlexView>\n                    </Col>\n                </Row>\n\n                <ResetPasswordDialog groupProperties={groupProperties} open={this.state.resetPassword.resetPasswordDialogOpen} onClose={this.handleCloseResetPasswordDialog} onTextChanged={this.handleTextChanged} resetEmail={this.state.resetPassword.resetEmail} onSendEmailClick={this.handleSendResetEmail} resetChecking={this.state.resetPassword.resetChecking} resetError={this.state.resetPassword.resetError} />\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);\n\nclass ResetPasswordDialog extends Component {\n\n    handleClose = () => {\n        this.props.onClose();\n    };\n\n    onTextChanged = event => {\n        this.props.onTextChanged(event);\n    };\n\n    onSendEmailClick = () => {\n        this.props.onSendEmailClick();\n    };\n\n    renderReset = () => {\n        const {\n            groupProperties,\n            resetChecking,\n            resetError\n        } = this.props;\n        if (resetChecking) {\n            return (\n                <FlexView hAlignContent=\"center\" marginBottom={30} >\n                    <HashLoader\n                        color={\n                            !groupProperties\n                                ?\n                                colors.primaryColor\n                                :\n                                groupProperties.settings.primaryColor\n                        }\n                    />\n                </FlexView>\n            );\n        } else {\n            if (resetError) {\n                return (\n                    <FlexView style={{ backgroundColor: colors.red_700 }} vAlignContent=\"center\" marginBottom={30} >\n                        <Typography variant=\"body1\" className={css(styles.reset_email_error_text)}>Unable to send request password email</Typography>\n                    </FlexView>\n                );\n            } else {\n                return null;\n            }\n        }\n    };\n\n    render() {\n        const {\n            groupProperties,\n            resetEmail,\n            resetError,\n            resetChecking,\n\n            onClose,\n            onTextChanged,\n            onSendEmailClick,\n            ...other\n        } = this.props;\n        return (\n            <Dialog fullWidth maxWidth=\"sm\" onClose={this.handleClose} {...other} >\n                <DialogTitle>\n                    <FlexView hAlignContent=\"center\" marginTop={20} >\n                        <Typography variant=\"h4\" align=\"center\" paragraph>Reset Your Password</Typography>\n                    </FlexView>\n                </DialogTitle>\n                <FlexView column hAlignContent=\"center\" >\n                    <FlexView column marginRight={60} marginLeft={60} >\n                        <Typography variant=\"body1\" align=\"center\" paragraph>Please provide the email address you used when you signed up for your Invest West account.</Typography>\n                        <Typography variant=\"body1\" align=\"center\" paragraph>We will send you an email with a link to reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b></Typography>\n                    </FlexView>\n                    <FlexView column width=\"100%\" marginTop={50} className={css(styles.reset_password_actions_layout)}>\n\n                        {this.renderReset()}\n\n                        <Container fluid style={{ padding: 0 }}>\n                            <Row>\n                                <Col xs={12} sm={12} md={7} lg={9}>\n                                    <FlexView height=\"100%\" vAlignContent=\"center\">\n                                        <TextField name=\"resetEmail\" value={resetEmail} label=\"Email address\" variant=\"outlined\" fullWidth onChange={this.onTextChanged}/>\n                                    </FlexView>\n                                </Col>\n                                <Col xs={12} sm={12} md={5} lg={3}>\n                                    <FlexView height=\"100%\" vAlignContent=\"center\">\n                                        <Button fullWidth color=\"primary\" variant=\"contained\" size=\"medium\" onClick={this.onSendEmailClick} className={css(sharedStyles.no_text_transform)}>Send</Button>\n                                    </FlexView>\n                                </Col>\n                            </Row>\n                        </Container>\n                    </FlexView>\n                </FlexView>\n            </Dialog>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n    no_margin: {\n        margin: 0\n    },\n\n    hover: {\n        ':hover': {\n            color: colors.gray_800,\n            cursor: 'pointer'\n        }\n    },\n\n    auth_error: {\n        backgroundColor: colors.red_700,\n        color: colors.white,\n        padding: 15\n    },\n\n    reset_email_sent: {\n        backgroundColor: colors.dark_green,\n        color: colors.white,\n        padding: 15\n    },\n\n    reset_password_actions_layout: {\n        paddingLeft: 30,\n        paddingRight: 30,\n        paddingTop: 42,\n        paddingBottom: 42,\n        backgroundColor: colors.gray_200\n    },\n\n    reset_email_error_text: {\n        color: colors.white,\n        marginLeft: 15,\n        marginTop: 15,\n        marginBottom: 15\n    }\n});","import firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport {\n    INVALID_AUTH_USER_NOT_EXIST,\n    INVALID_AUTH_USER_DECLINED_TO_REGISTER,\n    INVALID_AUTH_USER_LEFT,\n    INVALID_AUTH_USER_KICKED_OUT,\n    AUTH_SUCCESS\n} from '../../pages/signin/Signin';\n\nexport const INITIALIZE_AUTH_STATE = 'INITIALIZE_AUTH_STATE';\nexport const initializeAuthState = () => {\n    return {\n        type: INITIALIZE_AUTH_STATE\n    }\n};\n\nexport const RESET_AUTH_STATUS = 'RESET_AUTH_STATUS';\nexport const resetAuthStatus = () => {\n    return {\n        type: RESET_AUTH_STATUS\n    }\n};\n\nexport const SIGNING_IN = 'SIGNING_IN';\nexport const AUTHENTICATING = 'AUTHENTICATING';\nexport const FINISHED_AUTHENTICATING = 'FINISHED_AUTHENTICATING';\nexport const signin = (email, password) => {\n    return (dispatch, getState) => {\n        // if the user is already logged in and they still press signin again\n        // log them out first before starting the sign in process\n        logOutWithIndirectDispatch(dispatch);\n\n        dispatch({\n            type: SIGNING_IN\n        });\n\n        dispatch({\n            type: AUTHENTICATING\n        });\n\n        firebase\n            .auth()\n            .signInWithEmailAndPassword(email, password)\n            .catch(error => {\n                dispatch({\n                    type: FINISHED_AUTHENTICATING,\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST,\n                    error\n                });\n            });\n    }\n};\n\nexport const TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP = 'TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP';\nexport const togglePreventValidatingUserWhenSigningUp = (shouldPrevent) => {\n    return {\n        type: TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP,\n        shouldPrevent\n    }\n};\n\nexport const USER_PROFILE_LOADED = 'USER_PROFILE_LOADED';\nexport const AUTH_LOADING_GROUPS_USER_IS_IN = 'AUTH_LOADING_GROUPS_USER_IS_IN';\nexport const AUTH_GROUPS_USER_IS_IN_LOADED = 'AUTH_GROUPS_USER_IS_IN_LOADED';\n/**\n * This function is used to load user's profile and check if the user belongs to the angel network specified in the URL\n *\n * @param uid\n * @returns {function(...[*]=)}\n */\nexport const getUserProfileAndValidateUser = uid => {\n    return (dispatch, getState) => {\n\n        if (!uid) {\n            dispatch({\n                type: USER_PROFILE_LOADED,\n                user: null\n            });\n            return;\n        }\n\n        const {\n            groupUserName,\n            groupProperties\n        } = getState().manageGroupFromParams;\n\n        const {\n            signingIn,\n            user,\n            userLoaded,\n            preventValidatingUserWhenSigningUp\n        } = getState().auth;\n\n        // if in signup process, do not proceed loading the user's profile as it will cause a lot of conflicts\n        // due to the lack of user's data on the database\n        if (preventValidatingUserWhenSigningUp) {\n            return;\n        }\n\n        if (user && userLoaded) {\n            return;\n        }\n\n        // if the page is reloaded (not from the Sign in button), this process will become the signin process\n        if (!signingIn) {\n            dispatch({\n                type: AUTHENTICATING\n            });\n        }\n\n        realtimeDBUtils\n            .getUserBasedOnID(uid)\n            .then(user => {\n                dispatch({\n                    type: USER_PROFILE_LOADED,\n                    user\n                });\n\n                // if the user is an admin, do not need to check for groups they are in\n                if (user.type === DB_CONST.TYPE_ADMIN) {\n                    // groupUserName is specified in the URL --> angel network login\n                    if (groupUserName) {\n                        // check if the angel network specified in the URL is valid\n                        if (groupProperties) {\n                            // check if the admin is from an angel network and if the admin's anid is equal to the anid specified in the URL\n                            if (!user.isInvestWest && !user.superAdmin && user.anid === groupProperties.anid) {\n                                dispatch({\n                                    type: FINISHED_AUTHENTICATING,\n                                    authStatus: AUTH_SUCCESS\n                                });\n                            } else {\n                                dispatch({\n                                    type: FINISHED_AUTHENTICATING,\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\n                                });\n\n                                logOutWithIndirectDispatch(dispatch);\n                            }\n                        } else {\n                            // do nothing\n                        }\n                    }\n                    // angel network is not specified in the URL --> Invest West login\n                    else {\n                        // admins are from Invest West\n                        if (user.isInvestWest || user.superAdmin) {\n                            dispatch({\n                                type: FINISHED_AUTHENTICATING,\n                                authStatus: AUTH_SUCCESS\n                            });\n                        } else {\n                            dispatch({\n                                type: FINISHED_AUTHENTICATING,\n                                authStatus: INVALID_AUTH_USER_NOT_EXIST\n                            });\n\n                            logOutWithIndirectDispatch(dispatch);\n                        }\n                    }\n                }\n                // the user is not an admin (issuer or investor), load the groups they are in to check for login with each angel network\n                else {\n                    dispatch({\n                        type: AUTH_LOADING_GROUPS_USER_IS_IN\n                    });\n\n                    realtimeDBUtils\n                        .loadGroupsUserIsIn(user.id)\n                        .then(groupsUserIsIn => {\n                            dispatch({\n                                type: AUTH_GROUPS_USER_IS_IN_LOADED,\n                                groups: groupsUserIsIn\n                            });\n\n                            // user is not in any groups --> this is impractical but worth checking just in case\n                            if (!groupsUserIsIn || (groupsUserIsIn && groupsUserIsIn.length === 0)) {\n                                dispatch({\n                                    type: FINISHED_AUTHENTICATING,\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\n                                });\n\n                                logOutWithIndirectDispatch(dispatch);\n                                return;\n                            }\n\n                            let groupFound = null;\n\n                            // groupUserName is specified in the URL --> angel network login\n                            if (groupUserName) {\n                                // check if the angel network specified in the URL is valid\n                                if (groupProperties) {\n                                    groupsUserIsIn.forEach(group => {\n                                        if (group.anid === groupProperties.anid) {\n                                            groupFound = group;\n                                        }\n                                    });\n                                } else {\n                                    // do nothing\n                                }\n                            }\n                            // angel network is not specified in the URL --> Invest West login\n                            else {\n                                groupsUserIsIn.forEach(group => {\n                                    if (group.isInvestWest) {\n                                        groupFound = group;\n                                    }\n                                });\n                            }\n\n                            // check if the angel network specified in the URL is valid\n                            if (groupProperties) {\n                                if (groupFound) {\n                                    if (groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\n                                        dispatch({\n                                            type: FINISHED_AUTHENTICATING,\n                                            authStatus: AUTH_SUCCESS\n                                        });\n                                    } else {\n                                        dispatch({\n                                            type: FINISHED_AUTHENTICATING,\n                                            authStatus:\n                                                groupFound.userInGroupStatus === DB_CONST.INVITED_USER_DECLINED_TO_REGISTER\n                                                    ?\n                                                    INVALID_AUTH_USER_DECLINED_TO_REGISTER\n                                                    :\n                                                    groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_LEFT\n                                                        ?\n                                                        INVALID_AUTH_USER_LEFT\n                                                        :\n                                                        groupFound.userInGroupStatus === DB_CONST.INVITED_USER_STATUS_KICKED_OUT\n                                                            ?\n                                                            INVALID_AUTH_USER_KICKED_OUT\n                                                            :\n                                                            INVALID_AUTH_USER_NOT_EXIST\n                                        });\n\n                                        logOutWithIndirectDispatch(dispatch);\n                                    }\n                                } else {\n                                    dispatch({\n                                        type: FINISHED_AUTHENTICATING,\n                                        authStatus: INVALID_AUTH_USER_NOT_EXIST\n                                    });\n\n                                    logOutWithIndirectDispatch(dispatch);\n                                }\n                            }\n                            // the angel network is set to null --> super page\n                            else {\n                                dispatch({\n                                    type: FINISHED_AUTHENTICATING,\n                                    authStatus: INVALID_AUTH_USER_NOT_EXIST\n                                });\n\n                                logOutWithIndirectDispatch(dispatch);\n                            }\n                        })\n                        .catch(error => {\n                            dispatch({\n                                type: AUTH_LOADING_GROUPS_USER_IS_IN,\n                                groups: null,\n                                error\n                            });\n\n                            logOutWithIndirectDispatch(dispatch);\n                        });\n                }\n            })\n            .catch(error => {\n                dispatch({\n                    type: USER_PROFILE_LOADED,\n                    user: null\n                });\n\n                dispatch({\n                    type: FINISHED_AUTHENTICATING,\n                    authStatus: INVALID_AUTH_USER_NOT_EXIST\n                });\n\n                logOutWithIndirectDispatch(dispatch);\n            });\n    }\n};\n\n/**\n * Logout function to be used within this file\n *\n * @param dispatch\n */\nexport const logOutWithIndirectDispatch = (dispatch) => {\n    firebase\n        .auth()\n        .signOut()\n        .then(() => {\n            dispatch({\n                type: LOG_OUT\n            });\n        });\n};\n\nexport const LOG_OUT = 'LOG_OUT';\n/**\n * Logout function --> called outside this file\n *\n * For some reasons (don't now), this function won't get called when called inside this file\n *\n * @returns {function(...[*]=)}\n */\nexport const logout = () => {\n    return (dispatch, getState) => {\n        // firebase\n        //     .auth()\n        //     .signOut()\n        //     .then(() => {\n        //\n        //     });\n        return dispatch({\n            type: LOG_OUT\n        });\n    }\n};\n\n//----------------------------------------------------------------------------------------------------------------------\nlet userListener = null;\nlet groupsUserIsInListener = null;\n\nexport const CURRENT_USER_PROFILE_HAS_CHANGED = 'CURRENT_USER_PROFILE_HAS_CHANGED';\nexport const startListeningForUserProfileChanges = () => {\n    return (dispatch, getState) => {\n        if (!userListener) {\n            const {\n                user\n            } = getState().auth;\n\n            userListener = firebase\n                .database()\n                .ref(DB_CONST.USERS_CHILD)\n                .child(user.id);\n\n            userListener\n                .on('value', snapshot => {\n                    const userChanged = snapshot.val();\n                    // this on changed function will be invoked as soon as the user profile is downloaded\n                    // however, the snapshot.val() returns null as there are no changes\n                    // thus, we need to check if snapshot.val() is not null before assigning its value\n                    // to the user variable. Otherwise, the user variable will be set to null which causes\n                    // PageNotFound to be returned.\n                    if (userChanged) {\n                        dispatch({\n                            type: CURRENT_USER_PROFILE_HAS_CHANGED,\n                            userChanged\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForUserProfileChanges = () => {\n    return (dispatch, getState) => {\n        if (userListener) {\n            userListener.off('value');\n            userListener = null;\n        }\n    }\n};\n\nexport const GROUPS_USER_IS_IN_HAVE_CHANGED = 'GROUPS_USER_IS_IN_HAVE_CHANGED';\nexport const startListeningForGroupsUserIsIn = () => {\n    return (dispatch, getState) => {\n\n        const user = getState().auth.user;\n\n        if (!groupsUserIsInListener) {\n            groupsUserIsInListener = firebase\n                .database()\n                .ref(DB_CONST.INVITED_USERS_CHILD)\n                .orderByChild('email')\n                .equalTo(user.email);\n\n            groupsUserIsInListener\n                .on('child_added', snapshot => {\n                    let invitedUser = snapshot.val();\n                    const groupsUserIsIn = getState().auth.groupsUserIsIn;\n\n                    let groupUserIsIn = {\n                        invitedUser: invitedUser,\n                        anid: invitedUser.invitedBy,\n                        userInGroupStatus: invitedUser.status\n                    };\n\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\n                    if (index === -1) {\n                        realtimeDBUtils\n                            .loadAngelNetworkBasedOnANID(groupUserIsIn.anid)\n                            .then(angelNetwork => {\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\n                                groupUserIsIn.groupDetails = angelNetwork;\n\n                                dispatch({\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\n                                    groups: [...groupsUserIsIn, groupUserIsIn]\n                                });\n                            });\n                    }\n                });\n\n            groupsUserIsInListener\n                .on('child_changed', snapshot => {\n                    let invitedUser = snapshot.val();\n                    let groupsUserIsIn = getState().auth.groupsUserIsIn;\n\n                    let groupUserIsIn = {\n                        invitedUser: invitedUser,\n                        anid: invitedUser.invitedBy,\n                        userInGroupStatus: invitedUser.status\n                    };\n\n                    const index = groupsUserIsIn.findIndex(group => group.invitedUser.id === groupUserIsIn.invitedUser.id);\n                    if (index !== -1) {\n                        realtimeDBUtils\n                            .loadAngelNetworkBasedOnANID(groupsUserIsIn.anid)\n                            .then(angelNetwork => {\n                                groupUserIsIn.isInvestWest = angelNetwork.isInvestWest;\n                                groupUserIsIn.groupDetails = angelNetwork;\n\n                                groupsUserIsIn[index] = groupsUserIsIn;\n\n                                dispatch({\n                                    type: GROUPS_USER_IS_IN_HAVE_CHANGED,\n                                    groups: [...groupsUserIsIn]\n                                });\n                            });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForGroupsUserIsIn = () => {\n    return (dispatch, getState) => {\n        if (groupsUserIsInListener) {\n            groupsUserIsInListener.off('child_added');\n            groupsUserIsInListener.off('child_changed');\n            groupsUserIsInListener = null;\n        }\n    }\n};\n\n","export const TOGGLE_SIDEBAR = 'TOGGLE_SIDEBAR';\nexport const toggleSidebar = checkSidebarDocked => {\n    return (dispatch, getState) => {\n\n        if (!checkSidebarDocked) {\n            dispatch({\n                type: TOGGLE_SIDEBAR,\n                sidebarOpen: false\n            });\n            return;\n        }\n\n        if (getState().MediaQueryState.isLaptop || getState().MediaQueryState.isDesktop) {\n            dispatch({\n                type: TOGGLE_SIDEBAR,\n                sidebarDocked: !getState().dashboardSidebar.sidebarDocked,\n                sidebarOpen: false\n            });\n        }\n        else {\n            dispatch({\n                type: TOGGLE_SIDEBAR,\n                sidebarDocked: false,\n                sidebarOpen: !getState().dashboardSidebar.sidebarOpen\n            });\n        }\n    }\n};","import * as utils from '../../utils/utils';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport {trackActivity} from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport firebase from '../../firebase/firebaseApp';\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\n\nexport const LOADING_FORUMS = 'LOADING_FORUMS';\nexport const FINISHED_LOADING_FORUMS = 'FINISHED_LOADING_FORUMS';\nexport const ERROR_LOADING_FORUMS = 'ERROR_LOADING_FORUMS';\nexport const loadForums = (mode) => {\n    return (dispatch, getState) => {\n\n        const forums = getState().manageForums.forums;\n        const forumsLoaded = getState().manageForums.forumsLoaded;\n\n        if (!forumsLoaded && forums.length === 0) {\n            dispatch({\n                type: LOADING_FORUMS\n            });\n\n            realtimeDBUtils\n                .loadForums(mode)\n                .then(forums => {\n                    dispatch({\n                        type: FINISHED_LOADING_FORUMS,\n                        forums\n                    });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: FINISHED_LOADING_FORUMS,\n                        forums: [],\n                        error\n                    });\n\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not load forums.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n    }\n};\n\nexport const GO_BACK_TO_FORUMS_MAIN = 'GO_BACK_TO_FORUMS_MAIN';\nexport const goBackToForumsMain = () => {\n    return {\n        type: GO_BACK_TO_FORUMS_MAIN\n    }\n};\n\nexport const TOGGLE_CREATE_NEW_FORUM = 'TOGGLE_CREATE_NEW_FORUM';\nexport const toggleCreateNewForum = (open, forumEdited) => {\n    return {\n        type: TOGGLE_CREATE_NEW_FORUM,\n        open, // true --> Open, false --> Close\n        forumEdited // not null --> Editing a forum, null --> Creating a new forum\n    }\n};\n\nexport const ERROR_CREATING_NEW_FORUM = 'ERROR_CREATING_NEW_FORUM';\nexport const createNewForum = () => {\n    return (dispatch, getState) => {\n        let forumBeforeEditing = getState().manageForums.forumEdited;\n        const createForumName = getState().manageForums.createForumName;\n        const createForumDesc = getState().manageForums.createForumDesc;\n\n        if (createForumName.trim().length === 0) {\n            dispatch({\n                type: ERROR_CREATING_NEW_FORUM\n            });\n            return;\n        }\n\n        const currentUser = getState().auth.user;\n\n        // creating a new forum\n        if (!forumBeforeEditing) {\n            const forum = {\n                name: createForumName,\n                description: createForumDesc,\n                dateCreated: utils.getCurrentDate(),\n                author: {\n                    id: currentUser.id\n                }\n            };\n\n            realtimeDBUtils\n                .createForum(forum)\n                .then(forumID => {\n                    dispatch({\n                        type: TOGGLE_CREATE_NEW_FORUM,\n                        open: false,\n                        forumEdited: null\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\n                            interactedObjectID: forumID,\n                            value: {\n                                ...forum,\n                                id: forumID\n                            },\n                            activitySummary: realtimeDBUtils\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_FORUM\n                                .replace(\"%forum%\", forum.name)\n                        });\n\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Forum created.\",\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n                })\n                .catch(error => {\n                    // handle error\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not create forum.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n        // editing a forum\n        else {\n            forumBeforeEditing.author = {\n                id: forumBeforeEditing.author.id\n            };\n\n            // only allow super admins to edit a forum\n            if (!currentUser\n                || (\n                    currentUser && !currentUser.superAdmin\n                )\n            ) {\n                return;\n            }\n\n            let forumAfterEditing = JSON.parse(JSON.stringify(forumBeforeEditing));\n            forumAfterEditing.name = createForumName;\n            forumAfterEditing.description = createForumDesc;\n            // update the edited time\n            forumAfterEditing.lastEdited = utils.getCurrentDate();\n\n            realtimeDBUtils\n                .editForum(forumAfterEditing)\n                .then(() => {\n                    dispatch({\n                        type: TOGGLE_CREATE_NEW_FORUM,\n                        open: false,\n                        forumEdited: null\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.FORUMS_CHILD,\n                            interactedObjectID: forumAfterEditing.id,\n                            value: {\n                                before: forumBeforeEditing,\n                                after: forumAfterEditing\n                            },\n                            activitySummary: realtimeDBUtils\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_FORUM\n                                .replace(\"%forumName%\", forumAfterEditing.name)\n                        });\n\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Forum updated.\",\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not update forum.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n    }\n};\n\nexport const deleteForum = forumID => {\n    return (dispatch, getState) => {\n\n        const currentUser = getState().auth.user;\n\n        // only allow super admins to delete a forum\n        if (!currentUser\n            || (\n                currentUser && !currentUser.superAdmin\n            )\n        ) {\n            return;\n        }\n\n        let forums = [...getState().manageForums.forums];\n        let forumBeforeChanging = JSON.parse(JSON.stringify(forums[forums.findIndex(forum => forum.id === forumID)]));\n        forumBeforeChanging.author = {\n            id: forumBeforeChanging.author.id\n        };\n\n        realtimeDBUtils\n            .deleteForum(forumID)\n            .then(() => {\n                const forumAfterChanging = {\n                    ...forumBeforeChanging,\n                    deleted: true\n                };\n\n                // track super admin's activity\n                trackActivity({\n                    userID: currentUser.id,\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                    interactedObjectLocation: DB_CONST.FORUMS_CHILD,\n                    interactedObjectID: forumBeforeChanging.id,\n                    activitySummary: realtimeDBUtils\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_FORUM\n                        .replace(\"%forumName%\", forumBeforeChanging.name),\n                    value: {\n                        before: forumBeforeChanging,\n                        after: forumAfterChanging\n                    }\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Forum deleted.\",\n                    color: \"primary\",\n                    position: \"bottom\"\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not delete forum.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n};\n\nexport const FORUMS_INPUT_CHANGED = 'FORUMS_INPUT_CHANGED';\nexport const handleForumsInputChanged = event => {\n    return (dispatch, getState) => {\n        const targetName = event.target.name;\n        const targetValue = event.target.value;\n\n        dispatch({\n            type: FORUMS_INPUT_CHANGED,\n            name: targetName,\n            value: targetValue\n        });\n\n        switch (targetName) {\n            // forumsLoadModeChanged\n            case \"forumsLoadMode\": {\n                dispatch({\n                    type: LOADING_FORUMS\n                });\n\n                realtimeDBUtils\n                    .loadForums(targetValue)\n                    .then(forums => {\n                        dispatch({\n                            type: FINISHED_LOADING_FORUMS,\n                            forums\n                        });\n                    })\n                    .catch(error => {\n                        dispatch({\n                            type: FINISHED_LOADING_FORUMS,\n                            forums: [],\n                            error\n                        });\n\n                        dispatch({\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                            message: \"Error happened. Could not load forums.\",\n                            color: \"error\",\n                            position: \"bottom\"\n                        });\n                    });\n\n                return;\n            }\n            // threadsLoadMode changed\n            case \"threadsLoadMode\": {\n\n                const forumSelected = getState().manageForums.forumSelected;\n\n                dispatch({\n                    type: LOADING_THREADS_IN_A_FORUM,\n                    forumSelected: forumSelected\n                });\n\n                realtimeDBUtils\n                    .loadThreads(targetValue, forumSelected)\n                    .then(threads => {\n                        dispatch({\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\n                            threads\n                        });\n                    })\n                    .catch(error => {\n                        dispatch({\n                            type: FINISHED_LOADING_THREADS_IN_A_FORUM,\n                            threads: [],\n                            error\n                        });\n\n                        dispatch({\n                            type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                            message: \"Error happened. Could not load threads.\",\n                            color: \"error\",\n                            position: \"bottom\"\n                        });\n                    });\n\n                return;\n            }\n            default:\n                return;\n        }\n    };\n};\n\nexport const LOADING_THREADS_IN_A_FORUM = 'LOADING_THREADS_IN_A_FORUM';\nexport const FINISHED_LOADING_THREADS_IN_A_FORUM = 'FINISHED_LOADING_THREADS_IN_A_FORUM';\nexport const clickOnAParticularForum = forum => {\n    return (dispatch, getState) => {\n\n        const threadsLoadMode = getState().manageForums.threadsLoadMode;\n\n        dispatch({\n            type: LOADING_THREADS_IN_A_FORUM,\n            forumSelected: forum\n        });\n\n        realtimeDBUtils\n            .loadThreads(threadsLoadMode, forum)\n            .then(threads => {\n                dispatch({\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\n                    threads\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: FINISHED_LOADING_THREADS_IN_A_FORUM,\n                    threads: [],\n                    error\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not load threads.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n};\n\nexport const GO_BACK_TO_FORUMS_LIST = 'GO_BACK_TO_FORUMS_LIST';\nexport const goBackToForumsList = () => {\n    return {\n        type: GO_BACK_TO_FORUMS_LIST\n    }\n};\n\nexport const TOGGLE_CREATE_NEW_THREAD = 'TOGGLE_CREATE_NEW_THREAD';\nexport const toggleCreateNewThread = (open, threadEdited) => {\n    return {\n        type: TOGGLE_CREATE_NEW_THREAD,\n        open, // true --> Open, false --> Close\n        threadEdited // not null --> Editing a thread, null --> Creating a new thread\n    }\n};\n\nexport const ERROR_CREATING_NEW_THREAD = 'ERROR_CREATING_NEW_THREAD';\nexport const createNewThread = () => {\n    return (dispatch, getState) => {\n        let threadBeforeEditing = getState().manageForums.threadEdited;\n        const forumSelected = getState().manageForums.forumSelected;\n        const createThreadName = getState().manageForums.createThreadName;\n        const createThreadBriefDesc = getState().manageForums.createThreadBriefDesc;\n        const createThreadMessage = getState().manageForums.createThreadMessage;\n\n        if (createThreadName.trim().length === 0\n            || createThreadBriefDesc.trim().length === 0) {\n            dispatch({\n                type: ERROR_CREATING_NEW_THREAD\n            });\n            return;\n        }\n\n        const currentUser = getState().auth.user;\n\n        // creating a new thread\n        if (!threadBeforeEditing) {\n            const thread = {\n                forumID: forumSelected.id,\n                name: createThreadName,\n                message: createThreadMessage,\n                description: createThreadBriefDesc,\n                dateCreated: utils.getCurrentDate(),\n                author: {\n                    id: currentUser.id\n                }\n            };\n\n            realtimeDBUtils\n                .createThread(thread)\n                .then(threadID => {\n                    dispatch({\n                        type: TOGGLE_CREATE_NEW_THREAD,\n                        open: false,\n                        threadEdited: null\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\n                            interactedObjectID: threadID,\n                            value: {\n                                ...thread,\n                                id: threadID\n                            },\n                            activitySummary: realtimeDBUtils\n                                .ACTIVITY_SUMMARY_TEMPLATE_CREATED_A_THREAD\n                                .replace(\"%thread%\", thread.name)\n                                .replace(\"%forum%\", forumSelected.name)\n                        });\n\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Thread created.\",\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n                })\n                .catch(error => {\n                    // handle error\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not create thread.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n        // editing a thread\n        else {\n            threadBeforeEditing.author = {\n                id: threadBeforeEditing.author.id\n            };\n\n            // only allow super admins to edit a thread\n            if (!currentUser\n                || (\n                    currentUser && !currentUser.superAdmin\n                )\n            ) {\n                return;\n            }\n\n            let threadAfterEditing = JSON.parse(JSON.stringify(threadBeforeEditing));\n            threadAfterEditing.name = createThreadName;\n            threadAfterEditing.description = createThreadBriefDesc;\n            threadAfterEditing.message = createThreadMessage;\n            // update the edited time\n            threadAfterEditing.lastEdited = utils.getCurrentDate();\n\n            realtimeDBUtils\n                .editThread(threadAfterEditing)\n                .then(() => {\n                    dispatch({\n                        type: TOGGLE_CREATE_NEW_THREAD,\n                        open: false,\n                        threadEdited: null\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\n                            interactedObjectID: threadAfterEditing.id,\n                            value: {\n                                before: threadBeforeEditing,\n                                after: threadAfterEditing\n                            },\n                            activitySummary: realtimeDBUtils\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD\n                                .replace(\"%threadName%\", threadAfterEditing.name)\n                                .replace(\"%forumName%\", forumSelected.name)\n                        });\n\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Thread updated.\",\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not update thread.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n    }\n};\n\nexport const deleteThread = threadID => {\n    return (dispatch, getState) => {\n\n        const currentUser = getState().auth.user;\n        const forumSelected = getState().manageForums.forumSelected;\n\n        // only allow super admins to delete a thread\n        if (!currentUser\n            || (\n                currentUser && !currentUser.superAdmin\n            )\n        ) {\n            return;\n        }\n\n        let threads = [...getState().manageForums.forumThreads];\n        let threadBeforeChanging = JSON.parse(JSON.stringify(threads[threads.findIndex(thread => thread.id === threadID)]));\n        threadBeforeChanging.author = {\n            id: threadBeforeChanging.author.id\n        };\n\n        realtimeDBUtils\n            .deleteThread(threadID)\n            .then(() => {\n                const threadAfterChanging = {\n                    ...threadBeforeChanging,\n                    deleted: true\n                };\n\n                // track super admin's activity\n                trackActivity({\n                    userID: currentUser.id,\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\n                    interactedObjectID: threadBeforeChanging.id,\n                    activitySummary: realtimeDBUtils\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD\n                        .replace(\"%threadName%\", threadBeforeChanging.name)\n                        .replace(\"%forumName%\", forumSelected.name),\n                    value: {\n                        before: threadBeforeChanging,\n                        after: threadAfterChanging\n                    }\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Thread deleted.\",\n                    color: \"primary\",\n                    position: \"bottom\"\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not delete thread.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n};\n\nexport const LOADING_REPLIES_IN_A_THREAD = 'LOADING_REPLIES_IN_A_THREAD';\nexport const FINISHED_LOADING_REPLIES_IN_A_THREAD = 'FINISHED_LOADING_REPLIES_IN_A_THREAD';\nexport const clickOnAParticularThread = thread => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: LOADING_REPLIES_IN_A_THREAD,\n            threadSelected: thread\n        });\n\n        realtimeDBUtils\n            .loadThreadReplies(thread)\n            .then(replies => {\n                dispatch({\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\n                    replies\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: FINISHED_LOADING_REPLIES_IN_A_THREAD,\n                    replies: [],\n                    error\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not load replies.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n};\n\nexport const GO_BACK_TO_THREADS_LIST = 'GO_BACK_TO_THREADS_LIST';\nexport const goBackToThreadsList = () => {\n    return {\n        type: GO_BACK_TO_THREADS_LIST\n    }\n};\n\nexport const TOGGLE_THREAD_REPLY = 'TOGGLE_THREAD_REPLY';\nexport const toggleThreadReply = (open, threadReplyEdited) => {\n    return {\n        type: TOGGLE_THREAD_REPLY,\n        open,\n        threadReplyEdited\n    }\n};\n\nexport const deleteThreadReply = threadReplyID => {\n    return (dispatch, getState) => {\n\n        const currentUser = getState().auth.user;\n        const forumSelected = getState().manageForums.forumSelected;\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\n\n        if (!currentUser) {\n            return;\n        }\n\n        let threadReplies = [...getState().manageForums.forumThreadReplies];\n        let threadReplyBeforeChanging = JSON.parse(JSON.stringify(threadReplies[threadReplies.findIndex(reply => reply.id === threadReplyID)]));\n        threadReplyBeforeChanging.author = {\n            id: threadReplyBeforeChanging.author.id\n        };\n\n        // this if statement ensures only super admins or the owner of the reply can delete it\n        if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeChanging.author.id) {\n            return;\n        }\n\n        realtimeDBUtils\n            .deleteThreadReply(threadReplyID)\n            .then(() => {\n                const threadReplyAfterChanging = {\n                    ...threadReplyBeforeChanging,\n                    deleted: true\n                };\n\n                // track super admin's activity\n                trackActivity({\n                    userID: currentUser.id,\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                    interactedObjectLocation: DB_CONST.FORUM_THREADS_CHILD,\n                    interactedObjectID: threadReplyBeforeChanging.id,\n                    activitySummary: realtimeDBUtils\n                        .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_THREAD_REPLY\n                        .replace(\"%threadName%\", forumThreadSelected.name)\n                        .replace(\"%forumName%\", forumSelected.name),\n                    value: {\n                        before: threadReplyBeforeChanging,\n                        after: threadReplyAfterChanging\n                    }\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Reply deleted.\",\n                    color: \"primary\",\n                    position: \"bottom\"\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not delete reply.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n};\n\nexport const ERROR_CREATING_THREAD_REPLY = 'ERROR_CREATING_THREAD_REPLY';\nexport const submitThreadReply = () => {\n    return (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const forumSelected = getState().manageForums.forumSelected;\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\n        const threadReplySubject = getState().manageForums.threadReplySubject;\n        const threadReplyMessage = getState().manageForums.threadReplyMessage;\n\n        let threadReplyBeforeEditing = getState().manageForums.threadReplyEdited;\n\n        if (threadReplySubject.trim().length === 0 || threadReplyMessage.ops.length === 0) {\n            dispatch({\n                type: ERROR_CREATING_THREAD_REPLY\n            });\n            return;\n        }\n\n        // creating a new thread reply\n        if (!threadReplyBeforeEditing) {\n            const reply = {\n                threadID: forumThreadSelected.id,\n                subject: threadReplySubject,\n                message: threadReplyMessage,\n                replyDate: utils.getCurrentDate(),\n                author: {\n                    id: currentUser.id\n                }\n            };\n\n            realtimeDBUtils\n                .createThreadReply(reply)\n                .then(replyID => {\n                    dispatch({\n                        type: TOGGLE_THREAD_REPLY,\n                        open: false,\n                        threadReplyEdited: null\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\n                            interactedObjectID: replyID,\n                            value: {\n                                ...reply,\n                                id: replyID\n                            },\n                            activitySummary:\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_THREAD\n                                    .replace(\"%thread%\", forumThreadSelected.name)\n                                    .replace(\"%forum%\", forumSelected.name)\n                        });\n                })\n                .catch(error => {\n                    // handle error\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not create reply.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n        // editing an existing thread reply\n        else {\n            threadReplyBeforeEditing.author = {\n                id: threadReplyBeforeEditing.author.id\n            }\n\n            // this if statement ensures only super admins or the owner of the reply can edit it\n            if (!currentUser.superAdmin && currentUser.id !== threadReplyBeforeEditing.author.id) {\n                return;\n            }\n\n            let threadReplyAfterEditing = JSON.parse(JSON.stringify(threadReplyBeforeEditing));\n            threadReplyAfterEditing.subject = threadReplySubject;\n            threadReplyAfterEditing.message = threadReplyMessage;\n            threadReplyAfterEditing.lastEdited = utils.getCurrentDate();\n\n            realtimeDBUtils\n                .editThreadReply(threadReplyAfterEditing)\n                .then(() => {\n                    dispatch({\n                        type: TOGGLE_THREAD_REPLY,\n                        open: false,\n                        threadReplyEdited: null\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.FORUM_THREAD_REPLIES_CHILD,\n                            interactedObjectID: threadReplyAfterEditing.id,\n                            value: {\n                                before: threadReplyBeforeEditing,\n                                after: threadReplyAfterEditing\n                            },\n                            activitySummary:\n                                realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_THREAD_REPLY\n                                    .replace(\"%threadName%\", forumThreadSelected.name)\n                                    .replace(\"%forumName%\", forumSelected.name)\n                        });\n\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Reply updated.\",\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not update reply.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n    }\n};\n\nexport const MANAGE_FORUMS_TABLE_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_PAGE_CHANGED';\nexport const changePage = (table, newPage) => {\n    return {\n        type: MANAGE_FORUMS_TABLE_PAGE_CHANGED,\n        newPage,\n        table\n    }\n};\n\nexport const MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED';\nexport const changeRowsPerPage = (table, event) => {\n    return {\n        type: MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED,\n        value: parseInt(event.target.value, 10),\n        table\n    }\n};\n\nexport const FORUMS_QUILL_CHANGED = 'FORUMS_QUILL_CHANGED';\nexport const THREAD_CONTENT_QUILL = 'THREAD_CONTENT_QUILL';\nexport const THREAD_REPLY_CONTENT_QUILL = 'THREAD_REPLY_CONTENT_QUILL';\nexport const handleQuillChanged = (field, editor) => {\n    // check if the editor is empty (or does not have any text)\n    if (editor.getText().trim().length === 0) {\n        return {\n            type: FORUMS_QUILL_CHANGED,\n            quill: {ops: []},\n            field\n        }\n    } else {\n        return {\n            type: FORUMS_QUILL_CHANGED,\n            quill: editor.getContents(),\n            field\n        }\n    }\n};\n\n// Listeners -----------------------------------------------------------------------------------------------------------\nlet forumsListener = null;\nlet forumThreadsListener = null;\nlet forumThreadRepliesListener = null;\n\nexport const FORUMS_CHANGED = 'FORUMS_CHANGED';\nexport const startListeningForForumsChanged = () => {\n    return (dispatch, getState) => {\n        if (!forumsListener) {\n            forumsListener = firebase\n                .database()\n                .ref(DB_CONST.FORUMS_CHILD);\n\n            // a new forum is added\n            forumsListener\n                .on('child_added', snapshot => {\n                    let forum = snapshot.val();\n\n                    const currentUser = getState().auth.user;\n                    const forumsLoadMode = getState().manageForums.forumsLoadMode;\n\n                    let forums = [...getState().manageForums.forums];\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\n\n                    // only add if the forum is not in the local forums array\n                    if (existingForumIndex === -1) {\n                        // only add live forums\n                        if (forumsLoadMode === realtimeDBUtils.LOAD_LIVE_FORUMS) {\n                            if (!forum.hasOwnProperty('deleted')\n                                || (\n                                    forum.hasOwnProperty('deleted')\n                                    && forum.deleted === false\n                                )\n                            ) {\n                                if (forum.author.id === currentUser.id) {\n                                    forum.author = currentUser;\n                                    forums.push(forum);\n\n                                    dispatch({\n                                        type: FORUMS_CHANGED,\n                                        forumsChanged: [...forums]\n                                    });\n                                } else {\n                                    realtimeDBUtils\n                                        .getUserBasedOnID(forum.author.id)\n                                        .then(user => {\n                                            forum.author = user;\n                                            forums.push(forum);\n\n                                            dispatch({\n                                                type: FORUMS_CHANGED,\n                                                forumsChanged: [...forums]\n                                            });\n                                        })\n                                        .catch(error => {\n                                            // handle error\n                                        });\n                                }\n                            }\n                        }\n                        // only add deleted forums\n                        else {\n                            if (forum.hasOwnProperty('deleted') && forum.deleted === true) {\n                                if (forum.author.id === currentUser.id) {\n                                    forum.author = currentUser;\n                                    forums.push(forum);\n\n                                    dispatch({\n                                        type: FORUMS_CHANGED,\n                                        forumsChanged: [...forums]\n                                    });\n                                } else {\n                                    realtimeDBUtils\n                                        .getUserBasedOnID(forum.author.id)\n                                        .then(user => {\n                                            forum.author = user;\n                                            forums.push(forum);\n\n                                            dispatch({\n                                                type: FORUMS_CHANGED,\n                                                forumsChanged: [...forums]\n                                            });\n                                        })\n                                        .catch(error => {\n                                            // handle error\n                                        });\n                                }\n                            }\n                        }\n                    }\n                });\n\n            // a forum has changed\n            forumsListener\n                .on('child_changed', snapshot => {\n                    let forum = snapshot.val();\n\n                    let forums = [...getState().manageForums.forums];\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === forum.id);\n\n                    if (existingForumIndex !== -1) {\n                        if (!forum.hasOwnProperty('deleted')\n                            || (\n                                forum.hasOwnProperty('deleted')\n                                && forum.deleted === false\n                            )\n                        ) {\n                            forum.author = forums[existingForumIndex].author;\n                            forums[existingForumIndex] = forum;\n                        } else {\n                            forums.splice(existingForumIndex, 1);\n                        }\n\n                        dispatch({\n                            type: FORUMS_CHANGED,\n                            forumsChanged: [...forums]\n                        });\n                    } else {\n                        realtimeDBUtils\n                            .getUserBasedOnID(forum.author.id)\n                            .then(user => {\n                                forum.author = user;\n                                forums.push(forum);\n\n                                dispatch({\n                                    type: FORUMS_CHANGED,\n                                    forumsChanged: [...forums]\n                                });\n                            })\n                            .catch(error => {\n                                // handle error\n                            });\n                    }\n                });\n\n            // a forums is removed\n            forumsListener\n                .on('child_removed', snapshot => {\n\n                    let forums = [...getState().manageForums.forums];\n\n                    let existingForumIndex = forums.findIndex(existingForum => existingForum.id === snapshot.key);\n                    forums.splice(existingForumIndex, 1);\n\n                    dispatch({\n                        type: FORUMS_CHANGED,\n                        forumsChanged: [...forums]\n                    });\n                });\n        }\n    }\n};\n\nexport const stopListeningForForumsChanged = () => {\n    return (dispatch, getState) => {\n        if (forumsListener) {\n            forumsListener.off('child_added');\n            forumsListener.off('child_changed');\n            forumsListener.off('child_removed');\n            forumsListener = null;\n        }\n    }\n};\n\nexport const THREADS_CHANGED = 'THREADS_CHANGED';\nexport const startListeningForThreadsChanged = () => {\n    return (dispatch, getState) => {\n        const forumSelected = getState().manageForums.forumSelected;\n\n        if (!forumThreadsListener) {\n            forumThreadsListener = firebase\n                .database()\n                .ref(DB_CONST.FORUM_THREADS_CHILD)\n                .orderByChild('forumID')\n                .equalTo(forumSelected.id);\n\n            // a new thread is added\n            forumThreadsListener\n                .on('child_added', snapshot => {\n                    let thread = snapshot.val();\n\n                    const currentUser = getState().auth.user;\n                    const threadsLoadMode = getState().manageForums.threadsLoadMode;\n\n                    let threads = [...getState().manageForums.forumThreads];\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\n\n                    // only add if the thread is not in the local threads array\n                    if (existingThreadIndex === -1) {\n                        // only add live threads\n                        if (threadsLoadMode === realtimeDBUtils.LOAD_LIVE_THREADS) {\n                            if (!thread.hasOwnProperty('deleted')\n                                || (\n                                    thread.hasOwnProperty('deleted')\n                                    && thread.deleted === false\n                                )\n                            ) {\n                                if (thread.author.id === currentUser.id) {\n                                    thread.author = currentUser;\n                                    threads.push(thread);\n\n                                    dispatch({\n                                        type: THREADS_CHANGED,\n                                        threadsChanged: [...threads]\n                                    });\n                                } else {\n                                    realtimeDBUtils\n                                        .getUserBasedOnID(thread.author.id)\n                                        .then(user => {\n                                            thread.author = user;\n                                            threads.push(thread);\n\n                                            dispatch({\n                                                type: THREADS_CHANGED,\n                                                threadsChanged: [...threads]\n                                            });\n                                        })\n                                        .catch(error => {\n                                            // handle error\n                                        });\n                                }\n                            }\n                        }\n                        // only add deleted threads\n                        else {\n                            if (thread.hasOwnProperty('deleted') && thread.deleted === true) {\n                                if (thread.author.id === currentUser.id) {\n                                    thread.author = currentUser;\n                                    threads.push(thread);\n\n                                    dispatch({\n                                        type: THREADS_CHANGED,\n                                        threadsChanged: [...threads]\n                                    });\n                                } else {\n                                    realtimeDBUtils\n                                        .getUserBasedOnID(thread.author.id)\n                                        .then(user => {\n                                            thread.author = user;\n                                            threads.push(thread);\n\n                                            dispatch({\n                                                type: THREADS_CHANGED,\n                                                forumsChanged: [...threads]\n                                            });\n                                        })\n                                        .catch(error => {\n                                            // handle error\n                                        });\n                                }\n                            }\n                        }\n                    }\n                });\n\n            // a thread has changed\n            forumThreadsListener\n                .on('child_changed', snapshot => {\n                    let thread = snapshot.val();\n\n                    let threads = [...getState().manageForums.forumThreads];\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === thread.id);\n\n                    if (existingThreadIndex !== -1) {\n                        if (!thread.hasOwnProperty('deleted')\n                            || (\n                                thread.hasOwnProperty('deleted')\n                                && thread.deleted === false\n                            )\n                        ) {\n                            thread.author = threads[existingThreadIndex].author;\n                            threads[existingThreadIndex] = thread;\n                        } else {\n                            threads.splice(existingThreadIndex, 1);\n                        }\n\n                        dispatch({\n                            type: THREADS_CHANGED,\n                            threadsChanged: [...threads]\n                        });\n                    } else {\n                        realtimeDBUtils\n                            .getUserBasedOnID(thread.author.id)\n                            .then(user => {\n                                thread.author = user;\n                                threads.push(thread);\n\n                                dispatch({\n                                    type: THREADS_CHANGED,\n                                    threadsChanged: [...threads]\n                                });\n                            })\n                            .catch(error => {\n                                // handle error\n                            });\n                    }\n                });\n\n            // a thread is removed\n            forumThreadsListener\n                .on('child_removed', snapshot => {\n\n                    let threads = [...getState().manageForums.forumThreads];\n\n                    let existingThreadIndex = threads.findIndex(existingThread => existingThread.id === snapshot.key);\n                    threads.splice(existingThreadIndex, 1);\n\n                    dispatch({\n                        type: THREADS_CHANGED,\n                        threadsChanged: [...threads]\n                    });\n                });\n        }\n    }\n};\n\nexport const stopListeningForThreadsChanged = () => {\n    return (dispatch, getState) => {\n        if (forumThreadsListener) {\n            forumThreadsListener.off('child_added');\n            forumThreadsListener.off('child_changed');\n            forumThreadsListener.off('child_removed');\n            forumThreadsListener = null;\n        }\n    }\n};\n\nexport const THREAD_REPLIES_CHANGED = 'THREAD_REPLIES_CHANGED';\nexport const startListeningForThreadRepliesChanged = () => {\n    return (dispatch, getState) => {\n        const user = getState().auth.user;\n        const forumThreadSelected = getState().manageForums.forumThreadSelected;\n\n        if (!forumThreadRepliesListener) {\n            forumThreadRepliesListener = firebase\n                .database()\n                .ref(DB_CONST.FORUM_THREAD_REPLIES_CHILD)\n                .orderByChild('threadID')\n                .equalTo(forumThreadSelected.id);\n\n            // a new reply is added\n            forumThreadRepliesListener\n                .on('child_added', snapshot => {\n                    let reply = snapshot.val();\n\n                    let replies = [...getState().manageForums.forumThreadReplies];\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\n\n                    // only add if the forums is not in the local forums array\n                    if (existingReplyIndex === -1) {\n                        if (reply.author.id === user.id) {\n                            reply.author = user;\n                            replies.push(reply);\n\n                            dispatch({\n                                type: THREAD_REPLIES_CHANGED,\n                                repliesChanged: [...replies]\n                            });\n                        } else {\n                            realtimeDBUtils\n                                .getUserBasedOnID(reply.author.id)\n                                .then(user => {\n                                    reply.author = user;\n                                    replies.push(reply);\n\n                                    dispatch({\n                                        type: THREAD_REPLIES_CHANGED,\n                                        repliesChanged: [...replies]\n                                    });\n                                })\n                                .catch(error => {\n                                    // handle error\n                                });\n                        }\n                    }\n                });\n\n            // a reply has changed\n            forumThreadRepliesListener\n                .on('child_changed', snapshot => {\n                    let reply = snapshot.val();\n\n                    let replies = [...getState().manageForums.forumThreadReplies];\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === reply.id);\n\n                    reply.author = replies[existingReplyIndex].author;\n                    replies[existingReplyIndex] = reply;\n\n                    dispatch({\n                        type: THREAD_REPLIES_CHANGED,\n                        repliesChanged: [...replies]\n                    });\n                });\n\n            // a reply is removed\n            forumThreadRepliesListener\n                .on('child_removed', snapshot => {\n\n                    let replies = [...getState().manageForums.forumThreadReplies];\n\n                    let existingReplyIndex = replies.findIndex(existingReply => existingReply.id === snapshot.key);\n                    replies.splice(existingReplyIndex, 1);\n\n                    dispatch({\n                        type: THREAD_REPLIES_CHANGED,\n                        repliesChanged: [...replies]\n                    });\n                });\n        }\n    }\n};\n\nexport const stopListeningForThreadRepliesChanged = () => {\n    return (dispatch, getState) => {\n        if (forumThreadRepliesListener) {\n            forumThreadRepliesListener.off('child_added');\n            forumThreadRepliesListener.off('child_changed');\n            forumThreadRepliesListener.off('child_removed');\n            forumThreadRepliesListener = null;\n        }\n    }\n};\n\n","import {Action, ActionCreator, Dispatch} from \"redux\";\r\nimport {AuthenticationStatus, isAuthenticating, successfullyAuthenticated} from \"../reducers/authenticationReducer\";\r\nimport User, {isInvestor} from \"../../models/user\";\r\nimport Admin, {isAdmin} from \"../../models/admin\";\r\nimport Error from \"../../models/error\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport GroupOfMembership from \"../../models/group_of_membership\";\r\nimport {AppState} from \"../reducers\";\r\nimport Routes from \"../../router/routes\";\r\nimport Firebase from \"firebase\";\r\nimport UserRepository from \"../../api/repositories/UserRepository\";\r\n\r\nexport enum AuthenticationEvents {\r\n    StartAuthenticating = \"AuthenticationEvents.StartAuthenticating\",\r\n    CompleteAuthentication = \"AuthenticationEvents.CompleteAuthentication\",\r\n    SignOut = \"AuthenticationEvents.SignOut\",\r\n    UpdateUserChanges = \"AuthenticationEvents.UpdateUserChanges\"\r\n}\r\n\r\nexport interface AuthenticationAction extends Action {\r\n}\r\n\r\nexport interface UpdateUserChangesAction extends Action {\r\n    updatedUser: User | Admin;\r\n}\r\n\r\nexport interface CompleteAuthenticationAction extends AuthenticationAction {\r\n    status: AuthenticationStatus;\r\n    currentUser: User | Admin | null;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    error?: Error;\r\n}\r\n\r\n/* TODO: remove console logs */\r\nexport const signIn: ActionCreator<any> = (email?: string, password?: string) => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = getState();\r\n\r\n        if (isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        const authenticationCompleteAction: CompleteAuthenticationAction = {\r\n            type: AuthenticationEvents.CompleteAuthentication,\r\n            status: AuthenticationStatus.Authenticating,\r\n            currentUser: null,\r\n            groupsOfMembership: []\r\n        }\r\n\r\n        try {\r\n            let currentFirebaseUser: firebase.default.User | null = await firebase.auth().currentUser;\r\n\r\n            // user is currently signed in with Firebase\r\n            if (currentFirebaseUser) {\r\n                if (successfullyAuthenticated(AuthenticationState)) {\r\n                    return;\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n            }\r\n            // user is currently not signed in with Firebase\r\n            else {\r\n                if (email === undefined || password === undefined) {\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    authenticationCompleteAction.error = {\r\n                        detail: \"Email and password not provided.\"\r\n                    }\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                dispatch({\r\n                    type: AuthenticationEvents.StartAuthenticating\r\n                });\r\n\r\n                // set persistence state to SESSION\r\n                await firebase.auth().setPersistence(Firebase.auth.Auth.Persistence.LOCAL);\r\n\r\n                // sign in with Firebase using email and password\r\n                const credential: firebase.default.auth.UserCredential =\r\n                    await firebase.auth().signInWithEmailAndPassword(email, password);\r\n\r\n                currentFirebaseUser = credential.user;\r\n            }\r\n\r\n            if (currentFirebaseUser) {\r\n                const uid: string | undefined = currentFirebaseUser.uid;\r\n\r\n                // get current user profile\r\n                const retrieveUserResponse = await new UserRepository().retrieveUser(uid);\r\n\r\n                const currentUser: User | Admin = retrieveUserResponse.data;\r\n                const currentAdmin: Admin | null = isAdmin(currentUser);\r\n\r\n                // Check:\r\n                // 1. Super admin must sign in via the dedicated URL.\r\n                // 2. Only super admin can sign in via the dedicated URL.\r\n                let validSuperAdminSignIn: boolean = true;\r\n\r\n                if (Routes.isSuperAdminSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (!(currentAdmin && currentAdmin.superAdmin)) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"You have no privileges to sign in.\"\r\n                        }\r\n                    }\r\n                } else if (Routes.isSignInRoute(ManageGroupUrlState.routePath ?? \"\")) {\r\n                    if (currentAdmin && currentAdmin.superAdmin) {\r\n                        validSuperAdminSignIn = false;\r\n                        authenticationCompleteAction.error = {\r\n                            detail: \"Please sign in via your dedicated page.\"\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (!validSuperAdminSignIn) {\r\n                    await dispatch(signOut());\r\n                    authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                    return dispatch(authenticationCompleteAction);\r\n                }\r\n\r\n                authenticationCompleteAction.currentUser = currentUser;\r\n\r\n\r\n                // get groups of membership for the current user\r\n                const listGroupsOfMembershipResponse = await new UserRepository().listGroupsOfMembership(uid);\r\n\r\n                authenticationCompleteAction.groupsOfMembership = listGroupsOfMembershipResponse.data;\r\n\r\n                authenticationCompleteAction.status = AuthenticationStatus.Authenticated;\r\n                return dispatch(authenticationCompleteAction);\r\n            } else {\r\n                await dispatch(signOut());\r\n                authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n                authenticationCompleteAction.error = {\r\n                    detail: \"Invalid credential.\"\r\n                }\r\n                return dispatch(authenticationCompleteAction);\r\n            }\r\n        } catch (error) {\r\n            await dispatch(signOut());\r\n            authenticationCompleteAction.status = AuthenticationStatus.Unauthenticated;\r\n            authenticationCompleteAction.error = {\r\n                detail: error.toString()\r\n            }\r\n            return dispatch(authenticationCompleteAction);\r\n        }\r\n    }\r\n}\r\n\r\nexport const signOut: ActionCreator<any> = () => {\r\n    return async (dispatch: Dispatch, getState: () => AppState) => {\r\n        try {\r\n            await firebase.auth().signOut();\r\n        } catch (error) {\r\n            console.log(`Error signing out: ${error.toString()}`);\r\n        }\r\n        return dispatch({\r\n            type: AuthenticationEvents.SignOut\r\n        });\r\n    }\r\n}\r\n\r\nexport const updateUserChanges: ActionCreator<any> = (updatedUser: User | Admin) => {\r\n    return (dispatch: Dispatch, getState: () => AppState) => {\r\n        const action: UpdateUserChangesAction = {\r\n            type: AuthenticationEvents.UpdateUserChanges,\r\n            updatedUser: JSON.parse(JSON.stringify(updatedUser))\r\n        };\r\n        return dispatch(action);\r\n    }\r\n}","import User, {ProfileImage, ProfileVideo} from \"../../models/user\";\nimport Api, {ApiRoutes} from \"../Api\";\n\nexport interface UpdateUserData {\n    updatedUser: User;\n    newProfilePicture?: ProfileImage;\n    newLogo?: ProfileImage;\n    newVideo?: ProfileVideo;\n    removeProfilePicture?: true;\n}\n\nexport interface SignUpData {\n    isPublicRegistration: boolean;\n    invitedUserID?: string;\n    userProfile: Partial<User>;\n    password: string;\n    groupID: string;\n    acceptMarketingPreferences: boolean;\n}\n\n    export default class UserRepository {\n\n    /**\n     * Sign up\n     *\n     * @param data\n     */\n    public async signUp(data: SignUpData) {\n        return await new Api()\n            .request(\n                \"post\",\n                ApiRoutes.createUser,\n                {\n                    queryParameters: null,\n                    requestBody: data\n                }\n            );\n    }\n\n    /**\n     * Retrieve user\n     *\n     * @param uid\n     */\n    public async retrieveUser(uid: string) {\n        return await new Api().request(\"get\",\n            ApiRoutes.retrieveUser.replace(\":uid\", uid));\n    }\n\n    /**\n     * Retrieve invited user\n     *\n     * @param invitedUserID\n     */\n    public async retrieveInvitedUser(invitedUserID: string) {\n        return await new Api().request(\"get\",\n            ApiRoutes.retrieveInvitedUser.replace(\":invitedUserID\", invitedUserID));\n    }\n\n    /**\n     * Update user\n     *\n     * @param data\n     */\n    public async updateUser(data: UpdateUserData) {\n        return await new Api()\n            .request(\n                \"put\",\n                ApiRoutes.updateUser,\n                {\n                    queryParameters: null,\n                    requestBody: data\n                }\n            );\n    }\n\n    /**\n     * List groups of membership\n     *\n     * @param uid\n     */\n    public async listGroupsOfMembership(uid: string) {\n        return await new Api().request(\"get\",\n            ApiRoutes.listGroupsOfMembership.replace(\":uid\", uid));\n    }\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport GroupProperties from \"../../models/group_properties\";\nimport Error from \"../../models/error\";\nimport {AppState} from \"../reducers\";\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\n\nexport enum ManageGroupUrlEvents {\n    SetGroupUrl = \"ManageGroupUrlEvents.SetGroupUrl\",\n    ValidatingGroupUrl = \"ManageGroupUrlEvents.ValidatingGroupUrl\",\n    FinishedValidatingGroupUrl = \"ManageGroupUrlEvents.FinishedValidatingGroupUrl\"\n}\n\nexport interface ManageGroupUrlAction extends Action {\n    path?: string;\n    groupUserName?: string | null;\n    group?: GroupProperties | null;\n    validGroupUrl?: boolean;\n    error?: Error\n}\n\nexport interface SetGroupUrlAction extends ManageGroupUrlAction {\n    path: string;\n    groupUserName: string | null;\n}\n\nexport interface ValidatingGroupUrlAction extends ManageGroupUrlAction {\n}\n\nexport interface FinishedValidatingGroupUrlAction extends ManageGroupUrlAction {\n    group: GroupProperties | null;\n    validGroupUrl: boolean;\n    error?: Error\n}\n\nexport const validateGroupUrl: ActionCreator<any> = (path: string, groupUserName: string | null) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            routePath,\n            groupNameFromUrl,\n            group,\n            loadingGroup,\n            groupLoaded\n        } = getState().ManageGroupUrlState;\n\n        const setGroupUrlAction: SetGroupUrlAction = {\n            type: ManageGroupUrlEvents.SetGroupUrl,\n            path,\n            groupUserName\n        }\n\n        let shouldValidateGroupUrl = false;\n\n        // routePath or groupNameFromUrl or both of them have not been defined\n        if (routePath === undefined || groupNameFromUrl === undefined) {\n            shouldValidateGroupUrl = true;\n        }\n        // routePath and groupNameFromUrl have been defined\n        else {\n            if (groupNameFromUrl !== groupUserName) {\n                shouldValidateGroupUrl = true;\n            }\n        }\n\n        // group has not been loaded\n        // or group has been loaded but a new group name is set in the url\n        // --> continue validating group url\n        if ((!group && !loadingGroup && !groupLoaded)\n            || (!(!group && !loadingGroup && !groupLoaded) && shouldValidateGroupUrl)\n        ) {\n            dispatch(setGroupUrlAction);\n\n            const validatingGroupUrlAction: ValidatingGroupUrlAction = {\n                type: ManageGroupUrlEvents.ValidatingGroupUrl\n            }\n\n            dispatch(validatingGroupUrlAction);\n\n            const finishedLoadingGroupUrlAction: FinishedValidatingGroupUrlAction = {\n                type: ManageGroupUrlEvents.FinishedValidatingGroupUrl,\n                group: null,\n                validGroupUrl: false\n            }\n\n            // group name is not specified in the url\n            if (!groupUserName) {\n                finishedLoadingGroupUrlAction.validGroupUrl = true;\n                return dispatch(finishedLoadingGroupUrlAction);\n            }\n\n            try {\n                const response = await new GroupRepository().getGroup(groupUserName);\n                const retrievedGroup: GroupProperties | null = response.data;\n                finishedLoadingGroupUrlAction.group = retrievedGroup;\n                finishedLoadingGroupUrlAction.validGroupUrl = retrievedGroup !== null;\n                return dispatch(finishedLoadingGroupUrlAction);\n            } catch (error) {\n                finishedLoadingGroupUrlAction.error = {\n                    detail: error.toString()\n                }\n                return dispatch(finishedLoadingGroupUrlAction);\n            }\n        }\n    }\n}","import React, {Component} from \"react\";\nimport FlexView from \"react-flexview/lib/index\";\nimport {css} from \"aphrodite\";\nimport {Divider, List, ListItem, ListItemIcon, ListItemText, Link} from \"@material-ui/core\";\nimport {Image} from \"react-bootstrap\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport WorkIcon from \"@material-ui/icons/Work\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport ContactSupportIcon from \"@material-ui/icons/ContactSupport\";\nimport ArrowLeft from \"@material-ui/icons/SubdirectoryArrowLeft\";\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\nimport BubbleChartIcon from \"@material-ui/icons/BubbleChart\";\nimport ProjectIcon from \"@material-ui/icons/CardGiftcard\";\nimport InfoIcon from \"@material-ui/icons/Info\";\nimport HistoryIcon from \"@material-ui/icons/History\";\nimport {NavLink} from \"react-router-dom\";\n\nimport {connect} from \"react-redux\";\nimport * as authActions from \"../../redux-store/actions/authActions\";\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\nimport * as forumsActions from \"../../redux-store/actions/forumsActions\";\n\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\nimport * as ROUTES from \"../../router/routes\";\nimport Routes from \"../../router/routes\";\nimport * as utils from \"../../utils/utils\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\nimport {signOut} from \"../../redux-store/actions/authenticationActions\";\nimport {School} from \"@material-ui/icons\";\n\nexport const HOME_TAB = \"Home\";\nexport const PROFILE_TAB = \"Profile\";\nexport const FORUMS_TAB = \"Forums\";\nexport const MY_OFFERS_TAB = \"My offers\";\n// export const MY_PLEDGES_TAB = \"My pledges\";\nexport const SETTINGS_TAB = \"Settings\";\nexport const CHANGE_PASSWORD_TAB = \"Change password\";\nexport const CONTACT_US_TAB = \"Contact us\";\nexport const GUIDELINE_TAB = \"Help\";\nexport const RESOURCES_TAB = \"Resources\";\nexport const EXPLORE_GROUPS_TAB = \"Explore courses\";\nexport const EXPLORE_OFFERS_TAB = \"Explore student projects\";\nexport const MY_ACTIVITIES_TAB = \"My activities\";\nexport const GROUP_ACTIVITIES_TAB = \"Audit Log\";\n\nconst mapStateToProps = state => {\n    return {\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState,\n\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n\n        user: state.auth.user\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        signOutNew: async () => dispatch(signOut()),\n\n        logout: () => dispatch(authActions.logout()),\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\n\n        goBackToForumsMain: () => dispatch(forumsActions.goBackToForumsMain())\n    };\n};\n\nclass SidebarContent extends Component {\n\n    onLogoutClick = async () => {\n        const {\n            dashboardProps,\n            logout,\n\n            ManageGroupUrlState,\n            AuthenticationState,\n            signOutNew\n        } = this.props;\n\n        await signOutNew();\n        dashboardProps.history.push(Routes.constructHomeRoute(dashboardProps.match.params, ManageGroupUrlState, AuthenticationState));\n\n        logout(); // logout old\n    };\n\n    onForumsTabClick = () => {\n        this.props.toggleSidebar(false);\n        this.props.goBackToForumsMain();\n    };\n\n    render() {\n        const {\n            groupUserName,\n            groupPropertiesLoaded,\n            groupProperties,\n\n            user,\n            dashboardProps,\n\n            toggleSidebar\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return null;\n        }\n\n        return (\n            <FlexView\n                column\n                width={240}\n                height=\"100%\"\n            >\n                {/** Sidebar header */}\n                <FlexView column height={65} vAlignContent=\"center\" hAlignContent=\"center\" style={{ padding: 8 }} >\n                    <Link href={groupProperties.website ?? \"\"} target=\"_blank\">\n                        <Image\n                            style={{ width: \"auto\", height: 65, margin: 0, padding: 10, objectFit: \"scale-down\" }}\n                            src={\n                                !groupProperties\n                                    ?\n                                    require('../../img/logo.png').default\n                                    :\n                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties)\n                            }\n                        />\n                    </Link>\n                </FlexView>\n\n                <Divider/>\n\n                {/** Main navigation */}\n                <FlexView column marginTop={10} >\n                    {/** Home tab */}\n                    <List>\n                        <NavLink\n                            to={{ pathname: dashboardProps.match.pathname, search: `?tab=${HOME_TAB}` }}\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                        >\n                            <ListItem button onClick={() => toggleSidebar(false)} >\n                                <ListItemIcon>\n                                    <HomeIcon/>\n                                </ListItemIcon>\n                                <ListItemText className={css(sharedStyles.black_text)}>{HOME_TAB}</ListItemText>\n                            </ListItem>\n                        </NavLink>\n\n                        {/** Offers table */}\n                        {\n                            !user\n                                ?\n                                null\n                                :\n                                // user.type === DB_CONST.TYPE_INVESTOR\n                                //     ?\n                                //     <NavLink\n                                //         to={{\n                                //             pathname: dashboardProps.match.pathname,\n                                //             search: `?tab=${MY_PLEDGES_TAB}`\n                                //         }}\n                                //         className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                //     >\n                                //         <ListItem\n                                //             button\n                                //             onClick={() => toggleSidebar(false)}\n                                //         >\n                                //             <ListItemIcon>\n                                //                 <HowToVoteIcon/>\n                                //             </ListItemIcon>\n                                //             <ListItemText\n                                //                 className={css(sharedStyles.black_text)}\n                                //             >\n                                //                 {MY_PLEDGES_TAB}\n                                //             </ListItemText>\n                                //         </ListItem>\n                                //     </NavLink>\n                                //     :\n                                user.type === DB_CONST.TYPE_ISSUER\n                                    ?\n                                    <NavLink\n                                        to={{ pathname: dashboardProps.match.pathname, search: `?tab=${MY_OFFERS_TAB}` }}\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                    >\n                                        <ListItem\n                                            button\n                                            onClick={() => toggleSidebar(false)}\n                                        >\n                                            <ListItemIcon>\n                                                <ProjectIcon/>\n                                            </ListItemIcon>\n                                            <ListItemText className={css(sharedStyles.black_text)}>{MY_OFFERS_TAB}</ListItemText>\n                                        </ListItem>\n                                    </NavLink>\n                                    :\n                                    null\n                        }\n\n                        {/** Explore offers tab */}\n                        {\n                            user.type !== DB_CONST.TYPE_ADMIN\n                                ?\n                                null\n                                :\n                                <NavLink\n                                    to={{\n                                        pathname: dashboardProps.match.pathname,\n                                        search: `?tab=${EXPLORE_OFFERS_TAB}`\n                                    }}\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                >\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\n                                        <ListItemIcon>\n                                            <ProjectIcon/>\n                                        </ListItemIcon>\n                                        <ListItemText className={css(sharedStyles.black_text)}>{EXPLORE_OFFERS_TAB}</ListItemText>\n                                    </ListItem>\n                                </NavLink>\n                        }\n\n                        {/** Explore courses tab */}\n                        <NavLink\n                            to={{\n                                pathname: dashboardProps.match.pathname,\n                                search: `?tab=${EXPLORE_GROUPS_TAB}`\n                            }}\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                        >\n                            <ListItem button onClick={() => toggleSidebar(false)} >\n                                <ListItemIcon>\n                                    <BubbleChartIcon/>\n                                </ListItemIcon>\n                                <ListItemText className={css(sharedStyles.black_text)}>{EXPLORE_GROUPS_TAB}</ListItemText>\n                            </ListItem>\n                        </NavLink>\n\n                        {/** Resources \n                        <NavLink\n                            to={{\n                                pathname: dashboardProps.match.pathname,\n                                search: `?tab=${RESOURCES_TAB}`\n                            }}\n                            className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                        >\n                            <ListItem button onClick={() => toggleSidebar(false)} >\n                                <ListItemIcon>\n                                    <School/>\n                                </ListItemIcon>\n                                <ListItemText className={css(sharedStyles.black_text)}>{RESOURCES_TAB}</ListItemText>\n                            </ListItem>\n                        </NavLink>\n                        */\n                    }\n                    </List>\n                \n                </FlexView>\n\n                {/** Footer navigation */}\n                <FlexView column height='100%' vAlignContent=\"bottom\" >\n                    <List>\n                        {/** Profile tab (for normal users) || Settings tab (for admins) */}\n                        {\n                            !user\n                                ?\n                                null\n                                :\n                                user.type !== DB_CONST.TYPE_ADMIN\n                                    ?\n                                    <NavLink\n                                        to={{\n                                            pathname: dashboardProps.match.pathname,\n                                            search: `?tab=${PROFILE_TAB}`\n                                        }}\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                    >\n                                        <ListItem button onClick={() => toggleSidebar(false)} >\n                                            <ListItemIcon>\n                                                <WorkIcon/>\n                                            </ListItemIcon>\n                                            <ListItemText className={css(sharedStyles.black_text)}>{PROFILE_TAB}</ListItemText>\n                                        </ListItem>\n                                    </NavLink>\n                                    :\n                                    <NavLink\n                                        to={{\n                                            pathname: dashboardProps.match.pathname,\n                                            search: `?tab=${SETTINGS_TAB}`\n                                        }}\n                                        className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                    >\n                                        <ListItem button onClick={() => toggleSidebar(false)} >\n                                            <ListItemIcon>\n                                                <SettingsIcon/>\n                                            </ListItemIcon>\n                                            <ListItemText className={css(sharedStyles.black_text)}>{SETTINGS_TAB}</ListItemText>\n                                        </ListItem>\n                                    </NavLink>\n                        }\n\n                        {/** My/Course activities tab */}\n                        {\n                            user.type !== DB_CONST.TYPE_ADMIN\n                                ?\n                                null\n                                :\n                                <NavLink\n                                    to={{\n                                        pathname: dashboardProps.match.pathname,\n                                        search: `?tab=${(user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin) ? GROUP_ACTIVITIES_TAB : MY_ACTIVITIES_TAB}`\n                                    }}\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                >\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\n                                        <ListItemIcon>\n                                            <HistoryIcon/>\n                                        </ListItemIcon>\n                                        <ListItemText className={css(sharedStyles.black_text)} >\n                                            {\n                                                GROUP_ACTIVITIES_TAB\n                                            }\n                                        </ListItemText>\n                                    </ListItem>\n                                </NavLink>\n                        }\n\n                        {/** Change password tab */}\n                        {\n                            !user\n                                ?\n                                null\n                                :\n                                <NavLink\n                                    to={{\n                                        pathname: dashboardProps.match.pathname,\n                                        search: `?tab=${CHANGE_PASSWORD_TAB}`\n                                    }}\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                >\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\n                                        <ListItemIcon>\n                                            <VerifiedUserIcon/>\n                                        </ListItemIcon>\n                                        <ListItemText className={css(sharedStyles.black_text)}>{CHANGE_PASSWORD_TAB}</ListItemText>\n                                    </ListItem>\n                                </NavLink>\n                        }\n\n                        {/** Forums tab */}\n                        {/*<NavLink*/}\n                        {/*    to={{*/}\n                        {/*        pathname: dashboardProps.match.pathname,*/}\n                        {/*        search: `?tab=${FORUMS_TAB}`*/}\n                        {/*    }}*/}\n                        {/*    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}*/}\n                        {/*>*/}\n                        {/*    <ListItem*/}\n                        {/*        button*/}\n                        {/*        onClick={this.onForumsTabClick}*/}\n                        {/*    >*/}\n                        {/*        <ListItemIcon>*/}\n                        {/*            <ChatIcon/>*/}\n                        {/*        </ListItemIcon>*/}\n                        {/*        <ListItemText*/}\n                        {/*            className={css(sharedStyles.black_text)}*/}\n                        {/*        >*/}\n                        {/*            {FORUMS_TAB}*/}\n                        {/*        </ListItemText>*/}\n                        {/*    </ListItem>*/}\n                        {/*</NavLink>*/}\n                        {\n                            user.type === DB_CONST.TYPE_ADMIN\n                                ?\n                                null\n                                :\n                                <NavLink\n                                    to={\n                                        groupUserName\n                                            ?\n                                            ROUTES.CONTACT_US.replace(':groupUserName', groupUserName)\n                                            :\n                                            ROUTES.CONTACT_US_INVEST_WEST_SUPER\n                                    }\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                >\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\n                                        <ListItemIcon>\n                                            <ContactSupportIcon/>\n                                        </ListItemIcon>\n                                        <ListItemText className={css(sharedStyles.black_text)}>{CONTACT_US_TAB}</ListItemText>\n                                    </ListItem>\n                                </NavLink>\n                        }\n\n                        {/** Help tab */}\n                        {\n                            // don't need to show this tab to super admin\n                            user.type === DB_CONST.TYPE_ADMIN\n                            && user.superAdmin\n                                ?\n                                null\n                                :\n                                <NavLink\n                                    to={\n                                        groupUserName\n                                            ?\n                                            ROUTES.HELP.replace(':groupUserName', groupUserName)\n                                            :\n                                            ROUTES.HELP_INVEST_WEST_SUPER\n                                    }\n                                    className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                                >\n                                    <ListItem button onClick={() => toggleSidebar(false)} >\n                                        <ListItemIcon>\n                                            <InfoIcon/>\n                                        </ListItemIcon>\n                                        <ListItemText className={css(sharedStyles.black_text)}>{GUIDELINE_TAB}</ListItemText>\n                                    </ListItem>\n                                </NavLink>\n                        }\n\n                        {/** Logout tab */}\n                        <ListItem button onClick={this.onLogoutClick} >\n                            <ListItemIcon>\n                                <ArrowLeft/>\n                            </ListItemIcon>\n                            <ListItemText>Logout</ListItemText>\n                        </ListItem>\n                    </List>\n                </FlexView>\n            </FlexView>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarContent);","import React, { Component } from 'react';\nimport {\n    Avatar,\n    Typography\n} from '@material-ui/core';\n\nimport * as colors from '../../values/colors';\n\nexport default class LetterAvatar extends Component {\n    render() {\n        const {\n            firstName,\n            lastName,\n            width,\n            height,\n            textVariant\n        } = this.props;\n\n        return (\n            <Avatar\n                style={{\n                    color: colors.white,\n                    backgroundColor: this.getBackgroundColor(),\n                    width: width,\n                    height: height\n                }}\n            >\n                <Typography variant={textVariant}>\n                    {`${firstName[0].toUpperCase()}${lastName[0].toUpperCase()}`}\n                </Typography>\n            </Avatar>\n        );\n    }\n\n    getBackgroundColor = () => {\n        const { firstName } = this.props;\n\n        switch (firstName[0].toLowerCase()) {\n            case \"a\":\n                return colors.background_a;\n            case \"b\":\n                return colors.background_b;\n            case \"c\":\n                return colors.background_c;\n            case \"d\":\n                return colors.background_d;\n            case \"e\":\n                return colors.background_e;\n            case \"f\":\n                return colors.background_f;\n            case \"g\":\n                return colors.background_g;\n            case \"h\":\n                return colors.background_h;\n            case \"i\":\n                return colors.background_i;\n            case \"j\":\n                return colors.background_j;\n            case \"k\":\n                return colors.background_k;\n            case \"l\":\n                return colors.background_l;\n            case \"m\":\n                return colors.background_m;\n            case \"n\":\n                return colors.background_n;\n            case \"o\":\n                return colors.background_o;\n            case \"p\":\n                return colors.background_p;\n            case \"q\":\n                return colors.background_q;\n            case \"r\":\n                return colors.background_r;\n            case \"s\":\n                return colors.background_s;\n            case \"t\":\n                return colors.background_t;\n            case \"u\":\n                return colors.background_u;\n            case \"v\":\n                return colors.background_v;\n            case \"w\":\n                return colors.background_w;\n            case \"x\":\n                return colors.background_x;\n            case \"y\":\n                return colors.background_y;\n            case \"z\":\n                return colors.background_z;\n            default:\n                return;\n        }\n    }\n}","export const JSON_COMPARE_CHANGES_DIALOG_SET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_SET_DATA';\nexport const setData = (jsonBefore, jsonAfter) => {\n    return {\n        type: JSON_COMPARE_CHANGES_DIALOG_SET_DATA,\n        jsonBefore,\n        jsonAfter\n    }\n};\n\nexport const JSON_COMPARE_CHANGES_DIALOG_RESET_DATA = 'JSON_COMPARE_CHANGES_DIALOG_RESET_DATA';\nexport const resetData = () => {\n    return {\n        type: JSON_COMPARE_CHANGES_DIALOG_RESET_DATA\n    }\n};","import React, {Component} from 'react';\nimport {\n    Dialog,\n    DialogContent,\n    DialogTitle,\n    IconButton,\n    Typography\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ReactJson from 'react-json-view';\nimport FlexView from 'react-flexview';\nimport {\n    Container,\n    Row,\n    Col\n} from 'react-bootstrap';\n\nimport {connect} from 'react-redux';\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\n\nconst mapStateToProps = state => {\n    return {\n        dialogOpen: state.manageJSONCompareChangesDialog.dialogOpen,\n        jsonBefore: state.manageJSONCompareChangesDialog.jsonBefore,\n        jsonAfter: state.manageJSONCompareChangesDialog.jsonAfter\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        resetData: () => dispatch(manageJSONCompareChangesActions.resetData())\n    }\n};\n\nclass JSONCompareChangesDialog extends Component {\n    render() {\n        const {\n            forwardedRef,\n\n            dialogOpen,\n            jsonBefore,\n            jsonAfter,\n\n            resetData,\n\n            other\n        } = this.props;\n\n        return (\n            <Dialog\n                ref={forwardedRef}\n                open={dialogOpen}\n                fullWidth\n                maxWidth=\"lg\"\n                onClose={resetData}\n                {...other}\n            >\n                <DialogTitle>\n                    <FlexView vAlignContent=\"center\" >\n                        <FlexView grow={4} >\n                            <Typography variant=\"h5\" color=\"primary\" align=\"left\">Data changes</Typography>\n                        </FlexView>\n                        <FlexView grow={1} hAlignContent=\"right\" >\n                            <IconButton onClick={resetData} >\n                                <CloseIcon/>\n                            </IconButton>\n                        </FlexView>\n                    </FlexView>\n                </DialogTitle>\n                <DialogContent style={{ marginBottom: 25 }} >\n                    <FlexView>\n                        <Container fluid style={{ padding: 0 }} >\n                            {\n                                JSON.stringify(jsonBefore) === JSON.stringify(jsonAfter)\n                                    ?\n                                    // no data changes\n                                    <Row>\n                                        <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} >\n                                            <FlexView column width=\"100%\" >\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>No data changes after this activity</b></Typography>\n\n                                                <ReactJson\n                                                    src={jsonBefore}\n                                                    theme=\"monokai\"\n                                                    collapseStringsAfterLength={50}\n                                                    // enable clipboard not working\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\n                                                    enableClipboard={\n                                                        (copy) => {\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\n                                                        }\n                                                    }\n                                                />\n                                            </FlexView>\n                                        </Col>\n                                    </Row>\n                                    :\n                                    // there are data changes\n                                    <Row>\n                                        {/** JSON before */}\n                                        <Col xs={12} sm={12} md={6} lg={6} >\n                                            <FlexView column width=\"100%\" >\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>Before</b></Typography>\n\n                                                <ReactJson\n                                                    src={jsonBefore}\n                                                    theme=\"monokai\"\n                                                    collapseStringsAfterLength={50}\n                                                    // enable clipboard not working\n                                                    // solution found here: https://github.com/mac-s-g/react-json-view/issues/131\n                                                    enableClipboard={\n                                                        (copy) => {\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\n                                                        }\n                                                    }\n                                                />\n                                            </FlexView>\n                                        </Col>\n\n                                        {/** JSON after */}\n                                        <Col xs={12} sm={12} md={6} lg={6} >\n                                            <FlexView column width=\"100%\" >\n                                                <Typography variant=\"h6\" align=\"left\" paragraph><b>After</b></Typography>\n\n                                                <ReactJson\n                                                    src={jsonAfter}\n                                                    theme=\"monokai\"\n                                                    collapseStringsAfterLength={50}\n                                                    enableClipboard={\n                                                        (copy) => {\n                                                            navigator.clipboard.writeText(JSON.stringify(copy.src, null, '\\t'))\n                                                        }\n                                                    }\n                                                />\n                                            </FlexView>\n                                        </Col>\n                                    </Row>\n                            }\n                        </Container>\n                    </FlexView>\n                </DialogContent>\n            </Dialog>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JSONCompareChangesDialog);","import * as DB_CONST from '../../firebase/databaseConsts';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport firebase from '../../firebase/firebaseApp';\n\nexport const ACTIVITIES_TABLE_SET_TABLE_USER = 'ACTIVITIES_TABLE_SET_TABLE_USER';\nexport const setTableUser = newUser => {\n    return (dispatch, getState) => {\n        const prevTableUser = getState().manageActivitiesTable.tableUser;\n\n        // if user is set to null --> meaning that we're resetting the table\n        // if the previous table user is null --> still set the new user\n        if (!newUser || !prevTableUser) {\n            dispatch({\n                type: ACTIVITIES_TABLE_SET_TABLE_USER,\n                user: newUser\n            });\n            return;\n        }\n\n        // previous table user is an actual user of normal users or admins\n        if (prevTableUser.hasOwnProperty('id')) {\n            // new table user is also an actual user of normal users or admins\n            if (newUser.hasOwnProperty('id')) {\n                if (prevTableUser.id === newUser.id) {\n                    return;\n                } else {\n                    // set new table user\n                }\n            }\n            // new table user is a groupProperties object\n            else {\n                // set new table user\n            }\n        }\n        // previous table user is a groupProperties object\n        else {\n            // new table user is an actual user of normal users or admins\n            if (newUser.hasOwnProperty('id')) {\n                // set new table user\n            }\n            // new table user is also a groupProperties object\n            else {\n                if (prevTableUser.anid === newUser.anid) {\n                    return;\n                }\n            }\n        }\n\n        dispatch({\n            type: ACTIVITIES_TABLE_SET_TABLE_USER,\n            user: newUser\n        });\n    }\n};\n\nexport const ACTIVITIES_TABLE_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_LOADING_ACTIVITIES';\nexport const ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES = 'ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES';\nexport const loadActivities = () => {\n    return (dispatch, getState) => {\n        const tableUser = getState().manageActivitiesTable.tableUser;\n        const currentUser = getState().auth.user;\n\n        if (!tableUser || !currentUser) {\n            dispatch({\n                type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                activities: []\n            });\n            return;\n        }\n\n        // current user is not an admin\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\n            // and the current user is not the user referenced in the table\n            if (tableUser.hasOwnProperty('id') && currentUser.id === tableUser.id) {\n                // do nothing as the current user is actually the table user\n            } else {\n                dispatch({\n                    type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                    activities: []\n                });\n                return;\n            }\n        }\n\n        dispatch({\n            type: ACTIVITIES_TABLE_LOADING_ACTIVITIES\n        });\n\n        // table user is an actual user\n        if (tableUser.hasOwnProperty('id')) {\n            realtimeDBUtils\n                .fetchActivitiesBy({\n                    userID: tableUser.id,\n                    fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\n                })\n                .then(activities => {\n                    dispatch({\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                        activities: [...activities]\n                    });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                        activities: []\n                    });\n                });\n        }\n        // table user is a groupProperties object\n        else {\n            realtimeDBUtils\n                .loadGroupAdminsBasedOnGroupID(tableUser.anid)\n                .then(groupAdmins => {\n\n                    let allActivities = [];\n\n                    Promise.all(\n                        groupAdmins.map(groupAdmin => {\n                            return new Promise((resolve, reject) => {\n                                realtimeDBUtils\n                                    .fetchActivitiesBy({\n                                        userID: groupAdmin.id,\n                                        shouldLoadUserProfile: true,\n                                        fetchBy: realtimeDBUtils.FETCH_ACTIVITIES_BY_USER\n                                    })\n                                    .then(activities => {\n                                        allActivities = [...allActivities, ...activities];\n                                        return resolve(allActivities);\n                                    })\n                                    .catch(error => {\n                                        return reject(error);\n                                    });\n                            });\n                        })\n                    ).then(() => {\n                        dispatch({\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                            activities: [...allActivities]\n                        });\n                    }).catch(error => {\n                        dispatch({\n                            type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                            activities: []\n                        });\n                    });\n\n                })\n                .catch(error => {\n                    dispatch({\n                        type: ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES,\n                        activities: []\n                    });\n                });\n        }\n    }\n};\n\nexport const ACTIVITIES_TABLE_PAGE_CHANGED = 'ACTIVITIES_TABLE_PAGE_CHANGED';\nexport const changePage = (event, newPage) => {\n    return {\n        type: ACTIVITIES_TABLE_PAGE_CHANGED,\n        newPage\n    }\n};\n\nexport const ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED = 'ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED';\nexport const changeRowsPerPage = event => {\n    return {\n        type: ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED,\n        value: parseInt(event.target.value, 10)\n    }\n};\n\n//----------------------------------------------------------------------------------------------------------------------\nlet activitiesListener = null;\n\nexport const ACTIVITIES_IN_TABLE_CHANGED = 'ACTIVITIES_IN_TABLE_CHANGED';\nexport const startListeningForActivitiesChanged = () => {\n    return (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const tableUser = getState().manageActivitiesTable.tableUser;\n\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN && currentUser.id !== tableUser.id) {\n            return;\n        }\n\n        if (activitiesListener) {\n            return;\n        }\n\n        // table user is an actual user\n        if (tableUser.hasOwnProperty('id')) {\n            activitiesListener = firebase\n                .database()\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD)\n                .orderByChild('userID')\n                .equalTo(tableUser.id);\n        }\n        // table user is a groupProperties object\n        else {\n            activitiesListener = firebase\n                .database()\n                .ref(DB_CONST.ACTIVITIES_LOG_CHILD);\n        }\n\n        activitiesListener\n            .on('child_added', snapshot => {\n                const activity = snapshot.val();\n                let activities = [...getState().manageActivitiesTable.activities];\n\n                const activityIndex = activities.findIndex(existingActivity => existingActivity.id === activity.id);\n                if (activityIndex === -1) {\n                    // table user is an actual user\n                    if (tableUser.hasOwnProperty('id')) {\n                        dispatch({\n                            type: ACTIVITIES_IN_TABLE_CHANGED,\n                            activities: [...activities, activity]\n                        });\n                    }\n                    // table user is a groupProperties object\n                    else {\n                        realtimeDBUtils\n                            .loadGroupAdminsBasedOnGroupID(tableUser.anid)\n                            .then(groupAdmins => {\n                                const adminIndex = groupAdmins.findIndex(groupAdmin => groupAdmin.id === activity.userID);\n                                if (adminIndex !== -1) {\n                                    activity.userProfile = groupAdmins[adminIndex];\n                                    dispatch({\n                                        type: ACTIVITIES_IN_TABLE_CHANGED,\n                                        activities: [...activities, activity]\n                                    });\n                                }\n                            });\n                    }\n                }\n            });\n    }\n};\n\nexport const stopListeningForActivitiesChanged = () => {\n    return (dispatch, getState) => {\n        if (activitiesListener) {\n            activitiesListener.off('child_added');\n            activitiesListener = null;\n        }\n    }\n};","import React, {Component} from 'react';\nimport {\n    Table,\n    TableHead,\n    TableCell,\n    TableRow,\n    TableBody,\n    Typography,\n    Paper,\n    TablePagination,\n    TableFooter,\n    Button\n} from '@material-ui/core';\nimport LinkIcon from '@material-ui/icons/Link';\nimport FlexView from 'react-flexview';\nimport {HashLoader} from 'react-spinners';\nimport {css} from 'aphrodite';\nimport {NavLink} from 'react-router-dom';\n\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\nimport JSONCompareChangesDialog from './JSONCompareChangesDialog';\n\nimport * as colors from '../../values/colors';\nimport * as utils from '../../utils/utils';\nimport * as ROUTES from '../../router/routes';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nimport {connect} from 'react-redux';\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\nimport * as manageJSONCompareChangesActions from '../../redux-store/actions/manageJSONCompareChangesDialogActions';\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        currentUser: state.auth.user,\n\n        tableUser: state.manageActivitiesTable.tableUser,\n        activities: state.manageActivitiesTable.activities,\n        activitiesLoaded: state.manageActivitiesTable.activitiesLoaded,\n        loadingActivities: state.manageActivitiesTable.loadingActivities,\n        page: state.manageActivitiesTable.page,\n        rowsPerPage: state.manageActivitiesTable.rowsPerPage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        loadActivities: () => dispatch(activitiesTableActions.loadActivities()),\n        changePage: (event, newPage) => dispatch(activitiesTableActions.changePage(event, newPage)),\n        changeRowsPerPage: (event) => dispatch(activitiesTableActions.changeRowsPerPage(event)),\n        startListeningForActivitiesChanged: () => dispatch(activitiesTableActions.startListeningForActivitiesChanged()),\n        stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\n\n        jsonCompareDialog_setData: (jsonBefore, jsonAfter) => dispatch(manageJSONCompareChangesActions.setData(jsonBefore, jsonAfter))\n    }\n};\n\nclass ActivitiesTable extends Component {\n\n    componentDidMount() {\n        this.loadData();\n        this.addListener();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            shouldLoadOtherData,\n\n            tableUser,\n\n            stopListeningForActivitiesChanged\n        } = this.props;\n\n        // cancel all listeners if tableUser is set to null\n        if (!tableUser || !shouldLoadOtherData) {\n            stopListeningForActivitiesChanged();\n            return;\n        }\n\n        this.loadData();\n        this.addListener();\n    }\n\n    /**\n     * Load data\n     */\n    loadData = () => {\n        const {\n            shouldLoadOtherData,\n\n            tableUser,\n            loadingActivities,\n            activitiesLoaded,\n\n            loadActivities\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (tableUser && !loadingActivities && !activitiesLoaded) {\n                loadActivities();\n            }\n        }\n    };\n\n    /**\n     * Add listener\n     */\n    addListener = () => {\n        const {\n            shouldLoadOtherData,\n\n            activities,\n            activitiesLoaded,\n\n            startListeningForActivitiesChanged\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (activities && activitiesLoaded) {\n                startListeningForActivitiesChanged();\n            }\n        }\n    };\n\n    render() {\n        const {\n            groupProperties,\n            groupPropertiesLoaded,\n\n            currentUser,\n            tableUser,\n\n            activities,\n            page,\n            rowsPerPage,\n\n            changePage,\n            changeRowsPerPage\n        } = this.props;\n\n        if (!groupPropertiesLoaded || !tableUser || !currentUser) {\n            return null;\n        }\n\n        activities.sort((activity1, activity2) => {\n            return activity2.time - activity1.time;\n        });\n\n        return (\n            <div>\n                <Paper elevation={1} style={{ overflowX: \"auto\" }} >\n                    <Table>\n                        <TableHead>\n                            <TableRow>\n                                <StyledTableCell\n                                    colSpan={2}\n                                    cellColor={\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                    }\n                                    component={\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Event</Typography>\n                                    }\n                                />\n                                <StyledTableCell\n                                    colSpan={1}\n                                    cellColor={\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                    }\n                                    component={\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Time</Typography>\n                                    }\n                                />\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {\n                                this.renderTableRows()\n                            }\n                        </TableBody>\n                        <TableFooter>\n                            <TableRow>\n                                <TablePagination\n                                    style={{\n                                        backgroundColor: colors.blue_gray_50\n                                    }}\n                                    rowsPerPageOptions={[10, 30, 50]}\n                                    count={activities.length}\n                                    rowsPerPage={rowsPerPage}\n                                    page={page}\n                                    backIconButtonProps={{\n                                        'aria-label': 'Previous Page',\n                                    }}\n                                    nextIconButtonProps={{\n                                        'aria-label': 'Next Page',\n                                    }}\n                                    SelectProps={{\n                                        native: true,\n                                    }}\n                                    onChangePage={changePage}\n                                    onChangeRowsPerPage={changeRowsPerPage}\n                                />\n                            </TableRow>\n                        </TableFooter>\n                    </Table>\n                </Paper>\n\n                <JSONCompareChangesDialog/>\n            </div>\n        );\n    }\n\n    renderTableRows = () => {\n        const {\n            groupUserName,\n            groupProperties,\n\n            currentUser,\n\n            activities,\n            activitiesLoaded,\n            page,\n            rowsPerPage,\n\n            jsonCompareDialog_setData\n        } = this.props;\n\n        if (activities.length === 0) {\n            return (\n                <TableRow>\n                    <TableCell colSpan={3} >\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{ margin: 20 }} >\n                            {\n                                activitiesLoaded\n                                    ?\n                                    <Typography variant=\"body1\" align=\"center\">No activities.</Typography>\n                                    :\n                                    <HashLoader\n                                        color={\n                                            !groupProperties\n                                                ?\n                                                colors.primaryColor\n                                                :\n                                                groupProperties.settings.primaryColor\n                                        }\n                                    />\n                            }\n                        </FlexView>\n                    </TableCell>\n                </TableRow>\n            );\n        }\n\n        return (\n            activities.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(activity => (\n                    <TableRow key={activity.id} >\n                        <TableCell colSpan={2} >\n                            {\n                                activity.hasOwnProperty('action')\n                                    ?\n                                    <FlexView column >\n                                        <Typography variant=\"body2\" align=\"left\" >\n                                            <NavLink\n                                                to={\n                                                    groupUserName\n                                                        ?\n                                                        `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${activity.action}`\n                                                        :\n                                                        activity.action\n                                                }\n                                                className={css(sharedStyles.nav_link_hover)}\n                                                style={{\n                                                    color:\n                                                        !groupProperties\n                                                            ?\n                                                            colors.primaryColor\n                                                            :\n                                                            groupProperties.settings.primaryColor\n                                                }}\n                                            >\n                                                <LinkIcon fontSize=\"small\" style={{ marginRight: 6 }} />\n                                                {activity.activitySummary}\n                                            </NavLink>\n                                        </Typography>\n                                        {\n                                            !activity.hasOwnProperty('userProfile')\n                                                ?\n                                                null\n                                                :\n                                                <Typography\n                                                    variant=\"body2\"\n                                                    align=\"left\"\n                                                    style={{\n                                                        marginTop: 7\n                                                    }}\n                                                >\n                                                    <i>_ done by <b>{activity.userProfile.email}</b> _</i>\n                                                </Typography>\n                                        }\n                                        {\n                                            currentUser.type !== DB_CONST.TYPE_ADMIN\n                                                ?\n                                                null\n                                                :\n                                                !currentUser.superAdmin\n                                                    ?\n                                                    null\n                                                    :\n                                                    !activity.hasOwnProperty('value')\n                                                        ?\n                                                        null\n                                                        :\n                                                        <FlexView marginTop={10} >\n                                                            <Button\n                                                                variant=\"outlined\"\n                                                                color=\"primary\"\n                                                                size=\"small\"\n                                                                className={css(sharedStyles.no_text_transform)}\n                                                                onClick={\n                                                                    () => jsonCompareDialog_setData(\n                                                                        activity.value.hasOwnProperty('before')\n                                                                            ?\n                                                                            activity.value.before\n                                                                            :\n                                                                            activity.value\n                                                                        ,\n                                                                        activity.value.hasOwnProperty('after')\n                                                                            ?\n                                                                            activity.value.after\n                                                                            :\n                                                                            activity.value\n                                                                    )\n                                                                }\n                                                            >View changes</Button>\n                                                        </FlexView>\n                                        }\n                                    </FlexView>\n                                    :\n                                    <Typography variant=\"body2\" align=\"left\">{activity.activitySummary}</Typography>\n                            }\n                        </TableCell>\n                        <TableCell colSpan={1} >\n                            <Typography variant=\"body2\" align=\"left\">{utils.dateTimeInReadableFormat(activity.time)}</Typography>\n                        </TableCell>\n                    </TableRow>\n                )\n            )\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ActivitiesTable);","import * as myUtils from '../../utils/utils';\nimport * as editImageActions from './editImageActions';\nimport * as editVideoActions from './editVideoActions';\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\nimport {\n    UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\n    UPLOAD_DONE_MODE,\n    UPLOAD_ERROR\n} from '../../shared-components/uploading-dialog/UploadingDialog';\nimport {UPLOADING} from './uploadingStatusActions';\nimport firebase from '../../firebase/firebaseApp';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\n\nexport const ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED = 'ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED';\nexport const REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED = 'REGISTERED_OFFICE_BUSINESS_PROFILE_FIELDS_CHANGED';\nexport const TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED = 'TRADING_ADDRESS_BUSINESS_PROFILE_FIELDS_CHANGED';\n// fields that are used to derive required information for business profile such as postcode search\nexport const BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED = 'BUSINESS_PROFILE_CONTROL_FIELDS_CHANGED';\nexport const handleTextChanged = (fieldType, event) => {\n    return {\n        type: fieldType,\n        fieldName: event.target.name,\n        fieldValue: event.target.value\n    }\n};\n\nexport const TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY = 'TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY';\nexport const TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY = 'TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY';\nexport const toggleEnterAddressManually = field => {\n    if (field === TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY) {\n        return {\n            type: TOGGLE_REGISTERED_OFFICE_ENTER_ADDRESS_MANUALLY\n        }\n    } else if (field === TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY) {\n        return {\n            type: TOGGLE_TRADING_ADDRESS_ENTER_ADDRESS_MANUALLY\n        }\n    }\n};\n\n\nexport const CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION = 'CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION';\nexport const clearAllFields = () => {\n    return {\n        type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\n    }\n};\n\nexport const TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR = 'TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR';\nexport const toggleExpandBusinessProfileFillingForInvestor = () => {\n    return {\n        type: TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR\n    }\n};\n\nexport const uploadBusinessProfile = () => {\n    return (dispatch, getState) => {\n        const user = Object.assign({}, getState().auth.user);\n        const logoToBeUploaded = getState().createBusinessProfile.logoToBeUploaded;\n        const videoToBeUploaded = getState().createBusinessProfile.videoToBeUploaded;\n        let businessProfile = Object.assign({}, getState().createBusinessProfile.BusinessProfile);\n\n        editImageActions\n            .uploadImage(dispatch, user, getState().editImage, logoToBeUploaded)\n            .then(() => {\n                if (videoToBeUploaded) {\n                    editVideoActions\n                        .uploadVideo(dispatch, user, getState().editVideo, videoToBeUploaded)\n                        .then(() => {\n                            putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\n                        })\n                        .catch(error => {\n                            // handle error\n                            dispatch({\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                                message: \"Error happened. We couldn't upload your video.\",\n                                color: \"error\",\n                                position: \"bottom\"\n                            });\n                        });\n                } else {\n                    putBusinessProfileToFirebaseDB(dispatch, user, businessProfile);\n                }\n            })\n            .catch(error => {\n                // handle error\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. We couldn't upload your logo.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n};\n\nconst putBusinessProfileToFirebaseDB = (dispatch, user, businessProfile) => {\n    return new Promise((resolve, reject) => {\n\n        dispatch({\n            type: UPLOADING,\n            mode: UPLOAD_BUSINESS_PROFILE_GENERAL_INFORMATION,\n            progress: 0\n        });\n\n        firebase\n            .database()\n            .ref(DB_CONST.USERS_CHILD)\n            .child(user.id)\n            .child(DB_CONST.BUSINESS_PROFILE_CHILD)\n            .update(businessProfile)\n            .then(() => {\n                dispatch({\n                    type: UPLOADING,\n                    mode: UPLOAD_DONE_MODE,\n                    progress: 100\n                });\n\n                dispatch({\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Your business profile has successfully been uploaded.\",\n                    color: \"primary\",\n                    position: \"bottom\"\n                });\n\n                realtimeDBUtils\n                    .trackActivity({\n                        userID: user.id,\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                        interactedObjectLocation: DB_CONST.USERS_CHILD,\n                        interactedObjectID: user.id,\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPLOADED_BUSINESS_PROFILE,\n                        value: {\n                            ...user,\n                            BusinessProfile: {\n                                ...businessProfile\n                            }\n                        }\n                    });\n\n                return resolve();\n            })\n            .catch(error => {\n                dispatch({\n                    type: UPLOADING,\n                    mode: UPLOAD_ERROR,\n                    progress: 100\n                });\n\n                dispatch({\n                    type: CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. We couldn't upload your business profile.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n\n                return reject(error);\n            });\n    });\n};","import firebase from '../../firebase/firebaseApp';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as ROUTES from '../../router/routes';\nimport * as utils from '../../utils/utils';\n\nexport const SET_ORIGINAL_USER_AND_EDITED_USER = 'SET_ORIGINAL_USER_AND_EDITED_USER';\nexport const setOriginalUserAndEditedUser = user => {\n    return (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const previouslySetUser = getState().editUser.originalUser;\n\n        let allowEditing = true;\n\n        // user is set to null\n        if (!user) {\n            dispatch({\n                type: SET_ORIGINAL_USER_AND_EDITED_USER,\n                user,\n                allowEditing\n            });\n            return;\n        }\n\n        if (previouslySetUser && previouslySetUser.id === user.id) {\n            return;\n        }\n\n        if (user.hasOwnProperty('groupsUserIsIn')\n            && currentUser.type === DB_CONST.TYPE_ADMIN\n            && !currentUser.superAdmin\n        ) {\n            let userHomeGroup = utils.getUserHomeGroup(user.groupsUserIsIn);\n            // userHomeGroup is null --> failed to find user's home group\n            // do not let any group admins to edit this user's profile\n            if (!userHomeGroup) {\n                allowEditing = false;\n            }\n            // userHomeGroup is not null\n            else {\n                // this current group admin does not belong to the userHomeGroup\n                if (currentUser.anid !== userHomeGroup.anid) {\n                    allowEditing = false;\n                }\n            }\n        }\n\n        dispatch({\n            type: SET_ORIGINAL_USER_AND_EDITED_USER,\n            user,\n            allowEditing\n        });\n    }\n};\n\nexport const EDIT_PERSONAL_INFORMATION = 'EDIT_PERSONAL_INFORMATION';\nexport const EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION = 'EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION';\nexport const EDIT_TRADING_ADDRESS_BUSINESS_PROFILE = 'EDIT_TRADING_ADDRESS_BUSINESS_PROFILE';\nexport const EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE = 'EDIT_REGISTERED_OFFICE_BUSINESS_PROFILE';\nexport const ADDING_NEW_DIRECTOR = 'ADDING_NEW_DIRECTOR';\nexport const editUserLocally = (type, edit) => {\n    return (dispatch, getState) => {\n        dispatch({\n            type,\n            edit: {\n                property: edit.property,\n                value: edit.value\n            }\n        });\n    }\n};\n\nexport const TOGGLE_ADD_NEW_DIRECTOR = 'TOGGLE_ADD_NEW_DIRECTOR';\nexport const toggleAddNewDirector = () => {\n    return {\n        type: TOGGLE_ADD_NEW_DIRECTOR\n    }\n};\n\nexport const ADD_NEW_DIRECTOR_TEMPORARILY = 'ADD_NEW_DIRECTOR_TEMPORARILY';\nexport const addNewDirectorTemporarily = isEditingExistingBusinessProfile => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: ADD_NEW_DIRECTOR_TEMPORARILY,\n            isEditingExistingBusinessProfile,\n            director: getState().editUser.newDirectorText\n        });\n    }\n};\n\nexport const DELETE_DIRECTOR_TEMPORARILY = 'DELETE_DIRECTOR_TEMPORARILY';\nexport const deleteDirectorTemporarily = (index, isEditingExistingBusinessProfile) => {\n    return {\n        type: DELETE_DIRECTOR_TEMPORARILY,\n        index,\n        isEditingExistingBusinessProfile\n    }\n};\n\nexport const RESET_PERSONAL_INFORMATION = 'RESET_PERSONAL_INFORMATION';\nexport const RESET_BUSINESS_PROFILE = 'RESET_BUSINESS_PROFILE';\nexport const cancelEditingUser = type => {\n    return {\n        type\n    }\n};\n\nexport const COMMIT_PERSONAL_INFORMATION_CHANGES = 'COMMIT_PERSONAL_INFORMATION_CHANGES';\nexport const COMMIT_BUSINESS_PROFILE_CHANGES = 'COMMIT_BUSINESS_PROFILE_CHANGES';\nexport const commitUserProfileChanges = type => {\n    return (dispatch, getState) => {\n\n        const currentUser = getState().auth.user;\n        const originalUser = JSON.parse(JSON.stringify(getState().editUser.originalUser));\n        const userEdited = JSON.parse(JSON.stringify(getState().editUser.userEdited));\n\n        const userRef = firebase\n            .database()\n            .ref(DB_CONST.USERS_CHILD)\n            .child(userEdited.id);\n\n        if (type === COMMIT_PERSONAL_INFORMATION_CHANGES) {\n            userRef\n                .update({\n                    title: userEdited.title,\n                    firstName: userEdited.firstName,\n                    lastName: userEdited.lastName,\n                    email: userEdited.email,\n                    linkedin:\n                        userEdited.linkedin && userEdited.linkedin.trim().length > 0\n                            ?\n                            userEdited.linkedin\n                            :\n                            null\n                })\n                .then(() => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message:\n                            currentUser.type === DB_CONST.TYPE_ADMIN\n                                ?\n                                // an admin is editing the user's profile\n                                \"User's personal details have been updated.\"\n                                :\n                                // the user is editing their own profile\n                                \"Your personal details have been updated.\"\n                        ,\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\n                            interactedObjectID: userEdited.id,\n                            activitySummary:\n                                currentUser.id === userEdited.id\n                                    ?\n                                    // user is editing their own details\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_PERSONAL_DETAILS\n                                    :\n                                    // admin is editing user's details\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_PERSONAL_DETAILS\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\n                            ,\n                            action:\n                                currentUser.id === userEdited.id\n                                    ?\n                                    // user is editing their own details\n                                    null\n                                    :\n                                    // admin is editing user's details\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\n                            ,\n                            value: {\n                                before: originalUser,\n                                after: userEdited\n                            }\n                        });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message:\n                            currentUser.type === DB_CONST.TYPE_ADMIN\n                                ?\n                                // an admin is editing the user's profile\n                                \"Error happened. Couldn't update this user's personal details.\"\n                                :\n                                // the user is editing their own profile\n                                \"Error happened. We couldn't update your personal details.\"\n                        ,\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        } else if (type === COMMIT_BUSINESS_PROFILE_CHANGES) {\n\n            let businessProfile = JSON.parse(JSON.stringify(userEdited.BusinessProfile));\n\n            userRef\n                .update({\n                    BusinessProfile: businessProfile\n                })\n                .then(() => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message:\n                            currentUser.type === DB_CONST.TYPE_ADMIN\n                                ?\n                                // an admin is editing the user's profile\n                                \"User's business profile has been updated.\"\n                                :\n                                // the user is editing their own profile\n                                \"Your business profile has been updated.\"\n                        ,\n                        color: \"primary\",\n                        position: \"bottom\"\n                    });\n\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.USERS_CHILD,\n                            interactedObjectID: userEdited.id,\n                            activitySummary:\n                                currentUser.id === userEdited.id\n                                    ?\n                                    // user is editing their own details\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_UPDATED_BUSINESS_PROFILE\n                                    :\n                                    // admin is editing user's details\n                                    realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_ADMIN_UPDATED_USER_BUSINESS_PROFILE\n                                        .replace(\"%user%\", userEdited.firstName + \" \" + userEdited.lastName)\n                            ,\n                            action:\n                                currentUser.id === userEdited.id\n                                    ?\n                                    // user is editing their own details\n                                    null\n                                    :\n                                    // admin is editing user's details\n                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\n                            ,\n                            value: {\n                                before: originalUser,\n                                after: userEdited\n                            }\n                        });\n                })\n                .catch(error => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message:\n                            currentUser.type === DB_CONST.TYPE_ADMIN\n                                ?\n                                // an admin is editing the user's profile\n                                \"Error happened. Couldn't update this user's business profile.\"\n                                :\n                                // the user is editing their own profile\n                                \"Error happened. We couldn't update your business profile.\"\n                        ,\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n    };\n};\n\nlet originalUserListener = null;\n\nexport const EDIT_USER_ORIGINAL_USER_CHANGED = 'EDIT_USER_ORIGINAL_USER_CHANGED';\nexport const startOriginalUserChangedListener = () => {\n    return (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const originalUser = getState().editUser.originalUser;\n\n        if (!currentUser || !originalUser) {\n            return;\n        }\n\n        // if the current user is the same as the user being edited\n        // then we don't need this listener since the current user changes\n        // are taken care by the auth actions.\n        if (currentUser.id === originalUser.id) {\n            return;\n        }\n\n        if (!originalUserListener) {\n            originalUserListener = firebase\n                .database()\n                .ref(DB_CONST.USERS_CHILD)\n                .child(originalUser.id);\n\n            originalUserListener\n                .on('value', snapshot => {\n                    let userChanged = snapshot.val();\n\n                    if (userChanged) {\n                        userChanged.groupsUserIsIn = originalUser.groupsUserIsIn;\n\n                        dispatch({\n                            type: EDIT_USER_ORIGINAL_USER_CHANGED,\n                            userChanged\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopOriginalUserChangedListener = () => {\n    return (dispatch, getState) => {\n        if (originalUserListener) {\n            originalUserListener.off('value');\n            originalUserListener = null;\n        }\n    }\n}","import firebase from '../../firebase/firebaseApp';\nimport * as utils from '../../utils/utils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport {UPLOADING} from './uploadingStatusActions';\nimport {\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\n    UPLOAD_PITCH_COVER_MODE,\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE,\n    UPLOAD_ERROR,\n    UPLOAD_DONE_MODE\n} from '../../shared-components/uploading-dialog/UploadingDialog';\n\nexport const FILE_UPLOAD_CHANGED = 'FILE_UPLOAD_CHANGED';\nexport const handleFilesChanged = (mode, files, user = null, project = null) => {\n    return (dispatch, getState) => {\n\n        const fileUploadErrorMessage = getState().uploadFiles.fileUploadErrorMessage;\n        const fileUploadErrorSnackbarOpen = getState().uploadFiles.fileUploadErrorSnackbarOpen;\n\n        if (fileUploadErrorMessage.trim().length > 0 || fileUploadErrorSnackbarOpen) {\n            return;\n        }\n\n        const reader = new FileReader();\n        reader.addEventListener('load', () => {\n            const fileRead = {\n                file: files[files.length - 1],\n                preview: reader.result\n            };\n\n            switch (mode) {\n                case UPLOAD_LEGAL_DOCUMENTS_MODE:\n\n                    const legalDocuments = getState().uploadFiles.filesToBeUploaded.legalDocuments;\n\n                    // user is an issuer\n                    if (user.type === DB_CONST.TYPE_ISSUER) {\n                        if (user.LegalDocuments) {\n                            if (legalDocuments.length >=\n                                DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER - user.LegalDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\n                                dispatch({\n                                    type: FILE_UPLOAD_ERROR,\n                                    error: 'Max file count reached'\n                                });\n                                return;\n                            }\n                        } else {\n                            if (legalDocuments.length >= DB_CONST.MAX_LEGAL_DOCUMENTS_UPLOAD_FOR_ISSUER) {\n                                dispatch({\n                                    type: FILE_UPLOAD_ERROR,\n                                    error: 'Max file count reached'\n                                });\n                                return;\n                            }\n                        }\n                    }\n                    // user is an investor\n                    else if (user.type === DB_CONST.TYPE_INVESTOR) {\n                        if (legalDocuments.length >= 1) {\n                            dispatch({\n                                type: FILE_UPLOAD_ERROR,\n                                error: 'Max file count reached'\n                            });\n                            return;\n                        }\n                    }\n                    else {\n                        return;\n                    }\n                    break;\n                case UPLOAD_PITCH_COVER_MODE:\n                    return;\n                case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\n                    return;\n                case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\n                    return;\n                default:\n                    return;\n            }\n\n            dispatch({\n                type: FILE_UPLOAD_CHANGED,\n                mode,\n                fileRead\n            });\n        });\n        reader.readAsDataURL(files[files.length - 1]);\n    }\n};\n\nexport const FILE_UPLOAD_ERROR = 'FILE_UPLOAD_ERROR';\nexport const handleFileError = (error, file) => {\n    return (dispatch, getState) => {\n        // handle file upload error\n        let errorMessage = error.message;\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\n\n        dispatch({\n            type: FILE_UPLOAD_ERROR,\n            error: errorMessage\n        });\n    }\n};\n\nexport const CLOSE_FILE_UPLOAD_ERROR_SNACKBAR = 'CLOSE_FILE_UPLOAD_ERROR_SNACKBAR';\nexport const closeErrorSnackbar = () => {\n    return {\n        type: CLOSE_FILE_UPLOAD_ERROR_SNACKBAR\n    }\n};\n\nexport const RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED = 'RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED';\nexport const resetErrorMessageWhenSnackbarExited = () => {\n    return {\n        type: RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED\n    }\n};\n\nexport const DELETE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_UPLOADED_LEGAL_DOCUMENT';\nexport const DELETE_UPLOADED_PITCH_COVER = 'DELETE_UPLOADED_PITCH_COVER';\nexport const DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETED_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\nexport const DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\nexport const deleteUploadedFile = (mode, index, user = null, project = null) => {\n    return (dispatch, getState) => {\n        switch (mode) {\n            case DELETE_UPLOADED_LEGAL_DOCUMENT:\n                const legalDocumentsUserID = getState().legalDocuments.userID;\n                let updateLegalDocuments = [...getState().legalDocuments.legalDocuments];\n                updateLegalDocuments[index].removed = true;\n                firebase\n                    .database()\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\n                    .child(legalDocumentsUserID)\n                    .update(updateLegalDocuments);\n                return;\n            case DELETE_UPLOADED_PITCH_COVER:\n                return;\n            case DELETE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\n                return;\n            case DELETE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\n                return;\n            default:\n                return;\n        }\n    }\n};\n\nexport const DELETE_TO_BE_UPLOADED_FILE = 'DELETE_TO_BE_UPLOADED_FILE';\nexport const DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT = 'DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT';\nexport const DELETE_TO_BE_UPLOADED_PITCH_COVER = 'DELETE_TO_BE_UPLOADED_PITCH_COVER';\nexport const DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT';\nexport const DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT = 'DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT';\nexport const deleteToBeUploadedFile = (mode, index) => {\n    return (dispatch, getState) => {\n\n        let updatedFilesToBeUploaded = null;\n\n        switch (mode) {\n            case DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT:\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.legalDocuments));\n                break;\n            case DELETE_TO_BE_UPLOADED_PITCH_COVER:\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchCover));\n                break;\n            case DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT:\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument));\n                break;\n            case DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT:\n                updatedFilesToBeUploaded = JSON.parse(JSON.stringify(getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments));\n                break;\n            default:\n                return;\n        }\n\n        updatedFilesToBeUploaded.splice(index, 1);\n\n        dispatch({\n            type: DELETE_TO_BE_UPLOADED_FILE,\n            mode,\n            updatedFilesToBeUploaded\n        });\n    };\n};\n\nexport const FINISHED_UPLOADING_A_LEGAL_DOCUMENT = 'FINISHED_UPLOADING_A_LEGAL_DOCUMENT';\nexport const FINISHED_UPLOADING_A_PITCH_COVER = 'FINISHED_UPLOADING_A_PITCH_COVER';\nexport const FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT';\nexport const FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT = 'FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT';\nexport const FINISHED_UPLOADING_ALL_FILES = 'FINISHED_UPLOADING_ALL_FILES';\nexport const uploadFiles = (mode, user = null, project = null) => {\n    return (dispatch, getState) => {\n\n        let files = [];\n\n        switch (mode) {\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\n                files = getState().uploadFiles.filesToBeUploaded.legalDocuments;\n                break;\n            case UPLOAD_PITCH_COVER_MODE:\n                files = getState().uploadFiles.filesToBeUploaded.pitchCover;\n                break;\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\n                files = getState().uploadFiles.filesToBeUploaded.pitchPresentationDocument;\n                break;\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\n                files = getState().uploadFiles.filesToBeUploaded.pitchSupportingDocuments;\n                break;\n            default:\n                return;\n        }\n\n        dispatch({\n            type: UPLOADING,\n            mode,\n            progress: 0\n        });\n\n        Promise.all(\n            files.map(file => uploadIndividualFile(dispatch, mode, file, files.length, user, project))\n        ).then(() => {\n            // call this to clear temporarily files\n            dispatch({\n                type: FINISHED_UPLOADING_ALL_FILES,\n                mode,\n                waitingForUploadingReferences: true\n            });\n            putFilesReferencesToDatabase(dispatch, getState, mode, user, project)\n                .then(() => {\n                    dispatch({\n                        type: FINISHED_UPLOADING_ALL_FILES,\n                        mode,\n                        waitingForUploadingReferences: false\n                    });\n                })\n                .catch(error => {\n                    // handle error\n                });\n        }).catch(error => {\n            dispatch({\n                type: UPLOADING,\n                mode: UPLOAD_ERROR,\n                progress: 100,\n                error: error\n            });\n        });\n    }\n};\n\n/**\n * Upload a file to Firebase storage\n *\n * @param dispatch\n * @param mode\n * @param file: a single file to be uploaded\n * @param totalFiles: length of the files array --> calculate percent done\n * @param user: set when uploading legal documents\n * @param project: set when uploading project cover, project deck, or project supporting documents\n */\nconst uploadIndividualFile = async (dispatch, mode, file, totalFiles, user = null, project = null) => {\n\n    let fileRef = firebase.storage();\n\n    const storageID = utils.getCurrentDate();\n    const storageFileName = utils.constructStorageFileName(file, storageID);\n\n    switch (mode) {\n        case UPLOAD_LEGAL_DOCUMENTS_MODE:\n            fileRef = fileRef\n                .ref(DB_CONST.USERS_CHILD)\n                .child(user.id)\n                .child(DB_CONST.LEGAL_DOCUMENTS_CHILD)\n                .child(storageFileName);\n            break;\n        case UPLOAD_PITCH_COVER_MODE:\n            fileRef = fileRef\n                .ref(DB_CONST.USERS_CHILD)\n                .child(project.issuerID)\n                .child(DB_CONST.PROJECTS_CHILD)\n                .child(project.id)\n                .child(DB_CONST.PROJECT_COVER_CHILD)\n                .child(`${storageID}.${document.file.extension}`);\n            break;\n        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\n            fileRef = fileRef\n                .ref(DB_CONST.USERS_CHILD)\n                .child(project.issuerID)\n                .child(DB_CONST.PROJECTS_CHILD)\n                .child(project.id)\n                .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\n                .child(storageFileName);\n            break;\n        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\n            fileRef = fileRef\n                .ref(DB_CONST.USERS_CHILD)\n                .child(project.issuerID)\n                .child(DB_CONST.PROJECTS_CHILD)\n                .child(project.id)\n                .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\n                .child(storageFileName);\n            break;\n        default:\n            return;\n    }\n\n    return new Promise((resolve, reject) => {\n        const uploadTask = fileRef.put(file.file);\n        uploadTask\n            .on('state_changed', snapshot => {\n                // do nothing here\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\n                    dispatch({\n                        type: UPLOADING,\n                        mode,\n                        progress: progress.toFixed(0)\n                    });\n                }\n\n            }, error => {\n                // handle error\n                return reject(error);\n            }, () => {\n\n                uploadTask\n                    .snapshot\n                    .ref\n                    .getDownloadURL()\n                    .then(fileDownloadURL => {\n\n                        let percentDone = 0;\n\n                        switch (mode) {\n                            case UPLOAD_LEGAL_DOCUMENTS_MODE:\n                                percentDone = 100 / totalFiles;\n                                const legalDocument = {\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\n                                    readableSize: file.file.sizeReadable,\n                                    downloadURL: fileDownloadURL,\n                                    storageID: storageID\n                                };\n                                // updating progress\n                                dispatch({\n                                    type: UPLOADING,\n                                    mode,\n                                    progress: percentDone\n                                });\n                                // updating array of uploaded files\n                                dispatch({\n                                    type: FINISHED_UPLOADING_A_LEGAL_DOCUMENT,\n                                    fileDBRef: legalDocument\n                                });\n                                break;\n                            case UPLOAD_PITCH_COVER_MODE:\n                                const formattedCover = {\n                                    url: fileDownloadURL,\n                                    fileType: file.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\n                                    fileExtension: document.file.extension,\n                                    storageID: storageID\n                                };\n                                // updating progress\n                                dispatch({\n                                    type: UPLOADING,\n                                    mode,\n                                    progress: 100\n                                });\n                                // updating array of uploaded files\n                                dispatch({\n                                    type: FINISHED_UPLOADING_A_PITCH_COVER,\n                                    fileDBRef: formattedCover\n                                });\n                                break;\n                            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\n                                const formattedPresentationDocument = {\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\n                                    readableSize: file.file.sizeReadable,\n                                    downloadURL: fileDownloadURL,\n                                    storageID: storageID\n                                };\n                                // updating progress\n                                dispatch({\n                                    type: UPLOADING,\n                                    mode,\n                                    progress: 100\n                                });\n                                // updating array of uploaded files\n                                dispatch({\n                                    type: FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT,\n                                    fileDBRef: formattedPresentationDocument\n                                });\n                                break;\n                            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\n                                percentDone = 100 / totalFiles;\n                                const formattedSupportingDocument = {\n                                    fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\n                                    readableSize: file.file.sizeReadable,\n                                    downloadURL: fileDownloadURL,\n                                    storageID: storageID\n                                };\n                                // updating progress\n                                dispatch({\n                                    type: UPLOADING,\n                                    mode,\n                                    progress: percentDone\n                                });\n                                // updating array of uploaded files\n                                dispatch({\n                                    type: FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT,\n                                    fileDBRef: formattedSupportingDocument\n                                });\n                                break;\n                            default:\n                                break;\n                        }\n\n                        return resolve();\n                    });\n            });\n    });\n};\n\nconst putFilesReferencesToDatabase = async (dispatch, getState, mode, user = null, project = null) => {\n\n    let firebaseRef = firebase.database();\n\n    return new Promise((resolve, reject) => {\n        switch (mode) {\n            case UPLOAD_LEGAL_DOCUMENTS_MODE:\n                const legalDocumentsUserID = getState().legalDocuments.userID;\n                const existingLegalDocuments = getState().legalDocuments.legalDocuments;\n\n                const filesDBReferences = getState().uploadFiles.filesDBReferences.legalDocuments;\n                let filesReferencesToBeUploaded = [];\n\n                if (existingLegalDocuments) {\n                    filesReferencesToBeUploaded = [...existingLegalDocuments, ...filesDBReferences];\n                } else {\n                    filesReferencesToBeUploaded = filesDBReferences;\n                }\n\n                firebaseRef\n                    .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\n                    .child(legalDocumentsUserID)\n                    .set(filesReferencesToBeUploaded)\n                    .then(() => {\n                        dispatch({\n                            type: UPLOADING,\n                            mode: UPLOAD_DONE_MODE,\n                            progress: 100\n                        });\n                        return resolve();\n                    })\n                    .catch(error => {\n                        dispatch({\n                            type: UPLOADING,\n                            mode: UPLOAD_ERROR,\n                            progress: 100\n                        });\n                        return reject(error);\n                    });\n\n                break;\n            case UPLOAD_PITCH_COVER_MODE:\n                return;\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\n                return;\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\n                return;\n            default:\n                return;\n        }\n    });\n};\n\n","import firebase from '../../firebase/firebaseApp';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const LEGAL_DOCUMENTS_SET_USER = 'LEGAL_DOCUMENTS_SET_USER';\nexport const setUserID = userID => {\n    return {\n        type: LEGAL_DOCUMENTS_SET_USER,\n        userID\n    }\n};\n\nexport const LOADING_LEGAL_DOCUMENTS = 'LOADING_LEGAL_DOCUMENTS';\nexport const FINISHED_LOADING_LEGAL_DOCUMENTS = 'FINISHED_LOADING_LEGAL_DOCUMENTS';\nexport const getLegalDocuments = () => {\n    return (dispatch, getState) => {\n\n        const userID = getState().legalDocuments.userID;\n\n        dispatch({\n            type: LOADING_LEGAL_DOCUMENTS\n        });\n\n        firebase\n            .database()\n            .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\n            .child(userID)\n            .once('value', snapshot => {\n                if (!snapshot || !snapshot.exists()) {\n                    dispatch({\n                        type: FINISHED_LOADING_LEGAL_DOCUMENTS,\n                        legalDocuments: null,\n                        error: 'No legal documents'\n                    });\n                    return;\n                }\n\n                dispatch({\n                    type: FINISHED_LOADING_LEGAL_DOCUMENTS,\n                    legalDocuments: snapshot.val()\n                });\n            });\n    }\n};\n\nlet legalDocumentsListener = null;\n\nexport const LEGAL_DOCUMENTS_CHANGED = 'LEGAL_DOCUMENTS_CHANGED';\nexport const startListeningForLegalDocumentsChanged = () => {\n    return (dispatch, getState) => {\n        const userID = getState().legalDocuments.userID;\n\n        if (!legalDocumentsListener) {\n            legalDocumentsListener = firebase\n                .database()\n                .ref(DB_CONST.LEGAL_DOCUMENTS_CHILD)\n                .child(userID);\n\n            legalDocumentsListener\n                .once('value', snapshot => {\n                    // user has not uploaded any documents\n                    if (!snapshot || !snapshot.exists()) {\n                        legalDocumentsListener = null;\n                        return;\n                    }\n\n                    legalDocumentsListener\n                        .on('child_added', snapshot => {\n                            let updatedLegalDocuments = Object.assign([], getState().legalDocuments.legalDocuments);\n                            if (updatedLegalDocuments.length === 0) {\n                                updatedLegalDocuments = [snapshot.val()];\n                            }\n                            else {\n                                const index = updatedLegalDocuments.findIndex(doc => doc.storageID === snapshot.val().storageID);\n                                if (index === -1) {\n                                    updatedLegalDocuments.push(snapshot.val());\n                                }\n                            }\n\n                            dispatch({\n                                type: LEGAL_DOCUMENTS_CHANGED,\n                                legalDocuments: updatedLegalDocuments\n                            });\n                        });\n\n                    legalDocumentsListener\n                        .on('child_changed', snapshot => {\n                            let updatedLegalDocuments = [...getState().legalDocuments.legalDocuments];\n                            updatedLegalDocuments[snapshot.key] = snapshot.val();\n\n                            dispatch({\n                                type: LEGAL_DOCUMENTS_CHANGED,\n                                legalDocuments: updatedLegalDocuments\n                            });\n                        });\n                });\n        }\n    }\n};\n\nexport const stopListeningForLegalDocumentsChanged = () => {\n    return (dispatch, getState) => {\n        if (legalDocumentsListener) {\n            legalDocumentsListener.off('child_added');\n            legalDocumentsListener.off('child_changed');\n            legalDocumentsListener = null;\n        }\n    }\n};","import Api, {ApiRoutes} from \"../Api\";\n\nexport interface FetchGroupsParams {\n    groupIds?: string[];\n    name?: string;\n}\n\nexport default class GroupRepository {\n\n    /**\n     * Get group\n     *\n     * @param groupUserName\n     */\n    public async getGroup(groupUserName: string) {\n        return await new Api()\n            .request(\n                \"get\",\n                ApiRoutes.retrieveGroup.replace(\":groupUserName\", groupUserName)\n            );\n    }\n\n    /**\n     * Fetch groups\n     *\n     * @param params\n     */\n    public async fetchGroups(params?: FetchGroupsParams) {\n        return await new Api()\n            .request(\n                \"get\",\n                ApiRoutes.listGroups,\n                {\n                    requestBody: null,\n                    queryParameters: params\n                }\n            );\n    }\n\n    /**\n     * Fetch group members\n     *\n     * @param groupID\n     */\n    public async fetchGroupMembers(groupID: string | \"system\") {\n        return await new Api()\n            .request(\n                \"get\",\n                ApiRoutes.listGroupMembers.replace(\":group\", groupID)\n            );\n    }\n}","import Api, {ApiRoutes} from \"../Api\";\n\nexport enum FetchProjectsOrderByOptions {\n    Visibility = \"visibility\",\n    Group = \"group\",\n    Investor = \"investor\",\n    Issuer = \"issuer\",\n    Sector = \"sector\",\n    Phase = \"phase\"\n}\n\nexport enum FetchProjectsPhaseOptions {\n    Any = \"Any\",\n    Live = \"Live\",\n    TemporarilyClosed = \"TemporarilyClosed\",\n    Successful = \"Successful\",\n    Failed = \"Failed\",\n    LivePitch = \"LivePitch\",\n    ExpiredPitch = \"ExpiredPitch\"\n}\n\nexport interface FetchProjectsOptions {\n    search?: string; // filter projects by either name, group name, or issuer Student project name\n    name?: string; // filter projects by name\n    visibility?: number | \"all\"; // filter projects by their visibility: PRIVATE, RESTRICTED, or PUBLIC\n    group?: string | \"all\"; // filter projects by group id\n    groupName?: string; // filter projects by group name\n    investor?: string | \"all\"; // filter projects by investor id\n    issuer?: string | \"all\"; // filter projects by issuer id\n    issuerCompanyName?: string; // filter projects by issuer Student project name\n    sector?: string | \"all\"; // filter projects by sector\n    phase?: string | number | \"all\"; // filter projects by status\n    orderBy?: FetchProjectsOrderByOptions; // mode to use orderByChild\n}\n\nexport default class OfferRepository {\n\n    /**\n     * Fetch offers\n     *\n     * @param options\n     */\n    public async fetchOffers(options: FetchProjectsOptions) {\n        //console.log(\"Fetching offers with options:\", options);\n        const fetchOptions = { ...options, orderBy: options.orderBy || FetchProjectsOrderByOptions.Phase };\n        try {\n            const response = await new Api().request(\n                \"get\",\n                ApiRoutes.listProjectsRoute,\n                {\n                    requestBody: null,\n                    queryParameters: fetchOptions\n                }\n            );\n            //console.log(\"API response:\", response);\n            return response;\n        } catch (error) {\n            //console.error(\"Error fetching offers:\", error);\n            throw error;\n        }\n    }\n\n    /**\n     * Export to csv\n     *\n     * @param options\n     */\n    public async exportCsv(options?: FetchProjectsOptions) {\n        return new Promise<void>(async (resolve, reject) => {\n            try {\n                const response = await new Api()\n                    .request(\n                        \"get\",\n                        ApiRoutes.exportProjectsToCsvRoute,\n                        {\n                            requestBody: null,\n                            queryParameters: options ?? null\n                        }\n                    );\n\n                // create a file from the csv returned by the server\n                const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\n                const link = document.createElement(\"a\");\n                if (link.download !== undefined) {\n                    // create a download url\n                    const url = URL.createObjectURL(blob);\n                    link.setAttribute(\"href\", url);\n                    link.setAttribute(\"download\", \"offers_data.csv\");\n                    link.style.visibility = \"hidden\";\n                    document.body.appendChild(link);\n                    link.click();\n                    document.body.removeChild(link);\n                }\n                return resolve();\n            } catch (error) {\n                return reject(error);\n            }\n        });\n    }\n}","import { createMuiTheme, responsiveFontSizes } from '@material-ui/core/styles';\nimport * as colors from '../values/colors';\n\nexport const defaultTheme = responsiveFontSizes(createMuiTheme({\n    palette: {\n        primary: {\n            main: colors.primaryColor\n        },\n\n        secondary: {\n            main: colors.secondaryColor\n        },\n\n        text: {\n            secondary: colors.blue_gray_700,\n        }\n    },\n    typography: {\n        fontFamily: \"Muli, sans-serif\"\n    }\n}));","import GroupProperties from \"../../models/group_properties\";\nimport {\n    FinishedValidatingGroupUrlAction,\n    ManageGroupUrlAction,\n    ManageGroupUrlEvents,\n    SetGroupUrlAction\n} from \"../actions/manageGroupUrlActions\";\nimport Error from \"../../models/error\";\nimport {colors} from \"@material-ui/core\";\nimport {createMuiTheme, responsiveFontSizes, Theme} from \"@material-ui/core/styles\";\nimport {defaultTheme} from \"../../values/defaultThemes\";\n\nexport interface ManageGroupUrlState {\n    routePath: string | undefined;\n    groupNameFromUrl: string | null | undefined;\n\n    group: GroupProperties | null;\n    groupLoaded: boolean;\n    loadingGroup: boolean;\n\n    validGroupUrl: boolean;\n\n    groupRouteTheme: Theme;\n\n    error?: Error;\n}\n\nconst initialState: ManageGroupUrlState = {\n    routePath: undefined,\n    groupNameFromUrl: undefined,\n\n    group: null,\n    groupLoaded: false,\n    loadingGroup: false,\n\n    groupRouteTheme: defaultTheme,\n\n    validGroupUrl: false\n};\n\nexport const isValidatingGroupUrl = (state: ManageGroupUrlState) => {\n    return (!state.group && !state.groupLoaded && state.loadingGroup)\n        || (!state.group && !state.groupLoaded && !state.loadingGroup);\n}\n\nexport const routeContainsGroupName = (state: ManageGroupUrlState) => {\n    return state.groupNameFromUrl !== null;\n}\n\nexport const successfullyValidatedGroupUrl = (state: ManageGroupUrlState) => {\n    return state.validGroupUrl && state.error === undefined;\n}\n\nexport const hasGroupValidationError = (state: ManageGroupUrlState) => {\n    return state.error !== undefined;\n}\n\nexport const getGroupRouteTheme = (state: ManageGroupUrlState): Theme => {\n    if (state.groupRouteTheme === undefined) {\n        return defaultTheme;\n    }\n    return state.groupRouteTheme;\n}\n\nconst manageGroupUrlReducer = (state: ManageGroupUrlState = initialState, action: ManageGroupUrlAction) => {\n    switch (action.type) {\n        case ManageGroupUrlEvents.SetGroupUrl:\n            const setGroupUrlAction: SetGroupUrlAction = action as SetGroupUrlAction;\n            return {\n                ...state,\n                routePath: setGroupUrlAction.path,\n                groupNameFromUrl: setGroupUrlAction.groupUserName\n            }\n        case ManageGroupUrlEvents.ValidatingGroupUrl:\n            return {\n                ...state,\n                group: null,\n                groupLoaded: false,\n                loadingGroup: true,\n                validGroupUrl: false\n            }\n        case ManageGroupUrlEvents.FinishedValidatingGroupUrl:\n            const finishedValidatingGroupUrlAction: FinishedValidatingGroupUrlAction = action as FinishedValidatingGroupUrlAction;\n            return {\n                ...state,\n                group: finishedValidatingGroupUrlAction.group === null ? null : JSON.parse(JSON.stringify(action.group)),\n                groupLoaded: true,\n                loadingGroup: false,\n                validGroupUrl: finishedValidatingGroupUrlAction.validGroupUrl,\n                error: finishedValidatingGroupUrlAction.error,\n                groupRouteTheme:\n                    finishedValidatingGroupUrlAction.validGroupUrl && finishedValidatingGroupUrlAction.group\n                        ?\n                        responsiveFontSizes(\n                            createMuiTheme({\n                                palette: {\n                                    primary: {\n                                        main: finishedValidatingGroupUrlAction.group.settings.primaryColor\n                                    },\n\n                                    secondary: {\n                                        main: finishedValidatingGroupUrlAction.group.settings.secondaryColor\n                                    },\n\n                                    text: {\n                                        secondary: colors.blueGrey[\"700\"],\n                                    }\n                                },\n                                typography: {\n                                    fontFamily: \"Muli, sans-serif\"\n                                }\n                            })\n                        )\n                        :\n                        defaultTheme\n            }\n        default:\n            return state;\n    }\n}\n\nexport default manageGroupUrlReducer;","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {ProjectInstance} from \"../../models/project\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\nimport Admin, {isAdmin} from \"../../models/admin\";\nimport OfferRepository, {\n    FetchProjectsOptions,\n    FetchProjectsOrderByOptions\n} from \"../../api/repositories/OfferRepository\";\nimport GroupOfMembership from \"../../models/group_of_membership\";\nimport GroupProperties from \"../../models/group_properties\";\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\nimport Api, {ApiRoutes} from \"../../api/Api\";\n\nexport enum OffersTableEvents {\n    SetTableUser = \"OffersTableEvents.SetTableUser\",\n    FetchingOffers = \"OffersTableEvents.FetchingOffers\",\n    CompleteFetchingOffers = \"OffersTableEvents.CompleteFetchingOffers\",\n    FilterChanged = \"OffersTableEvents.FilterChanged\",\n    FilterOffersByName = \"OffersTableEvents.FilterOffersByName\",\n    CancelFilteringOffersByName = \"OffersTableEvents.CancelFilteringOffersByName\",\n    ChangePage = \"OffersTableEvents.ChangePage\",\n    ChangeRowsPerPage = \"OffersTableEvents.ChangeRowsPerPage\",\n    ExportingCsv = \"OffersTableEvents.ExportingCsv\",\n    CompleteExportingCsv = \"OffersTableEvents.CompleteExportingCsv\"\n}\n\nexport interface OffersTableAction extends Action {\n\n}\n\nexport interface SetTableUserAction extends OffersTableAction {\n    user: User | Admin | undefined;\n    groupsOfMembership: GroupOfMembership[] | undefined;\n    groupsSelect: GroupProperties[] | undefined;\n    error?: string;\n}\n\nexport interface CompleteFetchingOffersAction extends OffersTableAction {\n    offerInstances: ProjectInstance[];\n    error?: string;\n}\n\nexport interface FilterOffersByNameAction extends OffersTableAction {\n    offerInstances: ProjectInstance[];\n    isFilteringByName: boolean;\n}\n\nexport interface FilterChangedAction extends OffersTableAction {\n    name: string;\n    value: any;\n}\n\nexport interface ChangePageAction extends OffersTableAction {\n    page: number;\n}\n\nexport interface ChangeRowsPerPageAction extends OffersTableAction {\n    rowsPerPage: number;\n}\n\nexport interface CompleteExportingCsvAction extends OffersTableAction {\n    error?: string;\n}\n\nexport const setUser: ActionCreator<any> = (user?: User | Admin) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const currentTableUser = getState().OffersTableLocalState.tableUser;\n        let shouldSetTableUser: boolean = false;\n        if (currentTableUser === undefined) {\n            if (user !== undefined) {\n                shouldSetTableUser = true;\n            }\n        } else {\n            if (user !== undefined) {\n                if (currentTableUser.id !== user.id) {\n                    shouldSetTableUser = true;\n                }\n            } else {\n                shouldSetTableUser = true;\n            }\n        }\n\n        if (shouldSetTableUser) {\n            const action: SetTableUserAction = {\n                type: OffersTableEvents.SetTableUser,\n                user: user,\n                groupsOfMembership: undefined,\n                groupsSelect: undefined\n            }\n\n            try {\n                if (user) {\n                    const groupsOfMembershipResponse = await new Api().request(\"get\",\n                        ApiRoutes.listGroupsOfMembership.replace(\":uid\", user.id));\n                    const groupsOfMembership: GroupOfMembership[] = groupsOfMembershipResponse.data;\n                    action.groupsOfMembership = groupsOfMembership;\n\n                    const isTableAdminUser: Admin | null = isAdmin(user);\n\n                    if (isTableAdminUser && isTableAdminUser.superAdmin) {\n                        const allGroupsResponse = await new GroupRepository().fetchGroups();\n                        action.groupsSelect = allGroupsResponse.data;\n                    } else {\n                        action.groupsSelect = groupsOfMembership.map(groupOfMembership => groupOfMembership.group);\n                    }\n                }\n                dispatch(action);\n                return dispatch(fetchOffers());\n            } catch (error) {\n                action.error = error.toString();\n                return dispatch(action);\n            }\n        }\n    }\n}\n\nexport const fetchOffers: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            tableUser,\n            tableUserGroupsOfMembership,\n            visibilityFilter,\n            groupFilter,\n            phaseFilter\n        } = getState().OffersTableLocalState;\n\n        const currentUser = getState().AuthenticationState.currentUser;\n\n        if (!currentUser || !tableUser) {\n            return;\n        }\n\n        const currentAdmin: Admin | null = isAdmin(currentUser);\n\n        const fetchOffersOptions: FetchProjectsOptions = {\n            visibility: visibilityFilter,\n            group: groupFilter,\n            phase: phaseFilter\n        };\n\n        const completeAction: CompleteFetchingOffersAction = {\n            type: OffersTableEvents.CompleteFetchingOffers,\n            offerInstances: []\n        }\n\n        let shouldFetchOffers: boolean = false;\n\n        // currentUser = tableUser --> issuer/investor/admin is viewing their own offers table\n        if (currentUser.id === tableUser.id) {\n            shouldFetchOffers = true;\n        }\n        // currentUser != tableUser --> admin is viewing issuer/investor/admin offers table\n        else if (currentAdmin) {\n            // super admin is viewing issuer/investor/admin offers table\n            if (currentAdmin.superAdmin) {\n                shouldFetchOffers = true;\n            }\n            // group admin is viewing issuer/investor offers table\n            else {\n                if (tableUserGroupsOfMembership !== undefined\n                    && tableUserGroupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === currentAdmin.anid) !== -1\n                    && !isAdmin(tableUser)\n                ) {\n                    shouldFetchOffers = true;\n                }\n            }\n        }\n\n        if (shouldFetchOffers) {\n            if (isIssuer(tableUser)) {\n                fetchOffersOptions.issuer = tableUser.id;\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Issuer;\n            } else if (isInvestor(tableUser)) {\n                fetchOffersOptions.investor = tableUser.id;\n                fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Investor;\n            } else if (currentAdmin) {\n                if (!currentAdmin.superAdmin) {\n                    fetchOffersOptions.group = currentAdmin.anid;\n                    fetchOffersOptions.orderBy = FetchProjectsOrderByOptions.Group;\n                }\n            } else {\n                completeAction.error = \"Invalid user reference.\";\n                return dispatch(completeAction);\n            }\n        } else {\n            completeAction.error = \"You don't have privileges to access this data.\";\n            return dispatch(completeAction);\n        }\n\n        dispatch({\n            type: OffersTableEvents.FetchingOffers\n        });\n\n        try {\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\n            completeAction.offerInstances = response.data;\n            dispatch(completeAction);\n            return dispatch(filterOffersByName());\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const filterChanged: ActionCreator<any> = (event: any) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const name = event.target.name;\n        const value = event.target.value;\n\n        const action: FilterChangedAction = {\n            type: OffersTableEvents.FilterChanged,\n            name: name,\n            value: value\n        }\n        dispatch(action);\n        if (name !== \"nameFilter\") {\n            dispatch(fetchOffers());\n        }\n    }\n}\n\nexport const filterOffersByName: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const nameFilter: string = getState().OffersTableLocalState.nameFilter;\n        let offerInstances: ProjectInstance[] = [...getState().OffersTableLocalState.offerInstances];\n\n        const action: FilterOffersByNameAction = {\n            type: OffersTableEvents.FilterOffersByName,\n            offerInstances: offerInstances,\n            isFilteringByName: false\n        }\n\n        if (nameFilter.trim().length > 0) {\n            offerInstances = offerInstances.filter(\n                offerInstance => offerInstance.projectDetail.projectName?.toLowerCase().includes(nameFilter.toLowerCase())\n            );\n            action.offerInstances = offerInstances;\n            action.isFilteringByName = true;\n        }\n        return dispatch(action);\n    }\n}\n\nexport const cancelFilteringOffersByName: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: OffersTableEvents.CancelFilteringOffersByName\n        });\n    }\n}\n\nexport const changePage: ActionCreator<any> = (event: any, page: number) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: ChangePageAction = {\n            type: OffersTableEvents.ChangePage,\n            page: page\n        }\n        return dispatch(action);\n    }\n}\n\nexport const changeRowsPerPage: ActionCreator<any> = (event: any) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: ChangeRowsPerPageAction = {\n            type: OffersTableEvents.ChangeRowsPerPage,\n            rowsPerPage: parseInt(event.target.value, 10)\n        }\n        return dispatch(action);\n    }\n}\n\nexport const exportCsv: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const currentUser = getState().AuthenticationState.currentUser;\n        const exportingCsv = getState().OffersTableLocalState.exportingCsv;\n\n        if (!currentUser) {\n            return;\n        }\n\n        const currentAdmin: Admin | null = isAdmin(currentUser);\n\n        if (!currentAdmin) {\n            return;\n        }\n\n        if (exportingCsv) {\n            return;\n        }\n\n        dispatch({\n            type: OffersTableEvents.ExportingCsv\n        });\n\n        const completeAction: CompleteExportingCsvAction = {\n            type: OffersTableEvents.CompleteExportingCsv\n        };\n\n        try {\n            await new OfferRepository().exportCsv(\n                currentAdmin.superAdmin\n                    ? undefined\n                    : {group: currentAdmin.anid, orderBy: FetchProjectsOrderByOptions.Group}\n            );\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {ProjectInstance} from \"../../models/project\";\nimport React, {FormEvent} from \"react\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {PROJECT_VISIBILITY_PUBLIC, PROJECT_VISIBILITY_RESTRICTED} from \"../../firebase/databaseConsts\";\nimport OfferRepository, {\n    FetchProjectsOptions,\n    FetchProjectsOrderByOptions,\n    FetchProjectsPhaseOptions\n} from \"../../api/repositories/OfferRepository\";\n\nexport enum ExploreOffersEvents {\n    FetchingOffers = \"ExploreOffersEvents.FetchingOffers\",\n    CompleteFetchingOffers = \"ExploreOffersEvents.CompleteFetchingOffers\",\n    FilterChanged = \"ExploreOffersEvents.FilterChanged\",\n    ClearSearchFilter = \"ExploreOffersEvents.ClearSearchFilter\",\n    PaginationChanged = \"ExploreOffersEvents.PaginationChanged\"\n}\n\nexport interface ExploreOffersAction extends Action {\n\n}\n\nexport interface CompleteFetchingOffersAction extends ExploreOffersAction {\n    offerInstances: ProjectInstance[];\n    error?: string;\n}\n\nexport interface FilterChangedAction extends ExploreOffersAction {\n    name: string;\n    value: any;\n}\n\nexport interface PaginationChangedAction extends ExploreOffersAction {\n    page: number;\n}\n\nexport const onSearchEnter: ActionCreator<any> = (event: FormEvent) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        event.preventDefault();\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\n    }\n}\n\nexport const fetchOffers: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            searchFilter,\n            visibilityFilter,\n            sectorFilter,\n            phaseFilter,\n            groupFilter,\n        } = getState().ExploreOffersLocalState;\n\n        // Determine orderBy based on phaseFilter and potentially other conditions\n        let orderBy;\n        if (groupFilter === \"all\") {\n            orderBy = phaseFilter === FetchProjectsPhaseOptions.ExpiredPitch ? FetchProjectsOrderByOptions.Group : FetchProjectsOrderByOptions.Phase;\n        } else {\n            // If not 'all' groups, maintain existing logic\n            orderBy = phaseFilter === FetchProjectsPhaseOptions.ExpiredPitch ? FetchProjectsOrderByOptions.Group : FetchProjectsOrderByOptions.Phase;\n        }\n\n        const fetchOffersOptions: FetchProjectsOptions = {\n            search: searchFilter.trim().length === 0 ? undefined : searchFilter,\n            visibility: visibilityFilter,\n            group: groupFilter === \"all\" ? undefined : groupFilter,\n            sector: sectorFilter === \"all\" ? undefined : sectorFilter,\n            phase: phaseFilter,\n            orderBy,\n        };\n\n        dispatch({ type: ExploreOffersEvents.FetchingOffers });\n\n        try {\n            const response = await new OfferRepository().fetchOffers(fetchOffersOptions);\n            dispatch({\n                type: ExploreOffersEvents.CompleteFetchingOffers,\n                offerInstances: response.data,\n            });\n        } catch (error) {\n            dispatch({\n                type: ExploreOffersEvents.CompleteFetchingOffers,\n                error: error.toString(),\n                offerInstances: [],\n            });\n        }\n    };\n};\n\nexport const filterChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const name = event.target.name;\n        const value = event.target.value;\n\n        const action: FilterChangedAction = {\n            type: ExploreOffersEvents.FilterChanged,\n            name: name,\n            value: value\n        }\n        dispatch(action);\n\n        switch (name) {\n            case \"searchFilter\":\n                return;\n            case \"visibilityFilter\":\n                if (value === \"all\" || value.toString() === PROJECT_VISIBILITY_PUBLIC.toString() || value.toString() === PROJECT_VISIBILITY_RESTRICTED.toString()) {\n                    return dispatch(fetchOffers(FetchProjectsOrderByOptions.Visibility));\n                }\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Group));\n            case \"sectorFilter\":\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Sector));\n            case \"phaseFilter\":\n                return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase));\n            case \"groupFilter\":\n                return dispatch(fetchOffers(value === \"all\" ? undefined : FetchProjectsOrderByOptions.Group));\n            default:\n                return;\n        }\n    }\n}\n\nexport const clearSearchFilter: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        dispatch({\n            type: ExploreOffersEvents.ClearSearchFilter\n        });\n        return dispatch(fetchOffers(FetchProjectsOrderByOptions.Phase))\n    }\n}\n\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: PaginationChangedAction = {\n            type: ExploreOffersEvents.PaginationChanged,\n            page: page\n        }\n        return dispatch(action);\n    }\n}\n\n","import {\n    ChangePageAction,\n    ChangeRowsPerPageAction,\n    CompleteExportingCsvAction,\n    CompleteFetchingOffersAction,\n    FilterChangedAction,\n    FilterOffersByNameAction,\n    OffersTableAction,\n    OffersTableEvents,\n    SetTableUserAction\n} from \"./OffersTableActions\";\nimport {ProjectInstance} from \"../../models/project\";\nimport User from \"../../models/user\";\nimport Admin from \"../../models/admin\";\nimport Error from \"../../models/error\";\nimport GroupOfMembership from \"../../models/group_of_membership\";\nimport GroupProperties from \"../../models/group_properties\";\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\n\nexport interface OffersTableStates {\n    offerInstances: ProjectInstance[];\n    offerInstancesFilteredByName: ProjectInstance[];\n    fetchingOffers: boolean;\n    offersFetched: boolean;\n\n    tableUser?: User | Admin;\n    tableUserGroupsOfMembership?: GroupOfMembership[];\n\n    nameFilter: string;\n    visibilityFilter: number | \"all\";\n    groupFilter: string | \"all\";\n    groupsSelect?: GroupProperties[];\n    phaseFilter: string | number | \"all\";\n    filteringOffersByName: boolean;\n\n    currentPage: number;\n    rowsPerPage: number;\n\n    exportingCsv: boolean;\n    errorExportingCsv?: Error;\n\n    error?: Error\n}\n\nconst initialState: OffersTableStates = {\n    offerInstances: [],\n    offerInstancesFilteredByName: [],\n    fetchingOffers: false,\n    offersFetched: false,\n\n    nameFilter: \"\",\n    visibilityFilter: \"all\",\n    groupFilter: \"all\",\n    phaseFilter: \"all\",\n    filteringOffersByName: false,\n\n    currentPage: 0,\n    rowsPerPage: 5,\n\n    exportingCsv: false\n}\n\nexport const isFetchingOffers = (state: OffersTableStates) => {\n    return !state.offersFetched && state.fetchingOffers;\n}\n\nexport const successfullyFetchedOffers = (state: OffersTableStates) => {\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\n}\n\nexport const hasOffersForCurrentFilters = (state: OffersTableStates) => {\n    return successfullyFetchedOffers(state) && state.offerInstancesFilteredByName.length > 0;\n}\n\nexport const isFilteringOffersByName = (state: OffersTableStates) => {\n    return state.filteringOffersByName;\n}\n\nexport const hasErrorFetchingOffers = (state: OffersTableStates) => {\n    return state.error !== undefined;\n}\n\nexport const isExportingCsv = (state: OffersTableStates) => {\n    return state.exportingCsv;\n}\n\nexport const hasErrorExportingCsv = (state: OffersTableStates) => {\n    return state.errorExportingCsv !== undefined;\n}\n\nexport const hasGroupsSelect = (state: OffersTableStates) => {\n    return state.groupsSelect !== undefined && state.groupsSelect.length > 0;\n}\n\nconst offersTableReducer = (state = initialState, action: OffersTableAction) => {\n    switch (action.type) {\n        case AuthenticationEvents.SignOut:\n            return initialState;\n        case OffersTableEvents.SetTableUser:\n            const setTableUserAction: SetTableUserAction = action as SetTableUserAction;\n            return {\n                ...initialState,\n                tableUser: setTableUserAction.user !== undefined\n                    ? JSON.parse(JSON.stringify(setTableUserAction.user))\n                    : undefined,\n                tableUserGroupsOfMembership: setTableUserAction.groupsOfMembership !== undefined\n                    ? [...setTableUserAction.groupsOfMembership]\n                    : undefined,\n                groupsSelect: setTableUserAction.groupsSelect !== undefined\n                    ? [...setTableUserAction.groupsSelect]\n                    : undefined,\n                error: setTableUserAction.error !== undefined ? {detail: setTableUserAction.error} : state.error,\n            }\n        case OffersTableEvents.FetchingOffers:\n            return {\n                ...state,\n                offerInstances: [],\n                offerInstancesFilteredByName: [],\n                fetchingOffers: true,\n                offersFetched: false,\n                error: undefined\n            }\n        case OffersTableEvents.CompleteFetchingOffers:\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\n            return {\n                ...state,\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\n                fetchingOffers: false,\n                offersFetched: true,\n                currentPage: 0,\n                error: completeFetchingOffersAction.error !== undefined\n                    ? {detail: completeFetchingOffersAction.error} : state.error\n            }\n        case OffersTableEvents.FilterChanged:\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\n            return {\n                ...state,\n                [filterChangedAction.name]: filterChangedAction.value,\n                currentPage: 0\n            }\n        case OffersTableEvents.FilterOffersByName:\n            const filterOffersByNameAction: FilterOffersByNameAction = action as FilterOffersByNameAction;\n            return {\n                ...state,\n                offerInstancesFilteredByName: [...filterOffersByNameAction.offerInstances],\n                filteringOffersByName: filterOffersByNameAction.isFilteringByName,\n                currentPage: 0\n            }\n        case OffersTableEvents.CancelFilteringOffersByName:\n            return {\n                ...state,\n                offerInstancesFilteredByName: [...state.offerInstances],\n                nameFilter: \"\",\n                filteringOffersByName: false,\n                currentPage: 0\n            }\n        case OffersTableEvents.ChangePage:\n            const changePageAction: ChangePageAction = action as ChangePageAction;\n            return {\n                ...state,\n                currentPage: changePageAction.page\n            }\n        case OffersTableEvents.ChangeRowsPerPage:\n            const changeRowsPerPageAction: ChangeRowsPerPageAction = action as ChangeRowsPerPageAction;\n            return {\n                ...state,\n                rowsPerPage: changeRowsPerPageAction.rowsPerPage,\n                currentPage: 0\n            }\n        case OffersTableEvents.ExportingCsv:\n            return {\n                ...state,\n                exportingCsv: true,\n                errorExportingCsv: undefined\n            }\n        case OffersTableEvents.CompleteExportingCsv:\n            const completeExportingCsvAction: CompleteExportingCsvAction = action as CompleteExportingCsvAction;\n            return {\n                ...state,\n                exportingCsv: false,\n                errorExportingCsv: completeExportingCsvAction.error !== undefined\n                    ? {detail: completeExportingCsvAction.error} : state.errorExportingCsv\n            }\n        default:\n            return state;\n    }\n}\n\nexport default offersTableReducer;","import React from \"react\";\nimport {NavLink} from \"react-router-dom\";\nimport {css, StyleSheet} from \"aphrodite\";\n\nexport interface CustomLinkProps {\n    url: string;\n    target?: string;\n    color: string | \"none\";\n    activeColor: string | \"none\";\n    activeUnderline: boolean;\n    component: \"a\" | \"nav-link\";\n    childComponent: React.ReactNode;\n}\n\nconst CustomLink = (props: CustomLinkProps) => {\n    if (props.component === \"a\") {\n        return <a\n            href={props.url}\n            target={props.target}\n            className={css(styles(props).link_style)}\n        >\n            {props.childComponent}\n        </a>;\n    }\n\n    return <NavLink\n        to={props.url}\n        target={props.target}\n        className={css(styles(props).link_style)}\n    >\n        {props.childComponent}\n    </NavLink>;\n}\n\nexport default CustomLink;\n\nconst styles = (props: CustomLinkProps) => StyleSheet.create({\n    link_style: {\n        color: props.color,\n        ':hover': {\n            color: props.activeColor,\n            textDecoration: props.activeUnderline ? \"underline\" : \"none\"\n        }\n    }\n});","import * as DB_CONST from \"../firebase/databaseConsts\";\r\nimport {\r\n    FILE_TYPE_IMAGE,\r\n    FILE_TYPE_VIDEO,\r\n    PROJECT_VISIBILITY_PRIVATE,\r\n    PROJECT_VISIBILITY_PUBLIC,\r\n    PROJECT_VISIBILITY_RESTRICTED\r\n} from \"../firebase/databaseConsts\";\r\nimport CreatePitchAgreement from \"./create_pitch_agreement\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport User, {isIssuer} from \"./user\";\r\nimport Pledge from \"./pledge\";\r\nimport Admin, {isAdmin} from \"./admin\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\n\r\n/**\r\n * Project interface\r\n */\r\nexport default interface Project {\r\n    id: string;\r\n    anid: string;\r\n    issuerID: string;\r\n    visibility: number;\r\n    status: number;\r\n    projectName?: string; // optional for draft projects only\r\n    description?: string; // optional for draft projects only\r\n    sector?: string; // optional for draft projects only\r\n    edited?: number;\r\n    temporarilyClosed?: boolean;\r\n\r\n    /**\r\n     * This field contains the user id of the group admin who\r\n     * - created the project on their own\r\n     *      --> [issuerID] = user id of the group admin as well\r\n     *\r\n     * - created the project on behalf of an issuer\r\n     *      --> [issuerID] = user id of the issuer whom the group admin created the project for\r\n     */\r\n    createdByGroupAdmin?: string;\r\n\r\n    Pitch: ProjectPitch;\r\n    PrimaryOffer?: ProjectPledge;\r\n\r\n    createPitchAgreement?: CreatePitchAgreement | null\r\n}\r\n\r\n/**\r\n * Instance of project at load time that contains extra information from other collections\r\n */\r\nexport interface ProjectInstance {\r\n    projectDetail: Project;\r\n    group: GroupProperties;\r\n    issuer: User | Admin;\r\n    pledges: Pledge[];\r\n    rejectFeedbacks: ProjectRejectFeedback[];\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a project in csv\r\n */\r\nexport interface ProjectCsv {\r\n    visibility: \"public\" | \"restricted\" | \"private\";\r\n    projectName: string | undefined;\r\n    description: string | undefined;\r\n    sector: string | undefined;\r\n    postedDate: number | undefined; // = pitch postedDate\r\n    financialRound: string | undefined; // = pitch financialRound\r\n\r\n    detailsAboutEarlierFundraisingRounds: string | undefined; // = pitch detailsAboutEarlierFundraisingRounds\r\n    investorsCommitted: string | undefined; // = pitch investorsCommitted\r\n    fundRequired: number | undefined; // = pitch fundRequired\r\n    postMoneyValuation: number | undefined;\r\n    coverURL: string | undefined; // = active pitch cover\r\n    mainDocument: string | undefined; // = active pitch presentationDocument\r\n    mainText: string | undefined; // = pitch presentationPlainText\r\n    supportingDocuments: string | undefined; // = active pitch supportingDocuments\r\n\r\n    pitchExpiryDate: string | undefined; // = pitch expiredDate\r\n\r\n    pledgeExpiryDate: string | undefined; // = pledge expiredDate\r\n\r\n    // this field is only available for QIB group\r\n    qibSpecialNews?: string | undefined; // = pitch qibSpecialNews\r\n\r\n    agreedToShareRaisePublicly?: \"yes\" | \"no\" | undefined;\r\n}\r\n\r\n/**\r\n * Project - pitch interface\r\n */\r\nexport interface ProjectPitch {\r\n    postedDate: number;\r\n    status: number;\r\n    fundRequired?: number;\r\n    totalRaise?: number;\r\n    expiredDate?: number;\r\n    cover?: PitchCover[];\r\n    postMoneyValuation?: number;\r\n    detailsAboutEarlierFundraisingRounds?: string;\r\n    investorsCommitted?: string;\r\n    financialRound?: string;\r\n    presentationDocument?: PitchDocument[];\r\n    supportingDocuments?: PitchDocument[];\r\n    presentationText?: any;\r\n    presentationPlainText?: string; // a text-only version of the presentationText which is a Quill object\r\n\r\n    /**\r\n     * This field is only available for QIB\r\n     */\r\n    qibSpecialNews?: string;\r\n}\r\n\r\n/**\r\n * Project - pledge interface\r\n */\r\nexport interface ProjectPledge {\r\n    expiredDate: number;\r\n    status: number;\r\n    extraNotes?: string;\r\n    postMoneyValuation?: number;\r\n}\r\n\r\n/**\r\n * Project reject feedback\r\n */\r\nexport interface ProjectRejectFeedback {\r\n    projectID: string;\r\n    sentBy: string;\r\n    date: number;\r\n    feedback: string;\r\n}\r\n\r\n/**\r\n * Project - pitch cover interface\r\n */\r\nexport interface PitchCover {\r\n    fileExtension: string;\r\n    fileType: number;\r\n    storageID: number;\r\n    url: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Project - pitch document interface\r\n */\r\nexport interface PitchDocument {\r\n    fileName: string;\r\n    readableSize: string;\r\n    storageID: number;\r\n    downloadURL: string;\r\n    removed?: boolean;\r\n}\r\n\r\n/**\r\n * Check if a project is live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectLive = (project: Project) => {\r\n    return isProjectInLivePitchPhase(project) || isProjectInLivePledgePhase(project);\r\n};\r\n\r\n/**\r\n * Check if a project is a draft\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isDraftProject = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n};\r\n\r\n/**\r\n * Check if a draft project to submitted to the group admin for review\r\n *\r\n * @param project\r\n */\r\nexport const isDraftProjectNotSubmitted = (project: Project) => {\r\n    return isDraftProject(project) && project.Pitch.status === DB_CONST.PROJECT_STATUS_DRAFT;\r\n}\r\n\r\n/**\r\n * Check if a project is waiting to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED;\r\n};\r\n\r\n/**\r\n * Check if a project is rejected to go live\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectRejectedToGoLive = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_REJECTED;\r\n};\r\n\r\n/**\r\n * Check if a project is in live pitch phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePitchPhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_ON_GOING;\r\n};\r\n\r\n/**\r\n * Check if the pitch has expired and waiting for admin to make decision\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectPitchExpiredWaitingForAdminToCheck = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n        && project.Pitch.status === DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN;\r\n};\r\n\r\n/**\r\n * Check if a project has been moved to pledge phase and waiting for the pledge page to be created\r\n *\r\n * @param project\r\n * @returns {boolean|boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeCreated = (project: Project) => {\r\n    return (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        )\r\n        || (\r\n            project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n        );\r\n}\r\n\r\n/**\r\n * Check if a project's pledge is waiting to be checked\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectWaitingForPledgeToBeChecked = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\r\n}\r\n\r\n/**\r\n * Check if a project is in live pledge phase\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectInLivePledgePhase = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with at least 1 pledge\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectSuccessful = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_SUCCESSFUL;\r\n};\r\n\r\n/**\r\n * Check if a project has ended with no pledges\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectFailed = (project: Project) => {\r\n    return project.status === DB_CONST.PROJECT_STATUS_FAILED;\r\n};\r\n\r\n/**\r\n * Check if a project is temporarily closed\r\n *\r\n * @param project\r\n * @returns {boolean}\r\n */\r\nexport const isProjectTemporarilyClosed = (project: Project) => {\r\n    return project.temporarilyClosed !== undefined && project.temporarilyClosed;\r\n};\r\n\r\n/**\r\n * Check if a project has reject feedbacks\r\n *\r\n * @param projectInstance\r\n */\r\nexport const doesProjectHaveRejectFeedbacks = (projectInstance: ProjectInstance) => {\r\n    return projectInstance.rejectFeedbacks.length > 0;\r\n}\r\n\r\n/**\r\n * Check if a project is created by an admin\r\n *\r\n * @param project\r\n */\r\nexport const isProjectCreatedByGroupAdmin = (project: Project) => {\r\n    return project.createdByGroupAdmin !== undefined && project.createdByGroupAdmin !== null;\r\n}\r\n\r\n/**\r\n * Set a project to draft\r\n *\r\n * @param project\r\n */\r\nexport const setProjectToDraft = (project: Project): Project => {\r\n    project.Pitch.status = DB_CONST.PITCH_STATUS_ON_GOING;\r\n    project.status = DB_CONST.PROJECT_STATUS_DRAFT;\r\n    return project;\r\n}\r\n\r\nexport const getPitchCover = (project: Project) => {\r\n    if (project.Pitch.cover === undefined) {\r\n        return null;\r\n    }\r\n    const index = project.Pitch.cover.findIndex(cover => cover.removed === undefined || !cover.removed);\r\n    if (index === -1) {\r\n        return null;\r\n    }\r\n    return project.Pitch.cover[index];\r\n}\r\n\r\nexport const isImagePitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_IMAGE;\r\n}\r\n\r\nexport const isVideoPitchCover = (pitchCover: PitchCover) => {\r\n    return pitchCover.fileType === FILE_TYPE_VIDEO;\r\n}\r\n\r\nexport const isProjectPublic = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PUBLIC;\r\n}\r\n\r\nexport const isProjectRestricted = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_RESTRICTED;\r\n}\r\n\r\nexport const isProjectPrivate = (project: Project) => {\r\n    return project.visibility === PROJECT_VISIBILITY_PRIVATE;\r\n}\r\n\r\n/**\r\n * Should hide project information from a user\r\n *\r\n * --> true: hide\r\n * --> false: not hide\r\n *\r\n * @param user\r\n * @param groupsOfMembership\r\n * @param project\r\n */\r\nexport const shouldHideProjectInformationFromUser = (user: User | Admin, groupsOfMembership: GroupOfMembership[], project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // user is an admin\r\n    if (admin) {\r\n        // user is a super admin\r\n        if (admin.superAdmin) {\r\n            return false;\r\n        }\r\n\r\n        // user is a group admin and is the group that owns the project\r\n        if (admin.anid === project.anid) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n    // user is not an admin\r\n    else {\r\n        // should not hide any information if the user is an issuer that created this offer\r\n        if (isIssuer(user) && user.id === project.issuerID) {\r\n            return false;\r\n        }\r\n\r\n        // user is a member of the group that owns this offer\r\n        if (groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === project.anid) !== -1) {\r\n            return false;\r\n        }\r\n\r\n        // other group admins must go through the checks of project's visibility\r\n        switch (project.visibility) {\r\n            case PROJECT_VISIBILITY_PUBLIC:\r\n                return false;\r\n            case PROJECT_VISIBILITY_RESTRICTED:\r\n                return true;\r\n            case PROJECT_VISIBILITY_PRIVATE:\r\n                return true;\r\n            default:\r\n                return true;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Check if a user is the owner of a project\r\n *\r\n * @param user\r\n * @param project\r\n */\r\nexport const isProjectOwner = (user: User | Admin, project: Project) => {\r\n    const admin: Admin | null = isAdmin(user);\r\n    // super admin does not own a project\r\n    if (admin && admin.superAdmin) {\r\n        return false;\r\n    }\r\n\r\n    if (admin) {\r\n        return admin.anid === project.anid;\r\n    } else {\r\n        return user.id === project.issuerID;\r\n    }\r\n}","import colorString from \"color-string\";\n\nexport const toRGBWithOpacity = (color: string, opacity?: number) => {\n    const rgbColor: colorString.Color | null = colorString.get.rgb(color);\n    if (!rgbColor) {\n        return color;\n    }\n    return colorString.to.hex(rgbColor[0], rgbColor[1], rgbColor[2], opacity === undefined ? 1.0 : opacity);\n}","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {\n    Box,\n    Button,\n    colors,\n    IconButton,\n    InputAdornment,\n    InputBase,\n    MenuItem,\n    OutlinedInput,\n    Paper,\n    Select,\n    Table,\n    TableBody,\n    TableCell,\n    TableContainer,\n    TableFooter,\n    TableHead,\n    TablePagination,\n    TableRow,\n    Typography\n} from \"@material-ui/core\";\nimport {Close, CreateOutlined, ImportExportOutlined, Refresh, Search} from \"@material-ui/icons\";\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\nimport {\n    hasErrorExportingCsv,\n    hasErrorFetchingOffers,\n    hasGroupsSelect,\n    hasOffersForCurrentFilters,\n    isExportingCsv,\n    isFetchingOffers,\n    isFilteringOffersByName,\n    OffersTableStates,\n    successfullyFetchedOffers\n} from \"./OffersTableReducer\";\nimport User, {isInvestor, isIssuer} from \"../../models/user\";\nimport Admin, {isAdmin} from \"../../models/admin\";\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {\n    cancelFilteringOffersByName,\n    changePage,\n    changeRowsPerPage,\n    exportCsv,\n    fetchOffers,\n    filterChanged,\n    filterOffersByName,\n    setUser\n} from \"./OffersTableActions\";\nimport {Col, Row} from \"react-bootstrap\";\nimport {BeatLoader} from \"react-spinners\";\nimport PublicIcon from \"@material-ui/icons/Public\";\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\nimport {\n    isDraftProject,\n    isProjectPitchExpiredWaitingForAdminToCheck,\n    isProjectPublic,\n    isProjectRestricted,\n    isProjectTemporarilyClosed,\n    isProjectWaitingToGoLive\n} from \"../../models/project\";\nimport Routes from \"../../router/routes\";\nimport {dateInReadableFormat, isProjectInLivePitchPhase} from \"../../utils/utils\";\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\nimport {\n    PROJECT_STATUS_BEING_CHECKED,\n    PROJECT_STATUS_DRAFT,\n    PROJECT_VISIBILITY_PRIVATE,\n    PROJECT_VISIBILITY_PUBLIC,\n    PROJECT_VISIBILITY_RESTRICTED\n} from \"../../firebase/databaseConsts\";\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\n\ninterface OffersTableProps {\n    // table user set by passing this prop to the OffersTable component when used\n    directTableUser?: User | Admin;\n\n    MediaQueryState: MediaQueryState;\n    ManageSystemAttributesState: ManageSystemAttributesState;\n    ManageGroupUrlState: ManageGroupUrlState;\n    AuthenticationState: AuthenticationState;\n    OffersTableLocalState: OffersTableStates;\n    setUser: (user?: User | Admin) => any;\n    fetchOffers: () => any;\n    filterChanged: (event: any) => any;\n    filterOffersByName: () => any;\n    cancelFilteringOffersByName: () => any;\n    changePage: (event: any, page: number) => any;\n    changeRowsPerPage: (event: any) => any;\n    exportCsv: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState,\n        OffersTableLocalState: state.OffersTableLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        setUser: (user?: User | Admin) => dispatch(setUser(user)),\n        fetchOffers: () => dispatch(fetchOffers()),\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\n        filterOffersByName: () => dispatch(filterOffersByName()),\n        cancelFilteringOffersByName: () => dispatch(cancelFilteringOffersByName()),\n        changePage: (event: any, page: number) => dispatch(changePage(event, page)),\n        changeRowsPerPage: (event: any) => dispatch(changeRowsPerPage(event)),\n        exportCsv: () => dispatch(exportCsv())\n    }\n}\n\nclass OffersTable extends Component<OffersTableProps, any> {\n\n    componentDidMount() {\n        const {\n            directTableUser,\n            AuthenticationState,\n            setUser\n        } = this.props;\n        setUser(directTableUser ?? AuthenticationState.currentUser ?? undefined);\n    }\n\n    render() {\n        const {\n            ManageGroupUrlState,\n            AuthenticationState,\n            OffersTableLocalState,\n            fetchOffers,\n            filterChanged,\n            filterOffersByName,\n            cancelFilteringOffersByName,\n            changePage,\n            changeRowsPerPage,\n            exportCsv\n        } = this.props;\n\n        if (!AuthenticationState.currentUser) {\n            return null;\n        }\n\n        const currentUser: User | Admin = AuthenticationState.currentUser;\n        const tableUser: User | Admin | undefined = OffersTableLocalState.tableUser;\n\n        if (!currentUser || !tableUser) {\n            return null;\n        }\n\n        const currentAdmin: Admin | null = isAdmin(currentUser);\n        const tableAdmin: Admin | null = isAdmin(tableUser);\n\n        return <TableContainer\n            component={Paper}\n        >\n            <Table\n                color=\"black\"\n            >\n                {/** Table header */}\n                <TableHead>\n                    {/** Export csv button (only available for admin */}\n                    {\n                        !(currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\n                            ? null\n                            : <TableRow>\n                                <TableCell colSpan={5} >\n                                    <Box>\n                                        <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => exportCsv()} >\n                                            <ImportExportOutlined fontSize=\"small\" />\n                                            <Box width=\"10px\" />\n                                            {\n                                                isExportingCsv(OffersTableLocalState)\n                                                    ? \"Exporting ...\"\n                                                    : \"Export csv\"\n                                            }\n                                        </Button>\n\n                                        {\n                                            !hasErrorExportingCsv(OffersTableLocalState)\n                                                ? null\n                                                : <Box marginTop=\"12px\" >\n                                                    <Typography variant=\"body2\" color=\"error\" >\n                                                        {`${OffersTableLocalState.errorExportingCsv?.detail}. Please retry.`}\n                                                    </Typography>\n                                                </Box>\n                                        }\n                                    </Box>\n                                </TableCell>\n                            </TableRow>\n                    }\n\n                    {/** Create new offer button (only available for issuers and admins) */}\n                    {\n                        isInvestor(currentUser) || (currentAdmin && currentAdmin.superAdmin)\n                            ? null\n                            : <TableRow>\n                                <TableCell\n                                    colSpan={5}\n                                >\n                                    <CustomLink\n                                        url={\n                                            isIssuer(currentUser) || (currentAdmin && tableAdmin && currentAdmin.id === tableAdmin.id)\n                                                // issuer creates offer for themselves\n                                                // course admin creates offer for their own course\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)\n                                                : (currentAdmin && isIssuer(tableUser))\n                                                // course admin creates offer for an issuer in their course\n                                                ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {\n                                                    admin: currentAdmin.id,\n                                                    issuer: tableUser.id\n                                                })\n                                                : \"\"\n                                        }                                        \n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} >\n                                                <CreateOutlined fontSize=\"small\" />\n                                                <Box width=\"10px\" /> Create new offer\n                                            </Button>\n                                        }\n                                    />\n                                </TableCell>\n                            </TableRow>\n                    }\n\n                    {/** Search offer by name + refresh button */}\n                    <TableRow>\n                        <TableCell colSpan={5} >\n                            <Row>\n                                {/** Search by name field */}\n                                <Col xs={11} sm={11} md={8} lg={6} >\n                                    <Box\n                                        display=\"flex\"\n                                        height=\"100%\"\n                                        alignItems=\"center\"\n                                        bgcolor={\n                                            !isFilteringOffersByName(OffersTableLocalState)\n                                                ? colors.grey[\"200\"]\n                                                : toRGBWithOpacity(getGroupRouteTheme(ManageGroupUrlState).palette.primary.main, 0.18)\n                                        }\n                                        borderRadius=\"10px\"\n                                    >\n                                        <InputBase\n                                            fullWidth\n                                            name=\"nameFilter\"\n                                            value={OffersTableLocalState.nameFilter}\n                                            placeholder=\"Search offer by name\"\n                                            onChange={filterChanged}\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\n                                            startAdornment={\n                                                <InputAdornment\n                                                    position=\"start\"\n                                                >\n                                                    <IconButton\n                                                        onClick={() => filterOffersByName()}\n                                                        disabled={!successfullyFetchedOffers(OffersTableLocalState)}\n                                                    >\n                                                        <Search fontSize=\"small\"/>\n                                                    </IconButton>\n                                                </InputAdornment>\n                                            }\n                                            endAdornment={\n                                                !isFilteringOffersByName(OffersTableLocalState)\n                                                    ? null\n                                                    : <InputAdornment\n                                                        position=\"end\"\n                                                    >\n                                                        <IconButton onClick={() => cancelFilteringOffersByName()} >\n                                                            <Close fontSize=\"small\"/>\n                                                        </IconButton>\n                                                    </InputAdornment>\n                                            }\n                                        />\n                                    </Box>\n                                </Col>\n\n                                {/** Refresh button */}\n                                <Col xs={1} sm={1} md={4} lg={6} >\n                                    <Box display=\"flex\" height=\"100%\" justifyContent=\"flex-end\" alignItems=\"center\" >\n                                        <IconButton onClick={() => fetchOffers()} disabled={!successfullyFetchedOffers(OffersTableLocalState)} >\n                                            <Refresh/>\n                                        </IconButton>\n                                    </Box>\n                                </Col>\n                            </Row>\n                        </TableCell>\n                    </TableRow>\n\n                    {/** Filters */}\n                    <TableRow>\n                        <TableCell colSpan={5} >\n                            <Row>\n                                {/** Visibility filter */}\n                                <Col xs={12} sm={12} md={6} lg={4} >\n                                    <Box paddingY=\"4px\" >\n                                        <Typography variant=\"body2\" >Visibility:</Typography>\n                                        <Box\n                                            height=\"8px\"\n                                        />\n                                        <Select\n                                            fullWidth\n                                            name=\"visibilityFilter\"\n                                            value={OffersTableLocalState.visibilityFilter}\n                                            variant=\"outlined\"\n                                            margin=\"dense\"\n                                            input={<OutlinedInput/>}\n                                            onChange={filterChanged}\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\n                                        >\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\n                                            <MenuItem key={PROJECT_VISIBILITY_PUBLIC} value={PROJECT_VISIBILITY_PUBLIC}>Public</MenuItem>\n                                            <MenuItem key={PROJECT_VISIBILITY_RESTRICTED} value={PROJECT_VISIBILITY_RESTRICTED}>Restricted</MenuItem>\n                                            <MenuItem key={PROJECT_VISIBILITY_PRIVATE} value={PROJECT_VISIBILITY_PRIVATE}>Private</MenuItem>\n                                        </Select>\n                                    </Box>\n                                </Col>\n\n                                {/** Course filter */}\n                                <Col xs={12} sm={12} md={6} lg={4} >\n                                    <Box paddingY=\"4px\" >\n                                        <Typography variant=\"body2\" >Course:</Typography>\n                                        <Box height=\"8px\" />\n                                        <Select\n                                            fullWidth\n                                            name=\"groupFilter\"\n                                            value={OffersTableLocalState.groupFilter}\n                                            variant=\"outlined\"\n                                            margin=\"dense\"\n                                            input={<OutlinedInput/>}\n                                            onChange={filterChanged}\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\n                                        >\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\n                                            {\n                                                !hasGroupsSelect(OffersTableLocalState)\n                                                || !OffersTableLocalState.groupsSelect\n                                                    ? null\n                                                    : OffersTableLocalState.groupsSelect.map(group =>\n                                                        <MenuItem\n                                                            key={group.anid}\n                                                            value={group.anid}\n                                                        >\n                                                            {group.displayName}\n                                                        </MenuItem>\n                                                    )\n                                            }\n                                        </Select>\n                                    </Box>\n                                </Col>\n\n                                {/** Phase (status) filter */}\n                                <Col xs={12} sm={12} md={6} lg={4} >\n                                    <Box paddingY=\"4px\" >\n                                        <Typography variant=\"body2\">Status:</Typography>\n                                        <Box height=\"8px\" />\n                                        <Select\n                                            fullWidth\n                                            name=\"phaseFilter\"\n                                            value={OffersTableLocalState.phaseFilter}\n                                            variant=\"outlined\"\n                                            margin=\"dense\"\n                                            input={<OutlinedInput/>}\n                                            onChange={filterChanged}\n                                            disabled={!successfullyFetchedOffers(OffersTableLocalState)}\n                                        >\n                                            <MenuItem key=\"all\" value=\"all\" >All</MenuItem>\n                                            <MenuItem key={FetchProjectsPhaseOptions.LivePitch} value={FetchProjectsPhaseOptions.LivePitch}>Live</MenuItem>\n                                            <MenuItem key={PROJECT_STATUS_BEING_CHECKED} value={PROJECT_STATUS_BEING_CHECKED} >Submitted - awaiting review</MenuItem>\n                                            <MenuItem key={FetchProjectsPhaseOptions.TemporarilyClosed} value={FetchProjectsPhaseOptions.TemporarilyClosed}>Temporarily closed</MenuItem>\n                                            <MenuItem key={FetchProjectsPhaseOptions.ExpiredPitch} value={FetchProjectsPhaseOptions.ExpiredPitch}>Expired</MenuItem>\n                                            <MenuItem key={PROJECT_STATUS_DRAFT} value={PROJECT_STATUS_DRAFT} >Draft</MenuItem>\n                                        </Select>\n                                    </Box>\n                                </Col>\n                            </Row>\n                        </TableCell>\n                    </TableRow>\n\n                    {/** Column headers */}\n                    <TableRow>\n                        <TableCell colSpan={2} >\n                            <Typography variant=\"body2\" color=\"primary\" >Project</Typography>\n                        </TableCell>\n                        <TableCell colSpan={1} >\n                            <Typography variant=\"body2\" color=\"primary\" >Goal</Typography>\n                        </TableCell>\n                        <TableCell colSpan={1} >\n                            <Typography variant=\"body2\" color=\"primary\" >Posted / expiry dates</Typography>\n                        </TableCell>\n                        <TableCell colSpan={1} >\n                            <Typography variant=\"body2\" color=\"primary\" >Status</Typography>\n                        </TableCell>\n                    </TableRow>\n                </TableHead>\n\n                {/** Table body */}\n                <TableBody>\n                    {\n                        // Fetching offers\n                        isFetchingOffers(OffersTableLocalState)\n                            ? <TableRow>\n                                <TableCell colSpan={5} >\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\n                                        <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\n                                    </Box>\n                                </TableCell>\n                            </TableRow>\n                            // Error setting table user / fetching offers\n                            : hasErrorFetchingOffers(OffersTableLocalState)\n                            ? <TableRow>\n                                <TableCell colSpan={5} >\n                                    <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\n                                        <Typography variant=\"h6\" align=\"center\" color=\"error\">Error. Please retry.</Typography>\n                                    </Box>\n                                </TableCell>\n                            </TableRow>\n                            // Not successfully fetching offers\n                            : !successfullyFetchedOffers(OffersTableLocalState)\n                                ? null\n                                // No offers available for current filters\n                                : !hasOffersForCurrentFilters(OffersTableLocalState)\n                                    ? <TableRow>\n                                        <TableCell colSpan={5} >\n                                            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" height=\"120px\" >\n                                                <Typography variant=\"h6\" align=\"center\" >There are no offers available using your current filter criteria.</Typography>\n                                            </Box>\n                                        </TableCell>\n                                    </TableRow>\n                                    // Render offers\n                                    : OffersTableLocalState.offerInstancesFilteredByName\n                                        .slice(OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage, OffersTableLocalState.currentPage * OffersTableLocalState.rowsPerPage + OffersTableLocalState.rowsPerPage)\n                                        .map(\n                                            offerInstance => <TableRow\n                                                key={offerInstance.projectDetail.id}\n                                                hover\n                                            >\n                                                {/** Offer name */}\n                                                <TableCell colSpan={2} >\n                                                    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" >\n                                                        {/** Visibility + Name */}\n                                                        <Box display=\"flex\" flexDirection=\"row\" >\n                                                            {\n                                                                isProjectPublic(offerInstance.projectDetail)\n                                                                    ? <PublicIcon fontSize=\"small\"/>\n                                                                    : isProjectRestricted(offerInstance.projectDetail)\n                                                                    ? <RestrictedIcon fontSize=\"small\"/>\n                                                                    : <PrivateIcon fontSize=\"small\"/>\n                                                            }\n                                                            <Box width=\"15px\" />\n                                                            <CustomLink\n                                                                url={\n                                                                    isDraftProject(offerInstance.projectDetail)\n                                                                        ? Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\n                                                                        : Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)\n                                                                }\n                                                                target={\n                                                                    isDraftProject(offerInstance.projectDetail)\n                                                                        ? \"_blank\"\n                                                                        : \"\"\n                                                                }\n                                                                color=\"black\"\n                                                                activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\n                                                                activeUnderline={false}\n                                                                component=\"nav-link\"\n                                                                childComponent={\n                                                                    <Typography\n                                                                        variant=\"body2\"\n                                                                        align=\"left\"\n                                                                    >\n                                                                        {offerInstance.projectDetail.projectName ?? \"\"}\n                                                                    </Typography>\n                                                                }\n                                                            />\n                                                        </Box>\n\n                                                        {/** Created by (not available for issuers who are looking at their own offers table) */}\n                                                        {\n                                                            isIssuer(currentUser)\n                                                            && OffersTableLocalState.tableUser !== undefined\n                                                            && currentUser.id === OffersTableLocalState.tableUser.id\n                                                                ? null\n                                                                : <Box marginTop=\"10px\" >\n                                                                    <Typography variant=\"body2\" align=\"left\" color=\"textSecondary\" >\n                                                                        <i>\n                                                                            {\n                                                                                offerInstance.projectDetail.createdByGroupAdmin\n                                                                                    ? `Created by ${offerInstance.group.displayName} admin`\n                                                                                    : `Created by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\n                                                                            }\n                                                                        </i>\n                                                                    </Typography>\n                                                                </Box>\n                                                        }\n\n                                                        {/** Edit button (only available for draft project) */}\n                                                        {\n                                                            isInvestor(currentUser)\n                                                                ? null\n                                                                : !isDraftProject(offerInstance.projectDetail)\n                                                                ? null\n                                                                : <Box marginTop=\"18px\" >\n                                                                    <CustomLink\n                                                                        url={\n                                                                            Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null, {edit: offerInstance.projectDetail.id})\n                                                                        }\n                                                                        target=\"_blank\"\n                                                                        color=\"none\"\n                                                                        activeColor=\"none\"\n                                                                        activeUnderline={false}\n                                                                        component=\"nav-link\"\n                                                                        childComponent={\n                                                                            <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)} >\n                                                                                <CreateOutlined fontSize=\"small\" />\n                                                                                <Box width=\"8px\" />\n                                                                                Edit\n                                                                            </Button>\n                                                                        }\n                                                                    />\n                                                                </Box>\n                                                        }\n                                                    </Box>\n                                                </TableCell>\n\n                                                {/** Goal */}\n                                                <TableCell colSpan={1} >\n                                                    <Typography variant=\"body2\" align=\"left\" >\n                                                        {\n                                                            !offerInstance.projectDetail.Pitch.fundRequired\n                                                                ? \"\"\n                                                                : `${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(0)).toLocaleString()}`\n                                                        }\n                                                    </Typography>\n                                                </TableCell>\n\n                                                {/** Posted / expiry dates */}\n                                                <TableCell colSpan={1} >\n                                                    <Box display=\"flex\" flexDirection=\"column\" >\n                                                        <Typography variant=\"body2\" align=\"left\" >\n                                                            {`Posted date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.postedDate)}`}\n                                                        </Typography>\n                                                        <Box height=\"12px\" />\n                                                        <Typography variant=\"body2\" align=\"left\" >\n                                                            {\n                                                                !offerInstance.projectDetail.Pitch.expiredDate\n                                                                    ? \"Expiry date: unknown\"\n                                                                    : `Expiry date: ${dateInReadableFormat(offerInstance.projectDetail.Pitch.expiredDate)}`\n                                                            }\n                                                        </Typography>\n                                                    </Box>\n                                                </TableCell>\n\n                                                {/** Status */}\n                                                <TableCell colSpan={1} >\n                                                    <Typography variant=\"body2\" align=\"left\" >\n                                                        {\n                                                            isDraftProject(offerInstance.projectDetail)\n                                                                ? \"Draft\"\n                                                                : isProjectWaitingToGoLive(offerInstance.projectDetail)\n                                                                ? \"Submitted. Awaiting course admin review\"\n                                                                : isProjectInLivePitchPhase(offerInstance.projectDetail)\n                                                                    ? isProjectTemporarilyClosed(offerInstance.projectDetail)\n                                                                        ? \"Temporarily closed\"\n                                                                        : \"Live\"\n                                                                    : isProjectPitchExpiredWaitingForAdminToCheck(offerInstance.projectDetail)\n                                                                        ? \"Expired. Awaiting course admin review\"\n                                                                        : \"Closed\"\n                                                        }\n                                                    </Typography>\n                                                </TableCell>\n                                            </TableRow>\n                                        )\n                    }\n                </TableBody>\n\n                {/** Table footer */}\n                <TableFooter>\n                    <TableRow>\n                        <TablePagination\n                            rowsPerPageOptions={[5, 10, 15]}\n                            count={OffersTableLocalState.offerInstancesFilteredByName.length}\n                            rowsPerPage={OffersTableLocalState.rowsPerPage}\n                            page={OffersTableLocalState.currentPage}\n                            backIconButtonProps={{\n                                'aria-label': 'Previous Page',\n                            }}\n                            nextIconButtonProps={{\n                                'aria-label': 'Next Page',\n                            }}\n                            SelectProps={{\n                                native: true,\n                            }}\n                            onChangePage={changePage}\n                            onChangeRowsPerPage={changeRowsPerPage}\n                        />\n                    </TableRow>\n                </TableFooter>\n            </Table>\n        </TableContainer>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OffersTable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Box, Divider, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\n\r\ninterface FooterProps {\r\n    position?: \"relative\" | \"fixed\",\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Footer extends Component<FooterProps, any> {\r\n    render() {\r\n        const {\r\n            position,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Box\r\n            display=\"flex\"\r\n            flexDirection=\"column\"\r\n            paddingX=\"15px\"\r\n            paddingY=\"20px\"\r\n            borderTop={1}\r\n            borderColor={appColors.kick_starter_gray_box_border}\r\n            bgcolor={appColors.kick_starter_background_color}\r\n            alignItems=\"center\"\r\n            width=\"100%\"\r\n            marginTop=\"100px\"\r\n            style={{\r\n                position: position !== undefined ? position : (MediaQueryState.isMobile || !MediaQueryState.minHeightScreen ? \"relative\" : \"fixed\"),\r\n                bottom: position === undefined ? 0 : \"none\"\r\n            }}\r\n        >\r\n            <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" >\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"termsOfUse\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography variant=\"body1\">Terms of Use</Typography>\r\n                    }\r\n                />\r\n\r\n                <Box width={25} />\r\n\r\n                <CustomLink\r\n                    color=\"black\"\r\n                    target=\"_blank\"\r\n                    activeColor=\"#007BFF\"\r\n                    activeUnderline={true}\r\n                    url={Routes.constructPublicRoute(\"privacyPolicy\")}\r\n                    component=\"nav-link\"\r\n                    childComponent={\r\n                        <Typography variant=\"body1\">Privacy Policy</Typography>\r\n                    }\r\n                />\r\n            </Box>\r\n\r\n            <Box marginY=\"20px\" width={MediaQueryState.isMobile ? \"100%\" : \"500px\"}>\r\n                <Divider/>\r\n            </Box>\r\n\r\n            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" justifyContent=\"center\" >\r\n                <Image\r\n                    alt=\"Invest West logo\"\r\n                    src={require(\"../../img/logo.png\").default}\r\n                    style={{ width: \"auto\", height: 34, objectFit: \"contain\" }}\r\n                />\r\n                <Box width=\"20px\" />\r\n                <Typography align=\"left\" variant=\"body1\">Powered by Student Invest West. <br/> Copyright  2021 Student Invest West Ltd - All Rights Reserved.</Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Footer);\r\n","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    Divider,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormGroup,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    List,\r\n    ListItem,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\r\nimport {NavLink} from 'react-router-dom';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport LetterAvatar from './LetterAvatar';\r\nimport ActivitiesTable from '../activities-components/ActivitiesTable';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as utils from '../../utils/utils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport Routes from '../../router/routes';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as createBusinessProfileActions from '../../redux-store/actions/createBusinessProfileActions';\r\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\r\nimport * as editImageActions from '../../redux-store/actions/editImageActions';\r\nimport * as editVideoActions from '../../redux-store/actions/editVideoActions';\r\nimport * as uploadFilesActions from '../../redux-store/actions/uploadFilesActions';\r\nimport * as legalDocumentsActions from '../../redux-store/actions/legalDocumentsActions';\r\n\r\nimport {\r\n    UPLOAD_LOGO_FIRST_TIME_MODE,\r\n    UPLOAD_LOGO_MODE,\r\n    UPLOAD_PROFILE_PICTURE_MODE,\r\n    UPLOAD_VIDEO_FIRST_TIME_MODE,\r\n    UPLOAD_VIDEO_MODE\r\n} from '../uploading-dialog/UploadingDialog';\r\nimport {HashLoader} from 'react-spinners';\r\nimport OffersTable from \"../offers-table/OffersTable\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../footer/Footer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        // -- old states -----------------------------------------------------------------------------------------------\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n\r\n        // Create new business profile state ----------------------------------------------------------------------------\r\n        createBusinessProfile: state.createBusinessProfile,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile state ------------------------------------------------------------------------------------\r\n        originalUser: state.editUser.originalUser,\r\n        userEdited: state.editUser.userEdited,\r\n        allowEditing: state.editUser.allowEditing,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents (for issuer only) --------------------------------------------------------------------\r\n        legalDocuments_userID: state.legalDocuments.userID,\r\n        userLegalDocuments: state.legalDocuments.legalDocuments,\r\n        userLegalDocumentsLoaded: state.legalDocuments.legalDocumentsLoaded,\r\n        userLegalDocumentsBeingLoaded: state.legalDocuments.legalDocumentsBeingLoaded,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents state --------------------------------------------------------------------------------------\r\n        toBeUploadedLegalDocuments: state.uploadFiles.filesToBeUploaded.legalDocuments,\r\n        fileUploadErrorMessage: state.uploadFiles.fileUploadErrorMessage,\r\n        fileUploadErrorSnackbarOpen: state.uploadFiles.fileUploadErrorSnackbarOpen,\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // These states can be also be used when creating business profile ***********\r\n        addNewDirector: state.editUser.addNewDirector,\r\n        newDirectorText: state.editUser.newDirectorText\r\n        //***************************************************************************\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        // Create new business profile functions ------------------------------------------------------------------------\r\n        handleCreateBusinessProfileTextChanged: (fieldType, event) => dispatch(createBusinessProfileActions.handleTextChanged(fieldType, event)),\r\n        toggleEnterAddressManually: (field) => dispatch(createBusinessProfileActions.toggleEnterAddressManually(field)),\r\n        resetCreatingBusinessProfile: () => dispatch(createBusinessProfileActions.clearAllFields()),\r\n        toggleExpandBusinessProfileFillingForInvestor: () => dispatch(createBusinessProfileActions.toggleExpandBusinessProfileFillingForInvestor()),\r\n        uploadBusinessProfile: () => dispatch(createBusinessProfileActions.uploadBusinessProfile()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Edit user's profile functions --------------------------------------------------------------------------------\r\n        editUserLocally: (type, edit) => dispatch(editUserActions.editUserLocally(type, edit)),\r\n        toggleAddNewDirector: () => dispatch(editUserActions.toggleAddNewDirector()),\r\n        addNewDirectorTemporarily: (isEditingExistingBusinessProfile) => dispatch(editUserActions.addNewDirectorTemporarily(isEditingExistingBusinessProfile)),\r\n        deleteDirectorTemporarily: (index, isEditingExistingBusinessProfile) => dispatch(editUserActions.deleteDirectorTemporarily(index, isEditingExistingBusinessProfile)),\r\n        cancelEditingUser: (type) => dispatch(editUserActions.cancelEditingUser(type)),\r\n        commitUserProfileChanges: (type) => dispatch(editUserActions.commitUserProfileChanges(type)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // User's legal documents functions ----------------------------------------------------------------------------\r\n        legalDocuments_setUserID: (userID) => dispatch(legalDocumentsActions.setUserID(userID)),\r\n        getUserLegalDocuments: () => dispatch(legalDocumentsActions.getLegalDocuments()),\r\n        startListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.startListeningForLegalDocumentsChanged()),\r\n        stopListeningForLegalDocumentsChanged: () => dispatch(legalDocumentsActions.stopListeningForLegalDocumentsChanged()),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Upload documents functions ----------------------------------------------------------------------------------\r\n        handleFilesChanged: (mode, files, user, project) => dispatch(uploadFilesActions.handleFilesChanged(mode, files, user, project)),\r\n        handleFileError: (error, file) => dispatch(uploadFilesActions.handleFileError(error, file)),\r\n        closeFileUploadSnackbarError: () => dispatch(uploadFilesActions.closeErrorSnackbar()),\r\n        resetErrorMessageWhenFileUploadSnackbarExited: () => dispatch(uploadFilesActions.resetErrorMessageWhenSnackbarExited()),\r\n        deleteToBeUploadedFile: (mode, index) => dispatch(uploadFilesActions.deleteToBeUploadedFile(mode, index)),\r\n        deleteUploadedFile: (mode, index, user, project) => dispatch(uploadFilesActions.deleteUploadedFile(mode, index, user, project)),\r\n        uploadFiles: (mode, user, project) => dispatch(uploadFilesActions.uploadFiles(mode, user, project)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open edit image dialog --------------------------------------------------------------------------------------\r\n        toggleEditImageDialog: (mode) => dispatch(editImageActions.toggleEditImageDialog(mode)),\r\n        //--------------------------------------------------------------------------------------------------------------\r\n\r\n        // Open video image dialog -------------------------------------------------------------------------------------\r\n        toggleEditVideoDialog: (mode) => dispatch(editVideoActions.toggleEditVideoDialog(mode))\r\n        //--------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass Profile extends Component {\r\n\r\n    componentDidMount() {\r\n        this.loadData();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            userLegalDocumentsLoaded,\r\n\r\n            startListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        this.loadData();\r\n\r\n        if (userLegalDocumentsLoaded) {\r\n            startListeningForLegalDocumentsChanged();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            stopListeningForLegalDocumentsChanged\r\n        } = this.props;\r\n\r\n        stopListeningForLegalDocumentsChanged();\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            originalUser,\r\n\r\n            legalDocuments_userID,\r\n            userLegalDocumentsLoaded,\r\n            userLegalDocumentsBeingLoaded,\r\n\r\n\r\n            legalDocuments_setUserID,\r\n            getUserLegalDocuments,\r\n        } = this.props;\r\n\r\n        // if user has been set\r\n        if (originalUser) {\r\n            // if user id for reference in legal documents has not been set\r\n            if (!legalDocuments_userID && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                legalDocuments_setUserID(originalUser.id);\r\n            }\r\n\r\n            // if user id for reference in investor self-certification agreement has not been set\r\n        }\r\n\r\n        // if user id for reference in legal documents has been set\r\n        if (legalDocuments_userID) {\r\n            // if legal documents for issuer have not been loaded\r\n            if (!userLegalDocumentsLoaded && !userLegalDocumentsBeingLoaded && originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n                getUserLegalDocuments();\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when editing user's profile\r\n     */\r\n    handleEditUser = type => event => {\r\n        this.props.editUserLocally(type, {property: event.target.name, value: event.target.value});\r\n    };\r\n\r\n    /**\r\n     * Handle text changed when creating a new business profile\r\n     */\r\n    handleCreateBusinessProfileTextChanged = fieldType => event => {\r\n        this.props.handleCreateBusinessProfileTextChanged(fieldType, event);\r\n    };\r\n\r\n    /**\r\n     * Handle files changed when uploading legal documents\r\n     */\r\n    handleFilesChanged = (mode, user) => files => {\r\n        this.props.handleFilesChanged(mode, files, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle delete a to-be-uploaded file\r\n     *\r\n     * @param mode\r\n     * @returns {Function}\r\n     */\r\n    deleteToBeUploadedFile = mode => index => {\r\n        this.props.deleteToBeUploadedFile(mode, index);\r\n    };\r\n\r\n    /**\r\n     * Handle delete an uploaded file\r\n     *\r\n     * @param mode\r\n     * @param user\r\n     * @returns {Function}\r\n     */\r\n    deleteUploadedFile = (mode, user) => index => {\r\n        this.props.deleteUploadedFile(mode, index, user, null);\r\n    };\r\n\r\n    /**\r\n     * Handle upload legal documents\r\n     */\r\n    uploadFiles = (mode, user) => {\r\n        this.props.uploadFiles(mode, user, null);\r\n    };\r\n\r\n    //----------------------------------------------------------------------------------------------------------\r\n\r\n    render() {\r\n        const {\r\n            groupUserName,\r\n            groupPropertiesLoaded,\r\n\r\n            currentUser,\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        // these users will be set in the componentDidMount (happens after render) of the main component\r\n        // therefore, without this check it may lead to a crash due to null objects\r\n        if (!currentUser || !originalUser || !userEdited) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 0 }} >\r\n                <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ padding: 20 }} >\r\n                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\" >\r\n                            <NavLink\r\n                                to={\r\n                                    groupUserName\r\n                                        ?\r\n                                        ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", userEdited.id)\r\n                                        :\r\n                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", userEdited.id)\r\n                                }\r\n                                target={currentUser.id === originalUser.id ? \"\" : \"_blank\"}\r\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\r\n                            >\r\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\" >\r\n                                    <PublicIcon style={{ marginRight: 8 }} />\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            \"View profile\"\r\n                                            :\r\n                                            \"View my profile\"\r\n                                    }\r\n                                </Button>\r\n                            </NavLink>\r\n                            <OverlayTrigger\r\n                                trigger={['hover', 'focus']}\r\n                                placement=\"bottom\"\r\n                                flip\r\n                                overlay={\r\n                                    <Tooltip id={`tooltip-bottom`} >\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                \"See how this student looks to other members. Since you are a course admin, you can see more information about this student than the other ordinary members.\"\r\n                                                :\r\n                                                \"See how you look to other members.\"\r\n                                        }\r\n                                    </Tooltip>\r\n                                }>\r\n                                <InfoIcon fontSize=\"small\" style={{ marginLeft: 15, color: colors.gray_600 }} />\r\n                            </OverlayTrigger>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Personal details */}\r\n                <Row noGutters style={{ backgroundColor: colors.white }} >\r\n                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        <FlexView column >\r\n                            <Typography variant=\"h6\" color=\"primary\" >Personal details</Typography>\r\n\r\n                            <Row noGutters style={{ marginTop: 20 }} >\r\n                                {/** Profile picture */}\r\n                                <Col xs={12} sm={12} md={6} lg={4} >\r\n                                    <FlexView column hAlignContent=\"center\" style={{ padding: 10 }} >\r\n                                        {\r\n                                            !originalUser.profilePicture\r\n                                            || (\r\n                                                originalUser.profilePicture\r\n                                                && originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={originalUser.firstName} lastName={originalUser.lastName} width={196} height={196} textVariant=\"h5\" />\r\n                                                :\r\n                                                <FlexView width={256} height={256} >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={\r\n                                                            originalUser.profilePicture[\r\n                                                                originalUser.profilePicture.findIndex(profilePicture => !profilePicture.hasOwnProperty('removed'))\r\n                                                                ].url\r\n                                                        }\r\n                                                        style={{ width: \"100%\", maxHeight: 256, objectFit: \"contain\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                        }\r\n                                        {\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={20} marginBottom={20} >\r\n                                                    <Button size=\"small\" className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\" onClick={() => this.props.toggleEditImageDialog(UPLOAD_PROFILE_PICTURE_MODE)} style={{ width: 256 }} >Update profile picture</Button>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                {/** Personal info */}\r\n                                <Col xs={12} sm={12} md={6} lg={8} >\r\n                                    <Row>\r\n                                        {/** Title */}\r\n                                        <Col xs={12} md={12} lg={{span: 6, order: 1}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Title</b></FormLabel>\r\n                                                <Select name=\"title\" value={userEdited.title} onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} input={ <OutlinedInput/> } margin=\"dense\" >\r\n                                                    {\r\n                                                        DB_CONST.USER_TITLES.map((title, index) => (\r\n                                                            <MenuItem key={index} value={title}>{title}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Empty column to reserve empty space */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 2}} >\r\n                                            {/** Empty column to reserve empty space */}\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 3}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** First name */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 4}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>First name</b></FormLabel>\r\n                                                <TextField name=\"firstName\" placeholder=\"Enter first name\" value={userEdited.firstName} margin=\"dense\" variant=\"outlined\" onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} error={userEdited.firstName.trim().length === 0} />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Last name */}\r\n                                        <Col xs={12} sm={12} md={6} lg={{span: 6, order: 5}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Last name</b></FormLabel>\r\n                                                <TextField name=\"lastName\" placeholder=\"Enter last name\" value={userEdited.lastName} margin=\"dense\" variant=\"outlined\" onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)} error={userEdited.lastName.trim().length === 0} />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 6}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** Email */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 7}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Email</b></FormLabel>\r\n                                                <TextField\r\n                                                    name=\"email\"\r\n                                                    placeholder=\"Enter email\"\r\n                                                    value={userEdited.email}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    disabled={true} // --> do not allow the users (including the admins) to change the email field for now.\r\n                                                    error={userEdited.email.trim().length === 0}\r\n                                                />\r\n                                            </FormControl>\r\n                                        </Col>\r\n\r\n                                        {/** Divider */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 7}} >\r\n                                            <Divider style={{ marginTop: 10, marginBottom: 20 }} />\r\n                                        </Col>\r\n\r\n                                        {/** LinkedIn */}\r\n                                        <Col xs={12} sm={12} md={12} lg={{span: 12, order: 8}} style={{ marginBottom: 20 }} >\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>LinkedIn</b></FormLabel>\r\n                                                <TextField\r\n                                                    name=\"linkedin\"\r\n                                                    placeholder=\"Enter your LinkedIn profile\"\r\n                                                    value={userEdited.hasOwnProperty('linkedin') ? userEdited.linkedin : ''}\r\n                                                    margin=\"dense\"\r\n                                                    variant=\"outlined\"\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_PERSONAL_INFORMATION)}\r\n                                                    error={!utils.isValidLinkedInURL(userEdited.linkedin)}\r\n                                                />\r\n                                            </FormControl>\r\n                                            {\r\n                                                utils.isValidLinkedInURL(userEdited.linkedin)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FormHelperText className={css(sharedStyles.error_text)} >Invalid LinkedIn URL</FormHelperText>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n\r\n                                    <FlexView hAlignContent=\"right\" marginTop={30} >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={() => this.props.cancelEditingUser(editUserActions.RESET_PERSONAL_INFORMATION)} >Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button\r\n                                                variant=\"contained\"\r\n                                                color=\"primary\"\r\n                                                disabled={\r\n                                                    (\r\n                                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                        && !currentUser.superAdmin\r\n                                                        && !allowEditing\r\n                                                    )\r\n                                                    ||\r\n                                                    userEdited.firstName.trim().length === 0\r\n                                                    || userEdited.lastName.trim().length === 0\r\n                                                    ||\r\n                                                    (\r\n                                                        userEdited.title === originalUser.title\r\n                                                        && userEdited.firstName === originalUser.firstName\r\n                                                        && userEdited.lastName === originalUser.lastName\r\n                                                        && userEdited.email === originalUser.email\r\n                                                        && (\r\n                                                            (originalUser.linkedin && userEdited.linkedin && userEdited.linkedin === originalUser.linkedin)\r\n                                                            ||\r\n                                                            (!userEdited.linkedin && !originalUser.linkedin)\r\n                                                            ||\r\n                                                            (userEdited.linkedin && !originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                            ||\r\n                                                            (userEdited.linkedin && originalUser.linkedin && !utils.isValidLinkedInURL(userEdited.linkedin))\r\n                                                        )\r\n                                                    )\r\n                                                }\r\n                                                onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_PERSONAL_INFORMATION_CHANGES)}\r\n                                            >\r\n                                                Save\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && !currentUser.superAdmin\r\n                                        && !allowEditing\r\n                                            ?\r\n                                            <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }} >This student is not a home member of your course. So, you cannot edit their profile.</Typography>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                            </Row>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12} style={{ marginTop: 20 }} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Business profile */}\r\n                <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                        {\r\n                            this.renderBusinessProfile()\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Divider */}\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Fundraising summary - only available for super user who is viewing the profile of an issuer or an investor */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                                        <FlexView column >\r\n                                            <Typography variant=\"h6\" color=\"primary\" >Fundraising summary</Typography>\r\n\r\n                                            <FlexView column marginTop={20} >\r\n                                                <OffersTable directTableUser={originalUser} />\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                            }\r\n\r\n                            {\r\n                                originalUser.type !== DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} md={12} lg={12} style={{ marginTop: 20 }} >\r\n                                        <Divider/>\r\n                                    </Col>\r\n                            }\r\n                        </Row>\r\n                }\r\n\r\n                {/** User's activities - only available for admins */}\r\n                {\r\n                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row noGutters style={{ backgroundColor: colors.kick_starter_background_color_1 }} >\r\n                            <Col xs={12} md={12} lg={12} style={{ padding: 24 }} >\r\n                                <FlexView column >\r\n                                    <Typography variant=\"h6\" color=\"primary\" >Student activities</Typography>\r\n                                </FlexView>\r\n\r\n                                <FlexView column marginTop={20} >\r\n                                    <ActivitiesTable/>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                <Row noGutters >\r\n                    <Col xs={12} sm={12} md={12} lg={12} >\r\n                        <Footer position=\"relative\" />\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render business profile section\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderBusinessProfile = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            originalUser,\r\n            userEdited,\r\n            allowEditing,\r\n\r\n            clubAttributes,\r\n\r\n            createBusinessProfile,\r\n            addNewDirector,\r\n            newDirectorText,\r\n\r\n            searchAddress,\r\n            toggleEnterAddressManually,\r\n            resetCreatingBusinessProfile,\r\n            toggleExpandBusinessProfileFillingForInvestor,\r\n            uploadBusinessProfile\r\n        } = this.props;\r\n\r\n        // user has already uploaded their business profile\r\n        if (originalUser.BusinessProfile) {\r\n            return (\r\n                /** Business profile has been uploaded */\r\n                <FlexView column >\r\n                    <Typography variant=\"h6\" color=\"primary\">Business profile</Typography>\r\n                    <Row noGutters style={{ marginTop: 20 }} >\r\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ padding: 10, width: \"100%\" }} >\r\n                            <FlexView column hAlignContent=\"center\" >\r\n                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('logo')\r\n                                            && originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You haven't uploaded your company logo\"\r\n                                                        :\r\n                                                        \"This user hasn't uploaded company logo\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <FlexView width={256} height={256} >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        originalUser.BusinessProfile.logo[originalUser.BusinessProfile.logo.findIndex(logoItem => !logoItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{ width: \"100%\", maxHeight: 256, objectFit: \"contain\" }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    }\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20} >\r\n                                                <Button\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    variant=\"outlined\"\r\n                                                    color=\"primary\"\r\n                                                    fullWidth\r\n                                                    onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_MODE)}\r\n                                                    style={{ width: 256 }}\r\n                                                >Update logo\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                <FlexView column marginTop={80} marginBottom={20} width=\"100%\" hAlignContent=\"center\" style={{ paddingLeft: 25, paddingRight: 25 }} >\r\n                                    {\r\n                                        !originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                        || (\r\n                                            originalUser.BusinessProfile.hasOwnProperty('video')\r\n                                            && originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed')) === -1\r\n                                        )\r\n                                            ?\r\n                                            <Typography\r\n                                                align=\"center\"\r\n                                                color=\"textSecondary\"\r\n                                                variant=\"body1\">\r\n                                                {\r\n                                                    currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                        ?\r\n                                                        \"You have no introduction video\"\r\n                                                        :\r\n                                                        \"This user has no introduction video\"\r\n                                                }\r\n                                            </Typography>\r\n                                            :\r\n                                            <ReactPlayer\r\n                                                url={\r\n                                                    originalUser.BusinessProfile.video[\r\n                                                        originalUser.BusinessProfile.video.findIndex(videoItem => !videoItem.hasOwnProperty('removed'))\r\n                                                        ].url\r\n                                                }\r\n                                                width=\"100%\"\r\n                                                height=\"100%\"\r\n                                                controls={true}\r\n                                                playing={false}\r\n                                            />\r\n                                    }\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView marginTop={20}>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    size=\"small\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_MODE)}\r\n                                                    style={{ width: 256 }}\r\n                                                >Update introduction video\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                    }\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </Col>\r\n                        <Col xs={12} sm={12} md={6} lg={8} >\r\n                            {/** Student project name */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel><b>Student project name</b></FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyName\"\r\n                                        placeholder=\"Enter Student project name\"\r\n                                        value={userEdited.BusinessProfile.hasOwnProperty('companyName') ? userEdited.BusinessProfile.companyName : ''}\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0}\r\n                                    />\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {\r\n                                !clubAttributes\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        <FlexView>\r\n                                            <FormControl fullWidth >\r\n                                                <FormLabel><b>Sector</b></FormLabel>\r\n                                                <Select\r\n                                                    name=\"sector\"\r\n                                                    value={\r\n                                                        userEdited.BusinessProfile.hasOwnProperty('sector')\r\n                                                            ?\r\n                                                            userEdited.BusinessProfile.sector\r\n                                                            :\r\n                                                            ''\r\n                                                    }\r\n                                                    onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                                    input={<OutlinedInput/>}\r\n                                                    margin=\"dense\"\r\n                                                >\r\n\r\n                                                    {\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                    }\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </FlexView>\r\n                                    )\r\n                            }\r\n\r\n                            <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                            {/** Website */}\r\n                            <FlexView column>\r\n                                <FormControl>\r\n                                    <FormLabel>\r\n                                        <b>Company website</b>\r\n                                    </FormLabel>\r\n                                    <TextField\r\n                                        name=\"companyWebsite\"\r\n                                        placeholder=\"Enter company website\"\r\n                                        value={\r\n                                            userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                ?\r\n                                                userEdited.BusinessProfile.companyWebsite\r\n                                                :\r\n                                                ''\r\n                                        }\r\n                                        margin=\"dense\"\r\n                                        variant=\"outlined\"\r\n                                        fullWidth\r\n                                        onChange={this.handleEditUser(editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION)}\r\n                                        error={\r\n                                            (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                        }\r\n                                    />\r\n                                </FormControl>\r\n                                {\r\n                                    !userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length === 0\r\n                                    )\r\n                                    || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                        && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                        && utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                    )\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\" > Invalid website URL </Typography>\r\n                                }\r\n                            </FlexView>\r\n\r\n                            <FlexView hAlignContent=\"right\" marginTop={30} >\r\n                                <FlexView marginRight={20} >\r\n                                    <Button variant=\"outlined\" color=\"primary\" onClick={() => this.props.cancelEditingUser(editUserActions.RESET_BUSINESS_PROFILE)}>Cancel</Button>\r\n                                </FlexView>\r\n                                <FlexView>\r\n                                    <Button\r\n                                        variant=\"contained\"\r\n                                        color=\"primary\"\r\n                                        disabled={\r\n                                            (\r\n                                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                && !currentUser.superAdmin\r\n                                                && !allowEditing\r\n                                            )\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyName') && userEdited.BusinessProfile.companyName.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite') && userEdited.BusinessProfile.companyWebsite.trim().length === 0)\r\n                                            || (userEdited.BusinessProfile.hasOwnProperty('companyWebsite')\r\n                                                && userEdited.BusinessProfile.companyWebsite.trim().length > 0\r\n                                                && !utils.isValidWebURL(userEdited.BusinessProfile.companyWebsite)\r\n                                            )\r\n                                            || JSON.stringify(originalUser.BusinessProfile) === JSON.stringify(userEdited.BusinessProfile)\r\n                                        }\r\n                                        onClick={() => this.props.commitUserProfileChanges(editUserActions.COMMIT_BUSINESS_PROFILE_CHANGES)}\r\n                                    >\r\n                                        Save\r\n                                    </Button>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                            {\r\n                                currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                && !currentUser.superAdmin\r\n                                && !allowEditing\r\n                                    ?\r\n                                    <Typography variant=\"body1\" color=\"error\" align=\"right\" style={{ marginTop: 25 }}>This user is not a home member of your course. So, you cannot edit their profile.</Typography>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Col>\r\n                    </Row>\r\n                </FlexView>\r\n            );\r\n        }\r\n        // user has not uploaded their business profile yet\r\n        else {\r\n            // if the user is not a super user\r\n            if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\r\n                return (\r\n                    // user has not uploaded Business profile yet\r\n                    <FlexView column >\r\n                        <FlexView column >\r\n                            <Typography variant=\"h6\" color=\"primary\" style={{ marginBottom: 4 }} >Business profile</Typography>\r\n                            {\r\n                                originalUser.type === DB_CONST.TYPE_ISSUER\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Row noGutters >\r\n                                        <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}} >\r\n                                            <Button\r\n                                                fullWidth\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                color={\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ? \"primary\"\r\n                                                        : \"secondary\"\r\n                                                }\r\n                                                variant=\"outlined\"\r\n                                                size=\"medium\"\r\n                                                onClick={toggleExpandBusinessProfileFillingForInvestor}\r\n                                                style={{ marginTop: 25, marginBottom: 20 }}\r\n                                            >\r\n                                                {\r\n                                                    !createBusinessProfile.expandBusinessProfileFilling\r\n                                                        ?\r\n                                                        \"Create company profile (optional)\"\r\n                                                        :\r\n                                                        \"Cancel creating company profile\"\r\n                                                }\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                            }\r\n                        </FlexView>\r\n\r\n                        {\r\n                            originalUser.type === DB_CONST.TYPE_ISSUER\r\n                            || createBusinessProfile.expandBusinessProfileFilling\r\n                                ?\r\n                                // start filling in Business profile\r\n                                <FlexView column marginTop={20} >\r\n                                    {/** Student project name */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Student project name</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter Student project name\"\r\n                                                name=\"companyName\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyName}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Course sector */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Course sector</b>\r\n                                            </FormLabel>\r\n                                            <Select\r\n                                                name=\"sector\"\r\n                                                value={createBusinessProfile.BusinessProfile.sector}\r\n                                                input={<OutlinedInput/>}\r\n                                                margin=\"dense\"\r\n                                                onChange={ this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED) }\r\n                                            >\r\n                                                <MenuItem key={-1} value={'None'} >Choose course sector</MenuItem>\r\n                                                {\r\n                                                    clubAttributes\r\n                                                        ?\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                        :\r\n                                                        null\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Company Website */}\r\n                                    <FlexView column >\r\n                                        <FormControl required >\r\n                                            <FormLabel>\r\n                                                <b>Project website</b>\r\n                                            </FormLabel>\r\n                                            <TextField\r\n                                                placeholder=\"Enter company website\"\r\n                                                name=\"companyWebsite\"\r\n                                                value={createBusinessProfile.BusinessProfile.companyWebsite}\r\n                                                fullWidth\r\n                                                variant=\"outlined\"\r\n                                                margin=\"dense\"\r\n                                                onChange={\r\n                                                    this.handleCreateBusinessProfileTextChanged(createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED)\r\n                                                }\r\n                                            />\r\n                                            {\r\n                                                createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                                                || utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" >Invalid website URL</Typography>\r\n                                            }\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    <Divider style={{ marginTop: 20, marginBottom: 20 }} />\r\n\r\n                                    {/** Upload logo and introduction video */}\r\n                                    <FlexView marginBottom={20} width=\"100%\" hAlignContent=\"center\" >\r\n                                        <Row style={{ width: \"100%\" }} >\r\n                                            {/** Upload logo */}\r\n                                            <Col xs={12} sm={12} md={6} lg={6} style={{ padding: 15 }} >\r\n                                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                                    <FlexView className={css(styles.upload_files_area_style)} onClick={() => this.props.toggleEditImageDialog(UPLOAD_LOGO_FIRST_TIME_MODE)} >\r\n                                                        <Typography variant=\"body2\" align=\"center\" >Upload course logo (optional)</Typography>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.logoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView width={270} height={270} marginTop={28} >\r\n                                                                <Image src={window.URL.createObjectURL(createBusinessProfile.logoToBeUploaded)} roundedCircle thumbnail style={{ maxHeight: 270, width: \"100%\", objectFit: \"scale-down\" }}/>\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n\r\n                                            {/** Upload introduction video */}\r\n                                            <Col xs={12} sm={12} md={6} lg={6} style={{ padding: 15 }} >\r\n                                                <FlexView column width=\"100%\" hAlignContent=\"center\" >\r\n                                                    <FlexView vAlignContent=\"center\" >\r\n                                                        <FlexView className={css(styles.upload_files_area_style)} onClick={() => this.props.toggleEditVideoDialog(UPLOAD_VIDEO_FIRST_TIME_MODE)} >\r\n                                                            <Typography variant=\"body2\" align=\"center\" >Upload introduction video (optional)</Typography>\r\n                                                        </FlexView>\r\n\r\n                                                        <OverlayTrigger\r\n                                                            trigger={['hover', 'focus']}\r\n                                                            placement=\"top\"\r\n                                                            flip\r\n                                                            overlay={\r\n                                                                <Tooltip id={`tooltip-top`} >Introduction video helps other members understand more about your business.</Tooltip>\r\n                                                            }>\r\n                                                            <InfoIcon\r\n                                                                fontSize=\"default\"\r\n                                                                style={{\r\n                                                                    marginLeft: 14,\r\n                                                                    color: colors.gray_600\r\n                                                                }}\r\n                                                            />\r\n                                                        </OverlayTrigger>\r\n                                                    </FlexView>\r\n                                                    {\r\n                                                        !createBusinessProfile.videoToBeUploaded\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            <FlexView marginTop={28} >\r\n                                                                <ReactPlayer\r\n                                                                    url={\r\n                                                                        typeof (createBusinessProfile.videoToBeUploaded) === \"string\"\r\n                                                                            ?\r\n                                                                            createBusinessProfile.videoToBeUploaded\r\n                                                                            :\r\n                                                                            window.URL.createObjectURL(createBusinessProfile.videoToBeUploaded)\r\n                                                                    }\r\n                                                                    controls={true}\r\n                                                                    playing={false}\r\n                                                                    width=\"100%\"\r\n                                                                    height=\"auto\"\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </FlexView>\r\n\r\n                                    <FlexView grow={1} hAlignContent=\"right\" marginTop={30} marginBottom={20} >\r\n                                        <FlexView marginRight={20} >\r\n                                            <Button variant=\"outlined\" color=\"primary\" onClick={resetCreatingBusinessProfile}>Cancel</Button>\r\n                                        </FlexView>\r\n                                        <FlexView>\r\n                                            <Button variant=\"contained\" color=\"primary\" onClick={uploadBusinessProfile} disabled={this.shouldUploadButtonBeDisabled()}>Save</Button>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                );\r\n            } else {\r\n                return (\r\n                    <FlexView column >\r\n                        <Typography variant=\"h6\" color=\"primary\" >Business profile</Typography>\r\n                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"center\" style={{ marginTop: 15 }} >Business profile has not been uploaded.</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Check if the user can upload business profile --> only allow upload when all the required information has been provided\r\n     *\r\n     * @returns {boolean}\r\n     */\r\n    shouldUploadButtonBeDisabled = () => {\r\n        const {\r\n            originalUser,\r\n            createBusinessProfile,\r\n        } = this.props;\r\n\r\n        // user is an issuer\r\n        if (originalUser.type === DB_CONST.TYPE_ISSUER) {\r\n            if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                    && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                )\r\n            ) {\r\n                return true;\r\n            }\r\n        }\r\n        // user is an investor\r\n        else if (originalUser.type === DB_CONST.TYPE_INVESTOR) {\r\n            if (createBusinessProfile.expandBusinessProfileFilling) {\r\n                if (createBusinessProfile.BusinessProfile.companyName.trim().length === 0\r\n                    || createBusinessProfile.BusinessProfile.directors.length === 0\r\n                    || createBusinessProfile.BusinessProfile.sector === 'None'\r\n                    || createBusinessProfile.BusinessProfile.companyWebsite.trim().length === 0\r\n                    || (createBusinessProfile.BusinessProfile.companyWebsite.trim().length > 0\r\n                        && !utils.isValidWebURL(createBusinessProfile.BusinessProfile.companyWebsite)\r\n                    )\r\n                ) {\r\n                    return true;\r\n                }\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n\r\nconst styles = StyleSheet.create({\r\n    upload_files_area_style: {\r\n        padding: 12,\r\n        textAlign: 'center',\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.blue_gray_50,\r\n            cursor: 'pointer'\r\n        }\r\n    },\r\n\r\n    address_list: {\r\n        backgroundColor: colors.blue_gray_50,\r\n        borderRadius: 3,\r\n        padding: 4,\r\n        width: \"90%\",\r\n\r\n        position: 'relative',\r\n        overflow: 'auto',\r\n        maxHeight: 300\r\n    },\r\n\r\n    enter_address_manually: {\r\n        marginTop: 6,\r\n        ':hover': {\r\n            color: colors.blue_gray_600,\r\n            cursor: 'pointer',\r\n            textDecoration: 'underline'\r\n        }\r\n    }\r\n});","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport firebase from '../../firebase/firebaseApp';\n\nexport const TOGGLE_NOTIFICATIONS = 'TOGGLE_NOTIFICATIONS';\nexport const CALLED_LAST = 'CALLED_LAST';\nexport const CALLED_BEFORE_LAST = 'CALLED_BEFORE_LAST';\nexport const toggleNotifications = (event) => {\n    return (dispatch, getState) => {\n        const notificationsAnchorEl = getState().manageNotifications.notificationsAnchorEl;\n        const notificationBellRef = getState().manageNotifications.notificationBellRef;\n\n        const openPanel = () => {\n            dispatch({\n                type: TOGGLE_NOTIFICATIONS,\n                notificationsAnchorEl: notificationBellRef\n            });\n        }\n\n        const closePanel = () => {\n            dispatch({\n                type: TOGGLE_NOTIFICATIONS,\n                notificationsAnchorEl: null\n            });\n        }\n\n        if (!notificationsAnchorEl) {\n            openPanel();\n        }\n        else {\n            closePanel();\n        }\n    }\n};\n\nexport const NOTIFICATIONBELL_REF = 'NOTIFICATIONBELL_REF';\nexport const notificationRefUpdated = ref => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: NOTIFICATIONBELL_REF,\n            notificationBellRef: ref\n        });\n    }\n};\n\nexport const LOADING_NOTIFICATIONS = 'LOADING_NOTIFICATIONS';\nexport const FINISHED_LOADING_NOTIFICATIONS = 'FINISHED_LOADING_NOTIFICATIONS';\nexport const loadNotifications = () => {\n    return (dispatch, getState) => {\n        const user = getState().auth.user;\n\n        if (!user) {\n            return;\n        }\n\n        dispatch({\n            type: LOADING_NOTIFICATIONS\n        });\n\n        realtimeDBUtils\n            .loadNotifications(user.hasOwnProperty('anid') ? user.anid : user.id)\n            .then(notifications => {\n                dispatch({\n                    type: FINISHED_LOADING_NOTIFICATIONS,\n                    notifications\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: FINISHED_LOADING_NOTIFICATIONS,\n                    notifications: []\n                });\n            });\n    }\n};\n\nexport const deleteANotification = notification => {\n    return (dispatch, getState) => {\n        firebase\n            .database()\n            .ref(DB_CONST.NOTIFICATIONS_CHILD)\n            .child(notification.id)\n            .remove()\n            .then(() => {\n                dispatch({\n                    type: TOGGLE_NOTIFICATIONS,\n                    notificationsAnchorEl: null\n                });\n            });\n    }\n};\n\nexport const deleteAllNotifications = () => {\n    return (dispatch, getState) => {\n        const user = getState().auth.user;\n\n        if (!user) {\n            return;\n        }\n\n        realtimeDBUtils\n            .deleteAllNotifications(user.hasOwnProperty('anid') ? user.anid : user.id);\n    }\n};\n\n// Listener ------------------------------------------------------------------------------------------------------------\n\nlet notificationsListener = null;\n\nexport const NOTIFICATIONS_LIST_CHANGED = 'NOTIFICATIONS_LIST_CHANGED';\nexport const startListeningForNotificationsChanged = () => {\n    return (dispatch, getState) => {\n        if (!notificationsListener) {\n\n            const user = getState().auth.user;\n\n            if (!user) {\n                return;\n            }\n\n            notificationsListener = firebase\n                .database()\n                .ref(DB_CONST.NOTIFICATIONS_CHILD)\n                .orderByChild('userID')\n                .equalTo(user.hasOwnProperty('anid') ? user.anid : user.id);\n\n            notificationsListener\n                .on('child_added', snapshot => {\n                    let notification = snapshot.val();\n\n                    let notifications = [...getState().manageNotifications.notifications];\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\n                    if (notificationIndex === -1) {\n                        dispatch({\n                            type: NOTIFICATIONS_LIST_CHANGED,\n                            notifications: [...notifications, notification]\n                        });\n                    }\n                });\n\n            notificationsListener\n                .on('child_removed', snapshot => {\n                    let notification = snapshot.val();\n\n                    let notifications = [...getState().manageNotifications.notifications];\n                    let notificationIndex = notifications.findIndex(existingNotification => existingNotification.id === notification.id);\n\n                    if (notificationIndex !== -1) {\n                        notifications.splice(notificationIndex, 1);\n                        dispatch({\n                            type: NOTIFICATIONS_LIST_CHANGED,\n                            notifications\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForNotificationsChanged = () => {\n    return (dispatch, getState) => {\n        if (notificationsListener) {\n            notificationsListener.off('child_added');\n            notificationsListener.off('child_removed');\n            notificationsListener = null;\n        }\n    }\n};","import React, {Component} from 'react';\nimport HashLoader from 'react-spinners/HashLoader';\nimport {\n    Fade,\n    List,\n    ListItem,\n    Paper,\n    Popper,\n    Typography,\n    Divider,\n    IconButton,\n    Button,\n    ClickAwayListener\n} from '@material-ui/core';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\nimport {\n    Col,\n    Container,\n    Row\n} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport {css, StyleSheet} from 'aphrodite';\nimport {NavLink} from 'react-router-dom';\n\nimport {connect} from 'react-redux';\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\n\nimport * as colors from '../../values/colors';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\nimport * as utils from '../../utils/utils';\nimport * as ROUTES from '../../router/routes';\n\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\n        notificationBellRef: state.manageNotifications.notificationBellRef,\n        notifications: state.manageNotifications.notifications,\n        loadingNotifications: state.manageNotifications.loadingNotifications,\n        notificationsLoaded: state.manageNotifications.notificationsLoaded\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\n        loadNotifications: () => dispatch(notificationsActions.loadNotifications()),\n        deleteANotification: (notification) => dispatch(notificationsActions.deleteANotification(notification)),\n        deleteAllNotifications: () => dispatch(notificationsActions.deleteAllNotifications()),\n\n        startListeningForNotificationsChanged: () => dispatch(notificationsActions.startListeningForNotificationsChanged()),\n        stopListeningForNotificationsChanged: () => dispatch(notificationsActions.stopListeningForNotificationsChanged())\n    }\n};\n\nclass NotificationsBox extends Component {\n    constructor(props) {\n        super(props);\n\n        this.wrapperRef = React.createRef();\n        this.handleClickOutside = this.handleClickOutside.bind(this);\n    }\n\n    componentDidMount() {\n        const {\n            loadNotifications\n        } = this.props;\n\n        loadNotifications();\n\n        document.addEventListener('mouseup', this.handleClickOutside);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            loadingNotifications,\n            notificationsLoaded,\n\n            startListeningForNotificationsChanged\n        } = this.props;\n\n        // notifications have been loaded\n        if (!loadingNotifications && notificationsLoaded) {\n            startListeningForNotificationsChanged();\n        }\n\n    }\n\n    componentWillUnmount() {\n        const {\n            stopListeningForNotificationsChanged\n        } = this.props;\n\n        stopListeningForNotificationsChanged();\n\n        document.removeEventListener('mouseup', this.handleClickOutside);\n    }\n\n    handleClickOutside(event) {\n        const {\n            toggleNotifications,\n            notificationBellRef,\n        } = this.props;\n\n\n        if (this.wrapperRef && !this.wrapperRef.current.contains(event.target) && !notificationBellRef.contains(event.target) ) {\n            toggleNotifications(event);\n        }\n    }\n\n    render() {\n        const {\n            groupUserName,\n            groupProperties,\n            groupPropertiesLoaded,\n\n            notificationsAnchorEl,\n            notifications,\n            notificationsLoaded,\n\n            toggleNotifications,\n            deleteANotification,\n            deleteAllNotifications\n\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return null;\n        }\n\n        return (\n            <div ref={this.wrapperRef}>\n            <Popper\n                open={Boolean(notificationsAnchorEl)}\n                anchorEl={notificationsAnchorEl}\n                placement=\"bottom-start\"\n                disablePortal={false}\n                transition\n                modifiers={{\n                    flip: {\n                        enabled: true,\n                    },\n                    preventOverflow: {\n                        enabled: true,\n                        boundariesElement: 'scrollParent'\n                    }\n                }}\n                style={{\n                    // this zIndex is to ensure the notification box is on top of all other UI elements\n                    zIndex: 100\n                }}\n            >\n                {({TransitionProps}) => (\n                    <Fade {...TransitionProps} timeout={350} >\n                        <Paper elevation={4} square >\n                            <Container fluid style={{ padding: 0, maxWidth: 600 }} >\n                                <Row noGutters >\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ paddingLeft: 15, paddingRight: 15, paddingTop: 6, paddingBottom: 6, backgroundColor: colors.kick_starter_background_color_1 }} >\n                                        <Row noGutters >\n                                            <Col xs={10} sm={10} md={10} lg={10} >\n                                                <FlexView height=\"100%\" vAlignContent=\"center\" >\n                                                    <Typography variant=\"body1\">Notifications</Typography>\n                                                </FlexView>\n                                            </Col>\n                                            <Col xs={2} sm={2} md={2} lg={2} >\n                                                <FlexView hAlignContent=\"right\" >\n                                                    <IconButton style={{ width: 44, height: 44 }} onClick={toggleNotifications} >\n                                                        <CloseIcon fontSize=\"small\" />\n                                                    </IconButton>\n                                                </FlexView>\n                                            </Col>\n                                        </Row>\n                                    </Col>\n\n                                    <Col xs={12} sm={12} md={12} lg={12} >\n                                        <Divider/>\n                                    </Col>\n\n                                    {\n                                        notifications.length === 0\n                                            ?\n                                            null\n                                            :\n                                            <Col xs={12} sm={12} md={12} lg={12} style={{ paddingTop: 5, paddingBottom: 5, paddingRight: 18 }} >\n                                                <FlexView hAlignContent=\"right\" >\n                                                    <Button variant=\"text\" className={css(sharedStyles.no_text_transform, styles.clear_all_text)} size=\"medium\" onClick={deleteAllNotifications} >\n                                                        <ClearAllIcon style={{ marginRight: 6 }} />\n                                                        Clear all\n                                                    </Button>\n                                                </FlexView>\n                                            </Col>\n                                    }\n\n                                    {\n                                        notifications.length === 0\n                                            ?\n                                            null\n                                            :\n                                            <Col xs={12} sm={12} md={12} lg={12} >\n                                                <Divider/>\n                                            </Col>\n                                    }\n\n                                    <Col xs={12} sm={12} md={12} lg={12} style={{ minHeight: notifications.length === 0 ? 300 : \"None\", maxHeight: 500, overflowY: \"auto\" }} >\n                                        {\n                                            !notificationsLoaded\n                                                ?\n                                                <FlexView column height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\n                                                    <HashLoader\n                                                        color={\n                                                            !groupProperties\n                                                                ?\n                                                                colors.primaryColor\n                                                                :\n                                                                groupProperties.settings.primaryColor\n                                                        }\n                                                    />\n                                                </FlexView>\n                                                :\n                                                notifications.length === 0\n                                                    ?\n                                                    <FlexView column height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\n                                                        <NotificationsIcon className={css(styles.notifications_placeholder_icon)} />\n                                                        <Typography variant=\"body1\">Your notifications live here</Typography>\n                                                    </FlexView>\n                                                    :\n                                                    <List component=\"ul\" style={{ padding: 0 }} >\n                                                        {\n                                                            notifications\n                                                                .sort((notification1, notification2) => {\n                                                                    return (notification2.date - notification1.date)\n                                                                })\n                                                                .map(notification => (\n                                                                    <ListItem\n                                                                        component=\"li\"\n                                                                        key={notification.id}\n                                                                        divider\n                                                                        className={css(styles.notification_item)}\n                                                                    >\n                                                                        <Row noGutters style={{ width: \"100%\", paddingTop: 13, paddingBottom: 13 }} >\n                                                                            <Col xs={10} sm={10} md={11} lg={11} style={{ paddingRight: 10 }} >\n                                                                                <NavLink\n                                                                                    to={\n                                                                                        groupUserName\n                                                                                            ?\n                                                                                            `${ROUTES.GROUP_PATH.replace(\":groupUserName\", groupUserName)}${notification.action}`\n                                                                                            :\n                                                                                            notification.action\n                                                                                    }\n                                                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\n                                                                                    onClick={() => deleteANotification(notification)}\n                                                                                >\n                                                                                    <FlexView vAlignContent=\"center\" >\n                                                                                        <NotificationsIcon className={css(styles.notification_item_icon)} />\n                                                                                        <FlexView column marginLeft={14} >\n                                                                                            <Typography variant=\"body1\" className={css(styles.black_text)}>{notification.title}</Typography>\n                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 4 }}>{notification.message}</Typography>\n                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" style={{marginTop: 10}}><u>Sent:{utils.dateTimeInReadableFormat(notification.date)}</u> </Typography>\n                                                                                        </FlexView>\n                                                                                    </FlexView>\n                                                                                </NavLink>\n                                                                            </Col>\n                                                                            <Col xs={2} sm={2} md={1} lg={1} style={{ paddingLeft: 8, paddingRight: 8 }} >\n                                                                                <FlexView width=\"100%\" height=\"100%\" vAlignContent=\"center\" hAlignContent=\"center\" >\n                                                                                    <IconButton onClick={() => deleteANotification(notification)} >\n                                                                                        <DeleteIcon fontSize=\"small\" />\n                                                                                    </IconButton>\n                                                                                </FlexView>\n                                                                            </Col>\n                                                                        </Row>\n                                                                    </ListItem>\n                                                                ))\n                                                        }\n                                                    </List>\n                                        }\n                                    </Col>\n                                </Row>\n                            </Container>\n                        </Paper>\n                    </Fade>\n                )}\n            </Popper>\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NotificationsBox);\n\nconst styles = StyleSheet.create({\n\n    black_text: {\n        color: colors.black\n    },\n\n    notifications_placeholder_icon: {\n        width: 70,\n        height: \"auto\",\n        color: colors.gray_300,\n        marginBottom: 10\n    },\n\n    notification_item_icon: {\n        width: 36,\n        height: \"auto\",\n        color: colors.gray_300\n    },\n\n    clear_all_text: {\n        color: colors.blue_gray_600\n    },\n\n    notification_item: {\n        paddingLeft: 10,\n        paddingRight: 10,\n        paddingTop: 0,\n        paddingBottom: 0,\n\n        ':hover': {\n            cursor: 'pointer',\n            backgroundColor: colors.gray_200\n        }\n    }\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport GroupProperties from \"../../models/group_properties\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\nimport Admin, {isAdmin} from \"../../models/admin\";\nimport React from \"react\";\n\nexport enum ExploreGroupsEvents {\n    FetchingGroups = \"ExploreGroupsEvents.FetchingGroups\",\n    CompleteFetchingGroups = \"ExploreGroupsEvents.CompleteFetchingGroups\",\n    FilterChanged = \"ExploreGroupsEvents.FilterChanged\",\n    FilterGroupsByName = \"ExploreGroupsEvents.FilterGroupsByName\",\n    CancelFilterGroupsByName = \"ExploreGroupsEvents.CancelFilterGroupsByName\",\n    FilterGroupsByGroupFilter = \"ExploreGroupsEvents.FilterGroupsByGroupFilter\",\n    PaginationChanged = \"ExploreGroupsEvents.PaginationChanged\",\n    SendingAccessRequest = \"ExploreGroupsEvents.SendingAccessRequest\",\n    CompleteSendingAccessRequest = \"ExploreGroupsEvents.CompleteSendingAccessRequest\",\n    RemovingAccessRequest = \"ExploreGroupsEvents.RemovingAccessRequest\",\n    CompleteRemovingAccessRequest = \"ExploreGroupsEvents.CompleteRemovingAccessRequest\"\n}\n\nexport interface ExploreGroupsAction extends Action {\n\n}\n\nexport interface CompleteFetchingGroupsAction extends ExploreGroupsAction {\n    groups: GroupProperties[];\n    accessRequestInstances?: AccessRequestInstance[];\n    error?: string;\n}\n\nexport interface FilterChangedAction extends ExploreGroupsAction {\n    name: string;\n    value: any;\n}\n\nexport interface FilterGroupsByGroupFilterAction extends ExploreGroupsAction {\n    groupsFiltered: GroupProperties[];\n}\n\nexport interface PaginationChangedAction extends ExploreGroupsAction {\n    page: number;\n}\n\nexport interface SendingAccessRequestAction extends ExploreGroupsAction {\n    groupID: string;\n}\n\nexport interface CompleteSendingAccessRequestAction extends ExploreGroupsAction {\n    error?: string;\n    updatedAccessRequestInstances?: AccessRequestInstance[]\n}\n\nexport interface RemovingAccessRequestAction extends ExploreGroupsAction {\n    groupID: string;\n}\n\nexport interface CompleteRemovingAccessRequestAction extends ExploreGroupsAction {\n    error?: string;\n    updatedAccessRequestInstances?: AccessRequestInstance[]\n}\n\nexport const fetchGroups: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            accessRequestsInstances,\n            nameFilter\n        } = getState().ExploreGroupsLocalState;\n\n        dispatch({\n            type: ExploreGroupsEvents.FetchingGroups\n        });\n\n        const currentUser = getState().AuthenticationState.currentUser;\n\n        const completeAction: CompleteFetchingGroupsAction = {\n            type: ExploreGroupsEvents.CompleteFetchingGroups,\n            groups: []\n        };\n\n        if (!currentUser) {\n            completeAction.error = \"Unauthenticated user.\";\n            return dispatch(completeAction);\n        }\n\n        try {\n            const groupsResponse = await new GroupRepository().fetchGroups(\n                nameFilter.trim().length === 0 ? undefined : {name: nameFilter}\n            );\n            completeAction.groups = groupsResponse.data;\n\n            const admin: Admin | null = isAdmin(currentUser);\n            if (!admin || (admin && !admin.superAdmin)) {\n                // user is an issuer, investor, or group admin\n                // and access requests have not been fetched\n                if (!accessRequestsInstances) {\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\n                        user: currentUser.id,\n                        orderBy: \"user\"\n                    });\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\n                }\n            }\n            dispatch(completeAction);\n            return dispatch(filterGroupsByGroupFilter());\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const filterChanged: ActionCreator<any> = (event: any) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const name = event.target.name;\n        const value = event.target.value;\n\n        const action: FilterChangedAction = {\n            type: ExploreGroupsEvents.FilterChanged,\n            name: name,\n            value: value\n        }\n\n        dispatch(action);\n\n        if (name === \"groupFilter\") {\n            dispatch(filterGroupsByGroupFilter());\n        }\n    }\n}\n\nexport const filterGroupsByName: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        dispatch({\n            type: ExploreGroupsEvents.FilterGroupsByName\n        });\n        return dispatch(fetchGroups());\n    }\n}\n\nexport const cancelFilteringGroupsByName: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        dispatch({\n            type: ExploreGroupsEvents.CancelFilterGroupsByName\n        });\n        return dispatch(fetchGroups());\n    }\n}\n\nconst filterGroupsByGroupFilter: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            groupFilter,\n            accessRequestsInstances,\n            groups\n        } = getState().ExploreGroupsLocalState;\n\n        const AuthenticationState = getState().AuthenticationState;\n        const currentUser = AuthenticationState.currentUser;\n\n        if (!currentUser) {\n            return;\n        }\n\n        const groupsFiltered: GroupProperties[] = [];\n\n        groups.map(group => {\n            let satisfiedFilter = false;\n            switch (groupFilter) {\n                case \"all\":\n                    const admin: Admin | null = isAdmin(currentUser);\n                    if (admin && admin.superAdmin) {\n                        satisfiedFilter = true;\n                    } else {\n                        satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\n                            groupOfMembership => groupOfMembership.group.anid === group.anid) === -1\n                            && accessRequestsInstances !== undefined\n                            && accessRequestsInstances.findIndex(\n                                accessRequestInstance => accessRequestInstance.group.anid === group.anid) === -1;\n                    }\n                    break;\n                case \"groupsOfMembership\":\n                    satisfiedFilter = AuthenticationState.groupsOfMembership.findIndex(\n                        groupOfMembership => groupOfMembership.group.anid === group.anid) !== -1;\n                    break;\n                case \"groupsOfPendingRequest\":\n                    satisfiedFilter = accessRequestsInstances !== undefined\n                        && accessRequestsInstances.findIndex(\n                            accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\n                    break;\n                default:\n                    break;\n            }\n            if (satisfiedFilter) {\n                groupsFiltered.push(group);\n            }\n            return null;\n        });\n\n        const action: FilterGroupsByGroupFilterAction = {\n            type: ExploreGroupsEvents.FilterGroupsByGroupFilter,\n            groupsFiltered: groupsFiltered\n        }\n        return dispatch(action);\n    }\n}\n\nexport const paginationChanged: ActionCreator<any> = (event: React.ChangeEvent<unknown>, page: number) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: PaginationChangedAction = {\n            type: ExploreGroupsEvents.PaginationChanged,\n            page: page\n        }\n        return dispatch(action);\n    }\n}\n\nexport const sendAccessRequest: ActionCreator<any> = (groupID: string) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const currentUser = getState().AuthenticationState.currentUser;\n        if (!currentUser) {\n            return;\n        }\n\n        const sendingAction: SendingAccessRequestAction = {\n            type: ExploreGroupsEvents.SendingAccessRequest,\n            groupID\n        };\n        dispatch(sendingAction);\n\n        const completeAction: CompleteSendingAccessRequestAction = {\n            type: ExploreGroupsEvents.CompleteSendingAccessRequest\n        };\n\n        try {\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, groupID);\n            const accessRequestInstance: AccessRequestInstance = response.data;\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\n            if (currentAccessRequestInstances !== undefined) {\n                completeAction.updatedAccessRequestInstances = [\n                    ...currentAccessRequestInstances,\n                    accessRequestInstance\n                ];\n            } else {\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\n            }\n            dispatch(completeAction);\n            return dispatch(filterGroupsByGroupFilter());\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const removeAccessRequest: ActionCreator<any> = (groupID: string) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const currentUser = getState().AuthenticationState.currentUser;\n        if (!currentUser) {\n            return;\n        }\n\n        const removingAction: RemovingAccessRequestAction = {\n            type: ExploreGroupsEvents.RemovingAccessRequest,\n            groupID\n        };\n        dispatch(removingAction);\n\n        const completeAction: CompleteRemovingAccessRequestAction = {\n            type: ExploreGroupsEvents.CompleteRemovingAccessRequest\n        };\n\n        try {\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\n            if (!currentAccessRequestInstances) {\n                return dispatch(completeAction);\n            }\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\n                accessRequestInstance => accessRequestInstance.group.anid === groupID && accessRequestInstance.user.id === currentUser.id);\n            if (accessRequestIndex === -1) {\n                return dispatch(completeAction);\n            }\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\n\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\n            dispatch(completeAction);\n            return dispatch(filterGroupsByGroupFilter());\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}","import Error from \"../../models/error\";\nimport {\n    CompleteFetchingOffersAction,\n    ExploreOffersAction,\n    ExploreOffersEvents,\n    FilterChangedAction,\n    PaginationChangedAction\n} from \"./ExploreOffersActions\";\nimport {ProjectInstance} from \"../../models/project\";\nimport GroupProperties from \"../../models/group_properties\";\nimport {FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\n\nexport const maxOffersPerPage: number = 12;\n\nexport interface ExploreOffersState {\n    offerInstances: ProjectInstance[];\n    fetchingOffers: boolean;\n    offersFetched: boolean;\n\n    groups: GroupProperties[];\n\n    searchFilter: string;\n    visibilityFilter: number | \"all\";\n    sectorFilter: string | \"all\";\n    phaseFilter: FetchProjectsPhaseOptions;\n    groupFilter: string | \"all\";\n    currentPage: number;\n\n    error?: Error;\n}\n\nconst initialState: ExploreOffersState = {\n    offerInstances: [],\n    fetchingOffers: false,\n    offersFetched: false,\n    groups: [],\n    searchFilter: \"\",\n    visibilityFilter: \"all\",\n    sectorFilter: \"all\",\n    phaseFilter: FetchProjectsPhaseOptions.Live,\n    groupFilter: \"all\",\n    currentPage: 1\n}\n\nexport const hasNotFetchedOffers = (state: ExploreOffersState) => {\n    return !state.fetchingOffers && !state.offersFetched;\n}\n\nexport const isFetchingOffers = (state: ExploreOffersState) => {\n    return state.fetchingOffers;\n}\n\nexport const successfullyFetchedOffers = (state: ExploreOffersState) => {\n    return state.offersFetched && !state.fetchingOffers && state.error === undefined;\n}\n\nexport const hasOffersForCurrentFilters = (state: ExploreOffersState) => {\n    return successfullyFetchedOffers(state) && state.offerInstances.length > 0;\n}\n\nexport const isSearchFilterActive = (state: ExploreOffersState) =>  {\n    return state.searchFilter.trim().length > 0;\n}\n\nexport const calculatePaginationPages = (state: ExploreOffersState) => {\n    if (state.offerInstances.length <= maxOffersPerPage) {\n        return 1;\n    }\n    if (state.offerInstances.length % maxOffersPerPage === 0) {\n        return (state.offerInstances.length / maxOffersPerPage) | 0;\n    }\n    return ((state.offerInstances.length / maxOffersPerPage) | 0) + 1;\n}\n\nexport const calculatePaginationIndices = (state: ExploreOffersState) => {\n    let startIndex, endIndex;\n    startIndex = (state.currentPage - 1) * maxOffersPerPage;\n    endIndex = startIndex + maxOffersPerPage - 1;\n    if (endIndex > state.offerInstances.length - 1) {\n        endIndex = state.offerInstances.length - 1;\n    }\n    return {\n        startIndex,\n        endIndex\n    };\n}\n\nconst exploreOffersReducer = (state: ExploreOffersState = initialState, action: ExploreOffersAction) => {\n    //console.log(\"Current state:\", state);\n    //console.log(\"Received action:\", action);\n    switch (action.type) {\n        case ExploreOffersEvents.FetchingOffers:\n            return {\n                ...state,\n                offerInstances: [],\n                fetchingOffers: true,\n                offersFetched: false,\n                error: undefined\n            }\n        case ExploreOffersEvents.CompleteFetchingOffers:\n            const completeFetchingOffersAction: CompleteFetchingOffersAction = action as CompleteFetchingOffersAction;\n            return {\n                ...state,\n                offerInstances: [...completeFetchingOffersAction.offerInstances],\n                fetchingOffers: false,\n                offersFetched: true,\n                currentPage: 1,\n                error: completeFetchingOffersAction.error !== undefined\n                    ? {detail: completeFetchingOffersAction.error} : state.error\n            }\n        case ExploreOffersEvents.FilterChanged:\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\n            return {\n                ...state,\n                [filterChangedAction.name]: filterChangedAction.value,\n                offerInstances: [],\n                fetchingOffers: false,\n                offersFetched: false,\n                currentPage: 1,\n                error: undefined\n            };\n        case ExploreOffersEvents.ClearSearchFilter:\n            return {\n                ...state,\n                searchFilter: \"\"\n            }\n        case ExploreOffersEvents.PaginationChanged:\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\n            return {\n                ...state,\n                currentPage: paginationChangedAction.page\n            }\n        default:\n            return state;\n    }\n}\n\nexport default exploreOffersReducer;","/**\n * Group properties interface\n */\nexport default interface GroupProperties {\n    anid: string;\n    dateAdded: number;\n    description: string;\n    displayName: string;\n    displayNameLower: string;\n    groupUserName: string;\n    isInvestWest: boolean;\n    status: number;\n    website?: string;\n    logoWithText?: GroupLogo[];\n    plainLogo: GroupLogo[];\n    settings: GroupSettings;\n}\n\n/**\n * This should always be returned when a group is queried by an unauthenticated user\n */\nexport interface PublicGroupProperties {\n    description: string;\n    displayName: string;\n    groupUserName: string;\n}\n\n/**\n * Group settings interface\n */\nexport interface GroupSettings {\n    primaryColor: string;\n    secondaryColor: string;\n    projectVisibility: number;\n    makeInvestorsContactDetailsVisibleToIssuers: boolean;\n    PledgeFAQs?: GroupPledgeFAQ[];\n}\n\n/**\n * Group logo interface\n */\nexport interface GroupLogo {\n    storageID: number;\n    url: string;\n    removed?: boolean;\n}\n\n/**\n * Group pledge faq interface\n */\nexport interface GroupPledgeFAQ {\n    id: string;\n    question: string;\n    answer: string;\n}\n\nexport const getGroupLogo = (group: GroupProperties | null) => {\n    if (!group) {\n        return null;\n    }\n    if (group.plainLogo.length === 0) {\n        return null;\n    }\n    return group.plainLogo[group.plainLogo.findIndex(logo => logo.removed === undefined)].url;\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    getPitchCover,\r\n    isImagePitchCover,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectLive,\r\n    isProjectPrivate,\r\n    isProjectPublic,\r\n    isProjectRestricted,\r\n    PitchCover,\r\n    ProjectInstance,\r\n    shouldHideProjectInformationFromUser\r\n} from \"../../models/project\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport '../../shared-js-css-styles/sharedStyles.scss';\r\nimport Routes from \"../../router/routes\";\r\nimport {Box, colors, Divider, Typography} from \"@material-ui/core\";\r\nimport {Col, Container, Image, OverlayTrigger, Row, Tooltip} from \"react-bootstrap\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport User from \"../../models/user\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport RestrictedIcon from \"@material-ui/icons/VpnLock\";\r\nimport PrivateIcon from \"@material-ui/icons/LockOutlined\";\r\n\r\nconst CoverMaxHeight = 180;\r\n\r\ninterface OfferItemProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    offerInstance: ProjectInstance;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass OfferItem extends Component<OfferItemProps, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            offerInstance\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n\r\n\r\n        const pitchCover: PitchCover | null = getPitchCover(offerInstance.projectDetail);\r\n\r\n\r\n        return <CustomLink\r\n            url={Routes.constructProjectDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, offerInstance.projectDetail.id)}\r\n            color=\"none\"\r\n            activeColor=\"none\"\r\n            activeUnderline={false}\r\n            component=\"nav-link\"\r\n            childComponent={\r\n                <Box border={`1px solid ${colors.grey[\"300\"]}`} >\r\n                    <Container fluid style={{ padding: 0 }} >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Box\r\n                                    className=\"offer-image\"\r\n                                    height={`${CoverMaxHeight}px`}\r\n                                    width=\"100%\"\r\n                                    bgcolor={appColors.dark_green_last_lightness_94_hue_angle_minus_17_color_saturation_100}\r\n                                >\r\n                                    {\r\n                                        shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                            ? <Box display=\"flex\" width=\"100%\" height={CoverMaxHeight} justifyContent=\"center\" >\r\n                                                <Image src={getGroupLogo(offerInstance.group) ?? \"\"} width=\"auto\" height={CoverMaxHeight} style={{ padding: 20, objectFit: \"scale-down\" }} />\r\n                                            </Box>\r\n                                            : !pitchCover\r\n                                            ? null\r\n                                            : isImagePitchCover(pitchCover)\r\n                                                ? <Image src={pitchCover.url} width=\"100%\" height={CoverMaxHeight} style={{ objectFit: \"contain\" }} />\r\n                                                : <ReactPlayer url={pitchCover.url} light={false} width=\"100%\" height={CoverMaxHeight} playing={false} controls={false} />\r\n                                    }\r\n\r\n                                    {/** Course logo to be displayed at the top-right corner */}\r\n                                    <Image\r\n                                        src={getGroupLogo(offerInstance.group) ?? \"\"}\r\n                                        roundedCircle\r\n                                        height={46}\r\n                                        width={46}\r\n                                        style={{\r\n                                            position: \"absolute\",\r\n                                            right: 0,\r\n                                            top: 0,\r\n                                            zIndex: 1,\r\n                                            padding: \"5px\",\r\n                                            marginTop: \"5px\",\r\n                                            marginRight: \"5px\",\r\n                                            backgroundColor: colors.grey[\"300\"],\r\n                                            objectFit: \"contain\"\r\n                                        }}\r\n                                    />\r\n                                </Box>\r\n\r\n                                <Divider/>\r\n\r\n                                <Box padding=\"14px\" className=\"project-title\" >\r\n                                    {/** Project basic information */}\r\n                                    <Box>\r\n                                        {/** Project title */}\r\n                                        <Box marginY=\"6px\" >\r\n                                            <Typography noWrap variant=\"h6\" align=\"left\" >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? \"Members only offer\"\r\n                                                        : offerInstance.projectDetail.projectName\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n\r\n\r\n                                        {/** Sector / Description */}\r\n                                        <Box color={colors.grey[\"700\"]}>\r\n                                            <title className=\"projectInfo\">\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `in ${offerInstance.projectDetail.sector} sector`\r\n                                                        : offerInstance.projectDetail.description\r\n                                                }\r\n                                            </title>\r\n                                        </Box>\r\n\r\n                                        {/** By issuer */}\r\n                                        <Box color=\"black\" marginTop=\"8px\" className=\"issuer-offer\" >\r\n                                            <Typography variant=\"body2\" noWrap >\r\n                                                {\r\n                                                    shouldHideProjectInformationFromUser(AuthenticationState.currentUser, AuthenticationState.groupsOfMembership, offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : isProjectCreatedByGroupAdmin(offerInstance.projectDetail)\r\n                                                        ? `by ${offerInstance.group.displayName}`\r\n                                                        : `by ${(offerInstance.issuer as User).firstName} ${(offerInstance.issuer as User).lastName}`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n\r\n\r\n                                    {/** Divider */}\r\n                                    <Box bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} className=\"offer-divier\" />\r\n\r\n                                    {/** Project phase information */}\r\n                                    <Box className=\"phase-offer\">\r\n                                        <Typography variant=\"body2\" color=\"primary\" align=\"left\" >\r\n                                            {\r\n                                                offerInstance.projectDetail.Pitch.fundRequired\r\n                                                    ? `${Number(offerInstance.projectDetail.Pitch.fundRequired.toFixed(2)).toLocaleString()} goal`\r\n                                                    : \"\"\r\n                                            }\r\n                                        </Typography>\r\n\r\n                                        <Box marginTop=\"5px\" >\r\n                                            <Typography variant=\"body2\" align=\"left\" color=\"textSecondary\" >\r\n                                                {\r\n                                                    !isProjectLive(offerInstance.projectDetail)\r\n                                                        ? \"Offer expired\"\r\n                                                        : `${utils.dateDiff(offerInstance.projectDetail.Pitch.expiredDate)} days to go`\r\n                                                }\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </Box>\r\n\r\n\r\n                                    {/** Project visibility information */}\r\n                                    <Box className=\"badges\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} >\r\n                                        <Box className=\"public-offer\">\r\n                                            <OverlayTrigger\r\n                                                trigger={[\"hover\", \"focus\"]}\r\n                                                placement=\"bottom\"\r\n                                                flip\r\n                                                overlay={\r\n                                                    <Tooltip id=\"tooltip-bottom\" >\r\n                                                        {\r\n                                                            isProjectPublic(offerInstance.projectDetail)\r\n                                                                ? \"This is a public offer.\"\r\n                                                                : isProjectRestricted(offerInstance.projectDetail)\r\n                                                                ? \"This is a restricted offer.\"\r\n                                                                : isProjectPrivate(offerInstance.projectDetail)\r\n                                                                    ? \"This is a private offer.\"\r\n                                                                    : null\r\n                                                        }\r\n                                                    </Tooltip>\r\n                                                }\r\n                                            >\r\n                                                {\r\n                                                    isProjectPublic(offerInstance.projectDetail)\r\n                                                        ? <PublicIcon/>\r\n                                                        : isProjectRestricted(offerInstance.projectDetail)\r\n                                                        ? <RestrictedIcon/>\r\n                                                        : isProjectPrivate(offerInstance.projectDetail)\r\n                                                            ? <PrivateIcon/>\r\n                                                            : <Box/>\r\n                                                }\r\n                                            </OverlayTrigger>\r\n                                        </Box>\r\n                                    </Box>\r\n                                </Box>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </Box>\r\n            }\r\n        />;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OfferItem);","import React, {Component, FormEvent} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Col, Row} from \"react-bootstrap\";\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\nimport GroupProperties from \"../../models/group_properties\";\nimport {\n    Box,\n    Button, colors,\n    IconButton,\n    InputAdornment,\n    InputBase,\n    MenuItem,\n    OutlinedInput,\n    Paper,\n    Select,\n    Typography\n} from \"@material-ui/core\";\nimport {\n    calculatePaginationIndices,\n    calculatePaginationPages,\n    ExploreOffersState,\n    hasNotFetchedOffers,\n    hasOffersForCurrentFilters,\n    isFetchingOffers,\n    isSearchFilterActive,\n    successfullyFetchedOffers\n} from \"./ExploreOffersReducer\";\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\nimport {clearSearchFilter, fetchOffers, filterChanged, onSearchEnter, paginationChanged} from \"./ExploreOffersActions\";\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\nimport {BeatLoader} from \"react-spinners\";\nimport OfferItem from \"./OfferItem\";\nimport {Pagination} from \"@material-ui/lab\";\nimport RiskWarning from \"../risk-warning/RiskWarning\";\nimport {isIssuer} from \"../../models/user\";\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\nimport Routes from \"../../router/routes\";\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\nimport RefreshIcon from \"@material-ui/icons/Refresh\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\nimport {FetchProjectsOrderByOptions, FetchProjectsPhaseOptions} from \"../../api/repositories/OfferRepository\";\nimport {Close, Search} from \"@material-ui/icons\";\n\ninterface ExploreOffersProps {\n    MediaQueryState: MediaQueryState;\n    ManageSystemAttributesState: ManageSystemAttributesState;\n    ManageGroupUrlState: ManageGroupUrlState;\n    AuthenticationState: AuthenticationState;\n    ExploreOffersLocalState: ExploreOffersState;\n    onSearchEnter: (event: FormEvent) => any;\n    fetchOffers: (orderBy?: string) => any;\n    filterChanged: (event: any) => any;\n    clearSearchFilter: () => any;\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState,\n        ExploreOffersLocalState: state.ExploreOffersLocalState,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        onSearchEnter: (event: FormEvent) => dispatch(onSearchEnter(event)),\n        fetchOffers: (orderBy?: string) => dispatch(fetchOffers(orderBy)),\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\n        clearSearchFilter: () => dispatch(clearSearchFilter()),\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\n    }\n}\n\ninterface ExploreOffersComponentState {\n    groups: GroupProperties[];\n  }\n\n  class ExploreOffers extends Component<ExploreOffersProps, ExploreOffersComponentState> {\n    constructor(props: ExploreOffersProps) {\n      super(props);\n      this.state = {\n        groups: [],\n      };\n    }\n  \n    componentDidMount() {\n        if (hasNotFetchedOffers(this.props.ExploreOffersLocalState)) {\n          this.props.fetchOffers(FetchProjectsOrderByOptions.Phase);\n        }\n        this.fetchGroups();\n      }\n  \n      fetchGroups = async () => {\n        try {\n          const response = await new GroupRepository().fetchGroups();\n          this.setState({ groups: response.data });\n        } catch (error) {\n          console.error(\"Error fetching groups:\", error);\n        }\n      };\n  \n    render() {\n        const {\n            MediaQueryState,\n            ManageSystemAttributesState,\n            ManageGroupUrlState,\n            AuthenticationState,\n            ExploreOffersLocalState,\n            fetchOffers,\n            filterChanged,\n            clearSearchFilter,\n            paginationChanged,\n            onSearchEnter,\n        } = this.props;\n\n        const paginationPages = calculatePaginationPages(ExploreOffersLocalState);\n        const paginationIndices = calculatePaginationIndices(ExploreOffersLocalState);\n\n        return <Box\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\n        >\n            <Row>\n                {/** Group filter for Explore offers */}\n                <Col xs={12} sm={12} md={6} lg={4}>\n                    <Box paddingY=\"6px\">\n                    <Typography variant=\"body1\">Course:</Typography>\n                    <Box height=\"8px\" />\n                    <Paper>\n                        <Select\n                        fullWidth\n                        variant=\"outlined\"\n                        name=\"groupFilter\"\n                        value={ExploreOffersLocalState.groupFilter}\n                        onChange={filterChanged}\n                        input={<OutlinedInput />}\n                        /* disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}  */\n                        >\n                        <MenuItem key=\"all\" value=\"all\">\n                            All\n                        </MenuItem>\n                        {this.state.groups.map((group) => (\n                            <MenuItem key={group.anid} value={group.anid}>\n                            {group.displayName}\n                            </MenuItem>\n                        ))}\n                        </Select>\n                    </Paper>\n                    </Box>\n                </Col>\n\n\n                {/** Sector filter */}\n                <Col xs={12} sm={12} md={6} lg={4} >\n                    <Box paddingY=\"6px\" >\n                        <Typography variant=\"body1\">Sector:</Typography>\n                        <Box height=\"8px\" />\n                        <Paper>\n                            <Select\n                                fullWidth\n                                variant=\"outlined\"\n                                name=\"sectorFilter\"\n                                value={ExploreOffersLocalState.sectorFilter}\n                                onChange={filterChanged}\n                               /* disabled={!successfullyFetchedOffers(ExploreOffersLocalState)} */\n                                input={<OutlinedInput/>}\n                            >\n                                <MenuItem key=\"all\" value=\"all\">All sectors</MenuItem>\n\n                                {\n                                    !ManageSystemAttributesState.systemAttributes\n                                        ? null\n                                        : ManageSystemAttributesState.systemAttributes.Sectors.map((sector, index) => (\n                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\n                                        ))\n                                }\n                            </Select>\n                        </Paper>\n                    </Box>\n                </Col>\n\n                {/** Status filter */}\n                <Col xs={12} sm={12} md={6} lg={4}>\n                <Box paddingY=\"6px\">\n                    <Typography variant=\"body1\">Status:</Typography>\n                    <Box height=\"8px\" />\n                    <Paper>\n                        <Select\n                            fullWidth\n                            variant=\"outlined\"\n                            name=\"phaseFilter\"\n                            value={ExploreOffersLocalState.phaseFilter}\n                            onChange={filterChanged}\n                            input={<OutlinedInput />}\n                        >\n                            <MenuItem key={FetchProjectsPhaseOptions.Live} value={FetchProjectsPhaseOptions.Live}>\n                                Live\n                            </MenuItem>\n                            <MenuItem key={FetchProjectsPhaseOptions.ExpiredPitch} value={FetchProjectsPhaseOptions.ExpiredPitch}>\n                                Expired\n                            </MenuItem>\n                        </Select>\n                    </Paper>\n                </Box>\n            </Col>\n            </Row>\n\n            {/** Search bar */}\n            <Row style={{ marginTop: 40 }} >\n                <Col xs={12} sm={12} md={8} lg={4} >\n                    <Box\n                        width=\"100%\"\n                        height=\"100%\"\n                        bgcolor=\"white\"\n                        border={2}\n                        borderColor={colors.grey[300]}\n                        borderRadius=\"20px\"\n                        paddingX=\"5px\"\n                        paddingY=\"8px\"\n                    >\n                        <form onSubmit={onSearchEnter} >\n                            <InputBase\n                                fullWidth\n                                name=\"searchFilter\"\n                                value={ExploreOffersLocalState.searchFilter}\n                                placeholder=\"Search name, course or issuer\"\n                                onChange={filterChanged}\n                                disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\n                                startAdornment={\n                                    <InputAdornment position=\"start\" >\n                                        <IconButton\n                                            type=\"submit\"\n                                            onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)}\n                                            disabled={!successfullyFetchedOffers(ExploreOffersLocalState)}\n                                        >\n                                            <Search fontSize=\"small\"/>\n                                        </IconButton>\n                                    </InputAdornment>\n                                }\n                                endAdornment={\n                                    !isSearchFilterActive(ExploreOffersLocalState)\n                                        ? null\n                                        : <InputAdornment position=\"end\" >\n                                            <IconButton onClick={() => clearSearchFilter()} >\n                                                <Close fontSize=\"small\"/>\n                                            </IconButton>\n                                        </InputAdornment>\n                                }\n                            />\n                        </form>\n                    </Box>\n                </Col>\n            </Row>\n\n            {/** Loader */}\n            {\n                !isFetchingOffers(ExploreOffersLocalState)\n                    ? null\n                    : <Row noGutters >\n                        <Col xs={12} sm={12} md={12} lg={12} >\n                            <Box display=\"flex\" marginY=\"50px\" justifyContent=\"center\" >\n                                <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\n                            </Box>\n                        </Col>\n                    </Row>\n            }\n\n            {/** Offers */}\n            {\n                !successfullyFetchedOffers(ExploreOffersLocalState)\n                    ? null\n                    : <Row noGutters >\n                        <Col xs={12} sm={12} md={12} lg={12} >\n                            {\n                                !hasOffersForCurrentFilters(ExploreOffersLocalState)\n                                    ? <Box marginY=\"80px\" >\n                                        <Typography align=\"center\" variant=\"h5\" >There are no offers available using your current filter criteria</Typography>\n                                    </Box>\n                                    : <Box>\n                                        {/** Explore n offers + refresh button */}\n                                        <Box\n                                            display=\"flex\"\n                                            flexDirection=\"row\"\n                                            alignItems=\"center\"\n                                            marginTop=\"50px\"\n                                            marginBottom=\"25px\"\n                                        >\n                                            <Typography variant=\"h6\">Explore</Typography>\n                                            <Typography variant=\"h6\" color=\"primary\">&nbsp;<b>{ExploreOffersLocalState.offerInstances.length} offers</b></Typography>\n                                            <Box marginLeft=\"8px\" >\n                                                <IconButton onClick={() => fetchOffers(FetchProjectsOrderByOptions.Phase)} >\n                                                    <RefreshIcon/>\n                                                </IconButton>\n                                            </Box>\n                                        </Box>\n\n                                        {/** Create offer button (only available for issuers) */}\n                                        {\n                                            !AuthenticationState.currentUser\n                                                ? null\n                                                : !isIssuer(AuthenticationState.currentUser)\n                                                ? null\n                                                : <Box marginBottom=\"40px\" >\n                                                    <CustomLink\n                                                        url={Routes.constructCreateProjectRoute(ManageGroupUrlState.groupNameFromUrl ?? null)}                                                  \n                                                        color=\"none\"\n                                                        activeColor=\"none\"\n                                                        activeUnderline={false}\n                                                        component=\"a\"\n                                                        childComponent={\n                                                            <Button size=\"medium\" variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} >\n                                                                <Box marginRight=\"8px\" >\n                                                                    <CreateIcon fontSize=\"small\" />\n                                                                </Box>Create new project\n                                                            </Button>\n                                                        }\n                                                    />\n                                                </Box>\n                                        }\n\n                                        {/** Offers area */}\n                                        <Row>\n                                            {\n                                                ExploreOffersLocalState.offerInstances\n                                                    .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\n                                                    .map(offerInstance => (\n                                                        <Col key={offerInstance.projectDetail.id} xs={12} sm={12} md={6} lg={3} >\n                                                            <Box margin=\"16px\" >\n                                                                <OfferItem offerInstance={offerInstance} />\n                                                            </Box>\n                                                        </Col>\n                                                    ))\n                                            }\n                                        </Row>\n                                    </Box>\n                            }\n                        </Col>\n                    </Row>\n            }\n\n            {/** Pagination */}\n            {\n                !successfullyFetchedOffers(ExploreOffersLocalState)\n                    ? null\n                    : paginationPages === 1\n                    ? null\n                    : <Row noGutters >\n                        <Col xs={12} sm={12} md={12} lg={12} >\n                            <Box display=\"flex\" justifyContent=\"center\" marginTop=\"55px\" >\n                                <Pagination count={paginationPages} page={ExploreOffersLocalState.currentPage} color=\"primary\" onChange={paginationChanged} />\n                            </Box>\n                        </Col>\n                    </Row>\n            }\n\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreOffers);","import Api, {ApiRoutes} from \"../Api\";\n\nexport interface FetchAccessRequestsOptions {\n    user?: string;\n    group?: string;\n    orderBy: \"user\" | \"group\";\n}\n\nexport default class AccessRequestRepository {\n\n    /**\n     * Fetch access requests\n     */\n    public async fetchAccessRequests(options?: FetchAccessRequestsOptions) {\n        return await new Api()\n            .request(\n                \"get\",\n                ApiRoutes.listAccessRequestsRoute,\n                {\n                    requestBody: null,\n                    queryParameters: options ?? null\n                }\n            );\n    }\n\n    /**\n     * Create access request\n     *\n     * @param userID\n     * @param groupID\n     */\n    public async createAccessRequest(userID: string, groupID: string) {\n        return await new Api()\n            .request(\n                \"post\",\n                ApiRoutes.createAccessRequestRoute,\n                {\n                    queryParameters: null,\n                    requestBody: {\n                        userID,\n                        groupID\n                    }\n                }\n            );\n    }\n\n    /**\n     * Remove access request\n     *\n     * @param requestID\n     */\n    public async removeAccessRequest(requestID: string) {\n        return await new Api()\n            .request(\n                \"delete\",\n                ApiRoutes.removeAccessRequestRoute,\n                {\n                    queryParameters: null,\n                    requestBody: {\n                        requestID\n                    }\n                }\n            );\n    }\n}","import Api, {ApiRoutes} from \"../Api\";\n\nexport enum ClientEmailTypes {\n    EnquiryEmail,\n    InvitationEmail,\n    PitchPublished,\n    NewPitchSubmitted,\n    ContactResource,\n    ContactPitchOwner\n}\n\nexport interface EmailData {\n    emailType: number;\n    emailInfo: EmailInfo;\n}\n\nexport interface EmailInfo {\n    receiver: string | string[];\n    sender?: string;\n\n    [others: string]: any;\n}\n\nexport interface UserInvitationEmailData extends EmailInfo {\n    groupName: string;\n    groupLogo: string;\n    groupWebsite: string;\n    groupContactUs: string;\n    userType: string;\n    signupURL: string;\n}\n\nexport interface EnquiryEmailData extends EmailInfo {\n    isAuthenticatedRequest: boolean;\n    subject: string;\n    description: string;\n    senderName: string;\n    senderPhone: string;\n}\n\nexport interface PitchPublishedEmailData extends EmailInfo {\n    projectID: string;\n}\n\nexport interface NewPitchSubmittedEmailData extends EmailInfo {\n    projectID: string;\n}\n\nexport interface ContactResourceEmailData extends EmailInfo {\n    userName: string;\n    userCompanyName?: string;\n}\n\nexport interface ContactPitchOwnerEmailData extends EmailInfo {\n    userName: string;\n    projectName: string;\n}\n\nexport default class EmailRepository {\n\n    /**\n     * Send email\n     *\n     * @param data\n     */\n    public async sendEmail(data: EmailData) {\n        return await new Api()\n            .request(\n                \"post\",\n                ApiRoutes.sendEmailRoute,\n                {\n                    queryParameters: null,\n                    requestBody: data\n                }\n            );\n    }\n}","import {\n    CompleteFetchingGroupsAction,\n    CompleteRemovingAccessRequestAction,\n    CompleteSendingAccessRequestAction,\n    ExploreGroupsAction,\n    ExploreGroupsEvents,\n    FilterChangedAction,\n    FilterGroupsByGroupFilterAction,\n    PaginationChangedAction, RemovingAccessRequestAction, SendingAccessRequestAction\n} from \"./ExploreGroupsActions\";\nimport GroupProperties from \"../../models/group_properties\";\nimport Error from \"../../models/error\";\nimport {AccessRequestInstance} from \"../../models/access_request\";\n\nexport const maxGroupsPerPage: number = 12;\n\nexport interface ExploreGroupsState {\n    groups: GroupProperties[];\n    accessRequestsInstances?: AccessRequestInstance[]; // only available for issuer or investor\n    fetchingGroups: boolean;\n    groupsFetched: boolean;\n\n    filteringGroupsByName: boolean;\n    nameFilter: string;\n    groupFilter: \"all\" | \"groupsOfMembership\" | \"groupsOfPendingRequest\";\n    groupsFiltered: GroupProperties[];\n\n    currentPage: number;\n\n    error?: Error;\n\n    sendingAccessRequestToGroup?: string;\n    errorSendingAccessRequest?: Error;\n\n    removingAccessRequestFromGroup?: string;\n    errorRemovingAccessRequest?: Error;\n}\n\nconst initialState: ExploreGroupsState = {\n    groups: [],\n    fetchingGroups: false,\n    groupsFetched: false,\n\n    filteringGroupsByName: false,\n    nameFilter: \"\",\n    groupFilter: \"all\",\n    groupsFiltered: [],\n\n    currentPage: 1\n}\n\nexport const hasNotFetchedGroups = (state: ExploreGroupsState) => {\n    return !state.groupsFetched && !state.fetchingGroups;\n}\n\nexport const isFetchingGroups = (state: ExploreGroupsState) => {\n    return !state.groupsFetched && state.fetchingGroups;\n}\n\nexport const successfullyFetchedGroups = (state: ExploreGroupsState) => {\n    return state.groupsFetched && !state.fetchingGroups && state.error === undefined;\n}\n\nexport const isFilteringGroupsByName = (state: ExploreGroupsState) => {\n    return state.filteringGroupsByName;\n}\n\nexport const hasGroupsForCurrentFilters = (state: ExploreGroupsState) => {\n    return successfullyFetchedGroups(state) && state.groupsFiltered.length > 0;\n}\n\nexport const hasAccessRequestsBeenSatisfied = (state: ExploreGroupsState) => {\n    return successfullyFetchedGroups(state) && state.accessRequestsInstances !== undefined;\n}\n\nexport const calculatePaginationPages = (state: ExploreGroupsState) => {\n    if (state.groupsFiltered.length <= maxGroupsPerPage) {\n        return 1;\n    }\n    if (state.groupsFiltered.length % maxGroupsPerPage === 0) {\n        return (state.groupsFiltered.length / maxGroupsPerPage) | 0;\n    }\n    return ((state.groupsFiltered.length / maxGroupsPerPage) | 0) + 1;\n}\n\nexport const calculatePaginationIndices = (state: ExploreGroupsState) => {\n    let startIndex, endIndex;\n    startIndex = (state.currentPage - 1) * maxGroupsPerPage;\n    endIndex = startIndex + maxGroupsPerPage - 1;\n    if (endIndex > state.groupsFiltered.length - 1) {\n        endIndex = state.groupsFiltered.length - 1;\n    }\n    return {\n        startIndex,\n        endIndex\n    };\n}\n\nexport const isSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\n    return state.sendingAccessRequestToGroup !== undefined && state.sendingAccessRequestToGroup === groupID;\n}\n\nexport const hasErrorSendingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\n    return !isSendingAccessRequest(state, groupID) && state.errorSendingAccessRequest !== undefined;\n}\n\nexport const isRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\n    return state.removingAccessRequestFromGroup !== undefined && state.removingAccessRequestFromGroup === groupID;\n}\n\nexport const hasErrorRemovingAccessRequest = (state: ExploreGroupsState, groupID: string) => {\n    return !isRemovingAccessRequest(state, groupID) && state.errorRemovingAccessRequest !== undefined;\n}\n\nconst exploreGroupsReducer = (state = initialState, action: ExploreGroupsAction) => {\n    switch (action.type) {\n        case ExploreGroupsEvents.FetchingGroups:\n            return {\n                ...state,\n                groups: [],\n                fetchingGroups: true,\n                groupsFetched: false,\n                error: undefined\n            }\n        case ExploreGroupsEvents.CompleteFetchingGroups:\n            const completeFetchingGroupsAction: CompleteFetchingGroupsAction = action as CompleteFetchingGroupsAction;\n            return {\n                ...state,\n                groups: [...completeFetchingGroupsAction.groups],\n                accessRequestsInstances: completeFetchingGroupsAction.accessRequestInstances !== undefined\n                    ? [...completeFetchingGroupsAction.accessRequestInstances]\n                    : state.accessRequestsInstances,\n                fetchingGroups: false,\n                groupsFetched: true,\n                currentPage: 1,\n                error: completeFetchingGroupsAction.error !== undefined\n                    ? {detail: completeFetchingGroupsAction.error} : state.error\n            }\n        case ExploreGroupsEvents.FilterChanged:\n            const filterChangedAction: FilterChangedAction = action as FilterChangedAction;\n            return {\n                ...state,\n                [filterChangedAction.name]: filterChangedAction.value\n            }\n        case ExploreGroupsEvents.FilterGroupsByName:\n            return {\n                ...state,\n                filteringGroupsByName: true\n            }\n        case ExploreGroupsEvents.CancelFilterGroupsByName:\n            return {\n                ...state,\n                nameFilter: \"\",\n                filteringGroupsByName: false\n            }\n        case ExploreGroupsEvents.FilterGroupsByGroupFilter:\n            const filterGroupsByGroupFilterAction: FilterGroupsByGroupFilterAction = action as FilterGroupsByGroupFilterAction;\n            return {\n                ...state,\n                groupsFiltered: [...filterGroupsByGroupFilterAction.groupsFiltered],\n                currentPage: 1\n            }\n        case ExploreGroupsEvents.PaginationChanged:\n            const paginationChangedAction: PaginationChangedAction = action as PaginationChangedAction;\n            return {\n                ...state,\n                currentPage: paginationChangedAction.page\n            }\n        case ExploreGroupsEvents.SendingAccessRequest:\n            const sendingAccessRequestAction: SendingAccessRequestAction = action as SendingAccessRequestAction;\n            return {\n                ...state,\n                sendingAccessRequestToGroup: sendingAccessRequestAction.groupID,\n                errorSendingAccessRequest: undefined\n            }\n        case ExploreGroupsEvents.CompleteSendingAccessRequest:\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\n            return {\n                ...state,\n                sendingAccessRequestToGroup: undefined,\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\n                    : state.accessRequestsInstances,\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\n            }\n        case ExploreGroupsEvents.RemovingAccessRequest:\n            const removingAccessRequestAction: RemovingAccessRequestAction = action as RemovingAccessRequestAction;\n            return {\n                ...state,\n                removingAccessRequestFromGroup: removingAccessRequestAction.groupID,\n                errorRemovingAccessRequest: undefined\n            }\n        case ExploreGroupsEvents.CompleteRemovingAccessRequest:\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\n            return {\n                ...state,\n                removingAccessRequestFromGroup: undefined,\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\n                    : state.accessRequestsInstances,\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\n            }\n        default:\n            return state;\n    }\n}\n\nexport default exploreGroupsReducer;","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {Box, Button, Card, CardActionArea, CardActions, colors, Typography} from \"@material-ui/core\";\nimport GroupProperties, {getGroupLogo} from \"../../models/group_properties\";\nimport {Image} from \"react-bootstrap\";\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\nimport {isAdmin} from \"../../models/admin\";\nimport {\n    ExploreGroupsState,\n    hasAccessRequestsBeenSatisfied,\n    isRemovingAccessRequest,\n    isSendingAccessRequest\n} from \"./ExploreGroupsReducer\";\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\nimport {CheckCircle} from \"@material-ui/icons\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {removeAccessRequest, sendAccessRequest} from \"./ExploreGroupsActions\";\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\nimport Routes from \"../../router/routes\";\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\n\ninterface GroupItemProps {\n    group: GroupProperties;\n    ManageGroupUrlState: ManageGroupUrlState;\n    AuthenticationState: AuthenticationState;\n    ExploreGroupsLocalState: ExploreGroupsState;\n    sendAccessRequest: (groupID: string) => any;\n    removeAccessRequest: (groupID: string) => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState,\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        sendAccessRequest: (groupID: string) => dispatch(sendAccessRequest(groupID)),\n        removeAccessRequest: (groupID: string) => dispatch(removeAccessRequest(groupID))\n    }\n}\n\nclass GroupItem extends Component<GroupItemProps, any> {\n    render() {\n        const {\n            group,\n            ManageGroupUrlState,\n            AuthenticationState,\n            ExploreGroupsLocalState,\n            sendAccessRequest,\n            removeAccessRequest\n        } = this.props;\n\n        const currentUser = AuthenticationState.currentUser;\n\n        if (!currentUser) {\n            return null;\n        }\n\n        let groupMember: GroupOfMembership | undefined = AuthenticationState.groupsOfMembership.find(\n            groupOfMembership => groupOfMembership.group.anid === group.anid);\n\n        let hasRequestedToAccessGroup: boolean = false;\n        if (hasAccessRequestsBeenSatisfied(ExploreGroupsLocalState)) {\n            hasRequestedToAccessGroup = ExploreGroupsLocalState.accessRequestsInstances\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === group.anid) !== -1;\n        }\n\n        return <Box\n            marginY=\"18px\"\n        >\n            <Card>\n                <CustomLink\n                    url={Routes.constructGroupDetailRoute(ManageGroupUrlState.groupNameFromUrl ?? null, group.groupUserName)}\n                    color=\"black\"\n                    activeColor=\"none\"\n                    activeUnderline={false}\n                    component=\"nav-link\"\n                    childComponent={\n                        <CardActionArea\n                            onClick={\n                                () => {\n                                    if (!isAdmin(currentUser)) {\n                                        realtimeDBUtils.trackActivity({\n                                            userID: currentUser.id,\n                                            activityType: DB_CONST.ACTIVITY_TYPE_CLICK,\n                                            interactedObjectLocation: DB_CONST.GROUP_PROPERTIES_CHILD,\n                                            interactedObjectID: group.anid,\n                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CLICKED_ON_GROUP_ITEM.replace(\"%group%\", group.displayName),\n                                            action: Routes.nonGroupViewGroup.replace(\":groupID\", group.anid)\n                                        });\n                                    }\n                                }\n                            }\n                        >\n                            <Box>\n                                <Box display=\"flex\" height=\"220px\" justifyContent=\"center\" bgcolor={colors.grey[\"200\"]} >\n                                    <Image\n                                        alt={`${group.displayName} logo`}\n                                        src={getGroupLogo(group) ?? undefined}\n                                        height=\"auto\"\n                                        width=\"100%\"\n                                        style={{ padding: 40, objectFit: \"scale-down\" }}\n                                    />\n                                </Box>\n\n                                <Box paddingX=\"18px\" paddingY=\"20px\" >\n                                    <Typography variant=\"subtitle1\" align=\"center\" noWrap ><b>{group.displayName}</b></Typography>\n\n                                    {\n                                        !groupMember\n                                            ? null\n                                            : <Box display=\"flex\" flexDirection=\"row\" marginTop=\"15px\" alignItems=\"center\" justifyContent=\"center\" >\n                                                <CheckCircle fontSize=\"small\" color=\"primary\" />\n                                                <Box width=\"6px\" />\n                                                <Typography variant=\"body1\" align=\"center\" noWrap color=\"textSecondary\" >\n                                                    {\n                                                        getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\n                                                            ? \"Home member\"\n                                                            : \"Platform member\"\n                                                    }\n                                                </Typography>\n                                            </Box>\n                                    }\n                                </Box>\n                            </Box>\n                        </CardActionArea>\n                    }\n                />\n\n                {\n                    isAdmin(currentUser)\n                        ? null\n                        : groupMember\n                        ? null\n                        : <CardActions style={{ padding: 0 }} >\n                            <Box display=\"flex\" width=\"100%\" padding=\"18px\" justifyContent=\"center\" >\n                                {\n                                    !hasRequestedToAccessGroup\n                                        ? <Button\n                                            fullWidth\n                                            variant=\"outlined\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            onClick={() => sendAccessRequest(group.anid)}\n                                            disabled={isSendingAccessRequest(ExploreGroupsLocalState, group.anid)}\n                                        >\n                                            {\n                                                isSendingAccessRequest(ExploreGroupsLocalState, group.anid)\n                                                    ? \"Sending request ...\"\n                                                    : \"Join Course\"\n                                            }\n                                        </Button>\n                                        : <Button\n                                            variant=\"outlined\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            onClick={() => removeAccessRequest(group.anid)}\n                                            disabled={isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)}\n                                        >\n                                            {\n                                                isRemovingAccessRequest(ExploreGroupsLocalState, group.anid)\n                                                    ? \"Cancelling ...\"\n                                                    : \"Cancel request\"\n                                            }\n                                        </Button>\n                                }\n                            </Box>\n                        </CardActions>\n                }\n            </Card>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupItem);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {\r\n    calculatePaginationIndices,\r\n    calculatePaginationPages,\r\n    ExploreGroupsState,\r\n    hasGroupsForCurrentFilters,\r\n    hasNotFetchedGroups,\r\n    isFetchingGroups,\r\n    isFilteringGroupsByName,\r\n    successfullyFetchedGroups\r\n} from \"./ExploreGroupsReducer\";\r\nimport {\r\n    Box,\r\n    Card,\r\n    IconButton,\r\n    InputAdornment,\r\n    InputBase,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {Close, Refresh, Search} from \"@material-ui/icons\";\r\nimport {\r\n    cancelFilteringGroupsByName,\r\n    fetchGroups,\r\n    filterChanged,\r\n    filterGroupsByName,\r\n    paginationChanged\r\n} from \"./ExploreGroupsActions\";\r\nimport {BeatLoader} from \"react-spinners\";\r\nimport GroupItem from \"./GroupItem\";\r\nimport {isAdmin} from \"../../models/admin\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Pagination} from \"@material-ui/lab\";\r\n\r\ninterface ExploreGroupsProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    fetchGroups: () => any;\r\n    filterChanged: (event: any) => any;\r\n    filterGroupsByName: () => any;\r\n    cancelFilteringGroupsByName: () => any;\r\n    paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        ExploreGroupsLocalState: state.ExploreGroupsLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        fetchGroups: () => dispatch(fetchGroups()),\r\n        filterChanged: (event: any) => dispatch(filterChanged(event)),\r\n        filterGroupsByName: () => dispatch(filterGroupsByName()),\r\n        cancelFilteringGroupsByName: () => dispatch(cancelFilteringGroupsByName()),\r\n        paginationChanged: (event: React.ChangeEvent<unknown>, page: number) => dispatch(paginationChanged(event, page))\r\n    }\r\n}\r\n\r\nclass ExploreGroups extends Component<ExploreGroupsProps, any> {\r\n\r\n    componentDidMount() {\r\n        if (hasNotFetchedGroups(this.props.ExploreGroupsLocalState)) {\r\n            this.props.fetchGroups();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            ExploreGroupsLocalState,\r\n            fetchGroups,\r\n            filterChanged,\r\n            filterGroupsByName,\r\n            cancelFilteringGroupsByName,\r\n            paginationChanged\r\n        } = this.props;\r\n\r\n        if (!AuthenticationState.currentUser) {\r\n            return null;\r\n        }\r\n\r\n        const paginationPages = calculatePaginationPages(ExploreGroupsLocalState);\r\n        const paginationIndices = calculatePaginationIndices(ExploreGroupsLocalState);\r\n\r\n        return <Box paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"} paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"} >\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 4, offset: 4}} >\r\n                    <Card elevation={0} >\r\n                        <Box\r\n                            display=\"flex\"\r\n                            flexDirection=\"column\"\r\n                            alignItems=\"center\"\r\n                            bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            color=\"white\"\r\n                            paddingY=\"28px\"\r\n                        >\r\n                            <Typography variant=\"h6\" align=\"center\">Courses on Student network</Typography>\r\n\r\n                            <Box height=\"28px\" />\r\n\r\n                            <Box width=\"85%\" height=\"100%\" bgcolor=\"white\" borderRadius=\"50px\" >\r\n                                <InputBase\r\n                                    fullWidth\r\n                                    name=\"nameFilter\"\r\n                                    value={ExploreGroupsLocalState.nameFilter}\r\n                                    placeholder=\"Search course by name\"\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                    startAdornment={\r\n                                        <InputAdornment position=\"start\" >\r\n                                            <IconButton\r\n                                                onClick={() => filterGroupsByName()}\r\n                                                disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                            >\r\n                                                <Search fontSize=\"small\"/>\r\n                                            </IconButton>\r\n                                        </InputAdornment>\r\n                                    }\r\n                                    endAdornment={\r\n                                        !isFilteringGroupsByName(ExploreGroupsLocalState)\r\n                                            ? null\r\n                                            : <InputAdornment position=\"end\" >\r\n                                                <IconButton onClick={() => cancelFilteringGroupsByName()} >\r\n                                                    <Close fontSize=\"small\"/>\r\n                                                </IconButton>\r\n                                            </InputAdornment>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </Box>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Filters (only available for issuer and investor) */}\r\n            {\r\n                isAdmin(AuthenticationState.currentUser)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={8} sm={8} md={3} lg={2} >\r\n                            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"48px\" >\r\n                                <Select\r\n                                    fullWidth\r\n                                    name=\"groupFilter\"\r\n                                    value={ExploreGroupsLocalState.groupFilter}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"dense\"\r\n                                    input={<OutlinedInput/>}\r\n                                    onChange={filterChanged}\r\n                                    disabled={!successfullyFetchedGroups(ExploreGroupsLocalState)}\r\n                                >\r\n                                    <MenuItem key=\"all\" value=\"all\">All courses</MenuItem>\r\n                                    <MenuItem key=\"groupsOfMembership\" value=\"groupsOfMembership\">My courses</MenuItem>\r\n                                    <MenuItem key=\"groupsOfPendingRequest\" value=\"groupsOfPendingRequest\">Pending requests</MenuItem>\r\n                                </Select>\r\n\r\n                                <Box width=\"15px\" />\r\n\r\n                                <IconButton onClick={() => fetchGroups()} >\r\n                                    <Refresh/>\r\n                                </IconButton>\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Loader */}\r\n            {\r\n                !isFetchingGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" marginY=\"80px\" justifyContent=\"center\" >\r\n                                <BeatLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n\r\n            {/** Groups area */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : !hasGroupsForCurrentFilters(ExploreGroupsLocalState)\r\n                    ? <Box marginY=\"80px\" >\r\n                        <Typography align=\"center\" variant=\"h5\" > There are no courses available using your current filter criteria </Typography>\r\n                    </Box>\r\n                    : <Box marginTop=\"30px\" >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={12} lg={12} >\r\n                                <Row>\r\n                                    {\r\n                                        ExploreGroupsLocalState.groupsFiltered\r\n                                            .slice(paginationIndices.startIndex, paginationIndices.endIndex + 1)\r\n                                            .map(group =>\r\n                                                <Col key={group.anid} xs={12} sm={12} md={4} lg={3} xl={2} >\r\n                                                    <GroupItem group={group} />\r\n                                                </Col>\r\n                                            )\r\n                                    }\r\n                                </Row>\r\n                            </Col>\r\n                        </Row>\r\n                    </Box>\r\n            }\r\n\r\n            {/** Pagination */}\r\n            {\r\n                !successfullyFetchedGroups(ExploreGroupsLocalState)\r\n                    ? null\r\n                    : paginationPages === 1\r\n                    ? null\r\n                    : <Row noGutters >\r\n                        <Col xs={12} sm={12} md={12} lg={12} >\r\n                            <Box display=\"flex\" justifyContent=\"center\" marginTop=\"55px\" >\r\n                                <Pagination count={paginationPages} page={ExploreGroupsLocalState.currentPage} color=\"primary\" onChange={paginationChanged} />\r\n                            </Box>\r\n                        </Col>\r\n                    </Row>\r\n            }\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ExploreGroups);","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {FeedbackSnackbarTypes} from \"./FeedbackSnackbarReducer\";\nimport {AppState} from \"../../redux-store/reducers\";\n\nexport enum FeedbackSnackbarEvents {\n    Open = \"FeedbackSnackbarEvents.Open\",\n    Close = \"FeedbackSnackbarEvents.Close\"\n}\n\nexport interface FeedbackSnackbarAction extends Action {\n\n}\n\nexport interface OpenFeedbackSnackbarAction extends Action {\n    snackbarType: FeedbackSnackbarTypes;\n    message: string;\n}\n\nexport const openFeedbackSnackbar: ActionCreator<any> = (type: FeedbackSnackbarTypes, message: string) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: OpenFeedbackSnackbarAction = {\n            type: FeedbackSnackbarEvents.Open,\n            snackbarType: type,\n            message: message\n        };\n        return dispatch(action);\n    }\n}\n\nexport const closeFeedbackSnackbar: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: FeedbackSnackbarEvents.Close\n        });\n    }\n}","import {FeedbackSnackbarAction, FeedbackSnackbarEvents, OpenFeedbackSnackbarAction} from \"./FeedbackSnackbarActions\";\n\nexport enum FeedbackSnackbarTypes {\n    Success = \"success\",\n    Information = \"info\",\n    Error = \"error\",\n    Warning = \"warning\"\n}\n\nexport interface FeedbackSnackbarState {\n    type: FeedbackSnackbarTypes;\n    open: boolean;\n    message: string;\n}\n\nconst initialState: FeedbackSnackbarState = {\n    type: FeedbackSnackbarTypes.Success,\n    open: false,\n    message: \"\"\n};\n\nconst feedbackSnackbarReducerNew = (state = initialState, action: FeedbackSnackbarAction) => {\n    switch (action.type) {\n        case FeedbackSnackbarEvents.Open:\n            const openFeedbackSnackbarAction: OpenFeedbackSnackbarAction = action as OpenFeedbackSnackbarAction;\n            return {\n                ...state,\n                open: true,\n                type: openFeedbackSnackbarAction.snackbarType,\n                message: openFeedbackSnackbarAction.message\n            }\n        case FeedbackSnackbarEvents.Close:\n            return {\n                ...state,\n                open: false\n            };\n        default:\n            return state;\n    }\n}\n\nexport default feedbackSnackbarReducerNew;","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport EmailRepository, {ClientEmailTypes, ContactResourceEmailData} from \"../../api/repositories/EmailRepository\";\nimport User, {hasBusinessProfile} from \"../../models/user\";\nimport Admin, {isAdmin} from \"../../models/admin\";\nimport {openFeedbackSnackbar} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\nimport {FeedbackSnackbarTypes} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\n\nexport enum ResourcesEvents {\n    DetailedPageToggleContactDialog = \"ResourcesEvents.DetailedPageToggleContactDialog\",\n    DetailedPageSendingContactEmail = \"ResourcesEvents.DetailedPageSendingContactEmail\",\n    DetailedPageCompleteSendingContactEmail = \"ResourcesEvents.DetailedPageCompleteSendingContactEmail\"\n}\n\nexport interface ResourcesAction extends Action {\n\n}\n\nexport interface DetailedPageCompleteSendingContactEmailAction extends ResourcesAction {\n    error?: string;\n}\n\nexport const toggleContactResourceDialog: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: ResourcesEvents.DetailedPageToggleContactDialog\n        });\n    }\n}\n\nexport const sendContactEmail: ActionCreator<any> = (receiver: string | string[]) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            detailedPageSendingContactEmail\n        } = getState().ResourcesLocalState;\n\n        if (detailedPageSendingContactEmail) {\n            return;\n        }\n\n        const {\n            currentUser\n        } = getState().AuthenticationState;\n\n        if (!currentUser) {\n            return;\n        }\n\n        const admin: Admin | null = isAdmin(currentUser);\n\n        dispatch({\n            type: ResourcesEvents.DetailedPageSendingContactEmail\n        });\n\n        const completeAction: DetailedPageCompleteSendingContactEmailAction = {\n            type: ResourcesEvents.DetailedPageCompleteSendingContactEmail\n        };\n\n        try {\n            const emailInfo: ContactResourceEmailData = {\n                receiver: receiver,\n                sender: currentUser.email,\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\n                userCompanyName: `${admin ? \"Not specified\" : hasBusinessProfile((currentUser as User))\n                    ? (currentUser as User).BusinessProfile?.companyName : \"Not specified.\"}`\n            };\n\n            await new EmailRepository().sendEmail({\n                emailType: ClientEmailTypes.ContactResource,\n                emailInfo: emailInfo\n            });\n\n            dispatch(completeAction);\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\n        } catch (error) {\n            completeAction.error = error.toString();\n            dispatch(completeAction);\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\n        }\n    }\n}","import {DetailedPageCompleteSendingContactEmailAction, ResourcesAction, ResourcesEvents} from \"./ResourcesActions\";\nimport Error from \"../../models/error\";\n\nexport interface ResourcesState {\n    detailedPageContactDialogOpen: boolean;\n    detailedPageSendingContactEmail: boolean;\n    detailedPageErrorSendingContactEmail?: Error;\n}\n\nconst initialState: ResourcesState = {\n    detailedPageContactDialogOpen: false,\n    detailedPageSendingContactEmail: false\n}\n\nexport const isDetailedPageSendingContactEmail = (state: ResourcesState) => {\n    return state.detailedPageSendingContactEmail;\n}\n\nexport const hasErrorSendingContactEmailInDetailedPage = (state: ResourcesState) => {\n    return !state.detailedPageSendingContactEmail && state.detailedPageErrorSendingContactEmail !== undefined;\n}\n\nconst resourcesReducer = (state = initialState, action: ResourcesAction) => {\n    switch (action.type) {\n        case ResourcesEvents.DetailedPageToggleContactDialog:\n            return {\n                ...state,\n                detailedPageContactDialogOpen: !state.detailedPageContactDialogOpen\n            }\n        case ResourcesEvents.DetailedPageSendingContactEmail:\n            return {\n                ...state,\n                detailedPageSendingContactEmail: true,\n                detailedPageErrorSendingContactEmail: undefined\n            }\n        case ResourcesEvents.DetailedPageCompleteSendingContactEmail:\n            const detailedPageCompleteSendingContactEmailAction: DetailedPageCompleteSendingContactEmailAction = action as DetailedPageCompleteSendingContactEmailAction;\n            return {\n                ...state,\n                detailedPageContactDialogOpen: false,\n                detailedPageSendingContactEmail: false,\n                detailedPageErrorSendingContactEmail: detailedPageCompleteSendingContactEmailAction.error !== undefined\n                    ? {detail: detailedPageCompleteSendingContactEmailAction.error}\n                    : state.detailedPageErrorSendingContactEmail\n            }\n        default:\n            return state;\n    }\n}\n\nexport default resourcesReducer;","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\nimport {sendContactEmail, toggleContactResourceDialog} from \"../ResourcesActions\";\nimport {isDetailedPageSendingContactEmail, ResourcesState} from \"../ResourcesReducer\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\n\ninterface ContactResourceDialogProps {\n    // set when using the component inside the page\n    resourceName: string;\n    // set when using the component inside the page\n    resourceEmail: string | string[];\n    ResourcesLocalState: ResourcesState;\n    toggle: () => any;\n    sendContactEmail: (receiver: string | string[]) => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ResourcesLocalState: state.ResourcesLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggle: () => dispatch(toggleContactResourceDialog()),\n        sendContactEmail: (receiver: string | string[]) => dispatch(sendContactEmail(receiver))\n    }\n}\n\nclass ContactResourceDialog extends Component<ContactResourceDialogProps, any> {\n    render() {\n        const {\n            resourceName,\n            resourceEmail,\n            ResourcesLocalState,\n            toggle,\n            sendContactEmail\n        } = this.props;\n\n        return <Dialog\n            open={ResourcesLocalState.detailedPageContactDialogOpen}\n            onClose={() => toggle()}\n        >\n            <DialogContent>\n                <Box\n                    display=\"flex\"\n                    flexDirection=\"column\"\n                >\n                    <Typography\n                        variant=\"body1\"\n                        align=\"left\"\n                    >\n                        {`We will send an email to ${resourceName} asking them to contact you.`}\n                    </Typography>\n                    <Box\n                        height=\"20px\"\n                    />\n                    <Typography\n                        variant=\"body1\"\n                        align=\"left\"\n                    >\n                        {`Are you happy for Invest West to share your email address with ${resourceName}?`}\n                    </Typography>\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                {\n                    isDetailedPageSendingContactEmail(ResourcesLocalState)\n                        ? null\n                        : <Button\n                            onClick={() => toggle()}\n                            className={css(sharedStyles.no_text_transform)}\n                        >\n                            Cancel\n                        </Button>\n                }\n                <Button\n                    color=\"primary\"\n                    variant=\"contained\"\n                    className={css(sharedStyles.no_text_transform)}\n                    disabled={isDetailedPageSendingContactEmail(ResourcesLocalState)}\n                    onClick={() => sendContactEmail(resourceEmail)}\n                >\n                    {\n                        isDetailedPageSendingContactEmail(ResourcesLocalState)\n                            ? `Sending email to ${resourceName} ...`\n                            : \"Yes\"\n                    }\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactResourceDialog);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Slide, SlideProps, Snackbar} from \"@material-ui/core\";\nimport {FeedbackSnackbarState} from \"./FeedbackSnackbarReducer\";\nimport {closeFeedbackSnackbar} from \"./FeedbackSnackbarActions\";\nimport {Alert} from \"@material-ui/lab\";\n\ninterface FeedbackSnackbarProps {\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\n    close: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        FeedbackSnackbarLocalState: state.FeedbackSnackbarLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        close: () => dispatch(closeFeedbackSnackbar())\n    }\n}\n\nclass FeedbackSnackbarNew extends Component<FeedbackSnackbarProps, any> {\n    render() {\n        const {\n            FeedbackSnackbarLocalState,\n            close\n        } = this.props;\n\n        return <Snackbar\n            open={FeedbackSnackbarLocalState.open}\n            anchorOrigin={{\n                vertical: \"bottom\",\n                horizontal: \"center\",\n            }}\n            autoHideDuration={2500}\n            onClose={close}\n            TransitionComponent={SlideTransitionUp}\n            transitionDuration={{\n                enter: 130,\n                exit: 130\n            }}\n        >\n            <Alert variant=\"filled\" severity={FeedbackSnackbarLocalState.type} onClose={close}>{FeedbackSnackbarLocalState.message}</Alert>\n        </Snackbar>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbarNew);\n\n/**\n * Slide transition - direction up\n *\n * @param props\n * @returns {*}\n * @constructor\n */\nexport const SlideTransitionUp = React.forwardRef((props: SlideProps, ref) => <Slide {...props} ref={ref}\n                                                                                     direction=\"up\"/>);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\nimport {Col, Image, Row} from \"react-bootstrap\";\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\nimport {AttachFile} from \"@material-ui/icons\";\nimport ReactPlayer from \"react-player\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {ResourcesState} from \"../../ResourcesReducer\";\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\n\ninterface KeltieProps {\n    MediaQueryState: MediaQueryState;\n    ResourcesLocalState: ResourcesState;\n    toggleContactResourceDialog: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ResourcesLocalState: state.ResourcesLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\n    }\n}\n\ninterface KeltieResource {\n    name: string;\n    url: string;\n}\n\nconst keltieLogo: string = `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`;\nconst sullivanFountainImg: string = `${process.env.PUBLIC_URL}/resources/keltie/sullivan-fountain.jpg`;\nconst richardLawrenceImg: string = `${process.env.PUBLIC_URL}/resources/keltie/richard-lawrence.jpg`;\n\nconst keltieDocuments: KeltieResource[] = [\n    {\n        name: \"An introduction to IP\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/an-introduction-to-ip.pdf`\n    },\n    {\n        name: \"Designs - Info Sheet\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/designs-info-sheet.pdf`\n    },\n    {\n        name: \"Patent searching overview guide\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patent-searching-overview-guide.pdf`\n    },\n    {\n        name: \"How to get the best from your IP\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/how-to-get-the-best-from-your-ip.pptx`\n    },\n    {\n        name: \"The tool box\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/the-tool-box.pptx`\n    }\n];\n\nconst keltieVideos: KeltieResource[] = [\n    {\n        name: \"IP for Startups: Top 5 Things You Need to Know\",\n        url: \"https://www.youtube.com/watch?v=r5mOCm2tzjg\"\n    },\n    {\n        name: \"Patents for non patent attorneys - Episode 1\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-1.mp4`\n    },\n    {\n        name: \"Patents for non patent attorneys - Episode 2\",\n        url: `${process.env.PUBLIC_URL}/resources/keltie/patents-for-non-patent-attorneys-episode-2.mp4`\n    },\n    {\n        name: \"Artificial Intelligence and Patents: AI Inventors\",\n        url: \"https://www.youtube.com/watch?v=QZOC2ZLWjPI\"\n    },\n    {\n        name: \"Patents and the Internet of Things\",\n        url: \"https://www.youtube.com/watch?v=BnyvbgUSjv4\"\n    },\n    {\n        name: \"IP Tips: Reducing patent spend (in light of Covid-19)\",\n        url: \"https://www.youtube.com/watch?v=7v00c9VpS-E\"\n    }\n];\n\nclass Keltie extends Component<KeltieProps, any> {\n    render() {\n        const {\n            MediaQueryState,\n            toggleContactResourceDialog\n        } = this.props;\n\n        return <Box\n            height=\"100%\"\n            minHeight=\"100vh\"\n            bgcolor={colors.grey[\"200\"]}\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\n        >\n            <Row noGutters>\n                <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} xl={{span: 6, offset: 3}}>\n                    <Paper>\n                        <Box padding=\"20px\">\n                            {/** Header */}\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\n                                <Row noGutters style={{ width: \"100%\" }}>\n        \n                                    <Col sm={12} md={12} lg={12}>\n                                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\" height=\"100%\" paddingX=\"25px\">\n                                            <Box marginY=\"30px\">\n                                                <Typography variant=\"h3\" align=\"center\">Intellectual Property</Typography>\n                                            </Box>\n                                            <Typography variant=\"h6\" align=\"center\">A collection of resources to help entrepreneurs better understand Intellectual Property issues. This content is kindly provided by our friends at Keltie LLP.</Typography>\n                                        </Box>\n                                    </Col>\n                                    <Col sm={12} md={12} lg={12}>\n                                        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" width=\"100%\" height=\"100%\">\n                                            <ReactPlayer url={keltieVideos[0].url} height=\"50vh\" width=\"100%\" playing={false} controls={true}/>\n                                        </Box>\n                                    </Col>\n                                </Row>\n\n                                <Box height=\"30px\"/>\n\n                                <Row noGutters style={{ width: \"100%\"}}>\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\n                                        <Divider/>\n                                    </Col>\n                                </Row>\n\n                                <Box height=\"30px\"/>\n\n                                <Row noGutters style={{ width: \"100%\" }}>\n                                    <Col xs={12} sm={12} md={12} lg={12} xl={12}>\n                                        <Typography variant=\"body1\" align=\"center\">\n                                            Intellectual property comprises the intangible business assets that are the\n                                            result of creativity. In a technology business, much or even most of the\n                                            value of the business may lie in the intellectual property that it owns or\n                                            controls. While this asset value is significant, the main role of\n                                            intellectual property is usually to support the commercial strategy of the\n                                            business. It is therefore very important to understand what intellectual\n                                            property is needed by a business to support its commercial strategy, so that\n                                            the business can make good decisions about identifying and securing the\n                                            intellectual property that it needs as efficiently as possible.\n                                        </Typography>\n                                    </Col>\n                                </Row>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n\n                            {/** Tips */}\n                            <Box display=\"flex\" flexDirection=\"column\">\n                                <Typography variant=\"h6\" align=\"left\">Top 5 Things You Need to Know</Typography>\n                                <Box height=\"20px\"/>\n                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\n                                    <ol>\n                                        <li>\n                                            There are four main forms of IP Protection\n                                            <br/>\n                                            <ol type=\"a\">\n                                                <li><i>Patents</i> for technological innovations,</li>\n                                                <li><i>Trademarks</i> for branding,</li>\n                                                <li><i>Registered</i> Designs for the look and feel of a product,</li>\n                                                <li><i>Copyright</i> for creative works such as instruction manuals or\n                                                    software code.\n                                                </li>\n                                            </ol>\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Registered vs. unregistered rights\n                                            <br/>\n                                            <ul>\n                                                <li>\n                                                    There are differences in strength of registered vs unregistered\n                                                    rights, as well as their costs and timescales. Its important to\n                                                    choose the right option for your business.\n                                                </li>\n                                            </ul>\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Application vs. granted rights\n                                            <br/>\n                                            <ul>\n                                                <li>\n                                                    When discussing registered rights, always be clear whether you have\n                                                    made an application for rights, or actually have granted rights.\n                                                </li>\n                                            </ul>\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Assessing risk - registrability searching vs Freedom To Operate (FTO)\n                                            <br/>\n                                            <ul>\n                                                <li>\n                                                    Owning a registered right, be it a trade mark, patent or registered\n                                                    design, does not mean that you automatically have the right to use\n                                                    it.\n                                                </li>\n                                                <li>\n                                                    Two types of searching are therefore common with IP. The first is\n                                                    performed to understand the chances of your application passing the\n                                                    registration process (i.e. patentability searching or trade mark\n                                                    registrability searching), whilst the second considers whether your\n                                                    proposed commercial activities will be impacted by pre-existing\n                                                    rights.\n                                                </li>\n                                            </ul>\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            IP rights are jurisdictional\n                                            <br/>\n                                            <ul>\n                                                <li> IP rights are only enforceable in the country or region they have been granted.</li>\n                                            </ul>\n                                        </li>\n                                    </ol>\n                                </Typography>\n                                <br/>\n                                <Typography variant=\"body1\" align=\"left\">\n                                    The UK IPO (Intellectual Property Office) provide funding for IP audits and support\n                                    for start-ups. <b>For more information on accessing IP audit funding in the South West,\n                                    follow this link</b>&nbsp;\n                                    <a href=\"https://www.businesswest.co.uk/about/partners-programmes/innovate2succeed\" target=\"_blank\" rel=\"noreferrer\">Innovate UK EDGE | Business West</a>.\n                                </Typography>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n\n                            {/** Resources */}\n                            <Box display=\"flex\" flexDirection=\"column\">\n                                <Typography variant=\"h6\" align=\"left\">Resources</Typography>\n                                <Box height=\"20px\"/>\n                                <Box display=\"flex\" flexDirection=\"column\">\n                                    {\n                                        keltieDocuments.map((document: any) => (\n                                            <CustomLink\n                                                key={document.name}\n                                                url={document.url}\n                                                target=\"_blank\"\n                                                color=\"black\"\n                                                activeColor=\"none\"\n                                                activeUnderline={true}\n                                                component=\"a\"\n                                                childComponent={\n                                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"12px\">\n                                                        <AttachFile fontSize=\"small\"/>\n                                                        <Box width=\"10px\"/>\n                                                        <Typography variant=\"body1\" align=\"left\">{document.name}</Typography>\n                                                    </Box>\n                                                }\n                                            />\n                                        ))\n                                    }\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n\n                            {/** Training (videos) */}\n                            <Box display=\"flex\" flexDirection=\"column\">\n                                <Typography variant=\"h6\" align=\"left\">Training</Typography>\n                                <Box height=\"30px\"/>\n                                <Box display=\"flex\" flexDirection=\"column\">\n                                    {\n                                        keltieVideos.map((video: any, index: number) =>\n                                            <Box key={index} marginBottom=\"20px\">\n                                                <Row style={{ width: \"100%\" }}>\n                                                    <Col xs={12} sm={12} md={4} lg={3}>\n                                                        <ReactPlayer url={video.url} height=\"auto\" width=\"100%\" playing={false} controls={true}/>\n                                                    </Col>\n                                                    <Col xs={12} sm={12} md={8} lg={9}>\n                                                        <Typography variant=\"subtitle1\" align=\"left\"><b>{video.name}</b></Typography>\n                                                    </Col>\n                                                </Row>\n                                            </Box>\n                                        )\n                                    }\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n\n                            {/** About us */}\n                            <Box display=\"flex\" flexDirection=\"column\" >\n                                <Typography variant=\"h6\" align=\"left\">About us</Typography>\n                                <Box height=\"15px\" />\n                                <Typography variant=\"body1\" align=\"justify\" >\n                                    Keltie is an intellectual property firm with a unique personality. A firm thats\n                                    renowned for its excellence, earned by putting talented, energetic and principled\n                                    people at its heart.\n                                    <br/><br/>\n                                    Based in Europe but with global reach, we specialise in IP law and management. Our\n                                    clients benefit from an extraordinarily experienced and multi-faceted group of IP\n                                    experts. Our team includes patent, trade mark and design attorneys who work on every\n                                    technology and in all commercial fields.\n                                    <br/><br/>\n                                    Sullivan Fountain and Richard Lawrence at the Keltie Cotswolds office serve the\n                                    South West region and would be delighted to discuss your IP challenges further.\n                                </Typography>\n                                <Box height=\"40px\" />\n                                <Box display=\"flex\" flexDirection=\"row\" justifyContent=\"center\" >\n                                    <CustomLink\n                                        url=\"https://www.keltie.com\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image\n                                                src={keltieLogo}\n                                                alt=\"Keltie logo\"\n                                                width={MediaQueryState.isMobile ? 100 : 145}\n                                                height={MediaQueryState.isMobile ? 100 : 145}\n                                                style={{ objectFit: \"cover\" }}\n                                            />\n                                        }\n                                    />\n                                    <Box width=\"25px\" />\n                                    <CustomLink\n                                        url=\"https://www.keltie.com/staff/sullivan-fountain.html\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image\n                                                src={sullivanFountainImg}\n                                                alt=\"Sullivan Fountain\"\n                                                width={MediaQueryState.isMobile ? 100 : 145}\n                                                height={MediaQueryState.isMobile ? 100 : 145}\n                                                style={{ objectFit: \"cover\" }}\n                                            />\n                                        }\n                                    />\n                                    <Box width=\"25px\" />\n                                    <CustomLink\n                                        url=\"https://www.keltie.com/staff/richard-lawrence.html\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image src={richardLawrenceImg} alt=\"Richard Lawrence\" width={MediaQueryState.isMobile ? 100 : 145} height={MediaQueryState.isMobile ? 100 : 145} style={{ objectFit: \"cover\" }} />\n                                        }\n                                    />\n                                </Box>\n                                <Box height=\"60px\" />\n                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" >\n                                    <Box bgcolor=\"#52155A\" color=\"white\" clone >\n                                        <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => toggleContactResourceDialog()} > Contact us </Button>\n                                    </Box>\n                                </Box>\n                                <Box height=\"20px\" />\n                            </Box>\n                        </Box>\n                    </Paper>\n                </Col>\n            </Row>\n\n            <ContactResourceDialog\n                resourceName=\"Keltie LLP\"\n                resourceEmail={\n                    isProductionEnvironment()\n                        ? [\"sullivan.fountain@keltie.com\"]\n                        : isDevelopmentEnvironment()\n                        ? \"dangkhoa.dk19@gmail.com\"\n                        : \"help@investwest.online\"\n                }\n            />\n\n            <FeedbackSnackbarNew/>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Keltie);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Box, Card, colors, Typography} from \"@material-ui/core\";\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\nimport {Image} from \"react-bootstrap\";\nimport {Resource} from \"./Resources\";\nimport {ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\nimport Routes from \"../../router/routes\";\n\ninterface ResourceItemProps {\n    resource: Resource;\n    ManageGroupUrlState: ManageGroupUrlState;\n    AuthenticationState: AuthenticationState;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {}\n}\n\nclass ResourceItem extends Component<ResourceItemProps, any> {\n    render() {\n        const {\n            resource,\n            ManageGroupUrlState\n        } = this.props;\n\n        return <Box\n            marginY=\"18px\"\n        >\n            <Card>\n                <CustomLink\n                    url={Routes.constructViewResourceDetailRoute(\n                        ManageGroupUrlState.groupNameFromUrl ?? null, resource.name)}\n                    color=\"black\"\n                    activeColor=\"none\"\n                    activeUnderline={false}\n                    component=\"nav-link\"\n                    childComponent={\n                        <Box>\n                            <Box display=\"flex\" height=\"220px\" justifyContent=\"center\" bgcolor={colors.grey[\"200\"]}>\n                                <Image alt={`${resource.name} logo`} src={resource.logo} height=\"auto\" width=\"100%\" style={{ padding: 40, objectFit: \"scale-down\" }} />\n                            </Box>\n\n                            <Box paddingX=\"18px\" paddingY=\"20px\">\n                                <Typography variant=\"subtitle1\" align=\"center\" noWrap><b>{resource.name}</b></Typography>\n                            </Box>\n                        </Box>\n                    }\n                />\n            </Card>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceItem);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\nimport {Col, Image, Row} from \"react-bootstrap\";\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {ResourcesState} from \"../../ResourcesReducer\";\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\nimport {AttachFile} from \"@material-ui/icons\";\n\ninterface FounderCatalystProps {\n    MediaQueryState: MediaQueryState;\n    ResourcesLocalState: ResourcesState;\n    toggleContactResourceDialog: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ResourcesLocalState: state.ResourcesLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\n    }\n}\n\ninterface FounderCatalystResource {\n    name: string;\n    url: string;\n}\n\nconst founderCatalystLogo: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`;\nconst justynWaterworthImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/justyn-waterworth.jpeg`;\nconst samSimpsonImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/sam-simpson.jpeg`;\nconst charlesFrankImg: string = `${process.env.PUBLIC_URL}/resources/founder-catalyst/charles-frank.jpeg`;\n\nconst founderCatalystResources: FounderCatalystResource[] = [\n    {\n        name: \"Model Articles of Association\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-articles-of-association.pdf`\n    },\n    {\n        name: \"Model Board Minutes\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-board-minutes.pdf`\n    },\n    {\n        name: \"Model Subscription & Shareholders Agreement\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-subscription-and-shareholder-agreement.pdf`\n    },\n    {\n        name: \"Model Founder Service Agreement\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-founder-service-agreement.pdf`\n    },\n    {\n        name: \"Model IP Assignment\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-ip-assignment.pdf`\n    },\n    {\n        name: \"Model Disclosure Letter\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-disclosure-letter.pdf`\n    },\n    {\n        name: \"Model Non-disclosure Agreement\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-non-disclosure-agreement.pdf`\n    },\n    {\n        name: \"Model Term Sheet\",\n        url: `${process.env.PUBLIC_URL}/resources/founder-catalyst/model-term-sheet.pdf`\n    }\n];\n\nclass FounderCatalyst extends Component<FounderCatalystProps, any> {\n    render() {\n        const {\n            MediaQueryState,\n            toggleContactResourceDialog\n        } = this.props;\n\n        return <Box\n            height=\"100%\"\n            minHeight=\"100vh\"\n            bgcolor={colors.grey[\"200\"]}\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\n        >\n            <Row\n                noGutters\n            >\n                <Col\n                    xs={12}\n                    sm={12}\n                    md={{span: 10, offset: 1}}\n                    lg={{span: 8, offset: 2}}\n                    xl={{span: 6, offset: 3}}\n                >\n                    <Paper>\n                        <Box\n                            padding=\"20px\"\n                        >\n                            {/** Header */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                                width=\"100%\"\n                            >\n                                <Row\n                                    noGutters\n                                    style={{\n                                        width: \"100%\"\n                                    }}\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={5}\n                                        lg={4}\n                                        xl={3}\n                                    >\n                                        <Box\n                                            display=\"flex\"\n                                            justifyContent=\"center\"\n                                            alignItems=\"center\"\n                                            width=\"100%\"\n                                            height=\"100%\"\n                                            paddingX=\"25px\"\n                                        >\n                                            <Image\n                                                src={founderCatalystLogo}\n                                                alt=\"Founder Catalyst Logo\"\n                                                width=\"100%\"\n                                                height=\"auto\"\n                                                style={{\n                                                    objectFit: \"cover\"\n                                                }}\n                                            />\n                                        </Box>\n                                    </Col>\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={7}\n                                        lg={8}\n                                        xl={9}\n                                    >\n                                        <Box\n                                            display=\"flex\"\n                                            flexDirection=\"column\"\n                                            justifyContent=\"center\"\n                                            alignItems=\"start\"\n                                            height=\"100%\"\n                                            paddingX=\"25px\"\n                                        >\n                                            <Box\n                                                marginY=\"30px\"\n                                            >\n                                                <Typography\n                                                    variant=\"h4\"\n                                                    align=\"left\"\n                                                >\n                                                    Founder Catalyst\n                                                </Typography>\n                                            </Box>\n                                            <Typography\n                                                variant=\"body1\"\n                                                align=\"left\"\n                                            >\n                                                Legal paperwork for founders raising investment.\n                                                <br/><br/>\n                                                A collection of resources to help entrepreneurs better understand the\n                                                legal requirements when equity fundraising. This content is kindly\n                                                provided by our friends at FounderCatalyst.\n                                                <br/><br/>\n                                                When raising investment for your business, the legal journey can be\n                                                slow,\n                                                frustrating and expensive. When do you need a lawyer? How do you find a\n                                                good one? How can you afford them? This page aims to demystify some of\n                                                the process by showing you what documents you and your investors likely\n                                                to need as part of your fund-raising process.\n                                            </Typography>\n                                        </Box>\n                                    </Col>\n                                </Row>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box\n                                marginY=\"30px\"\n                            >\n                                <Divider/>\n                            </Box>\n\n                            {/** Tips */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                            >\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    8 reasons why founders use FounderCatalysts platform\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box>\n                                    <ol>\n                                        <li>\n                                            Save over 3,500. The traditional lawyer approach costs between 5,000 to\n                                            10,000. FounderCatalyst is 1,495 plus VAT, fixed!\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Simplifying the legal process. The FounderCatalyst platform is designed for\n                                            founders, to be as simple and intuitive to use as possible. The platform\n                                            works by asking you a series of questions in a logical order, with detailed\n                                            explanations alongside.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Up-to-date legal documents. Trusted documents based on the British Venture\n                                            Capital Associations (BVCA) model documents, used by many of the UKs\n                                            leading law firms.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            By using the FounderCatalyst platform, angel investors know you are more\n                                            likely to be investment ready and due diligence will be easier. A real\n                                            differentiator for you in the crowded funding market.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Time is risk. The conventional legal approach can be slow and frustrating.\n                                            By using the FounderCatalyst platform, get your legals completed in as\n                                            little as 30 minutes. Updates in minutes rather than days. Deal momentum is\n                                            key to your funding success.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Unsure and still want to use an advisor? No problem. By using both founder\n                                            and advisor roles on the platform, your trusted advisor can help as much or\n                                            as little as you want  so you still achieve significant time and cost\n                                            savings.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            EIS and SEIS advance assurance a must? Proven expertise on hand to help you\n                                            achieve this important tax relief for your investors, at no extra charge.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            Invest West has negotiated a further 10% discount for our members. Please\n                                            sign up via the button below to receive your discount.\n                                            <br/><br/>\n                                            <CustomLink\n                                                url=\"http://www.foundercatalyst.com/v/INVESTWEST\"\n                                                target=\"_blank\"\n                                                color=\"none\"\n                                                activeColor=\"none\"\n                                                activeUnderline={false}\n                                                component=\"a\"\n                                                childComponent={\n                                                    <Box\n                                                        bgcolor=\"#31C2DE\"\n                                                        color=\"white\"\n                                                        clone\n                                                    >\n                                                        <Button\n                                                            variant=\"contained\"\n                                                            className={css(sharedStyles.no_text_transform)}\n                                                        >\n                                                            10% Discount\n                                                        </Button>\n                                                    </Box>\n                                                }\n                                            />\n                                        </li>\n                                    </ol>\n                                </Box>\n\n                                <Box\n                                    height=\"50px\"\n                                />\n\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    What documents are you and your investors likely to need?\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box>\n                                    <ol>\n                                        <li>\n                                            <b>Initial Term Sheet:</b> this summarises all the key points of the deal\n                                            you are offering to potential investors.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>Founder Service Agreement:</b> one for each founder - it is an agreement\n                                            between you and the company, very similar to an employment contract.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>IP Assignment Letter:</b> this ensures that all intellectual property\n                                            relevant to the company has been transferred by you and other founders to\n                                            the company itself.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>Subscription and Shareholders' Agreement (SSA):</b> this document details\n                                            the agreement between you and your fellow founders, the company, any\n                                            existing shareholders and your new investors.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>Articles of Association:</b> this document works alongside the SSA and\n                                            contains the company's constitution.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>Cap Table:</b> one for before investment and one for after. These\n                                            provide details of your current and future shareholders.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>Resolutions:</b> for both shareholders and directors. These formally\n                                            allow the company to take on the new investment you are seeking.\n                                        </li>\n                                        <br/>\n                                        <li>\n                                            <b>Disclosure Letter:</b> this enables you to formally disclose any issues\n                                            relating to your business to your potential investors.\n                                        </li>\n                                    </ol>\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box\n                                marginY=\"30px\"\n                            >\n                                <Divider/>\n                            </Box>\n\n                            {/** Resources */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                            >\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    Resources\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box\n                                    display=\"flex\"\n                                    flexDirection=\"column\"\n                                >\n                                    {\n                                        founderCatalystResources.map((resource: any) => (\n                                            <CustomLink\n                                                key={resource.name}\n                                                url={resource.url}\n                                                target=\"_blank\"\n                                                color=\"black\"\n                                                activeColor=\"none\"\n                                                activeUnderline={true}\n                                                component=\"a\"\n                                                childComponent={\n                                                    <Box\n                                                        display=\"flex\"\n                                                        flexDirection=\"row\"\n                                                        alignItems=\"center\"\n                                                        marginBottom=\"12px\"\n                                                    >\n                                                        <AttachFile fontSize=\"small\"/>\n                                                        <Box\n                                                            width=\"10px\"\n                                                        />\n                                                        <Typography\n                                                            variant=\"body1\"\n                                                            align=\"left\"\n                                                        >\n                                                            {resource.name}\n                                                        </Typography>\n                                                    </Box>\n                                                }\n                                            />\n                                        ))\n                                    }\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box\n                                marginY=\"30px\"\n                            >\n                                <Divider/>\n                            </Box>\n\n                            {/** About us */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                            >\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    About us\n                                </Typography>\n                                <Box\n                                    height=\"15px\"\n                                />\n                                <Typography\n                                    variant=\"body1\"\n                                    align=\"justify\"\n                                >\n                                    FounderCatalyst was created by a team of successful entrepreneurs, angel investors\n                                    and lawyers to simplify and accelerate the early-stage investment legal journey.\n                                    <br/><br/>\n                                    FounderCatalysts aim is to be the trusted legal platform of choice, simplifying and\n                                    managing the funding process, raising everyones chances of success.\n                                </Typography>\n                                <Box\n                                    height=\"40px\"\n                                />\n                                <Box\n                                    display=\"flex\"\n                                    flexDirection=\"row\"\n                                    justifyContent=\"center\"\n                                >\n                                    <CustomLink\n                                        url=\"https://www.linkedin.com/in/justynwaterworth/\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image\n                                                src={justynWaterworthImg}\n                                                alt=\"Justyn Waterworth\"\n                                                width={MediaQueryState.isMobile ? 100 : 145}\n                                                height={MediaQueryState.isMobile ? 100 : 145}\n                                                style={{\n                                                    objectFit: \"cover\"\n                                                }}\n                                            />\n                                        }\n                                    />\n                                    <Box\n                                        width=\"25px\"\n                                    />\n                                    <CustomLink\n                                        url=\"https://www.linkedin.com/in/samsimpson1/\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image\n                                                src={samSimpsonImg}\n                                                alt=\"Sam Simpson\"\n                                                width={MediaQueryState.isMobile ? 100 : 145}\n                                                height={MediaQueryState.isMobile ? 100 : 145}\n                                                style={{\n                                                    objectFit: \"cover\"\n                                                }}\n                                            />\n                                        }\n                                    />\n                                    <Box\n                                        width=\"25px\"\n                                    />\n                                    <CustomLink\n                                        url=\"https://www.linkedin.com/in/charlesfrankspeechlys/\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image\n                                                src={charlesFrankImg}\n                                                alt=\"Charles Frank\"\n                                                width={MediaQueryState.isMobile ? 100 : 145}\n                                                height={MediaQueryState.isMobile ? 100 : 145}\n                                                style={{\n                                                    objectFit: \"cover\"\n                                                }}\n                                            />\n                                        }\n                                    />\n                                </Box>\n                                <Box\n                                    height=\"60px\"\n                                />\n                                <Box\n                                    display=\"flex\"\n                                    justifyContent=\"center\"\n                                    alignItems=\"center\"\n                                >\n                                    <Box\n                                        bgcolor=\"#31C2DE\"\n                                        color=\"white\"\n                                        clone\n                                    >\n                                        <Button\n                                            variant=\"contained\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            onClick={() => toggleContactResourceDialog()}\n                                        >\n                                            Contact us\n                                        </Button>\n                                    </Box>\n                                </Box>\n                                <Box\n                                    height=\"20px\"\n                                />\n                            </Box>\n                        </Box>\n                    </Paper>\n                </Col>\n            </Row>\n\n            <ContactResourceDialog\n                resourceName=\"Founder Catalyst\"\n                resourceEmail={\n                    isProductionEnvironment()\n                        ? [\"justyn@foundercatalyst.com\", \"sam@foundercatalyst.com\"]\n                        : isDevelopmentEnvironment()\n                        ? \"dangkhoa.dk19@gmail.com\"\n                        : \"help@investwest.online\"\n                }\n            />\n\n            <FeedbackSnackbarNew/>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FounderCatalyst);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {ResourcesState} from \"../../ResourcesReducer\";\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\nimport {Col, Image, Row} from \"react-bootstrap\";\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\n\ninterface GrantFundingProps {\n    MediaQueryState: MediaQueryState;\n    ResourcesLocalState: ResourcesState;\n    toggleContactResourceDialog: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ResourcesLocalState: state.ResourcesLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\n    }\n}\n\nconst grantFundingLogo: string = `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`;\n\ninterface GrantFundingResource {\n    name: string;\n    url: string;\n    img: string;\n}\n\nconst grantFundingResources: GrantFundingResource[] = [\n    {\n        name: \"Our Services Brochure\",\n        url: \"https://drive.google.com/open?id=1-GiFZT-maCglNUo-7UWJrezpXL64hLz2\",\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/our-services-brochure.png`\n    },\n    {\n        name: \"The Grant Report 2020\",\n        url: \"https://drive.google.com/open?id=1Wz-1dDroReh4s7UspQTQJ-tSafNnv7eg\",\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/the-grant-report-2020.png`\n    },\n    {\n        name: \"Blog - Are You Missing Out on R&D Tax Credits?\",\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-are-you-missing-out-on-rd-tax-credits.png`\n    },\n    {\n        name: \"Blog - When is the Right Time to Apply for Grant Funding?\",\n        url: \"https://grantedltd.co.uk/about-us/the-funding-blog/\",\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/blog-when-is-the-right-time-to-apply-for-grant-funding.png`\n    },\n    {\n        name: \"Granted Consultancy Introduction\",\n        url: \"https://vimeo.com/317446864\",\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/granted-consultancy-introduction.png`\n    },\n    {\n        name: \"How to Know If Your Project is Eligible for R&D Grant Funding\",\n        url: \"https://vimeo.com/317450389\",\n        img: `${process.env.PUBLIC_URL}/resources/grant-funding/how-to-know-if-your-project-is-eligible-for-rd-grant-funding.png`\n    }\n];\n\nclass GrantFunding extends Component<GrantFundingProps, any> {\n    render() {\n        const {\n            MediaQueryState,\n            toggleContactResourceDialog\n        } = this.props;\n\n        return <Box\n            height=\"100%\"\n            minHeight=\"100vh\"\n            bgcolor={colors.grey[\"200\"]}\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\n        >\n            <Row\n                noGutters\n            >\n                <Col\n                    xs={12}\n                    sm={12}\n                    md={{span: 10, offset: 1}}\n                    lg={{span: 8, offset: 2}}\n                    xl={{span: 6, offset: 3}}\n                >\n                    <Paper>\n                        <Box\n                            padding=\"20px\"\n                        >\n                            {/** Header */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                                width=\"100%\"\n                            >\n                                <Typography\n                                    variant=\"h4\"\n                                    align=\"left\"\n                                >\n                                    Grant Funding\n                                </Typography>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box\n                                marginY=\"30px\"\n                            >\n                                <Divider/>\n                            </Box>\n\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                            >\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    What are the Benefits of Grant Funding?\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box>\n                                    <Typography\n                                        align=\"left\"\n                                        variant=\"body1\"\n                                    >\n                                        There are two main types of grants:\n                                        <ol>\n                                            <li>\n                                                Capital/Business Growth grants and\n                                            </li>\n                                            <li>\n                                                R&D grants.\n                                            </li>\n                                        </ol>\n                                        Using Business Growth grants enables bigger, more impactful projects to be\n                                        realised by covering capital expenditure e.g. buildings or machinery, with\n                                        project success often being predicated on job growth.\n                                        <br/><br/>\n                                        Research and Development (R&D) grants allow a significant reduction in an\n                                        innovative products time to market, beating the competition and establishing\n                                        first-to-market status. This can have a pronounced impact on your business\n                                        through the increase of commercial returns and subsequent business growth.\n                                        <br/><br/>\n                                        Other benefits of grant funding include:\n                                        <br/>\n                                        <ul>\n                                            <li>\n                                                No Debt - no costs or need to provide security\n                                            </li>\n                                            <li>\n                                                No Equity giveaway - ensuring you retain control\n                                            </li>\n                                            <li>\n                                                Access to Partners  funding may cover the costs of academic and\n                                                commercial experts and attract renowned organisations\n                                            </li>\n                                            <li>\n                                                External Validation  via a competitive process that has been\n                                                scrutinised, supporting later access to investors.\n                                            </li>\n                                        </ul>\n                                    </Typography>\n                                </Box>\n\n                                <Box\n                                    height=\"50px\"\n                                />\n\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    How do you know you are eligible for an R&D grant?\n                                </Typography>\n                                <Box\n                                    height=\"10px\"\n                                />\n                                <Box>\n                                    <Typography\n                                        align=\"left\"\n                                        variant=\"body1\"\n                                    >\n                                        The main focus when applying for R&D grant funding should be on the outputs of a\n                                        defined project. There are typically four categories for assessing project\n                                        eligibility:\n                                        <br/>\n                                        <ol>\n                                            <li>\n                                                <b>Innovation</b> - Is your R&D project novel, disruptive and innovative\n                                                with wider economic, social and environmental impacts?\n                                            </li>\n                                            <li>\n                                                <b>Scalable</b> - Does your project have high commercial growth (and\n                                                ideally\n                                                export) potential?\n                                            </li>\n                                            <li>\n                                                <b>IP Assignment Letter:</b> this ensures that all intellectual property\n                                                relevant to the company has been transferred by you and other founders\n                                                to\n                                                the company itself.\n                                            </li>\n                                            <li>\n                                                <b>Funding</b> - are you seeking 50k-5m funding for feasibility,\n                                                prototyping and/or testing?\n                                            </li>\n                                            <li>\n                                                <b>Business</b> - Have you proven the concept, put a team of (UK/EU)\n                                                experts in place and investigated IP protection?\n                                            </li>\n                                        </ol>\n                                    </Typography>\n                                </Box>\n\n                                <Box\n                                    height=\"50px\"\n                                />\n\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    What Does the Application Process Typically Look Like?\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box>\n                                    <Typography\n                                        align=\"left\"\n                                        variant=\"body1\"\n                                    >\n                                        As a guide, it typically takes between 9-12 months from engaging with Granted\n                                        Consultancy to first drawdown of grant funds. The process involves taking into\n                                        account finding the right funding competition, developing the application,\n                                        waiting during the assessment window, progressing through due diligence and then\n                                        completing project kick off.\n                                    </Typography>\n                                </Box>\n\n                                <Box\n                                    height=\"50px\"\n                                />\n\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    Why Use a Grant Funding Consultancy?\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box>\n                                    <Typography\n                                        align=\"left\"\n                                        variant=\"body1\"\n                                    >\n                                        There are many different factors that will improve your chance of grant funding\n                                        success; a grant funding consultancy will know where to find suitable funding,\n                                        how to access it successfully and how to use it to best effect. Granted let you\n                                        focus on your business, saving you time while we write the grant application for\n                                        you.\n                                        <br/><br/>\n                                        A good consultancy will have pertinent sector expertise, the ability to upskill\n                                        at a rapid pace in new technologies, and experience of working with companies of\n                                        all sizes.\n                                    </Typography>\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box\n                                marginY=\"30px\"\n                            >\n                                <Divider/>\n                            </Box>\n\n                            {/** Resources */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                            >\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    Resources\n                                </Typography>\n                                <Box\n                                    height=\"20px\"\n                                />\n                                <Box\n                                    display=\"flex\"\n                                    flexDirection=\"column\"\n                                >\n                                    {\n                                        grantFundingResources.map((resource: any) => (\n                                            <CustomLink\n                                                key={resource.name}\n                                                url={resource.url}\n                                                target=\"_blank\"\n                                                color=\"black\"\n                                                activeColor=\"none\"\n                                                activeUnderline={true}\n                                                component=\"a\"\n                                                childComponent={\n                                                    <Box\n                                                        display=\"flex\"\n                                                        flexDirection=\"row\"\n                                                        alignItems=\"center\"\n                                                        marginBottom=\"12px\"\n                                                    >\n                                                        <Image\n                                                            src={resource.img}\n                                                            alt={resource.name}\n                                                            style={{\n                                                                objectFit: \"cover\"\n                                                            }}\n                                                        />\n                                                        <Box\n                                                            width=\"10px\"\n                                                        />\n                                                        <Typography\n                                                            variant=\"body1\"\n                                                            align=\"left\"\n                                                        >\n                                                            {resource.name}\n                                                        </Typography>\n                                                    </Box>\n                                                }\n                                            />\n                                        ))\n                                    }\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box\n                                marginY=\"30px\"\n                            >\n                                <Divider/>\n                            </Box>\n\n                            {/** About us */}\n                            <Box\n                                display=\"flex\"\n                                flexDirection=\"column\"\n                            >\n                                <Typography\n                                    variant=\"h6\"\n                                    align=\"left\"\n                                >\n                                    About us\n                                </Typography>\n                                <Box\n                                    height=\"15px\"\n                                />\n                                <Typography\n                                    variant=\"body1\"\n                                    align=\"justify\"\n                                >\n                                    Granted Consultancy are an in-house team of funding specialists with a demonstrable\n                                    10-year track record of securing non-dilutive funding for innovative companies,\n                                    raising over 85m in grant funding and 2.5m in R&D Tax Credits for clients.\n                                    <br/><br/>\n                                    Our full range of non-dilutive funding services (grant writing, project management,\n                                    training and R&D tax credit support) allow our clients to focus on their business.\n                                    Our experience covers the full lifespan of business maturities, from start-ups to\n                                    multinationals.\n                                    <br/><br/>\n                                    Granted Consultancys expertise spans a variety of cutting-edge technologies with a\n                                    focus on four key areas:\n                                    <ul>\n                                        <li>\n                                            AI, Digital and Data\n                                        </li>\n                                        <li>\n                                            Clean-tech and Agri-tech\n                                        </li>\n                                        <li>\n                                            Health, Life Sciences and Education\n                                        </li>\n                                        <li>\n                                            Manufacturing, Mobility and Materials\n                                        </li>\n                                    </ul>\n                                    <br/><br/>\n                                    The Granted team thrives on learning about new technologies, innovative business\n                                    models and the people behind them  then taking that information and translating it\n                                    into a language and format that funders can understand.\n                                </Typography>\n                                <Box\n                                    height=\"40px\"\n                                />\n                                <Box>\n                                    <CustomLink\n                                        url=\"https://grantedltd.co.uk\"\n                                        target=\"_blank\"\n                                        color=\"none\"\n                                        activeColor=\"none\"\n                                        activeUnderline={false}\n                                        component=\"a\"\n                                        childComponent={\n                                            <Image\n                                                src={grantFundingLogo}\n                                                alt=\"logo\"\n                                                width={MediaQueryState.isMobile ? \"100%\" : 400}\n                                                height=\"100%\"\n                                                style={{\n                                                    objectFit: \"contain\"\n                                                }}\n                                            />\n                                        }\n                                    />\n                                </Box>\n\n                                <Box\n                                    height=\"60px\"\n                                />\n\n                                <Typography\n                                    align=\"left\"\n                                    variant=\"body1\"\n                                >\n                                    <b>Get in touch! </b>\n                                    <br/>\n                                    If you have an R&D project that you would like to explore funding for,\n                                </Typography>\n\n                                <Box\n                                    display=\"flex\"\n                                    justifyContent=\"center\"\n                                    alignItems=\"center\"\n                                    marginTop=\"25px\"\n                                >\n                                    <Box\n                                        bgcolor=\"#8DC341\"\n                                        color=\"white\"\n                                        clone\n                                    >\n                                        <Button\n                                            variant=\"contained\"\n                                            className={css(sharedStyles.no_text_transform)}\n                                            onClick={() => toggleContactResourceDialog()}\n                                        >\n                                            Contact us\n                                        </Button>\n                                    </Box>\n                                </Box>\n                                <Box\n                                    height=\"20px\"\n                                />\n                            </Box>\n                        </Box>\n                    </Paper>\n                </Col>\n            </Row>\n\n            <ContactResourceDialog\n                resourceName=\"Grant Funding\"\n                resourceEmail={\n                    isProductionEnvironment()\n                        ? [\"info@grantedltd.co.uk\"]\n                        : isDevelopmentEnvironment()\n                        ? \"dangkhoa.dk19@gmail.com\"\n                        : \"help@investwest.online\"\n                }\n            />\n\n            <FeedbackSnackbarNew/>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GrantFunding);","/* eslint-disable jsx-a11y/img-redundant-alt */\nimport React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {ResourcesState} from \"../../ResourcesReducer\";\nimport {MediaQueryState} from \"../../../../redux-store/reducers/mediaQueryReducer\";\nimport {toggleContactResourceDialog} from \"../../ResourcesActions\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Box, Button, colors, Divider, Paper, Typography} from \"@material-ui/core\";\nimport {Col, Row} from \"react-bootstrap\";\nimport CustomLink from \"../../../../shared-js-css-styles/CustomLink\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\nimport {AttachFile} from \"@material-ui/icons\";\nimport ContactResourceDialog from \"../../components/ContactResourceDialog\";\nimport {isDevelopmentEnvironment, isProductionEnvironment} from \"../../../../utils/environmentUtil\";\nimport FeedbackSnackbarNew from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\n\ninterface MerixStudioProps {\n    MediaQueryState: MediaQueryState;\n    ResourcesLocalState: ResourcesState;\n    toggleContactResourceDialog: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ResourcesLocalState: state.ResourcesLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggleContactResourceDialog: () => dispatch(toggleContactResourceDialog())\n    }\n}\n\nconst MerixSolution: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-1.png`;\nconst MerixSolution3: string = `${process.env.PUBLIC_URL}/resources/merix-studio/chart-4.jpg`;\n\n\n\ninterface MerixStudioResource {\n    name: string;\n    url: string;\n}\n\nconst MerixStudioResources: MerixStudioResource[] = [\n    {\n        name: \"Minimum Viable Product uncovered\",\n        url: \"https://content.merixstudio.com/insights/minimum-viable-product-uncovered-what-it-really-an/?theme=startups\"\n    },\n    {\n        name: \"The right solution for your product launch\",\n        url: \"https://learn.merixstudio.com/product-launch-ebook\"\n    },\n    {\n        name: \"Startup DNA\",\n        url: \"https://www.merixstudio.com/services/startup-dna/\"\n    },\n    {\n        name: \"How to launch with a bang\",\n        url: \"https://content.merixstudio.com/insights/how-to-launch-a-product-with-a-bang/\"\n    },\n    {\n        name: \"State of early-stage startups 2021\",\n        url: \"https://content.merixstudio.com/insights/early-stage-startups-2021-report/\"\n    },\n    {\n        name: \"Startup DNA, turn your idea into a prototype\",\n        url: \"https://content.merixstudio.com/insights/startup-dna-turn-your-idea-prototype/\"\n    },\n    {\n        name: \"If you're passionate about an idea give it a try\",\n        url: \"https://content.merixstudio.com/insights/if-youre-passionate-about-an-idea-give-it-a-try-in/\"\n    },\n    {\n        name: \"Prototype is just one piece of the puzzle\",\n        url: \"https://content.merixstudio.com/insights/prototype-just-one-piece-puzzle-interview-truman-d/\"\n    },\n    {\n        name: \"Pimp your pitch deck\",\n        url: \"https://content.merixstudio.com/insights/pimp-your-pitch-deck/\"\n    },\n    {\n        name: \"Building prototype in a UK based startup\",\n        url: \"https://content.merixstudio.com/insights/building-prototype-uk-based-startup/\"\n    },\n];\n\nclass MerixStudio extends Component<MerixStudioProps, any> {\n    render() {\n        const {\n            MediaQueryState,\n            toggleContactResourceDialog\n        } = this.props;\n\n        return <Box\n            height=\"100%\"\n            minHeight=\"100vh\"\n            bgcolor={colors.grey[\"200\"]}\n            paddingX={MediaQueryState.isMobile ? \"15px\" : \"56px\"}\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\n        >\n            <Row noGutters>\n                <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}} xl={{span: 6, offset: 3}}>\n                    <Paper>\n                        <Box padding=\"20px\">\n                            {/** Header */}\n                            <Box display=\"flex\" flexDirection=\"column\" width=\"100%\">\n                                <Typography variant=\"h4\" align=\"left\">Merixstudio</Typography>\n                            </Box>\n                            <Box>\n                                <Typography align=\"left\" variant=\"body1\">Merixstudios key expertise is the delivery of high-quality and performant web applications and cross-platform mobile apps. Based on the needs of our clients, we can support them in end-to-end product development or seamlessly extend their in-house team of engineers.</Typography>\n                                <CustomLink\n                                    url=\"https://www.merixstudio.com/contact/\"\n                                    target=\"_blank\"\n                                    color=\"none\"\n                                    activeColor=\"none\"\n                                    activeUnderline={false}\n                                    component=\"a\"\n                                    childComponent={\n                                        <Box bgcolor=\"#31C2DE\" color=\"white\" marginY=\"20px\" clone>\n                                            <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)}>Contact Us</Button>\n                                        </Box>\n                                    }\n                                />\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n                            <Box display=\"flex\" flexDirection=\"column\">\n                                <Box marginY=\"30px\">\n                                    <Typography variant=\"h6\" align=\"left\">The right solution for your product launch</Typography>\n                                </Box>\n                                    <Typography variant=\"body1\" align=\"center\">THE ULTIMATE GUIDE TO COMPOSING</Typography>\n                                    <Typography variant=\"body1\" align=\"center\">THE RIGHT SOLUTION FOR YOUR PRODUCT LAUNCH</Typography>\n                                <Box marginY=\"30px\">\n                                    <Typography variant=\"body1\" align=\"left\">Although similar at first glance, the three concepts differ considerably - especially in terms of the purpose each of them serves. The choice of which one to start with depends on many factors, including your current state of knowledge or the budget you can spend on a given project.</Typography>\n                                </Box>\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution} alt=\"Merix image\"/>\n                                    <img width=\"100%\" height=\"auto\" src={MerixSolution3} alt=\"Merix image\"/>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n\n                            {/** Resources */}\n                            <Box display=\"flex\" flexDirection=\"column\">\n                                <Typography variant=\"h6\" align=\"left\">Resources</Typography>\n                                <Box height=\"20px\"/>\n                                <Box display=\"flex\" flexDirection=\"column\">\n                                    {\n                                        MerixStudioResources.map((resource: any) => (\n                                            <CustomLink\n                                                key={resource.name}\n                                                url={resource.url}\n                                                target=\"_blank\"\n                                                color=\"black\"\n                                                activeColor=\"none\"\n                                                activeUnderline={true}\n                                                component=\"a\"\n                                                childComponent={\n                                                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"12px\">\n                                                        <AttachFile fontSize=\"small\"/>\n                                                        <Box width=\"10px\"/>\n                                                        <Typography variant=\"body1\" align=\"left\">{resource.name}</Typography>\n                                                    </Box>\n                                                }\n                                            />\n                                        ))\n                                    }\n                                </Box>\n                            </Box>\n\n                            {/** Divider */}\n                            <Box marginY=\"30px\">\n                                <Divider/>\n                            </Box>\n\n                            {/** About us */}\n                            <Box display=\"flex\" flexDirection=\"column\">\n                                <Typography variant=\"h6\" align=\"left\">About us</Typography>\n                                <Typography variant=\"body1\" align=\"justify\">\n                                    <br/><br/>\n                                    Merixstudios key expertise is the delivery of high-quality and performant web applications\n                                    and cross-platform mobile apps. Based on the needs of our clients, we can support them in\n                                    end-to-end product development or seamlessly extend their in-house team of engineers.\n                                    <br/><br/>\n                                    <ul>\n                                        <li>200+ engineers</li>\n                                        <li>250 clients supported</li>\n                                    </ul>\n                                </Typography>\n\n                                <Typography align=\"left\" variant=\"body1\">\n                                    <b>Get in touch!</b>\n                                    <br/>\n                                </Typography>\n\n                                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"25px\">\n                                    <Box bgcolor=\"#8DC341\" color=\"white\" clone>\n                                        <Button variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => toggleContactResourceDialog()}>Contact us</Button>\n                                    </Box>\n                                </Box>\n                                <Box height=\"20px\"/>\n                            </Box>\n                        </Box>\n                    </Paper>\n                </Col>\n            </Row>\n\n            <ContactResourceDialog\n                resourceName=\"Merix Studio\"\n                resourceEmail={\n                    isProductionEnvironment()\n                        ? [\"g.spychalski@merixstudio.com\"]\n                        : isDevelopmentEnvironment()\n                        ? \"j.kubczak@merixstudio.com\"\n                        : \"support@investwest.online\"\n                }\n            />\n\n            <FeedbackSnackbarNew/>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MerixStudio);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport {RouteParams} from \"../../router/router\";\nimport Keltie from \"./pages/keltie/Keltie\";\nimport {Box, Card, Typography} from \"@material-ui/core\";\nimport {Col, Row} from \"react-bootstrap\";\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\nimport ResourceItem from \"./ResourceItem\";\nimport FounderCatalyst from \"./pages/founder-catalyst/FounderCatalyst\";\nimport GrantFunding from \"./pages/grant-funding/GrantFunding\";\nimport MerixStudio from \"./pages/merix-studio/merixStudio\";\n\n\ninterface ResourcesProps {\n    MediaQueryState: MediaQueryState;\n    ManageGroupUrlState: ManageGroupUrlState;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ManageGroupUrlState: state.ManageGroupUrlState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {}\n}\n\nexport interface Resource {\n    name: string;\n    logo: string;\n    page: React.ReactNode;\n}\n\nexport const resources: Resource[] = [\n    {\n        name: \"Intellectual Property\",\n        logo: `${process.env.PUBLIC_URL}/resources/keltie/logo.jpg`,\n        page: <Keltie/>\n    },\n    {\n        name: \"Fundraising Legals\",\n        logo: `${process.env.PUBLIC_URL}/resources/founder-catalyst/logo.svg`,\n        page: <FounderCatalyst/>\n    },\n    {\n        name: \"Grant Funding\",\n        logo: `${process.env.PUBLIC_URL}/resources/grant-funding/logo.png`,\n        page: <GrantFunding/>\n    },\n    {\n        name: \"Product Development\",\n        logo: `${process.env.PUBLIC_URL}/resources/merix-studio/merix-logo.png`,\n        page: <MerixStudio/>\n    }\n];\n\nclass Resources extends Component<ResourcesProps & Readonly<RouteComponentProps<RouteParams>>, any> {\n    render() {\n        const {\n            MediaQueryState,\n            ManageGroupUrlState\n        } = this.props;\n\n        return <Box\n            paddingX={MediaQueryState.isMobile ? \"20px\" : \"56px\"}\n            paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}\n        >\n            <Row noGutters>\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 4, offset: 4}}>\n                    <Card elevation={0}>\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" bgcolor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} color=\"white\" paddingY=\"28px\">\n                            <Typography variant=\"h6\" align=\"center\">Resources on Invest West</Typography>\n                        </Box>\n                    </Card>\n                </Col>\n            </Row>\n\n            {/** Loader */}\n            {/*{*/}\n            {/*    !isFetchingGroups(ExploreGroupsLocalState)*/}\n            {/*        ? null*/}\n            {/*        : <Row*/}\n            {/*            noGutters*/}\n            {/*        >*/}\n            {/*            <Col*/}\n            {/*                xs={12}*/}\n            {/*                sm={12}*/}\n            {/*                md={12}*/}\n            {/*                lg={12}*/}\n            {/*            >*/}\n            {/*                <Box*/}\n            {/*                    display=\"flex\"*/}\n            {/*                    marginY=\"80px\"*/}\n            {/*                    justifyContent=\"center\"*/}\n            {/*                >*/}\n            {/*                    <BeatLoader*/}\n            {/*                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}*/}\n            {/*                    />*/}\n            {/*                </Box>*/}\n            {/*            </Col>*/}\n            {/*        </Row>*/}\n            {/*}*/}\n\n            {/** Resources area */}\n            <Box marginTop=\"30px\">\n                <Row noGutters>\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Row>\n                            {\n                                resources\n                                    .map(resource =>\n                                        <Col key={resource.name} xs={12} sm={12} md={3}>\n                                            <ResourceItem resource={resource}/>\n                                        </Col>\n                                    )\n                            }\n                        </Row>\n                    </Col>\n                </Row>\n            </Box>\n\n            {/** Pagination */}\n            {/*{*/}\n            {/*    // !successfullyFetchedGroups(ExploreGroupsLocalState)*/}\n            {/*    //     ? null*/}\n            {/*    //     : paginationPages === 1*/}\n            {/*    //     ? null*/}\n            {/*    //     :*/}\n            {/*        <Row*/}\n            {/*            noGutters*/}\n            {/*        >*/}\n            {/*            <Col*/}\n            {/*                xs={12}*/}\n            {/*                sm={12}*/}\n            {/*                md={12}*/}\n            {/*                lg={12}*/}\n            {/*            >*/}\n            {/*                <Box*/}\n            {/*                    display=\"flex\"*/}\n            {/*                    justifyContent=\"center\"*/}\n            {/*                    marginTop=\"55px\"*/}\n            {/*                >*/}\n            {/*                    <Pagination*/}\n            {/*                        count={0}*/}\n            {/*                        page={0}*/}\n            {/*                        color=\"primary\"*/}\n            {/*                        //onChange={}*/}\n            {/*                    />*/}\n            {/*                </Box>*/}\n            {/*            </Col>*/}\n            {/*        </Row>*/}\n            {/*}*/}\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Resources);","const fallbackStore = new Map<string, string>();\nfunction safeGetItem(sKey: string) {\n    const localStoreWorks = !!localStorage;\n\n    if (localStoreWorks) {\n        return localStorage.getItem(sKey);\n    } else {\n        if (!sKey || !fallbackStore.has(sKey)) {\n            return null;\n        }\n\n        return fallbackStore.get(sKey);\n    }\n}\nfunction safeKey(nKeyId: number) {\n    const localStoreWorks = !!localStorage;\n\n    if (localStoreWorks) {\n        return localStorage.key(nKeyId);\n    } else {\n        return Array.from(fallbackStore.keys())[nKeyId];\n    }\n}\nfunction safeSetItem(sKey: string, sValue: string) {\n    const localStoreWorks = !!localStorage;\n\n    if (localStoreWorks) {\n        localStorage.setItem(sKey, sValue);\n    } else {\n        if (!sKey) {\n            return;\n        }\n\n        fallbackStore.set(sKey, sValue);\n    }\n}\nfunction safeGetLength() {\n    const localStoreWorks = !!localStorage;\n\n    if (localStoreWorks) {\n        return localStorage.length;\n    } else {\n        return fallbackStore.size;\n    }\n}\nfunction safeRemoveItem(sKey: string) {\n    const localStoreWorks = !!localStorage;\n\n    if (localStoreWorks) {\n        localStorage.removeItem(sKey);\n    } else {\n        if (!sKey || !fallbackStore.has(sKey)) {\n            return;\n        }\n\n        fallbackStore['delete'](sKey);\n    }\n}\n\nexport { safeGetItem, safeGetLength, safeKey, safeRemoveItem, safeSetItem };\n","import React, {Component} from \"react\";\nimport FlexView from \"react-flexview\";\nimport {css, StyleSheet} from \"aphrodite\";\nimport Sidebar from \"react-sidebar\";\nimport {Badge, IconButton, Typography} from \"@material-ui/core\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport {Col, Container, Row} from \"react-bootstrap\";\nimport Menu from \"@material-ui/icons/Menu\";\nimport {HashLoader} from \"react-spinners\";\n\nimport firebase from \"../../firebase/firebaseApp\";\n\nimport UploadingDialog from \"../../shared-components/uploading-dialog/UploadingDialog\";\nimport EditImageDialog from \"../../shared-components/edit-image/EditImageDialog\";\nimport EditVideoDialog from \"../../shared-components/edit-video/EditVideoDialog\";\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\nimport ChangePasswordPage from \"../../shared-components/change-password/ChangePasswordPage\";\nimport SidebarContent, {\n    CHANGE_PASSWORD_TAB,\n    EXPLORE_GROUPS_TAB,\n    HOME_TAB,\n    MY_OFFERS_TAB,\n    PROFILE_TAB,\n    RESOURCES_TAB\n} from \"../../shared-components/nav-bars/SidebarContent\";\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\nimport ProfileTab from \"../../shared-components/profile/Profile\";\nimport NotificationsBox from \"../../shared-components/notifications/NotificationsBox\";\n\nimport * as colors from \"../../values/colors\";\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\nimport queryString from \"query-string\";\nimport * as ROUTES from \"../../router/routes\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\n\nimport {connect} from \"react-redux\";\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\nimport * as dashboardSidebarActions from \"../../redux-store/actions/dashboardSidebarActions\";\nimport * as editUserActions from \"../../redux-store/actions/editUserActions\";\nimport * as notificationsActions from \"../../redux-store/actions/notificationsActions\";\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\nimport Resources from \"../resources/Resources\";\n\nimport { safeGetItem, safeRemoveItem } from \"../../utils/browser\";\n\nconst mapStateToProps = state => {\n    return {\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\n\n        authStatus: state.auth.authStatus,\n        authenticating: state.auth.authenticating,\n        user: state.auth.user,\n        userLoaded: state.auth.userLoaded,\n\n        notifications: state.manageNotifications.notifications,\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\n        notificationBellRef: state.manageNotifications.notificationBellRef,\n\n        editUserProfile_userEdited: state.editUser.userEdited\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\n\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\n\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\n\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\n\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\n        notificationRefUpdated: (ref) => dispatch(notificationsActions.notificationRefUpdated(ref)),\n    }\n};\n\nclass IssuerDashboard extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.firebaseDB = firebase.database();\n        this.notificationBell = React.createRef();\n    }\n\n    componentDidMount() {\n\n\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            setGroupUserNameFromParams,\n            setExpectedAndCurrentPathsForChecking,\n            loadAngelNetwork,\n\n            notificationRefUpdated,\n\n            history,\n            match,\n        } = this.props;\n\n        const redirectTo = safeGetItem('redirectToAfterAuth');\n        if (redirectTo) {\n            safeRemoveItem('redirectToAfterAuth');\n            history.push(redirectTo);\n        }\n\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_ISSUER : ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER, match.path);\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.setDataForComponents();\n        }\n\n        notificationRefUpdated(this.notificationBell.current);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            loadAngelNetwork,\n\n            notificationRefUpdated\n        } = this.props;\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.setDataForComponents();\n        }\n\n        notificationRefUpdated(this.notificationBell.current);\n    }\n\n    /**\n     * Set required data for components used within this dashboard\n     */\n    setDataForComponents = () => {\n        const {\n            user,\n            editUserProfile_userEdited,\n\n            editUserProfile_setOriginalUserAndEditedUser,\n            // projectsTable_setUser\n        } = this.props;\n\n        if (!user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\n            return;\n        }\n\n        if (!editUserProfile_userEdited) {\n            // initialize a copied instance of the user for editing\n            editUserProfile_setOriginalUserAndEditedUser(user);\n        }\n\n        // // set user so that information can be used in the projects table component\n        // projectsTable_setUser(user);\n    };\n\n    /**\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\n     */\n    renderPageContent = () => {\n\n        const params = queryString.parse(this.props.location.search);\n\n        /**\n         * HOME TAB\n         */\n        if (params.tab === HOME_TAB) {\n            return <ExploreOffers/>;\n        }\n\n        /**\n         * MY OFFERS TAB\n         */\n        if (params.tab === MY_OFFERS_TAB) {\n            return (\n                <div\n                    style={{\n                        margin: 30\n                    }}\n                >\n                    <OffersTable/>\n                </div>\n            );\n        }\n\n        /**\n         * PROFILE TAB\n         */\n        if (params.tab === PROFILE_TAB) {\n            return (\n                <ProfileTab/>\n            );\n        }\n\n        /**\n         * CHANGE PASSWORD TAB\n         */\n        if (params.tab === CHANGE_PASSWORD_TAB) {\n            return (\n                <ChangePasswordPage/>\n            );\n        }\n\n        /**\n         * EXPLORE GROUPS TAB\n         */\n        if (params.tab === EXPLORE_GROUPS_TAB) {\n            // return (\n            //     <ExploreGroupsTab/>\n            // );\n            return <ExploreGroups/>;\n        }\n\n        /**\n         * FORUMS TAB\n         */\n        // if (params.tab === FORUMS_TAB) {\n        //     return (\n        //         <Forums/>\n        //     );\n        // }\n\n        /**\n         * RESOURCES TAB\n         */\n        if (params.tab === RESOURCES_TAB) {\n            return (\n                <Resources/>\n            );\n        }\n    };\n\n    /**\n     * Main render\n     */\n    render() {\n        const {\n            shouldLoadOtherData,\n            groupProperties,\n            groupPropertiesLoaded,\n\n            sidebarDocked,\n            sidebarOpen,\n\n            authStatus,\n            authenticating,\n            user,\n            userLoaded,\n\n            notifications,\n            notificationsAnchorEl,\n\n            toggleSidebar,\n            toggleNotifications\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader color={colors.primaryColor}/>\n                </FlexView>\n            );\n        }\n\n        if (!shouldLoadOtherData) {\n            return <PageNotFoundWhole/>;\n        }\n\n        if (authenticating || !userLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader\n                        color={\n                            !groupProperties\n                                ?\n                                colors.primaryColor\n                                :\n                                groupProperties.settings.primaryColor\n                        }\n                    />\n                </FlexView>\n            );\n        }\n\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_ISSUER)) {\n            return <PageNotFoundWhole/>;\n        }\n\n        return (\n            <Sidebar\n                sidebar={\n                    <SidebarContent dashboardProps={this.props}/>\n                }\n                shadow={false}\n                open={sidebarOpen}\n                docked={sidebarDocked}\n                onSetOpen={() => toggleSidebar(true)}\n                transitions\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}\n                }}>\n\n                <Container fluid style={{padding: 0}}>\n                    {/** Header */}\n                    <Row noGutters>\n                        <Col xs={12} sm={12} md={12} lg={12}>\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\n                                style={{\n                                    backgroundColor:\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                }}>\n\n                                <Row style={{width: \"100%\"}} noGutters>\n                                    <Col xs={10} sm={10} md={11} lg={11}>\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\n                                            {\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\n                                                    <Menu/>\n                                                </IconButton>\n                                            }\n                                            {\n                                                this.renderPageTitle()\n                                            }\n                                        </FlexView>\n                                    </Col>\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\n                                            <div ref={this.notificationBell}>\n                                            <IconButton onClick={toggleNotifications}>\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\n                                                </Badge>\n                                            </IconButton>\n                                            </div>\n                                        </FlexView>\n                                    </Col>\n                                </Row>\n                            </FlexView>\n                        </Col>\n                    </Row>\n\n                    {\n                        this.renderPageContent()\n                    }\n\n                    {/** Notifications box */}\n                    {notificationsAnchorEl !== null &&\n                        <NotificationsBox/>\n                    }\n\n                    {/** Uploading dialog */}\n                    <UploadingDialog/>\n\n                    {/** Edit image dialog */}\n                    <EditImageDialog/>\n\n                    {/** Edit video dialog */}\n                    <EditVideoDialog/>\n                </Container>\n            </Sidebar>\n        );\n    }\n\n    /**\n     * Render the title of the page\n     *\n     * @returns {*}\n     */\n    renderPageTitle = () => {\n        const params = queryString.parse(this.props.location.search);\n\n        let title = \"\";\n\n        switch (params.tab) {\n            case HOME_TAB:\n                title = HOME_TAB;\n                break;\n            case MY_OFFERS_TAB:\n                title = MY_OFFERS_TAB;\n                break;\n            case PROFILE_TAB:\n                title = PROFILE_TAB;\n                break;\n            // case FORUMS_TAB:\n            //     title = FORUMS_TAB;\n            //     break;\n            case RESOURCES_TAB:\n                title = RESOURCES_TAB;\n                break;\n            case CHANGE_PASSWORD_TAB:\n                title = CHANGE_PASSWORD_TAB;\n                break;\n            case EXPLORE_GROUPS_TAB:\n                title = EXPLORE_GROUPS_TAB;\n                break;\n            default:\n                return;\n        }\n\n        return (\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(IssuerDashboard);\n\nconst styles = StyleSheet.create({\n    page_title: {\n        fontSize: 19,\n        marginLeft: 8,\n        color: colors.white\n    }\n});\n","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport React from \"react\";\nimport {SystemAttributes} from \"../../../../models/system_attributes\";\nimport SystemAttributesRepository from \"../../../../api/repositories/SystemAttributesRepository\";\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\n\nexport enum ManageSectorsEvents {\n    SetSectors = \"ManageSectorsEvents.SetSectors\",\n    ToggleAddNewSector = \"ManageSectorsEvents.ToggleAddNewSector\",\n    AddNewSectorTextChanged = \"ManageSectorsEvents.AddNewSectorTextChanged\",\n    SavingSectorsChanges = \"ManageSectorsEvents.SavingSectorsChanges\",\n    CompletedSavingSectorsChanges = \"ManageSectorsEvents.CompletedSavingSectorsChanges\"\n}\n\nexport interface ManageSectorsAction extends Action {\n\n}\n\nexport interface SetSectorsAction extends ManageSectorsAction {\n    sectors: string[];\n}\n\nexport interface AddNewSectorTextChangedAction extends ManageSectorsAction {\n    value: string;\n}\n\nexport interface CompletedSavingSectorsChangesAction extends ManageSectorsAction {\n    error?: string;\n}\n\nexport const setSectors: ActionCreator<any> = (sectors: string[]) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: SetSectorsAction = {\n            type: ManageSectorsEvents.SetSectors,\n            sectors: [...sectors]\n        };\n        return dispatch(action);\n    }\n}\n\nexport const toggleAddNewSector: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: ManageSectorsEvents.ToggleAddNewSector\n        });\n    }\n}\n\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: AddNewSectorTextChangedAction = {\n            type: ManageSectorsEvents.AddNewSectorTextChanged,\n            value: event.target.value\n        };\n        return dispatch(action);\n    }\n}\n\nexport const addNewSector: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\n        const newSector: string = getState().ManageSectorsLocalState.newSector;\n        sectors.push(newSector);\n        dispatch(setSectors(sectors));\n        return dispatch(toggleAddNewSector());\n    }\n}\n\nexport const deleteSector: ActionCreator<any> = (sector: string) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\n        const index = sectors.findIndex(eSector => eSector === sector);\n        if (index !== -1) {\n            sectors.splice(index, 1);\n        }\n        return dispatch(setSectors(sectors));\n    }\n}\n\nexport const cancelSectorsChanges: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const systemAttributes: SystemAttributes | null = getState().ManageSystemAttributesState.systemAttributes;\n        if (!systemAttributes) {\n            return;\n        }\n        return dispatch(setSectors([...systemAttributes.Sectors]));\n    }\n}\n\nexport const saveSectorsChanges: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const systemAttributes: SystemAttributes | null = JSON.parse(JSON.stringify(getState().ManageSystemAttributesState.systemAttributes));\n        if (!systemAttributes) {\n            return;\n        }\n        const sectors: string[] = [...getState().ManageSectorsLocalState.sectors];\n        const completeAction: CompletedSavingSectorsChangesAction = {\n            type: ManageSectorsEvents.CompletedSavingSectorsChanges\n        };\n        try {\n            systemAttributes.Sectors = sectors;\n            dispatch({\n                type: ManageSectorsEvents.SavingSectorsChanges\n            });\n            await new SystemAttributesRepository().updateSystemAttributes(systemAttributes);\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\n            return dispatch(completeAction);\n        }\n    }\n}","import React, {Component} from 'react';\nimport FlexView from 'react-flexview';\nimport HashLoader from 'react-spinners/HashLoader';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport Sidebar from 'react-sidebar';\nimport {css, StyleSheet} from 'aphrodite';\nimport {Badge, IconButton, Typography} from '@material-ui/core';\nimport Menu from '@material-ui/icons/Menu';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\n\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\nimport SidebarContent, {\n    CHANGE_PASSWORD_TAB,\n    EXPLORE_GROUPS_TAB,\n    HOME_TAB,\n    PROFILE_TAB,\n    RESOURCES_TAB,\n} from '../../shared-components/nav-bars/SidebarContent';\nimport {AUTH_SUCCESS} from '../signin/Signin';\nimport ProfileTab from '../../shared-components/profile/Profile';\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\nimport UploadingDialog from '../../shared-components/uploading-dialog/UploadingDialog';\nimport EditImageDialog from '../../shared-components/edit-image/EditImageDialog';\nimport UploadVideoDialog from '../../shared-components/edit-video/EditVideoDialog';\n\nimport queryString from 'query-string';\n\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport * as colors from '../../values/colors';\nimport * as ROUTES from '../../router/routes';\n\nimport {connect} from 'react-redux';\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\nimport Resources from \"../resources/Resources\";\n\nimport {safeGetItem, safeRemoveItem} from \"../../utils/browser\";\n\nconst mapStateToProps = state => {\n    return {\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\n\n        clubAttributes: state.manageClubAttributes.clubAttributes,\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\n\n        authStatus: state.auth.authStatus,\n        authenticating: state.auth.authenticating,\n        user: state.auth.user,\n        userLoaded: state.auth.userLoaded,\n\n        notifications: state.manageNotifications.notifications,\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\n        notificationBellRef: state.manageNotifications.notificationBellRef,\n\n        editUserProfile_userEdited: state.editUser.userEdited\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\n\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\n\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\n\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\n\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\n        notificationRefUpdated: (ref) => dispatch(notificationsActions.notificationRefUpdated(ref)),\n    }\n};\n\nclass InvestorDashboard extends Component {\n    constructor(props) {\n        super(props);\n\n        this.notificationBell = React.createRef();\n    }\n\n    componentDidMount() {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            setGroupUserNameFromParams,\n            setExpectedAndCurrentPathsForChecking,\n            loadAngelNetwork,\n\n            notificationRefUpdated,\n\n            history,\n            match,\n        } = this.props;\n\n        const redirectTo = safeGetItem('redirectToAfterAuth');\n        if (redirectTo) {\n            safeRemoveItem('redirectToAfterAuth');\n            history.push(redirectTo);\n        }\n\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.DASHBOARD_INVESTOR : ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER, match.path);\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.setDataForComponents();\n        }\n\n        notificationRefUpdated(this.notificationBell.current);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            loadAngelNetwork,\n\n            notificationRefUpdated\n        } = this.props;\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.setDataForComponents();\n        }\n\n        notificationRefUpdated(this.notificationBell.current);\n    }\n\n    /**\n     * Set required data for components used within this dashboard\n     */\n    setDataForComponents = () => {\n        const {\n            user,\n            editUserProfile_userEdited,\n\n            editUserProfile_setOriginalUserAndEditedUser,\n            // projectsTable_setUser\n        } = this.props;\n\n        if (!user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\n            return;\n        }\n\n        if (!editUserProfile_userEdited) {\n            // initialize a copied instance of the user for editing\n            editUserProfile_setOriginalUserAndEditedUser(user);\n        }\n\n        // // set user so that information can be used in the projects table component\n        // projectsTable_setUser(user);\n    };\n\n    /**\n     * This function gets called to change the main content of the page based on the tab chosen in the sidebar.\n     */\n    renderPageContent = () => {\n\n        const params = queryString.parse(this.props.location.search);\n\n        /**\n         * HOME TAB\n         */\n        if (params.tab === HOME_TAB) {\n            return <ExploreOffers/>;\n        }\n\n        /**\n         * PROFILE TAB\n         */\n        if (params.tab === PROFILE_TAB) {\n            return (\n                <ProfileTab/>\n            );\n        }\n\n        /**\n         * CHANGE PASSWORD TAB\n         */\n        if (params.tab === CHANGE_PASSWORD_TAB) {\n            return (\n                <ChangePasswordPage/>\n            );\n        }\n\n        /**\n         * EXPLORE GROUPS TAB\n         */\n        if (params.tab === EXPLORE_GROUPS_TAB) {\n            // return (\n            //     <ExploreGroupsTab/>\n            // );\n            return <ExploreGroups/>;\n        }\n\n        /**\n         * FORUMS TAB\n         */\n        // if (params.tab === FORUMS_TAB) {\n        //     return (\n        //         <Forums/>\n        //     );\n        // }\n\n        /**\n         * RESOURCES TAB\n         */\n        if (params.tab === RESOURCES_TAB) {\n            return (\n                <Resources/>\n            );\n        }\n    };\n\n    render() {\n        const {\n            shouldLoadOtherData,\n            groupProperties,\n            groupPropertiesLoaded,\n\n            sidebarDocked,\n            sidebarOpen,\n\n            authStatus,\n            authenticating,\n            user,\n            userLoaded,\n\n            notifications,\n            notificationsAnchorEl,\n\n            toggleSidebar,\n            toggleNotifications\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader color={colors.primaryColor}/>\n                </FlexView>\n            );\n        }\n\n        if (!shouldLoadOtherData) {\n            return <PageNotFoundWhole/>;\n        }\n\n        if (authenticating || !userLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader\n                        color={\n                            !groupProperties\n                                ?\n                                colors.primaryColor\n                                :\n                                groupProperties.settings.primaryColor\n                        }\n                    />\n                </FlexView>\n            );\n        }\n\n        if (authStatus !== AUTH_SUCCESS || !user || (user && user.type !== DB_CONST.TYPE_INVESTOR)) {\n            return <PageNotFoundWhole/>;\n        }\n\n        return (\n            <Sidebar\n                sidebar={\n                    <SidebarContent dashboardProps={this.props}/>\n                }\n                open={sidebarOpen}\n                docked={sidebarDocked}\n                onSetOpen={() => toggleSidebar(true)}\n                transitions\n                shadow={false}\n                styles={{sidebar: {backgroundColor: colors.blue_gray_50}, content: {backgroundColor: colors.gray_50}}}>\n\n                <Container fluid style={{padding: 0}}>\n                    {/** Header */}\n                    <Row noGutters>\n                        <Col xs={12} sm={12} md={12} lg={12}>\n                            <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\n                                style={{\n                                    backgroundColor:\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                }}>\n                                <Row noGutters style={{width: \"100%\"}}>\n                                    {/** Page title */}\n                                    <Col xs={10} sm={10} md={11} lg={11}>\n                                        <FlexView vAlignContent=\"center\" width=\"100%\">\n                                            {\n                                                <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\n                                                    <Menu/>\n                                                </IconButton>\n                                            }\n                                            {\n                                                this.renderPageTitle()\n                                            }\n                                        </FlexView>\n                                    </Col>\n\n                                    {/** Notification icon */}\n                                    <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\n                                        <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\">\n                                            <div ref={this.notificationBell}>\n                                            <IconButton onClick={toggleNotifications}>\n                                                <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\n                                                    <NotificationsIcon className={css(sharedStyles.white_text)}/>\n                                                </Badge>\n                                            </IconButton>\n                                            </div>\n                                        </FlexView>\n                                    </Col>\n                                </Row>\n                            </FlexView>\n                        </Col>\n                    </Row>\n\n                    {\n                        this.renderPageContent()\n                    }\n\n                    {/** Notifications box */}\n                    {notificationsAnchorEl !== null &&\n                        <NotificationsBox/>\n                    }\n\n                    {/** Uploading dialog */}\n                    <UploadingDialog/>\n\n                    {/** Edit image dialog */}\n                    <EditImageDialog/>\n\n                    {/** Upload video dialog */}\n                    <UploadVideoDialog/>\n\n                </Container>\n            </Sidebar>\n        );\n    }\n\n    /**\n     * Render page's title\n     *\n     * @returns {*}\n     */\n    renderPageTitle = () => {\n        const params = queryString.parse(this.props.location.search);\n\n        let title = '';\n\n        switch (params.tab) {\n            case HOME_TAB:\n                title = HOME_TAB;\n                break;\n            case PROFILE_TAB:\n                title = PROFILE_TAB;\n                break;\n            // case MY_PLEDGES_TAB:\n            //     title = MY_PLEDGES_TAB;\n            //     break;\n            // case FORUMS_TAB:\n            //     title = FORUMS_TAB;\n            //     break;\n            case RESOURCES_TAB:\n                title = RESOURCES_TAB;\n                break;\n            case CHANGE_PASSWORD_TAB:\n                title = CHANGE_PASSWORD_TAB;\n                break;\n            case EXPLORE_GROUPS_TAB:\n                title = EXPLORE_GROUPS_TAB;\n                break;\n            default:\n                return;\n        }\n\n        return (\n            <Typography variant=\"h6\" className={css(styles.page_title)}>{title}</Typography>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InvestorDashboard);\n\nconst styles = StyleSheet.create({\n    page_title: {\n        fontSize: 19,\n        marginLeft: 8,\n        color: colors.white\n    }\n});","import axios from \"axios\";\nimport {ApiRoutes} from \"../api/Api.tsx\";\nimport firebase from \"../firebase/firebaseApp\";\n\n/**\n * Check is an email address is valid\n *\n * @param email\n * @returns {boolean}\n */\nexport const isValidEmailAddress = (email) => {\n    let RegExp = /^(([^<>()\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return RegExp.test(email.trim().toLowerCase());\n}\n\nexport const EMAIL_ENQUIRY = 0;\nexport const EMAIL_INVITATION = 1;\n\nexport const sendEmail = async (\n    {\n        serverURL,\n        emailType,\n        data\n    }\n) => {\n    return new Promise(async (resolve, reject) => {\n        let requestConfig = {};\n\n        try {\n            // make authenticated request when sending invitation email\n            if (emailType === EMAIL_INVITATION) {\n                // get current user's id token\n                const idToken = await firebase.auth().currentUser.getIdToken(true);\n\n                requestConfig = {\n                    headers: {\n                        'Authorization': idToken\n                    }\n                };\n            }\n\n            await axios\n                .post(\n                    `${serverURL}${ApiRoutes.sendEmailRoute}`,\n                    {\n                        emailType,\n                        emailInfo: data\n                    },\n                    requestConfig\n                );\n\n            return resolve();\n        } catch (error) {\n            return reject(error);\n        }\n    });\n};","import firebase from '../../firebase/firebaseApp';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as myUtils from '../../utils/utils';\nimport * as emailUtils from '../../utils/emailUtils';\nimport {\n    SEND_INVITATION_ERROR_HAPPENED,\n    SEND_INVITATION_INVITED_BEFORE,\n    SEND_INVITATION_PROCESSING,\n    SEND_INVITATION_SUCCESS,\n    SEND_INVITATION_USER_CANNOT_BE_INVITED\n} from '../../pages/admin/components/InvitationDialog';\nimport * as ROUTES from '../../router/routes';\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\nimport * as utils from \"../../utils/utils\";\n\nexport const TOGGLE_INVITATION_DIALOG = 'TOGGLE_INVITATION_DIALOG';\nexport const toggleInvitationDialog = () => {\n    return {\n        type: TOGGLE_INVITATION_DIALOG\n    }\n};\n\nexport const INVITATION_DIALOG_INPUT_CHANGED = 'INVITATION_DIALOG_INPUT_CHANGED';\nexport const handleInputChanged = event => {\n    return {\n        type: INVITATION_DIALOG_INPUT_CHANGED,\n        event\n    }\n};\n\nexport const INVITATION_DIALOG_SEND_BUTTON_CLICKED = 'INVITATION_DIALOG_SEND_BUTTON_CLICKED';\nexport const INVITATION_DIALOG_SEND_RESULT_CHANGED = 'INVITATION_DIALOG_SEND_RESULT_CHANGED';\nexport const sendInvitation = () => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: INVITATION_DIALOG_SEND_BUTTON_CLICKED\n        });\n\n        const {\n            title,\n            firstName,\n            lastName,\n            email,\n            userType\n        } = getState().manageInvitationDialog;\n\n        if (title === DB_CONST.USER_TITLES[0]\n            || firstName.trim().length === 0\n            || lastName.trim().length === 0\n            || email.trim().length === 0\n            || userType.trim().length === 0) {\n            return;\n        }\n\n        dispatch({\n            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n            result: SEND_INVITATION_PROCESSING\n        });\n\n        //TODO: If the invitation has been sent to this user, check if this user belongs to this course\n        // If yes, display a message saying this user is already an investor/issuer in this course\n        // Otherwise, display a message saying this user is an investor/issuer in ABC course.\n        // Then, ask if the admin wants to invite this user to his course?\n        // Yes --> Send a notification to the user\n        // No --> Dismiss\n\n        const currentGroupAdmin = getState().auth.user;\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\n\n        realtimeDBUtils\n            .loadAngelNetworksInvitedAUser(email)\n            .then(angelNetworksInvitedUser => {\n\n                let invitedBefore = false;\n                let userIsAnIssuerOfAnotherGroup = false;\n\n                for (let angelNetworkInvitedUser of angelNetworksInvitedUser) {\n                    // user has been invited by this group before\n                    if (angelNetworkInvitedUser.Invitor.anid === groupProperties.anid) {\n                        invitedBefore = true;\n                        dispatch({\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                            result: SEND_INVITATION_INVITED_BEFORE,\n                            extraInfo: angelNetworkInvitedUser.Invitee\n                        });\n                        break;\n                    }\n\n                    // user is an issuer of another course\n                    if (angelNetworkInvitedUser.Invitee.type === DB_CONST.TYPE_ISSUER && angelNetworkInvitedUser.Invitor.anid !== groupProperties.anid) {\n                        userIsAnIssuerOfAnotherGroup = true;\n                        dispatch({\n                            type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                            result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\n                            extraInfo: null\n                        });\n                        break;\n                    }\n                }\n\n                if (invitedBefore) {\n                    return;\n                }\n\n                if (userIsAnIssuerOfAnotherGroup) {\n                    return;\n                }\n\n                // the user has not been invited before by this course\n                if (!invitedBefore) {\n                    // check if user is an admin\n                    realtimeDBUtils\n                        .doesUserExist(email)\n                        .then(result => {\n                            // user is an admin\n                            if (result.userExists && result.hasOwnProperty('userIsAnAdmin') && result.userIsAnAdmin) {\n                                dispatch({\n                                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                                    result: SEND_INVITATION_USER_CANNOT_BE_INVITED,\n                                    extraInfo: null\n                                });\n                                return;\n                            }\n\n                            const invitedID = firebase\n                                .database()\n                                .ref(DB_CONST.INVITED_USERS_CHILD)\n                                .push()\n                                .key;\n\n                            const invitedUser = {\n                                title: title,\n                                firstName: firstName,\n                                lastName: lastName,\n                                email: email.toLowerCase(),\n                                type: parseInt(userType),\n                                // registered or not registered\n                                status: DB_CONST.INVITED_USER_NOT_REGISTERED,\n                                // id of this invited user\n                                id: invitedID,\n                                // date invited\n                                invitedDate: myUtils.getCurrentDate(),\n                                invitedBy: groupProperties.anid\n                            };\n\n                            // send invitation email via server\n                            emailUtils\n                                .sendEmail({\n                                    serverURL: clubAttributes.serverURL,\n                                    emailType: emailUtils.EMAIL_INVITATION,\n                                    data: {\n                                        groupName: groupProperties.displayName,\n                                        groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\n                                        groupWebsite: groupProperties.website,\n                                        groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\n                                        sender: currentGroupAdmin.email,\n                                        receiver: invitedUser.email,\n                                        receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\n                                        userType:\n                                            invitedUser.type === DB_CONST.TYPE_ISSUER\n                                                ?\n                                                \"Issuer\"\n                                                :\n                                                \"Investor\"\n                                        ,\n                                        signupURL:\n                                            groupUserName\n                                                ?\n                                                `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\n                                                :\n                                                `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\n                                    }\n                                })\n                                .then(() => {\n                                    // add invited user to firebase when the email has been successfully sent\n                                    firebase\n                                        .database()\n                                        .ref(DB_CONST.INVITED_USERS_CHILD)\n                                        .child(invitedID)\n                                        .set(invitedUser)\n                                        .then(() => {\n\n                                            // track invitation sent activity\n                                            realtimeDBUtils\n                                                .trackActivity({\n                                                    userID: currentGroupAdmin.id,\n                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                                                    interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\n                                                    interactedObjectID: invitedUser.id,\n                                                    activitySummary:\n                                                        realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_SENT_A_USER_INVITATION\n                                                            .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\n                                                            .replace(\"%group%\", groupProperties.displayName)\n                                                            .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\n                                                    ,\n                                                    action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\n                                                        .replace(\":userID\", invitedUser.id)\n                                                    ,\n                                                    value: invitedUser\n                                                });\n\n                                            dispatch({\n                                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                                                result: SEND_INVITATION_SUCCESS,\n                                                extraInfo: null\n                                            });\n\n                                            dispatch({\n                                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                                                message: \"Email has been sent.\",\n                                                color: \"primary\",\n                                                position: \"bottom\"\n                                            });\n                                        });\n                                })\n                                .catch(error => {\n                                    dispatch({\n                                        type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                                        result: SEND_INVITATION_ERROR_HAPPENED,\n                                        extraInfo: null\n                                    });\n\n                                    dispatch({\n                                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                                        message: \"Error happened.\",\n                                        color: \"error\",\n                                        position: \"bottom\"\n                                    });\n                                });\n                        })\n                        .catch(error => {\n                            dispatch({\n                                type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                                result: SEND_INVITATION_ERROR_HAPPENED,\n                                extraInfo: null\n                            });\n\n                            dispatch({\n                                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                                message: \"Error happened.\",\n                                color: \"error\",\n                                position: \"bottom\"\n                            });\n                        });\n                }\n            })\n            .catch(error => {\n                dispatch({\n                    type: INVITATION_DIALOG_SEND_RESULT_CHANGED,\n                    result: SEND_INVITATION_ERROR_HAPPENED,\n                    extraInfo: null\n                });\n            });\n    }\n};","import React, {Component} from 'react';\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl,\n    FormControlLabel,\n    FormLabel,\n    IconButton,\n    MenuItem,\n    OutlinedInput,\n    Radio,\n    RadioGroup,\n    Select,\n    TextField,\n    Typography\n} from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport CloseIcon from '@material-ui/icons/Close';\nimport FlexView from 'react-flexview';\nimport {css} from 'aphrodite';\n\nimport {connect} from 'react-redux';\nimport * as invitationDialogActions from '../../../redux-store/actions/invitationDialogActions';\n\nimport * as DB_CONST from '../../../firebase/databaseConsts';\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\n\nexport const SEND_INVITATION_NONE = 0;\nexport const SEND_INVITATION_PROCESSING = 1;\nexport const SEND_INVITATION_INVITED_BEFORE = 2;\nexport const SEND_INVITATION_USER_CANNOT_BE_INVITED = 3; // user is an issuer in another group or an admin\nexport const SEND_INVITATION_ERROR_HAPPENED = 4;\nexport const SEND_INVITATION_SUCCESS = 5;\n\nconst mapStateToProps = state => {\n    return {\n        invitationDialogOpen: state.manageInvitationDialog.invitationDialogOpen,\n        title: state.manageInvitationDialog.title,\n        firstName: state.manageInvitationDialog.firstName,\n        lastName: state.manageInvitationDialog.lastName,\n        email: state.manageInvitationDialog.email,\n        userType: state.manageInvitationDialog.userType,\n        sendButtonClick: state.manageInvitationDialog.sendButtonClick,\n        sendResult: state.manageInvitationDialog.sendResult,\n        sendStatusExtraInfo: state.manageInvitationDialog.sendStatusExtraInfo\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        handleInputChanged: (event) => dispatch(invitationDialogActions.handleInputChanged(event)),\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog()),\n        sendInvitation: () => dispatch(invitationDialogActions.sendInvitation())\n    }\n};\n\nclass InvitationDialog extends Component {\n\n    render() {\n        const {\n            forwardedRef,\n            invitationDialogOpen,\n            title,\n            firstName,\n            lastName,\n            email,\n            userType,\n            sendButtonClick,\n            sendResult,\n            sendStatusExtraInfo,\n            toggleInvitationDialog,\n            handleInputChanged,\n            sendInvitation,\n            ...other\n        } = this.props;\n\n        return (\n            <Dialog ref={forwardedRef} open={invitationDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleInvitationDialog} {...other}>\n                <DialogTitle disableTypography>\n                    <FlexView vAlignContent=\"center\">\n                        <FlexView grow={4}>\n                            <Typography variant='h6' color='primary' align=\"left\">Send invitation email</Typography>\n                        </FlexView>\n                        <FlexView grow={1} hAlignContent=\"right\">\n                            <IconButton onClick={toggleInvitationDialog}>\n                                <CloseIcon/>\n                            </IconButton>\n                        </FlexView>\n                    </FlexView>\n                </DialogTitle>\n                <DialogContent style={{ marginTop: 10}}>\n                    <FormControl required error={sendButtonClick && title === DB_CONST.USER_TITLES[0]}>\n                        <FormLabel>Title</FormLabel>\n                        <Select name=\"title\" value={title} margin=\"dense\" input={<OutlinedInput/>} onChange={handleInputChanged}>\n                            {\n                                DB_CONST.USER_TITLES.map((title, id) => (\n                                    <MenuItem\n                                        key={id}\n                                        value={title}\n                                    >\n                                        {title}\n                                    </MenuItem>\n                                ))\n                            }\n                        </Select>\n                    </FormControl>\n\n                    <TextField\n                        label=\"First name\"\n                        placeholder=\"Write first name here ...\"\n                        name=\"firstName\"\n                        value={firstName}\n                        fullWidth\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                        required\n                        error={sendButtonClick && firstName.length === 0}\n                        onChange={handleInputChanged}/>\n\n                    <TextField\n                        label=\"Last name\"\n                        placeholder=\"Write last name here ...\"\n                        name=\"lastName\"\n                        value={lastName}\n                        fullWidth\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                        required\n                        error={sendButtonClick && lastName.length === 0}\n                        onChange={handleInputChanged}/>\n\n                    <TextField\n                        label=\"Email\"\n                        placeholder=\"Write email here ...\"\n                        name=\"email\"\n                        value={email}\n                        fullWidth\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                        required\n                        error={sendButtonClick && email.length === 0}\n                        onChange={handleInputChanged}/>\n\n                    <FlexView marginTop={20}>\n                        <FormControl required error={sendButtonClick && userType.length === 0}>\n                            <FormLabel>User type</FormLabel>\n                            <RadioGroup row name=\"userType\" value={userType} onChange={handleInputChanged}>\n                                <FormControlLabel value={DB_CONST.TYPE_ISSUER.toString()} control={<Radio color='primary'/>} label=\"Issuer\"/>\n                                <FormControlLabel value={DB_CONST.TYPE_INVESTOR.toString()} control={<Radio color='primary'/>} label=\"Investor\"/>\n                            </RadioGroup>\n                        </FormControl>\n                    </FlexView>\n                </DialogContent>\n                <DialogActions>\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} hAlignContent=\"right\" vAlignContent=\"center\">\n                        {\n                            this.renderRespondCode()\n                        }\n                        <Button variant=\"outlined\" color=\"primary\" onClick={sendInvitation} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 35}}>Send\n                            <SendIcon fontSize=\"small\" style={{marginLeft: 8}}/>\n                        </Button>\n                    </FlexView>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n\n    /**\n     * Render send result\n     *\n     * @returns {null|*}\n     */\n    renderRespondCode = () => {\n        const {\n            sendResult,\n            sendStatusExtraInfo\n        } = this.props;\n\n        let res = {\n            msg: '',\n            color: ''\n        };\n\n        switch (sendResult) {\n            case SEND_INVITATION_NONE:\n                return null;\n            case SEND_INVITATION_PROCESSING:\n                res.msg = \"Checking...\";\n                res.color = \"primary\";\n                break;\n            case SEND_INVITATION_INVITED_BEFORE:\n                res.msg =\n                    sendStatusExtraInfo.hasOwnProperty('officialUserID')\n                        ?\n                        `This user is already an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} in your group.`\n                        :\n                        `You have invited this user as an ${sendStatusExtraInfo.type === DB_CONST.TYPE_INVESTOR ? 'investor' : 'issuer'} before.`;\n                res.color = \"error\";\n                break;\n            case SEND_INVITATION_USER_CANNOT_BE_INVITED:\n                res.msg = \"User is an admin or an issuer of another group.\";\n                res.color = \"error\";\n                break;\n            case SEND_INVITATION_ERROR_HAPPENED:\n                res.msg = \"Error happened. Couldn't invite this user.\";\n                res.color = \"error\";\n                break;\n            case SEND_INVITATION_SUCCESS:\n                res.msg = \"Invitation has been sent to this user.\";\n                res.color = \"primary\";\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <Typography\n                color={res.color}\n                variant=\"subtitle1\"\n            >\n                {res.msg}\n            </Typography>\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(\n    React.forwardRef((props, ref) => <InvitationDialog {...props} forwardedRef={ref}/>)\n);","import * as myUtils from '../../utils/utils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport firebase from '../../firebase/firebaseApp';\n\nexport const SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED = 'SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED';\nexport const initializeClubAttributesEdited = () => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED,\n            clubAttributes: getState().manageClubAttributes.clubAttributes\n        });\n    }\n};\n\nexport const SUPER_ADMIN_SETTINGS_INPUT_CHANGED = 'SUPER_ADMIN_SETTINGS_INPUT_CHANGED';\nexport const handleInputChanged = event => {\n    return (dispatch, getState) => {\n        const clubAttributesEdited = getState().superAdminSettings.clubAttributesEdited;\n        const target = event.target;\n\n        let isPropertyOfClubAttributes = false;\n\n        switch (target.type) {\n            case 'checkbox':\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\n                    firebase\n                        .database()\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n                        .child(target.name)\n                        .set(target.checked);\n\n                    return;\n                }\n                break;\n            case 'radio':\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\n                    firebase\n                        .database()\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n                        .child(target.name)\n                        .set(!isNaN(target.value) ? parseInt(target.value) : target.value);\n\n                    return;\n                }\n                break;\n            case 'text':\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\n                    isPropertyOfClubAttributes = true;\n\n                    firebase\n                        .database()\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n                        .child(target.name)\n                        .set(target.value);\n                }\n                break;\n            case 'textarea':\n                if (clubAttributesEdited.hasOwnProperty(target.name)) {\n                    isPropertyOfClubAttributes = true;\n\n                    firebase\n                        .database()\n                        .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n                        .child(target.name)\n                        .set(target.value);\n                }\n                break;\n            default:\n                return;\n        }\n\n        dispatch({\n            type: SUPER_ADMIN_SETTINGS_INPUT_CHANGED,\n            name: target.name,\n            value: target.type === 'checkbox' ? target.checked : target.value,\n            isPropertyOfClubAttributes\n        });\n    }\n};\n\nexport const SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED = 'SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED';\nexport const handleQuillEditorChanged = (fieldName, content, delta, source, editor) => {\n    return (dispatch, getState) => {\n        if (editor.getText().trim().length === 0) {\n            dispatch({\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\n                fieldName,\n                value: {ops: []}\n            });\n        } else {\n            dispatch({\n                type: SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED,\n                fieldName,\n                value: editor.getContents()\n            });\n        }\n    }\n};\n\nexport const saveEditedQuill = fieldName => {\n    return (dispatch, getState) => {\n        firebase\n            .database()\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n            .child(fieldName)\n            .set(getState().superAdminSettings.clubAttributesEdited[fieldName])\n    }\n};\n\nexport const SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\n    return (dispatch, getState) => {\n\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\n\n        if (isExpanded) {\n            dispatch({\n                type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\n                expandedPledgeFAQ: FAQ,\n                editExpandedPledgeFAQ: false\n            });\n        } else {\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\n                dispatch({\n                    type: SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\n                    expandedPledgeFAQ: null,\n                    editExpandedPledgeFAQ: false\n                });\n            }\n        }\n    }\n};\n\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\nexport const toggleEditExpandedPledgeFAQ = () => {\n    return {\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\n    }\n};\n\nexport const SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\nexport const toggleAddNewPledgeFAQ = () => {\n    return {\n        type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\n    }\n};\n\nexport const submitNewPledgeFAQ = () => {\n    return (dispatch, getState) => {\n        const {\n            addedPledgeQuestion,\n            addedPledgeAnswer\n        } = getState().superAdminSettings;\n\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributes);\n\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\n            return;\n        }\n\n        const faq = {\n            id: myUtils.getCurrentDate(),\n            question: addedPledgeQuestion,\n            answer: addedPledgeAnswer\n        };\n\n        if (clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\n        } else {\n            clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\n        }\n\n        firebase\n            .database()\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\n            .update(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\n            .then(() => {\n                dispatch({\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\n                });\n            });\n    }\n};\n\nexport const saveEditedPledgeFAQ = () => {\n    return (dispatch, getState) => {\n        const {\n            clubAttributesEdited,\n            expandedPledgeFAQ,\n            editedPledgeQuestion,\n            editedPledgeAnswer\n        } = getState().superAdminSettings;\n\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\n            return;\n        }\n\n        const editedFAQ = {\n            id: expandedPledgeFAQ.id,\n            question: editedPledgeQuestion,\n            answer: editedPledgeAnswer\n        };\n\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\n\n        firebase\n            .database()\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\n            .then(() => {\n                dispatch({\n                    type: SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\n                });\n            });\n    }\n};\n\nexport const deleteExistingPledgeFAQ = () => {\n    return (dispatch, getState) => {\n        const expandedPledgeFAQ = getState().superAdminSettings.expandedPledgeFAQ;\n        const clubAttributesEdited = Object.assign({}, getState().manageClubAttributes.clubAttributesEdited);\n\n        let index = clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\n        clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\n\n        firebase\n            .database()\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD)\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\n            .set(clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\n    }\n};\n\n\n","import Api, {ApiRoutes} from \"../Api\";\nimport {SystemAttributes} from \"../../models/system_attributes\";\n\nexport default class SystemAttributesRepository {\n\n    /**\n     * Fetch system attributes\n     */\n    public async getSystemAttributes() {\n        return await new Api()\n            .request(\"get\", ApiRoutes.retrieveSystemAttributesRoute);\n    }\n\n    /**\n     * Update system attributes\n     */\n    public async updateSystemAttributes(systemAttributes: SystemAttributes) {\n        return await new Api()\n            .request(\n                \"put\",\n                ApiRoutes.updateSystemAttributesRoute,\n                {\n                    requestBody: systemAttributes,\n                    queryParameters: null\n                }\n            );\n    }\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../reducers\";\nimport Error from \"../../models/error\";\nimport {SystemAttributes} from \"../../models/system_attributes\";\nimport SystemAttributesRepository from \"../../api/repositories/SystemAttributesRepository\";\nimport {setSectors} from \"../../pages/admin/components/manage-sectors/ManageSectorsActions\";\n\nexport enum ManageSystemAttributesEvents {\n    LoadingSystemAttributes = \"ManageSystemAttributesEvents.LoadingSystemAttributes\",\n    FinishedLoadingSystemAttributes = \"ManageSystemAttributesEvents.FinishedLoadingSystemAttributes\"\n}\n\nexport interface ManageSystemAttributesAction extends Action {\n}\n\nexport interface FinishedLoadingSystemAttributesAction extends ManageSystemAttributesAction {\n    systemAttributes: SystemAttributes | null;\n    error?: Error;\n}\n\nexport const loadSystemAttributes: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            systemAttributes,\n            systemAttributesLoaded,\n            loadingSystemAttributes\n        } = getState().ManageSystemAttributesState;\n\n        if (!systemAttributesLoaded && !loadingSystemAttributes && !systemAttributes) {\n            dispatch({\n                type: ManageSystemAttributesEvents.LoadingSystemAttributes\n            });\n\n            const finishedAction: FinishedLoadingSystemAttributesAction = {\n                type: ManageSystemAttributesEvents.FinishedLoadingSystemAttributes,\n                systemAttributes: null\n            }\n\n            try {\n                const response = await new SystemAttributesRepository().getSystemAttributes();\n                const systemAttributes: SystemAttributes = response.data;\n                finishedAction.systemAttributes = systemAttributes;\n                dispatch(setSectors(systemAttributes.Sectors))\n                return dispatch(finishedAction);\n            } catch (error) {\n                finishedAction.error = {\n                    detail: error.toString()\n                };\n                return dispatch(finishedAction);\n            }\n        }\n    }\n}","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {PitchDocument} from \"../../models/project\";\nimport {AppState} from \"../../redux-store/reducers\";\n\nexport enum DocumentsDownloadEvents {\n    OpenRiskWarningDialog = \"DocumentsDownloadEvents.OpenRiskWarningDialog\",\n    CloseRiskWarningDialog = \"DocumentsDownloadEvents.CloseRiskWarningDialog\"\n}\n\nexport interface DocumentsDownloadAction extends Action {\n\n}\n\nexport interface DocumentClickAction extends DocumentsDownloadAction {\n    selectedDocument?: PitchDocument;\n}\n\nexport const onDocumentClick: ActionCreator<any> = (document: PitchDocument, shouldShowRiskWarning: boolean) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        if (!shouldShowRiskWarning) {\n            window.open(document.downloadURL, \"_blank\");\n            return;\n        }\n        const action: DocumentClickAction = {\n            type: DocumentsDownloadEvents.OpenRiskWarningDialog,\n            selectedDocument: document\n        };\n        return dispatch(action);\n    }\n}\n\nexport const onAcceptRiskWarningClick: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            selectedDocument\n        } = getState().DocumentsDownloadLocalState;\n        if (selectedDocument === undefined) {\n            return;\n        }\n        window.open(selectedDocument.downloadURL, \"_blank\");\n        return dispatch({\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\n        });\n    }\n}\n\nexport const onCancelRiskWarningClick: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: DocumentsDownloadEvents.CloseRiskWarningDialog\n        });\n    }\n}","import {\n    FinishedLoadingSystemAttributesAction,\n    ManageSystemAttributesAction,\n    ManageSystemAttributesEvents\n} from \"../actions/manageSystemAttributesActions\";\nimport Error from \"../../models/error\";\nimport {SystemAttributes} from \"../../models/system_attributes\";\n\nexport interface ManageSystemAttributesState {\n    systemAttributes: SystemAttributes | null;\n    systemAttributesLoaded: boolean;\n    loadingSystemAttributes: boolean;\n    error?: Error;\n}\n\nconst initialState: ManageSystemAttributesState = {\n    systemAttributes: null,\n    systemAttributesLoaded: false,\n    loadingSystemAttributes: false\n}\n\nexport const isLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\n    return state.loadingSystemAttributes;\n}\n\nexport const successfullyLoadedSystemAttributes = (state: ManageSystemAttributesState) => {\n    return state.systemAttributes && state.error === undefined;\n}\n\nexport const hasErrorLoadingSystemAttributes = (state: ManageSystemAttributesState) => {\n    return state.error !== undefined;\n}\n\nconst manageSystemAttributesReducer = (state = initialState, action: ManageSystemAttributesAction) => {\n    switch (action.type) {\n        case ManageSystemAttributesEvents.LoadingSystemAttributes:\n            return {\n                ...state,\n                systemAttributes: null,\n                systemAttributesLoaded: false,\n                loadingSystemAttributes: true\n            }\n        case  ManageSystemAttributesEvents.FinishedLoadingSystemAttributes:\n            const finishedAction: FinishedLoadingSystemAttributesAction = (action as FinishedLoadingSystemAttributesAction);\n            return {\n                ...state,\n                systemAttributes: finishedAction.systemAttributes,\n                systemAttributesLoaded: true,\n                loadingSystemAttributes: false,\n                error: finishedAction.error\n            }\n        default:\n            return state;\n    }\n}\n\nexport default manageSystemAttributesReducer;","import {\n    AddNewSectorTextChangedAction,\n    CompletedSavingSectorsChangesAction,\n    ManageSectorsAction,\n    ManageSectorsEvents,\n    SetSectorsAction\n} from \"./ManageSectorsActions\";\nimport Error from \"../../../../models/error\";\n\nexport interface ManageSectorsState {\n    addingNewSector: boolean;\n    newSector: string;\n    sectors: string[];\n    savingSectors: boolean;\n    errorSavingSectors?: Error;\n}\n\nconst initialState: ManageSectorsState = {\n    addingNewSector: false,\n    newSector: \"\",\n    sectors: [],\n    savingSectors: false\n}\n\nexport const isSavingSectorsChanges = (state: ManageSectorsState) => {\n    return state.savingSectors;\n}\n\nexport const manageSectorsReducer = (state = initialState, action: ManageSectorsAction) => {\n    switch (action.type) {\n        case ManageSectorsEvents.SetSectors:\n            const setSectorsAction: SetSectorsAction = action as SetSectorsAction;\n            return {\n                ...state,\n                sectors: setSectorsAction.sectors\n            }\n        case ManageSectorsEvents.ToggleAddNewSector:\n            return {\n                ...state,\n                addingNewSector: !state.addingNewSector,\n                newSector: \"\"\n            }\n        case ManageSectorsEvents.AddNewSectorTextChanged:\n            const addNewSectorTextChangedAction: AddNewSectorTextChangedAction = action as AddNewSectorTextChangedAction;\n            return {\n                ...state,\n                newSector: addNewSectorTextChangedAction.value\n            }\n        case ManageSectorsEvents.SavingSectorsChanges:\n            return {\n                ...state,\n                savingSectors: true,\n                errorSavingSectors: undefined\n            }\n        case ManageSectorsEvents.CompletedSavingSectorsChanges:\n            const completedSavingSectorsChanges: CompletedSavingSectorsChangesAction = action as CompletedSavingSectorsChangesAction;\n            return {\n                ...state,\n                savingSectors: false,\n                errorSavingSectors: completedSavingSectorsChanges.error !== undefined\n                    ? {detail: completedSavingSectorsChanges.error} : state.errorSavingSectors\n            }\n        default:\n            return state;\n    }\n}\n\nexport default manageSectorsReducer;","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {Box, Button, IconButton, TextField, Typography} from \"@material-ui/core\";\nimport {\n    ManageSystemAttributesState,\n    successfullyLoadedSystemAttributes\n} from \"../../../../redux-store/reducers/manageSystemAttributesReducer\";\nimport {isSavingSectorsChanges, ManageSectorsState} from \"./ManageSectorsReducer\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport {\n    addNewSector,\n    cancelSectorsChanges, deleteSector,\n    onTextChanged,\n    saveSectorsChanges,\n    toggleAddNewSector\n} from \"./ManageSectorsActions\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\n\ninterface ManageSectorsProps {\n    ManageSystemAttributesState: ManageSystemAttributesState;\n    ManageSectorsLocalState: ManageSectorsState;\n    toggleAddNewSector: () => any;\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\n    addNewSector: () => any;\n    deleteSector: (sector: string) => any;\n    saveSectorsChanges: () => any;\n    cancelSectorsChanges: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\n        ManageSectorsLocalState: state.ManageSectorsLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggleAddNewSector: () => dispatch(toggleAddNewSector()),\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\n        addNewSector: () => dispatch(addNewSector()),\n        deleteSector: (sector: string) => dispatch(deleteSector(sector)),\n        saveSectorsChanges: () => dispatch(saveSectorsChanges()),\n        cancelSectorsChanges: () => dispatch(cancelSectorsChanges())\n    }\n}\n\nclass ManageSectors extends Component<ManageSectorsProps, any> {\n    render() {\n        const {\n            ManageSystemAttributesState,\n            ManageSectorsLocalState,\n            toggleAddNewSector,\n            onTextChanged,\n            addNewSector,\n            deleteSector,\n            saveSectorsChanges,\n            cancelSectorsChanges\n        } = this.props;\n\n        if (!successfullyLoadedSystemAttributes(ManageSystemAttributesState)) {\n            return null;\n        }\n\n        return <Box>\n            <Typography variant=\"h6\" color=\"primary\">Edit sectors</Typography>\n\n            <Box height=\"15px\"/>\n\n            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => toggleAddNewSector()}>\n                {\n                    !ManageSectorsLocalState.addingNewSector\n                        ? <AddIcon/>\n                        : <CloseIcon/>\n                }\n\n                <Box\n                    width=\"6px\"\n                />\n                {\n                    !ManageSectorsLocalState.addingNewSector\n                        ? \"Add new sector\"\n                        : \"Cancel adding new sector\"\n                }\n            </Button>\n\n            {\n                !ManageSectorsLocalState.addingNewSector\n                    ? null\n                    : <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginTop=\"10px\">\n                        <TextField variant=\"outlined\" margin=\"dense\" onChange={onTextChanged}/>\n                        <Box width=\"15px\"/>\n                        <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => addNewSector()}>Add</Button>\n                      </Box>\n            }\n\n            <Box height=\"30px\"/>\n\n            {\n                ManageSectorsLocalState.sectors.map(sector => (\n                    <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\" marginBottom=\"10px\">\n                        <Typography align=\"left\" variant=\"body1\">{sector}\n                        </Typography>\n                        <Box width=\"10px\"/>\n                        <IconButton onClick={() => deleteSector(sector)} >\n                            <DeleteIcon fontSize=\"small\"/>\n                        </IconButton>\n                    </Box>\n                ))\n            }\n\n            <Box display=\"flex\" flexDirection=\"row\" marginTop=\"20px\">\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" onClick={() => cancelSectorsChanges()}>Cancel changes</Button>\n                <Box width=\"15px\"/>\n                <Button className={css(sharedStyles.no_text_transform)} variant=\"contained\" color=\"primary\" onClick={() => saveSectorsChanges()} disabled={isSavingSectorsChanges(ManageSectorsLocalState)}>\n                    {\n                        isSavingSectorsChanges(ManageSectorsLocalState)\n                            ? \"Saving ...\"\n                            : \"Save changes\"\n                    }\n                </Button>\n            </Box>\n        </Box>;\n    }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ManageSectors);","import React, {Component} from 'react';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport {css, StyleSheet} from 'aphrodite';\nimport {\n    Button,\n    Checkbox,\n    Divider,\n    ExpansionPanel,\n    ExpansionPanelDetails,\n    ExpansionPanelSummary,\n    FormControl,\n    FormControlLabel,\n    FormHelperText,\n    TextField,\n    Typography\n} from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport CloseIcon from '@material-ui/icons/Close';\nimport CreateIcon from '@material-ui/icons/CreateOutlined';\nimport DeleteIcon from '@material-ui/icons/DeleteOutlined';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n// React Quill - text editor\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\n\nimport * as ROUTES from '../../../router/routes';\nimport sharedStyles from '../../../shared-js-css-styles/SharedStyles';\nimport {NavLink} from 'react-router-dom';\nimport * as DB_CONST from '../../../firebase/databaseConsts';\nimport * as colors from '../../../values/colors';\nimport {connect} from 'react-redux';\nimport * as superAdminSettingsActions from '../../../redux-store/actions/superAdminSettingsActions';\nimport ManageSectors from \"./manage-sectors/ManageSectors\";\nimport FeedbackSnackbarNew from \"../../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\n\nconst mapStateToProps = state => {\n    return {\n        clubAttributes: state.manageClubAttributes.clubAttributes,\n        clubAttributesEdited: state.superAdminSettings.clubAttributesEdited,\n\n        addNewPledgeFAQ: state.superAdminSettings.addNewPledgeFAQ,\n        addedPledgeQuestion: state.superAdminSettings.addedPledgeQuestion,\n        addedPledgeAnswer: state.superAdminSettings.addedPledgeAnswer,\n        expandedPledgeFAQ: state.superAdminSettings.expandedPledgeFAQ,\n        editExpandedPledgeFAQ: state.superAdminSettings.editExpandedPledgeFAQ,\n        editedPledgeQuestion: state.superAdminSettings.editedPledgeQuestion,\n        editedPledgeAnswer: state.superAdminSettings.editedPledgeAnswer\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        initializeClubAttributesEdited: () => dispatch(superAdminSettingsActions.initializeClubAttributesEdited()),\n        handleInputChanged: (event) => dispatch(superAdminSettingsActions.handleInputChanged(event)),\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(superAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\n        toggleAddNewPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleAddNewPledgeFAQ()),\n        submitNewPledgeFAQ: () => dispatch(superAdminSettingsActions.submitNewPledgeFAQ()),\n        toggleEditExpandedPledgeFAQ: () => dispatch(superAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\n        saveEditedPledgeFAQ: () => dispatch(superAdminSettingsActions.saveEditedPledgeFAQ()),\n        deleteExistingPledgeFAQ: () => dispatch(superAdminSettingsActions.deleteExistingPledgeFAQ()),\n        handleQuillEditorChanged: (fieldName, content, delta, source, editor) => dispatch(superAdminSettingsActions.handleQuillEditorChanged(fieldName, content, delta, source, editor)),\n        saveEditedQuill: (fieldName) => dispatch(superAdminSettingsActions.saveEditedQuill(fieldName))\n    }\n};\n\nclass SuperAdminSettings extends Component {\n\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\n    };\n\n    handleQuillEditorChanged = fieldName => (content, delta, source, editor) => {\n        this.props.handleQuillEditorChanged(fieldName, content, delta, source, editor);\n    };\n\n    componentDidMount() {\n        const {\n            initializeClubAttributesEdited\n        } = this.props;\n\n        initializeClubAttributesEdited();\n    }\n\n    render() {\n        const {\n            clubAttributes,\n            clubAttributesEdited,\n\n            addNewPledgeFAQ,\n            addedPledgeQuestion,\n            addedPledgeAnswer,\n            expandedPledgeFAQ,\n            editExpandedPledgeFAQ,\n            editedPledgeQuestion,\n            editedPledgeAnswer,\n\n            handleInputChanged,\n            toggleAddNewPledgeFAQ,\n            submitNewPledgeFAQ,\n            toggleEditExpandedPledgeFAQ,\n            saveEditedPledgeFAQ,\n            deleteExistingPledgeFAQ,\n            saveEditedQuill\n        } = this.props;\n\n        if (!clubAttributes || !clubAttributesEdited) {\n            return null;\n        }\n\n        return (\n            <Container\n                fluid\n                style={{\n                    padding: 30\n                }}\n            >\n                <FeedbackSnackbarNew/>\n                <Row\n                    noGutters\n                >\n                    {/** Manage system's functions */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Typography variant=\"h6\" color=\"primary\">Manage system's functions</Typography>\n\n                        <FlexView marginTop={20}>\n                            <FormControl>\n                                <FormControlLabel name=\"allowVideoUpload\"\n                                    control={\n                                        <Checkbox color=\"primary\" value={clubAttributesEdited.allowVideoUpload} checked={clubAttributesEdited.allowVideoUpload} onChange={handleInputChanged}/>\n                                    }\n                                    label=\"Allow video upload\"\n                                    labelPlacement=\"end\"\n                                />\n                                <FormHelperText>\n                                    Allow videos (Introduction video in Profile page and Project cover video) to be\n                                    uploaded to the database.\n                                    When turned off, the users cannot upload videos from their machines, instead they\n                                    can only upload a video URL.\n                                </FormHelperText>\n                            </FormControl>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Support email */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Typography variant=\"h6\" color=\"primary\">Edit support email</Typography>\n\n                        <FlexView marginTop={20}>\n                            <TextField name=\"supportEmail\" label=\"Support email\" value={clubAttributesEdited.supportEmail} margin=\"normal\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit sectors */}\n                    <Col xs={12}sm={12} md={12} lg={12}>\n                        <ManageSectors/>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit FAQs in Pledge Page */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Typography variant=\"h6\" color=\"primary\">Edit FAQs in Pledge Page</Typography>\n\n                        <Button onClick={toggleAddNewPledgeFAQ} variant=\"outlined\" className={css(sharedStyles.no_text_transform)} style={{ marginTop: 18}}>\n                            {\n                                !addNewPledgeFAQ\n                                    ?\n                                    <AddIcon fontSize=\"small\" style={{marginRight: 6}}/>\n                                    :\n                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\n                            }\n                            {\n                                !addNewPledgeFAQ\n                                    ?\n                                    \"Add new FAQ\"\n                                    :\n                                    \"Cancel adding new FAQ\"\n                            }\n                        </Button>\n\n                        {\n                            !addNewPledgeFAQ\n                                ?\n                                null\n                                :\n                                <FlexView column marginTop={15}>\n                                    <TextField name=\"addedPledgeQuestion\" label=\"Question\" value={addedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required onChange={handleInputChanged}/>\n                                    <TextField name=\"addedPledgeAnswer\" label=\"Answer\" value={addedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} onChange={handleInputChanged} style={{marginTop: 10}}/>\n                                    <FlexView hAlignContent=\"right\" marginTop={10}>\n                                        <Button onClick={submitNewPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>Add</Button>\n                                    </FlexView>\n                                </FlexView>\n                        }\n\n                        <FlexView column marginTop={20}>\n                            {\n                                !clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]\n                                    ?\n                                    null\n                                    :\n                                    clubAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].map(FAQ => (\n                                        <ExpansionPanel key={FAQ.id} elevation={0} className={css(styles.frequently_asked_question_box)} expanded={(expandedPledgeFAQ && FAQ.id === expandedPledgeFAQ.id) ? true : false} onChange={this.handleExpandPledgeFAQPanel(FAQ)}>\n                                            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\n                                                <Typography variant=\"body2\" align=\"left\"><b>{FAQ.question}</b></Typography>\n                                            </ExpansionPanelSummary>\n\n                                            <ExpansionPanelDetails>\n                                                <FlexView column width=\"100%\">\n                                                    <Typography variant=\"body2\" align=\"left\">{FAQ.answer}</Typography>\n\n                                                    <FlexView marginTop={28}>\n                                                        <Button onClick={toggleEditExpandedPledgeFAQ} variant=\"outlined\" color={expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ ? \"default\" : \"primary\"} className={css(sharedStyles.no_text_transform)}>\n                                                            {\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\n                                                                    ?\n                                                                    <CloseIcon fontSize=\"small\" style={{marginRight: 6}}/>\n                                                                    :\n                                                                    <CreateIcon fontSize=\"small\" style={{ marginRight: 6}}/>\n                                                            }\n                                                            {\n                                                                expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\n                                                                    ?\n                                                                    \"Cancel editing\"\n                                                                    :\n                                                                    \"Edit\"\n                                                            }\n                                                        </Button>\n                                                        <Button onClick={deleteExistingPledgeFAQ} variant=\"outlined\" color=\"secondary\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 12}}>\n                                                            <DeleteIcon fontSize=\"small\" style={{ marginRight: 6}}/>\n                                                            Delete\n                                                        </Button>\n                                                    </FlexView>\n\n                                                    {\n                                                        expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id && editExpandedPledgeFAQ\n                                                            ?\n                                                            <FlexView column width=\"100%\" hAlignContent=\"right\" marginTop={12}>\n                                                                <TextField name=\"editedPledgeQuestion\" label=\"Question\" value={editedPledgeQuestion} margin=\"dense\" variant=\"outlined\" fullWidth required error={editedPledgeQuestion.trim().length === 0} onChange={handleInputChanged}/>\n                                                                <TextField name=\"editedPledgeAnswer\" label=\"Answer\" value={editedPledgeAnswer} margin=\"dense\" variant=\"outlined\" fullWidth required multiline rowsMax={5} error={editedPledgeAnswer.trim().length === 0} onChange={handleInputChanged} style={{marginTop: 10}}/>\n\n                                                                <Button onClick={saveEditedPledgeFAQ} variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)} style={{marginTop: 10}}>Save</Button>\n                                                            </FlexView>\n                                                            :\n                                                            null\n                                                    }\n                                                </FlexView>\n                                            </ExpansionPanelDetails>\n                                        </ExpansionPanel>\n                                    ))\n                            }\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit privacy policy */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView column>\n                            <Typography variant=\"h6\" color=\"primary\">Edit privacy policy</Typography>\n\n                            <NavLink to={ROUTES.PRIVACY_POLICY} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View privacy policy page</Button>\n                            </NavLink>\n\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('privacyPolicy')} modules={modules} value={clubAttributesEdited.hasOwnProperty('privacyPolicy') ? clubAttributesEdited.privacyPolicy : {ops: []}} style={{marginTop: 20 }}/>\n\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('privacyPolicy')} style={{marginLeft: 12}}>Save</Button>\n                            </FlexView>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit terms of use */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView column>\n                            <Typography variant=\"h6\" color=\"primary\">Edit terms of use</Typography>\n\n                            <NavLink to={ROUTES.TERMS_OF_USE} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{ marginTop: 30}}>\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View terms of use page</Button>\n                            </NavLink>\n\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('termsOfUse')} modules={modules} value={clubAttributesEdited.hasOwnProperty('termsOfUse') ? clubAttributesEdited.termsOfUse : {ops: []}} style={{marginTop: 20}}/>\n\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('termsOfUse')} style={{marginLeft: 12}}>Save</Button>\n                            </FlexView>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit risk warnings */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView column>\n                            <Typography variant=\"h6\" color=\"primary\">Edit risk warnings</Typography>\n\n                            {/** Risk warning footer */}\n                            <FlexView column marginTop={30}>\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning footer</b></Typography>\n                                <br/>\n                                <Typography variant=\"body1\" align=\"left\" color=\"textSecondary\">\n                                    Risk warning footer is used in the footer of the Explore Offers page and\n                                    the Pledge page.\n                                    <br/><br/>\n                                    As the course's name will be populated dynamically, therefore, anywhere in the text\n                                    that needs to use course's name, please replace it with <b><u>%groupName%</u></b>.\n                                    <br/><br/>\n                                    Also, this risk warning footer will need to have a URL that leads to the\n                                    risk warning page where the information will be further explained. Therefore, please\n                                    use the following format to express the URL:\n                                    <br/><br/>\n                                    <b><u>%URL%any text inside%URL%</u></b>. For example:&nbsp;\n                                    <b>%URL%Please click here to see full risk warning.%URL%</b>. The URL doesn't need\n                                    to be\n                                    put here manually, it will be done on the development side as long as the format\n                                    is correct.\n                                </Typography>\n                                <br/>\n                                <TextField variant=\"outlined\" name=\"riskWarningFooter\" placeholder=\"Edit risk warning footer\" value={clubAttributesEdited.riskWarningFooter} onChange={handleInputChanged} multiline rowsMax={10} rows={10}/>\n                            </FlexView>\n\n                            <Divider style={{marginTop: 50, marginBottom: 40}}/>\n\n                            <FlexView column>\n                                <Typography variant=\"body1\" align=\"left\"><b>Risk warning page</b></Typography>\n\n                                <br/>\n\n                                <NavLink to={ROUTES.RISK_WARNING} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\n                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View risk warning page</Button>\n                                </NavLink>\n\n                                <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('riskWarning')} modules={modules} value={clubAttributesEdited.hasOwnProperty('riskWarning') ? clubAttributesEdited.riskWarning : {ops: []}} style={{marginTop: 20}}/>\n\n                                <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\n                                    <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('riskWarning')} style={{marginLeft: 12}}>Save</Button>\n                                </FlexView>\n                            </FlexView>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit create project terms and conditions */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView column>\n                            <Typography variant=\"h6\" color=\"primary\">Edit create project terms and conditions</Typography>\n\n                            <NavLink to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View create project terms and conditions page</Button>\n                            </NavLink>\n\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('createPitchTermsAndConditions')} modules={modules} value={clubAttributesEdited.hasOwnProperty('createPitchTermsAndConditions') ? clubAttributesEdited.createPitchTermsAndConditions : {ops: []}} style={{marginTop: 20}}/>\n\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('createPitchTermsAndConditions')} style={{marginLeft: 12}}> Save</Button>\n                            </FlexView>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{ marginTop: 40, marginBottom: 40, height: 3, backgroundColor: colors.primaryColor}}/>\n                    </Col>\n\n                    {/** Edit marketing preferences */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView column>\n                            <Typography variant=\"h6\" color=\"primary\">Edit marketing preferences</Typography>\n\n                            <NavLink to={ROUTES.MARKETING_PREFERENCES} target=\"_blank\" className={css(sharedStyles.nav_link_hover_without_changing_text_color)} style={{marginTop: 30}}>\n                                <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}>View marketing preferences page</Button>\n                            </NavLink>\n\n                            <ReactQuill theme=\"snow\" onChange={this.handleQuillEditorChanged('marketingPreferences')} modules={modules} value={clubAttributesEdited.hasOwnProperty('marketingPreferences') ? clubAttributesEdited.marketingPreferences : {ops: []}} style={{marginTop: 20}}/>\n\n                            <FlexView marginTop={15} width=\"100%\" hAlignContent=\"right\">\n                                <Button variant=\"contained\" color=\"primary\" onClick={() => saveEditedQuill('marketingPreferences')} style={{marginLeft: 12}}>Save</Button>\n                            </FlexView>\n                        </FlexView>\n                    </Col>\n                </Row>\n            </Container>\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperAdminSettings);\n\nconst modules = {\n    toolbar: [\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\n        ['bold', 'italic', 'underline', 'strike'],\n        ['blockquote'],\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\n        [{'script': 'sub'}, {'script': 'super'}],\n        [{'color': []}, {'background': []}],\n        ['link', 'image'],\n        ['clean']\n    ]\n};\n\nconst styles = StyleSheet.create({\n    frequently_asked_question_box: {\n        border: `1px solid ${colors.gray_300}`,\n        marginTop: 12\n    }\n});","import firebase from \"../../firebase/firebaseApp\";\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\nimport * as myUtils from \"../../utils/utils\";\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\n\nexport const GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED = 'GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED';\nexport const initializeGroupAttributesEdited = () => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED,\n            group: getState().manageGroupFromParams.groupProperties\n        });\n    }\n};\n\nexport const GROUP_ADMIN_SETTINGS_CHANGED = 'GROUP_ADMIN_SETTINGS_CHANGED';\nexport const handleInputChanged = event => {\n    return (dispatch, getState) => {\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n        const groupAttributesEdited = getState().groupAdminSettings.groupAttributesEdited;\n        const target = event.target;\n\n        let isPropertyOfGroupAttributes = false;\n\n        let updateValue = null;\n        let shouldUpdateDatabase = false;\n\n        switch (target.type) {\n            case 'checkbox':\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\n                    shouldUpdateDatabase = true;\n                    updateValue = target.checked;\n                }\n                break;\n            case 'radio':\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\n                    shouldUpdateDatabase = true;\n                    updateValue = !isNaN(target.value) ? parseInt(target.value) : target.value;\n                }\n                break;\n            case 'text':\n                if (target.name !== \"primaryColor\"\n                    && target.name !== \"secondaryColor\"\n                    && groupAttributesEdited.hasOwnProperty(target.name)\n                ) {\n                    isPropertyOfGroupAttributes = true;\n                    shouldUpdateDatabase = true;\n                    updateValue = target.value;\n                }\n                break;\n            case 'textarea':\n                if (groupAttributesEdited.hasOwnProperty(target.name)) {\n                    isPropertyOfGroupAttributes = true;\n                }\n                break;\n            default:\n                return;\n        }\n\n        if (shouldUpdateDatabase) {\n            realtimeDBUtils\n                .updateGroupPropertiesSetting({\n                    anid: groupProperties.anid,\n                    field: target.name,\n                    value: updateValue\n                })\n                .catch(error => {\n                    dispatch({\n                        type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                        message: \"Error happened. Could not update this field.\",\n                        color: \"error\",\n                        position: \"bottom\"\n                    });\n                });\n        }\n\n        dispatch({\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\n            name: target.name,\n            value: target.type === 'checkbox' ? target.checked : target.value,\n            isPropertyOfGroupAttributes\n        });\n    }\n};\n\nexport const handlePitchExpiryDateChanged = date => {\n    return (dispatch, getState) => {\n        if (date && date === \"Invalid Date\") {\n            dispatch({\n                type: GROUP_ADMIN_SETTINGS_CHANGED,\n                isPropertyOfGroupAttributes: true,\n                name: \"defaultPitchExpiryDate\",\n                value: NaN\n            });\n            return;\n        }\n\n        dispatch({\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\n            isPropertyOfGroupAttributes: true,\n            name: \"defaultPitchExpiryDate\",\n            value:\n                !date\n                    ?\n                    null\n                    :\n                    date.getTime()\n        });\n    }\n}\n\nexport const handleSavePitchExpiryDate = () => {\n    return (dispatch, getState) => {\n\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n        const groupSettings = getState().groupAdminSettings.groupAttributesEdited;\n\n        realtimeDBUtils\n            .updateGroupPropertiesSetting({\n                anid: groupProperties.anid,\n                field: \"defaultPitchExpiryDate\",\n                value: groupSettings.defaultPitchExpiryDate\n            })\n            .catch(error => {\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not update this field.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n}\n\nexport const handleCancelEditingPitchExpiryDate = () => {\n    return (dispatch, getState) => {\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        dispatch({\n            type: GROUP_ADMIN_SETTINGS_CHANGED,\n            isPropertyOfGroupAttributes: true,\n            name: \"defaultPitchExpiryDate\",\n            value:\n                !groupProperties.settings.hasOwnProperty('defaultPitchExpiryDate')\n                    ?\n                    myUtils.getDateWithDaysFurtherThanToday(1)\n                    :\n                    groupProperties.settings.defaultPitchExpiryDate\n        });\n    }\n}\n\nexport const GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED = 'GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED';\nexport const handleExpandPledgeFAQPanel = (FAQ, isExpanded) => {\n    return (dispatch, getState) => {\n\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\n\n        if (isExpanded) {\n            dispatch({\n                type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\n                expandedPledgeFAQ: FAQ,\n                editExpandedPledgeFAQ: false\n            });\n        } else {\n            if (expandedPledgeFAQ && expandedPledgeFAQ.id === FAQ.id) {\n                dispatch({\n                    type: GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED,\n                    expandedPledgeFAQ: null,\n                    editExpandedPledgeFAQ: false\n                });\n            }\n        }\n    }\n};\n\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ';\nexport const toggleEditExpandedPledgeFAQ = () => {\n    return {\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\n    }\n};\n\nexport const GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ = 'GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ';\nexport const toggleAddNewPledgeFAQ = () => {\n    return {\n        type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\n    }\n};\n\nexport const submitNewPledgeFAQ = () => {\n    return (dispatch, getState) => {\n        const {\n            addedPledgeQuestion,\n            addedPledgeAnswer\n        } = getState().groupAdminSettings;\n\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\n\n        if (addedPledgeQuestion.trim().length === 0 || addedPledgeAnswer.trim().length === 0) {\n            return;\n        }\n\n        const faq = {\n            id: myUtils.getCurrentDate(),\n            question: addedPledgeQuestion,\n            answer: addedPledgeAnswer\n        };\n\n        if (groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]) {\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].push(faq);\n        } else {\n            groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD] = [faq];\n        }\n\n        firebase\n            .database()\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .child(groupProperties.anid)\n            .child('settings')\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\n            .then(() => {\n                dispatch({\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ\n                });\n            });\n    }\n};\n\nexport const saveEditedPledgeFAQ = () => {\n    return (dispatch, getState) => {\n        const {\n            groupAttributesEdited,\n            expandedPledgeFAQ,\n            editedPledgeQuestion,\n            editedPledgeAnswer\n        } = getState().groupAdminSettings;\n\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        if (editedPledgeQuestion.trim().length === 0 || editedPledgeAnswer.trim().length === 0) {\n            return;\n        }\n\n        const editedFAQ = {\n            id: expandedPledgeFAQ.id,\n            question: editedPledgeQuestion,\n            answer: editedPledgeAnswer\n        };\n\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD][index] = editedFAQ;\n\n        firebase\n            .database()\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .child(groupProperties.anid)\n            .child('settings')\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD])\n            .then(() => {\n                dispatch({\n                    type: GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ\n                });\n            });\n    }\n};\n\nexport const deleteExistingPledgeFAQ = () => {\n    return (dispatch, getState) => {\n        const expandedPledgeFAQ = getState().groupAdminSettings.expandedPledgeFAQ;\n        const groupAttributesEdited = Object.assign({}, getState().groupAdminSettings.groupAttributesEdited);\n\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        let index = groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(faq => faq.id === expandedPledgeFAQ.id);\n        groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD].splice(index, 1);\n\n        firebase\n            .database()\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .child(groupProperties.anid)\n            .child('settings')\n            .child(DB_CONST.PLEDGE_FAQS_CHILD)\n            .set(groupAttributesEdited[DB_CONST.PLEDGE_FAQS_CHILD]);\n    }\n};\n\nexport const saveGroupDetails = (field, value) => {\n    return (dispatch, getState) => {\n        const group = getState().manageGroupFromParams.groupProperties;\n\n        firebase\n            .database()\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .child(group.anid)\n            .child(field)\n            .set(value);\n    }\n};\n\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS';\nexport const cancelEditingGroupDetails = (field) => {\n    return (dispatch, getState) => {\n        const group = getState().manageGroupFromParams.groupProperties;\n\n        dispatch({\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS,\n            name: field,\n            value: group[field]\n        });\n    }\n};\n\nexport const saveColor = field => {\n    return (dispatch, getState) => {\n        const group = getState().manageGroupFromParams.groupProperties;\n        const color = field === \"primaryColor\" ? getState().groupAdminSettings.primaryColor : getState().groupAdminSettings.secondaryColor;\n\n        firebase\n            .database()\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .child(group.anid)\n            .child('settings')\n            .child(field)\n            .set(color.toUpperCase());\n    }\n};\n\nexport const GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR = 'GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR';\nexport const cancelEditingColor = field => {\n    return (dispatch, getState) => {\n        const group = getState().manageGroupFromParams.groupProperties;\n        const color = field === \"primaryColor\" ? group.settings.primaryColor : group.settings.secondaryColor;\n\n        dispatch({\n            type: GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR,\n            field,\n            color\n        });\n    }\n};","import React, {Component} from \"react\";\n\nimport {\n    FormControl,\n    FormControlLabel,\n    Typography,\n    RadioGroup,\n    Radio,\n    Divider,\n    Button,\n    TextField\n} from \"@material-ui/core\";\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\nimport PublicIcon from \"@material-ui/icons/Public\";\nimport {\n    Col,\n    Container,\n    Row\n} from \"react-bootstrap\";\nimport FlexView from \"react-flexview\";\nimport {css} from \"aphrodite\";\nimport {NavLink} from \"react-router-dom\";\n\nimport {connect} from \"react-redux\";\nimport * as groupAdminSettingsActions from \"../../../redux-store/actions/groupAdminSettingsActions\";\n\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\nimport * as colors from \"../../../values/colors\";\nimport * as utils from \"../../../utils/utils\";\nimport * as ROUTES from \"../../../router/routes\";\nimport Routes from \"../../../router/routes\";\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupDetails: state.manageGroupFromParams.groupProperties,\n        groupAttributesEdited: state.groupAdminSettings.groupAttributesEdited,\n\n        clubAttributes: state.manageClubAttributes.clubAttributes,\n\n        groupWebsite: state.groupAdminSettings.website,\n        groupDescription: state.groupAdminSettings.description,\n        primaryColor: state.groupAdminSettings.primaryColor,\n        secondaryColor: state.groupAdminSettings.secondaryColor,\n\n        addNewPledgeFAQ: state.groupAdminSettings.addNewPledgeFAQ,\n        addedPledgeQuestion: state.groupAdminSettings.addedPledgeQuestion,\n        addedPledgeAnswer: state.groupAdminSettings.addedPledgeAnswer,\n        expandedPledgeFAQ: state.groupAdminSettings.expandedPledgeFAQ,\n        editExpandedPledgeFAQ: state.groupAdminSettings.editExpandedPledgeFAQ,\n        editedPledgeQuestion: state.groupAdminSettings.editedPledgeQuestion,\n        editedPledgeAnswer: state.groupAdminSettings.editedPledgeAnswer\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        initializeGroupAttributesEdited: () => dispatch(groupAdminSettingsActions.initializeGroupAttributesEdited()),\n        handleInputChanged: (event) => dispatch(groupAdminSettingsActions.handleInputChanged(event)),\n\n        saveGroupDetails: (field, value) => dispatch(groupAdminSettingsActions.saveGroupDetails(field, value)),\n        cancelEditingGroupDetails: (field) => dispatch(groupAdminSettingsActions.cancelEditingGroupDetails(field)),\n\n        saveColor: (field) => dispatch(groupAdminSettingsActions.saveColor(field)),\n        cancelEditingColor: (field) => dispatch(groupAdminSettingsActions.cancelEditingColor(field)),\n        handlePitchExpiryDateChanged: (date) => dispatch(groupAdminSettingsActions.handlePitchExpiryDateChanged(date)),\n        handleSavePitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleSavePitchExpiryDate()),\n        handleCancelEditingPitchExpiryDate: () => dispatch(groupAdminSettingsActions.handleCancelEditingPitchExpiryDate()),\n\n        handleExpandPledgeFAQPanel: (FAQ, isExpanded) => dispatch(groupAdminSettingsActions.handleExpandPledgeFAQPanel(FAQ, isExpanded)),\n        toggleAddNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleAddNewPledgeFAQ()),\n        submitNewPledgeFAQ: () => dispatch(groupAdminSettingsActions.submitNewPledgeFAQ()),\n        toggleEditExpandedPledgeFAQ: () => dispatch(groupAdminSettingsActions.toggleEditExpandedPledgeFAQ()),\n        saveEditedPledgeFAQ: () => dispatch(groupAdminSettingsActions.saveEditedPledgeFAQ()),\n        deleteExistingPledgeFAQ: () => dispatch(groupAdminSettingsActions.deleteExistingPledgeFAQ())\n    }\n};\n\nclass GroupAdminSettings extends Component {\n\n    handleExpandPledgeFAQPanel = FAQ => (event, isExpanded) => {\n        this.props.handleExpandPledgeFAQPanel(FAQ, isExpanded);\n    };\n\n    componentDidMount() {\n        const {\n            initializeGroupAttributesEdited\n        } = this.props;\n\n        initializeGroupAttributesEdited();\n    }\n\n    render() {\n        const {\n            groupUserName,\n            groupDetails,\n            groupAttributesEdited,\n\n            groupWebsite,\n            groupDescription,\n            primaryColor,\n            secondaryColor,\n\n            handleInputChanged,\n            handlePitchExpiryDateChanged,\n            handleSavePitchExpiryDate,\n            handleCancelEditingPitchExpiryDate,\n            saveGroupDetails,\n            cancelEditingGroupDetails,\n            saveColor,\n            cancelEditingColor\n        } = this.props;\n\n        if (!groupAttributesEdited) {\n            return null;\n        }\n\n        return (\n            <Container fluid style={{padding: 30}}>\n                <Row noGutters>\n                    {/** Manage group details */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Typography variant=\"h6\" color=\"primary\">\n                            Manage course details\n                        </Typography>\n\n                        <FlexView marginTop={16} marginBottom={32}>\n                            <NavLink\n                                to={\n                                    groupUserName\n                                        ?\n                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", groupDetails.anid)\n                                        :\n                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", groupDetails.anid)\n                                }\n                                className={css(sharedStyles.nav_link_white_text_hover_without_changing_text_color)}\n                            >\n                                <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">\n                                    <PublicIcon style={{marginRight: 8}}/>\n                                    View course's public page\n                                </Button>\n                            </NavLink>\n                        </FlexView>\n\n                        {/** Edit group description */}\n                        <FlexView column marginTop={20}>\n                            <TextField name=\"description\" value={groupDescription} variant=\"outlined\" label=\"Course description\" multiline rowsMax={5} rows={5} onChange={handleInputChanged}/>\n\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('description')} style={{ marginRight: 6}}>\n                                    Cancel\n                                </Button>\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('description', groupDescription)} disabled={groupDetails.description === groupDescription} style={{marginLeft: 6}}>\n                                    Save\n                                </Button>\n                            </FlexView>\n                        </FlexView>\n\n                        {/** Edit website */}\n                        <FlexView marginTop={35} column>\n                            <FormControl fullWidth>\n                                <TextField label=\"Website\" placeholder=\"Official website\" name=\"website\" value={groupWebsite} fullWidth margin=\"dense\" variant=\"outlined\" required onChange={handleInputChanged}\n                                    error={\n                                        groupWebsite.trim().length === 0\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\n                                    }/>\n                                {\n                                    groupWebsite.trim().length === 0 || utils.isValidWebURL(groupWebsite)\n                                        ?\n                                        null\n                                        :\n                                        <Typography variant=\"body2\" color=\"error\" align=\"left\">\n                                            Invalid website URL\n                                        </Typography>\n                                }\n                            </FormControl>\n\n                            <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={15}>\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingGroupDetails('website')} style={{marginRight: 6}}>\n                                    Cancel\n                                </Button>\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveGroupDetails('website', groupWebsite)}\n                                    disabled={\n                                        groupDetails.website === groupWebsite\n                                        || groupWebsite.trim().length === 0\n                                        || (groupWebsite.trim().length > 0 && !utils.isValidWebURL(groupWebsite))\n                                    }\n                                    style={{marginLeft: 6}}>\n                                    Save\n                                </Button>\n                            </FlexView>\n                        </FlexView>\n\n                        {/** Sign up link */}\n                        <FlexView marginTop={35} column>\n                            <FormControl fullWidth>\n                                <TextField label=\"Public registration link\" fullWidth margin=\"dense\" variant=\"outlined\" helperText=\"This link can be shared to unregistered issuers/students so that they can sign up and become members of your course without sending invitation emails manually.\" value={ process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}/>\n                            </FormControl>\n                        </FlexView>\n\n                        {/** Edit primary color */}\n                        <FlexView marginTop={35} column>\n                            <FlexView vAlignContent=\"center\">\n                                <TextField required name=\"primaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Primary color\" value={primaryColor.toUpperCase()} onChange={handleInputChanged}/>\n\n                                {\n                                    utils.isValidHexColorCode(primaryColor)\n                                        ?\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: primaryColor}}/>\n                                        :\n                                        null\n                                }\n                            </FlexView>\n\n                            {\n                                utils.isValidHexColorCode(primaryColor)\n                                    ?\n                                    null\n                                    :\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\n                                        Invalid color\n                                    </Typography>\n                            }\n\n                            <FlexView width=\"100%\" marginTop={10}>\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"primaryColor\")} style={{ marginRight: 6}}>\n                                    Cancel\n                                </Button>\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"primaryColor\")}\n                                    disabled={!utils.isValidHexColorCode(primaryColor) || groupDetails.settings.primaryColor === primaryColor}\n                                    style={{marginLeft: 6}}>\n                                    Save\n                                </Button>\n                            </FlexView>\n                        </FlexView>\n\n                        {/** Edit secondary color */}\n                        <FlexView marginTop={35} column>\n                            <FlexView vAlignContent=\"center\">\n                                <TextField required name=\"secondaryColor\" variant=\"outlined\" margin=\"dense\" label=\"Secondary color\" value={secondaryColor.toUpperCase()} onChange={handleInputChanged}/>\n\n                                {\n                                    utils.isValidHexColorCode(secondaryColor)\n                                        ?\n                                        <FlexView width={20} height={20} marginLeft={15} style={{backgroundColor: secondaryColor}}/>\n                                        :\n                                        null\n                                }\n                            </FlexView>\n\n                            {\n                                utils.isValidHexColorCode(secondaryColor)\n                                    ?\n                                    null\n                                    :\n                                    <Typography variant=\"body2\" color=\"error\" align=\"left\" style={{marginTop: 4}}>\n                                        Invalid color\n                                    </Typography>\n                            }\n\n                            <FlexView width=\"100%\" marginTop={10}>\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => cancelEditingColor(\"secondaryColor\")} style={{marginRight: 6}}>\n                                    Cancel\n                                </Button>\n                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={() => saveColor(\"secondaryColor\")}\n                                    disabled={!utils.isValidHexColorCode(secondaryColor) || groupDetails.settings.secondaryColor === secondaryColor}\n                                    style={{ marginLeft: 6}}>\n                                    Save\n                                </Button>\n                            </FlexView>\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\n                                backgroundColor:\n                                    !groupDetails\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupDetails.settings.primaryColor\n                            }}/>\n                    </Col>\n\n                    {/** Manage group attributes */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView column>\n                            <Typography variant=\"h6\" color=\"primary\">\n                                Manage course attributes\n                            </Typography>\n\n                            {\n                                /**\n                                 * Set pitch expiry date (for QIB only)\n                                 */\n                            }\n                            {\n                                groupUserName !== \"qib\"\n                                    ?\n                                    null\n                                    :\n                                    <FlexView column marginTop={30}>\n                                        <KeyboardDatePicker\n                                            autoOk\n                                            fullWidth\n                                            variant=\"dialog\"\n                                            inputVariant=\"outlined\"\n                                            label=\"Choose expired date for this project\"\n                                            format=\"dd/MM/yyyy\"\n                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\n                                            value={\n                                                !groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\n                                                    ?\n                                                    utils.getDateWithDaysFurtherThanToday(1)\n                                                    :\n                                                    groupAttributesEdited.defaultPitchExpiryDate\n                                            }\n                                            InputAdornmentProps={{position: \"start\"}}\n                                            error={\n                                                groupAttributesEdited.hasOwnProperty('groupAttributesEdited')\n                                                    ?\n                                                    groupAttributesEdited.defaultPitchExpiryDate === null\n                                                    || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\n                                                    :\n                                                    false\n                                            }\n                                            onChange={handlePitchExpiryDateChanged}\n                                        />\n\n                                        <FlexView width=\"100%\" marginTop={15}>\n                                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={handleCancelEditingPitchExpiryDate} style={{marginRight: 6}}>\n                                                Cancel\n                                            </Button>\n                                            <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} onClick={handleSavePitchExpiryDate}\n                                                disabled={\n                                                    groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\n                                                        ?\n                                                        groupAttributesEdited.defaultPitchExpiryDate === null\n                                                        || isNaN(groupAttributesEdited.defaultPitchExpiryDate)\n                                                        || (\n                                                            groupDetails.settings.hasOwnProperty('defaultPitchExpiryDate')\n                                                            && groupAttributesEdited.hasOwnProperty('defaultPitchExpiryDate')\n                                                            && groupDetails.settings.defaultPitchExpiryDate === groupAttributesEdited.defaultPitchExpiryDate\n                                                        )\n                                                        :\n                                                        false}\n                                                style={{marginLeft: 6}}>\n                                                Save\n                                            </Button>\n                                        </FlexView>\n\n                                        {/** Divider */}\n                                        <Divider style={{marginTop: 40, marginBottom: 20, height: 3}}/>\n                                    </FlexView>\n                            }\n\n                            {\n                                /**\n                                 * Set project's visibility\n                                 */\n                            }\n                            <FlexView marginTop={20}>\n                                <FormControl>\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\n                                        Choose default visibility value for all newly created student projects\n                                    </Typography>\n                                    <RadioGroup name=\"projectVisibility\" value={groupAttributesEdited.projectVisibility.toString()} onChange={handleInputChanged}>\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PRIVATE.toString()} control={<Radio/>} label=\"Private\"/>\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED.toString()} control={<Radio/>} label=\"Restricted\"/>\n                                        <FormControlLabel value={DB_CONST.PROJECT_VISIBILITY_PUBLIC.toString()} control={<Radio/>} label=\"Public\"/>\n                                    </RadioGroup>\n                                </FormControl>\n                            </FlexView>\n\n                            {/** Divider */}\n                            <Divider style={{marginTop: 20, marginBottom: 20, height: 3}}/>\n\n                            {\n                                /**\n                                 * Hide/Show investors' contact details\n                                 */\n                            }\n                            {/*<FlexView>*/}\n                            {/*    <FormControl>*/}\n                            {/*        <FormControlLabel*/}\n                            {/*            name=\"makeInvestorsContactDetailsVisibleToIssuers\"*/}\n                            {/*            control={*/}\n                            {/*                <Checkbox*/}\n                            {/*                    color=\"primary\"*/}\n                            {/*                    value={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\n                            {/*                    checked={groupAttributesEdited.makeInvestorsContactDetailsVisibleToIssuers}*/}\n                            {/*                    onChange={handleInputChanged}*/}\n                            {/*                />*/}\n                            {/*            }*/}\n                            {/*            label=\"Allow issuers to see investors' contact details\"*/}\n                            {/*            labelPlacement=\"end\"*/}\n                            {/*        />*/}\n                            {/*        <Typography*/}\n                            {/*            variant=\"body1\"*/}\n                            {/*            align=\"left\"*/}\n                            {/*            style={{*/}\n                            {/*                marginTop: 8*/}\n                            {/*            }}*/}\n                            {/*        >*/}\n                            {/*            <b*/}\n                            {/*                style={{*/}\n                            {/*                    color: colors.errorColor*/}\n                            {/*                }}*/}\n                            {/*            >*/}\n                            {/*                <u>Note:</u>&nbsp;This is a global setting.*/}\n                            {/*            </b>*/}\n                            {/*            &nbsp;When <u><b>ticked</b></u>, <b>the contact details of all investors in this*/}\n                            {/*            group</b> will be*/}\n                            {/*            made visible to the issuers.*/}\n                            {/*        </Typography>*/}\n                            {/*    </FormControl>*/}\n                            {/*</FlexView>*/}\n                        </FlexView>\n                    </Col>\n\n                    {/** Divider */}\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{marginTop: 40, marginBottom: 40, height: 4,\n                                backgroundColor:\n                                    !groupDetails\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupDetails.settings.primaryColor\n                            }}/>\n                    </Col>\n                </Row>\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminSettings);","import React, {Component} from 'react';\nimport {OverlayTrigger, Tooltip} from 'react-bootstrap';\nimport InfoIcon from '@material-ui/icons/Info';\nimport * as colors from '../../values/colors';\n\nexport default class InfoOverlay extends Component {\n    render() {\n        const {\n            message,\n            placement\n        } = this.props;\n\n        return (\n            <OverlayTrigger\n                trigger={['hover', 'focus']}\n                placement={placement}\n                flip\n                overlay={ <Tooltip id={`tooltip-${placement}`}>{message}</Tooltip> }\n            >\n                <InfoIcon fontSize=\"small\" style={{ color: colors.gray_600 }}/>\n            </OverlayTrigger>\n        );\n    }\n}","import firebase from \"../../firebase/firebaseApp\";\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\nimport {getUserBasedOnID} from \"../../firebase/realtimeDBUtils\";\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\nimport * as emailUtils from \"../../utils/emailUtils\";\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\nimport * as ROUTES from \"../../router/routes\";\nimport * as utils from \"../../utils/utils\";\nimport {\n    FILTER_GROUP_MEMBERS_ALL,\n    FILTER_HOME_MEMBERS,\n    FILTER_PLATFORM_MEMBERS,\n    FILTER_REGISTRATION_STATUS_ALL\n} from '../../pages/admin/components/InvitedUsers';\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\n\nexport const LOADING_INVITED_USERS = 'LOADING_INVITED_USERS';\nexport const FINISHED_LOADING_INVITED_USERS = 'FINISHED_LOADING_INVITED_USERS';\nexport const loadInvitedUsers = () => {\n    return (dispatch, getState) => {\n        dispatch({\n            type: LOADING_INVITED_USERS\n        });\n\n        const admin = getState().auth.user;\n\n        realtimeDBUtils\n            .loadInvitedUsers(admin.superAdmin ? null : admin.anid)\n            .then(invitedUsers => {\n                //console.log(\"Invited users loaded successfully:\", invitedUsers);\n                dispatch({\n                    type: FINISHED_LOADING_INVITED_USERS,\n                    invitedUsers,\n                    error: null\n                });\n            })\n            .catch(error => {\n                console.error(\"Error loading invited users:\", error);\n                dispatch({\n                    type: FINISHED_LOADING_INVITED_USERS,\n                    invitedUsers: [],\n                    error\n                });\n            });\n    }\n};\n\nexport const INVITED_USERS_TOGGLE_SEARCH_MODE = 'INVITED_USERS_TOGGLE_SEARCH_MODE';\nexport const toggleInvitedUsersSearchMode = () => {\n    return (dispatch, getState) => {\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\n\n        const {\n            invitedUserSearchText,\n            invitedUsersInSearchMode,\n            filterRegistrationStatus,\n            filterUserType,\n            filterMembers,\n            filterGroup\n        } = getState().invitedUsers;\n\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\n\n        let matchedInvitedUsers;\n\n        // exit search mode\n        if (invitedUsersInSearchMode) {\n            matchedInvitedUsers = getUpdatedInvitedUsers({\n                sourceInvitedUsers: invitedUsers,\n                searchText: null,\n                filterRegistrationStatus,\n                filterUserType,\n                filterMembers,\n                filterGroup,\n                currentGroupProperties\n            });\n        }\n        // enter search mode\n        else {\n            if (invitedUserSearchText.trim().length > 0) {\n                matchedInvitedUsers = prevMatchedInvitedUsers.filter(\n                    invitedUser => invitedUser.email.toLowerCase() === invitedUserSearchText.trim().toLowerCase()\n                );\n            } else {\n                matchedInvitedUsers = prevMatchedInvitedUsers;\n            }\n        }\n\n        dispatch({\n            type: INVITED_USERS_TOGGLE_SEARCH_MODE,\n            matchedInvitedUsers\n        });\n    }\n};\n\nexport const INVITED_USERS_SEARCH_VARIABLE_CHANGED = 'INVITED_USERS_SEARCH_VARIABLE_CHANGED';\nexport const handleInputChanged = event => {\n    return (dispatch, getState) => {\n        const invitedUsers = [...getState().invitedUsers.invitedUsers];\n        const prevMatchedInvitedUsers = [...getState().invitedUsers.matchedInvitedUsers];\n        let matchedInvitedUsers = [];\n\n        const {\n            invitedUserSearchText,\n            invitedUsersInSearchMode,\n            filterRegistrationStatus,\n            filterUserType,\n            filterMembers,\n            filterGroup\n        } = getState().invitedUsers;\n\n        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\n\n        const name = event.target.name;\n        let value = null;\n\n        switch (name) {\n            case 'invitedUserSearchText':\n                const newSearchText = event.target.value;\n                value = newSearchText;\n\n                // search mode is off\n                if (!invitedUsersInSearchMode) {\n                    // return the previous matchedProjects\n                    matchedInvitedUsers = prevMatchedInvitedUsers;\n                    break;\n                }\n\n                matchedInvitedUsers = getUpdatedInvitedUsers({\n                    sourceInvitedUsers: invitedUsers,\n                    searchText: newSearchText,\n                    filterRegistrationStatus,\n                    filterUserType,\n                    filterMembers,\n                    filterGroup,\n                    currentGroupProperties\n                });\n                break;\n            case 'filterRegistrationStatus':\n                const newRegistrationStatusFilter = event.target.value;\n                value = newRegistrationStatusFilter;\n\n                matchedInvitedUsers = getUpdatedInvitedUsers({\n                    sourceInvitedUsers: invitedUsers,\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\n                    filterRegistrationStatus: newRegistrationStatusFilter,\n                    filterUserType,\n                    filterMembers,\n                    filterGroup,\n                    currentGroupProperties\n                });\n                break;\n            case 'filterUserType':\n                const newUserTypeFilter = event.target.value;\n                value = newUserTypeFilter;\n\n                matchedInvitedUsers = getUpdatedInvitedUsers({\n                    sourceInvitedUsers: invitedUsers,\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\n                    filterRegistrationStatus,\n                    filterUserType: newUserTypeFilter,\n                    filterMembers,\n                    filterGroup,\n                    currentGroupProperties\n                });\n                break;\n            case 'filterGroup':\n                const newGroupFilter = event.target.value;\n                value = newGroupFilter;\n\n                matchedInvitedUsers = getUpdatedInvitedUsers({\n                    sourceInvitedUsers: invitedUsers,\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\n                    filterRegistrationStatus,\n                    filterUserType,\n                    filterMembers,\n                    filterGroup: newGroupFilter,\n                    currentGroupProperties\n                });\n                break;\n            case 'filterMembers':\n                const newMembersFilter = event.target.value;\n                value = newMembersFilter;\n\n                matchedInvitedUsers = getUpdatedInvitedUsers({\n                    sourceInvitedUsers: invitedUsers,\n                    searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\n                    filterRegistrationStatus,\n                    filterUserType,\n                    filterMembers: newMembersFilter,\n                    filterGroup,\n                    currentGroupProperties\n                });\n                break;\n            default:\n                break;\n        }\n\n        dispatch({\n            type: INVITED_USERS_SEARCH_VARIABLE_CHANGED,\n            name,\n            value,\n            matchedInvitedUsers\n        });\n    }\n};\n\n/**\n * Get updated invitedUsers when a search criteria is changed\n *\n * @param sourceInvitedUsers\n * @param searchText\n * @param filterRegistrationStatus\n * @param filterUserType\n * @param filterMembers\n * @param filterGroup\n * @param currentGroupProperties\n * @returns {[]}\n */\nconst getUpdatedInvitedUsers = (\n    {\n        sourceInvitedUsers,\n        searchText,\n        filterRegistrationStatus,\n        filterUserType,\n        filterMembers,\n        filterGroup,\n        currentGroupProperties\n    }\n) => {\n    let matchedInvitedUsers = [];\n\n    sourceInvitedUsers.forEach(invitedUser => {\n        let satisfiedRegistrationStatusFilter = false;\n        let satisfiedUserTypeFilter = false;\n        let satisfiedGroupMembersFilter = false;\n        let satisfiedGroupFilter = false;\n\n        // filter by registration status\n        switch (filterRegistrationStatus) {\n            case FILTER_REGISTRATION_STATUS_ALL:\n                satisfiedRegistrationStatusFilter = true;\n                break;\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\n                if (invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE) {\n                    satisfiedRegistrationStatusFilter = true;\n                }\n                break;\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\n                if (invitedUser.status === DB_CONST.INVITED_USER_NOT_REGISTERED) {\n                    satisfiedRegistrationStatusFilter = true;\n                }\n                break;\n            default:\n                break;\n        }\n\n        // filter by user type\n        switch (filterUserType) {\n            case DB_CONST.TYPE_INVESTOR:\n                if (invitedUser.type === DB_CONST.TYPE_INVESTOR) {\n                    satisfiedUserTypeFilter = true;\n                }\n                break;\n            case DB_CONST.TYPE_ISSUER:\n                if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\n                    satisfiedUserTypeFilter = true;\n                }\n                break;\n            case 0: // all user type\n                satisfiedUserTypeFilter = true;\n                break;\n            default:\n                break;\n        }\n\n        // filter by group members (all, home or foreign)\n        switch (filterMembers) {\n            case FILTER_GROUP_MEMBERS_ALL:\n                satisfiedGroupMembersFilter = true;\n                break;\n            case FILTER_HOME_MEMBERS:\n                if (currentGroupProperties) {\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\n                        && invitedUser.requestedToJoin === false\n                    ) {\n                        satisfiedGroupMembersFilter = true;\n                    }\n                } else {\n                    satisfiedGroupMembersFilter = true;\n                }\n                break;\n            case FILTER_PLATFORM_MEMBERS:\n                if (currentGroupProperties) {\n                    if (currentGroupProperties.anid === invitedUser.invitedBy\n                        && invitedUser.requestedToJoin === true\n                    ) {\n                        satisfiedGroupMembersFilter = true;\n                    }\n                } else {\n                    satisfiedGroupMembersFilter = true;\n                }\n                break;\n            default:\n                break;\n        }\n\n        // filter by a specific group\n        if (filterGroup !== \"null\") {\n            if (invitedUser.invitedBy === filterGroup) {\n                satisfiedGroupFilter = true;\n            }\n        }\n        // all groups\n        else {\n            satisfiedGroupFilter = true;\n        }\n\n        if (satisfiedRegistrationStatusFilter\n            && satisfiedUserTypeFilter\n            && satisfiedGroupMembersFilter\n            && satisfiedGroupFilter\n        ) {\n            matchedInvitedUsers.push(invitedUser);\n        }\n    });\n\n    if (searchText !== null) {\n        matchedInvitedUsers = matchedInvitedUsers.filter(\n            invitedUser => invitedUser.email.toLowerCase().includes(searchText.trim().toLowerCase())\n        );\n    }\n\n    return matchedInvitedUsers;\n}\n\nexport const INVITED_USERS_CHANGE_PAGE = 'INVITED_USERS_CHANGE_PAGE';\nexport const handleChangeTablePage = (event, newPage) => {\n    return {\n        type: INVITED_USERS_CHANGE_PAGE,\n        newPage\n    }\n};\n\nexport const INVITED_USERS_CHANGE_ROWS_PER_PAGE = 'INVITED_USERS_CHANGE_ROWS_PER_PAGE';\nexport const handleChangeTableRowsPerPage = event => {\n    return {\n        type: INVITED_USERS_CHANGE_ROWS_PER_PAGE,\n        rows: event.target.value\n    }\n};\n\nexport const resendInvite = invitedUser => {\n    return (dispatch, getState) => {\n        const clubAttributes = getState().manageClubAttributes.clubAttributes;\n        const groupUserName = getState().manageGroupFromParams.groupUserName;\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n        const currentGroupAdmin = getState().auth.user;\n\n        emailUtils\n            .sendEmail({\n                serverURL: clubAttributes.serverURL,\n                emailType: emailUtils.EMAIL_INVITATION,\n                data: {\n                    groupName: groupProperties.displayName,\n                    groupLogo: utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, groupProperties),\n                    groupWebsite: groupProperties.website,\n                    groupContactUs: `${clubAttributes.websiteURL}/groups/${groupProperties.groupUserName}/contact-us`,\n                    sender: currentGroupAdmin.email,\n                    receiver: invitedUser.email,\n                    receiverName: `${invitedUser.title} ${invitedUser.firstName} ${invitedUser.lastName}`,\n                    userType:\n                        invitedUser.type === DB_CONST.TYPE_ISSUER\n                            ?\n                            \"Issuer\"\n                            :\n                            \"Investor\"\n                    ,\n                    signupURL:\n                        groupUserName\n                            ?\n                            `${clubAttributes.websiteURL}/groups/${groupUserName}/signup/${invitedUser.id}`\n                            :\n                            `${clubAttributes.websiteURL}/signup/${invitedUser.id}`\n                }\n            })\n            .then(() => {\n                // track activity\n                realtimeDBUtils\n                    .trackActivity({\n                        userID: currentGroupAdmin.id,\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                        interactedObjectLocation: DB_CONST.INVITED_USERS_CHILD,\n                        interactedObjectID: invitedUser.id,\n                        activitySummary:\n                            realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_RESENT_A_USER_INVITATION\n                                .replace(\"%userName%\", `${invitedUser.firstName} ${invitedUser.lastName}`)\n                                .replace(\"%group%\", groupProperties.displayName)\n                                .replace(\"%userType%\", invitedUser.type === DB_CONST.TYPE_ISSUER ? \"Issuer\" : \"Investor\")\n                        ,\n                        action: ROUTES.USER_PROFILE_INVEST_WEST_SUPER\n                            .replace(\":userID\", invitedUser.id)\n                        ,\n                        value: {\n                            ...invitedUser,\n                            Invitor: null\n                        }\n                    });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Invitation resent.\",\n                    color: \"primary\",\n                    position: \"bottom\"\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n}\n\nexport const INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED = \"INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED\";\nexport const addMembersFromOneGroupToAnotherGroup = (fromGroup, toGroup) => {\n    return async (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const addingMembersFromOneGroupToAnotherGroup = getState().invitedUsers.addingMembersFromOneGroupToAnotherGroup;\n\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\n            return;\n        }\n\n        if (addingMembersFromOneGroupToAnotherGroup) {\n            return;\n        }\n\n        try {\n            dispatch({\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\n                value: true\n            });\n\n            await new Api()\n                .request(\n                    \"put\",\n                    ApiRoutes.addMembersToGroup.replace(\":group\", toGroup),\n                    {\n                        queryParameters: null,\n                        requestBody: {\n                            fromGroup,\n                            addUserType: \"all\"\n                        }\n                    }\n                );\n\n            dispatch({\n                type: INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED,\n                value: false\n            });\n\n            dispatch({\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                message: \"Members added.\",\n                color: \"primary\",\n                position: \"bottom\"\n            });\n        } catch (error) {\n            dispatch({\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                message: error.toString(),\n                color: \"error\",\n                position: \"bottom\"\n            });\n        }\n    }\n}\n\nexport const INVITED_USERS_REQUESTING_CSV_STATE_CHANGED = \"INVITED_USERS_REQUESTING_CSV_STATE_CHANGED\";\nexport const exportToCsv = () => {\n    return async (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const requestingCsv = getState().invitedUsers.requestingCsv;\n\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\n            return;\n        }\n\n        if (requestingCsv) {\n            return;\n        }\n\n        try {\n            dispatch({\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\n                value: true\n            });\n\n            let response = await new Api().request(\"get\", ApiRoutes.exportUsersCsvRoute);\n\n            // create a file from the csv returned by the server\n            const blob = new Blob([response.data], {type: \"text/csv;charset=utf-8;\"});\n            const link = document.createElement(\"a\");\n            if (link.download !== undefined) {\n                // create a download url\n                const url = URL.createObjectURL(blob);\n                link.setAttribute(\"href\", url);\n                link.setAttribute(\"download\", \"data.csv\");\n                link.style.visibility = \"hidden\";\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n            }\n\n            dispatch({\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\n                value: false\n            });\n        } catch (error) {\n            dispatch({\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                message: error.toString(),\n                color: \"error\",\n                position: \"bottom\"\n            });\n\n            dispatch({\n                type: INVITED_USERS_REQUESTING_CSV_STATE_CHANGED,\n                value: false\n            });\n        }\n    }\n};\n\n// Listeners -----------------------------------------------------------------------------------------------------------\n\nlet invitedUsersListener = null;\n\nexport const INVITED_USERS_CHANGED = \"INVITED_USERS_CHANGED\";\n\nexport const startListeningForInvitedUsersChanged = () => {\n    return (dispatch, getState) => {\n        if (!invitedUsersListener) {\n            const admin = getState().auth.user;\n\n            invitedUsersListener = firebase\n                .database()\n                .ref(DB_CONST.INVITED_USERS_CHILD);\n\n            invitedUsersListener\n                .on(\"child_added\", async (snapshot) => {\n                        let invitedUser = snapshot.val();\n\n                        let shouldAddInvitedUser = false;\n\n                        if (admin.superAdmin) {\n                            shouldAddInvitedUser = true;\n                        } else {\n                            if (invitedUser.invitedBy === admin.anid) {\n                                shouldAddInvitedUser = true;\n                            }\n                        }\n\n                        if (!shouldAddInvitedUser) {\n                            return;\n                        }\n\n                        let invitedUsers = [...getState().invitedUsers.invitedUsers];\n                        let invitedUserIndex = invitedUsers.findIndex(existingInvitedUser => existingInvitedUser.id === invitedUser.id);\n                        if (invitedUserIndex === -1) {\n                            const {\n                                invitedUserSearchText,\n                                invitedUsersInSearchMode,\n                                filterRegistrationStatus,\n                                filterUserType,\n                                filterMembers,\n                                filterGroup\n                            } = getState().invitedUsers;\n\n                            const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\n\n                            const group = await realtimeDBUtils.loadAngelNetworkBasedOnANID(invitedUser.invitedBy)\n\n                            invitedUser.Invitor = {\n                                anid: group.anid,\n                                displayName: group.displayName,\n                                logo: group.logo\n                            };\n\n                            if (invitedUser.hasOwnProperty(\"officialUserID\")) {\n                                invitedUser.officialUser = await getUserBasedOnID(invitedUser.officialUserID);\n                            }\n\n                            let matchedInvitedUsers = getUpdatedInvitedUsers({\n                                sourceInvitedUsers: [...invitedUsers, invitedUser],\n                                searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\n                                filterRegistrationStatus,\n                                filterUserType,\n                                filterMembers,\n                                filterGroup,\n                                currentGroupProperties\n                            });\n\n                            return dispatch({\n                                type: INVITED_USERS_CHANGED,\n                                invitedUsers: [...getState().invitedUsers.invitedUsers, invitedUser],\n                                matchedInvitedUsers\n                            });\n                        }\n                    }\n                );\n\n            invitedUsersListener\n                .on(\"child_changed\", async (snapshot) => {\n                    let invitedUser = snapshot.val();\n\n                    let shouldChangeInvitedUser = false;\n\n                    if (admin.superAdmin) {\n                        shouldChangeInvitedUser = true;\n                    } else {\n                        if (invitedUser.invitedBy === admin.anid) {\n                            shouldChangeInvitedUser = true;\n                        }\n                    }\n\n                    if (!shouldChangeInvitedUser) {\n                        return;\n                    }\n\n                    let invitedUsers = [...getState().invitedUsers.invitedUsers];\n                    let invitedUserIndex = invitedUsers.findIndex(\n                        existingInvitedUser => existingInvitedUser.id === invitedUser.id\n                    );\n                    if (invitedUserIndex !== -1) {\n                        invitedUser.Invitor = invitedUsers[invitedUserIndex].Invitor;\n                        invitedUser.officialUser = invitedUsers[invitedUserIndex].officialUser;\n                        invitedUsers[invitedUserIndex] = invitedUser;\n                        const {\n                            invitedUserSearchText,\n                            invitedUsersInSearchMode,\n                            filterRegistrationStatus,\n                            filterUserType,\n                            filterMembers,\n                            filterGroup\n                        } = getState().invitedUsers;\n\n                        const currentGroupProperties = getState().manageGroupFromParams.groupProperties;\n\n                        let matchedInvitedUsers = getUpdatedInvitedUsers({\n                            sourceInvitedUsers: [...invitedUsers],\n                            searchText: invitedUsersInSearchMode ? invitedUserSearchText : null,\n                            filterRegistrationStatus,\n                            filterUserType,\n                            filterMembers,\n                            filterGroup,\n                            currentGroupProperties\n                        });\n\n                        return dispatch({\n                            type: INVITED_USERS_CHANGED,\n                            invitedUsers: [...invitedUsers],\n                            matchedInvitedUsers\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForInvitedUsersChanged = () => {\n    return (dispatch, getState) => {\n        if (invitedUsersListener) {\n            invitedUsersListener.off('child_added');\n            invitedUsersListener.off('child_changed');\n            invitedUsersListener = null;\n        }\n    }\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    InputLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport Add from \"@material-ui/icons/Add\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport FlexView from \"react-flexview\";\r\nimport {HashLoader} from \"react-spinners\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport {css} from \"aphrodite\";\r\nimport InfoOverlay from \"../../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as invitedUsersActions from \"../../../redux-store/actions/invitedUsersActions\";\r\nimport * as invitationDialogActions from \"../../../redux-store/actions/invitationDialogActions\";\r\nimport sharedStyles from \"../../../shared-js-css-styles/SharedStyles\";\r\nimport * as DB_CONST from \"../../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../../router/routes\";\r\nimport * as myUtils from \"../../../utils/utils\";\r\nimport * as colors from \"../../../values/colors\";\r\n\r\nexport const FILTER_REGISTRATION_STATUS_ALL = -1;\r\n\r\nexport const FILTER_GROUP_MEMBERS_ALL = 0;\r\nexport const FILTER_HOME_MEMBERS = 1;\r\nexport const FILTER_PLATFORM_MEMBERS = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        systemGroups: state.manageSystemGroups.systemGroups,\r\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\r\n\r\n        admin: state.auth.user,\r\n\r\n        invitedUsers: state.invitedUsers.invitedUsers,\r\n        invitedUsersLoaded: state.invitedUsers.invitedUsersLoaded,\r\n        invitedUsersBeingLoaded: state.invitedUsers.invitedUsersBeingLoaded,\r\n\r\n        invitedUsersPage: state.invitedUsers.invitedUsersPage,\r\n        invitedUsersRowsPerPage: state.invitedUsers.invitedUsersRowsPerPage,\r\n\r\n        filterRegistrationStatus: state.invitedUsers.filterRegistrationStatus,\r\n        filterUserType: state.invitedUsers.filterUserType,\r\n        filterMembers: state.invitedUsers.filterMembers,\r\n        filterGroup: state.invitedUsers.filterGroup,\r\n\r\n        invitedUserSearchText: state.invitedUsers.invitedUserSearchText,\r\n        invitedUsersInSearchMode: state.invitedUsers.invitedUsersInSearchMode,\r\n\r\n        requestingCsv: state.invitedUsers.requestingCsv,\r\n        addingMembersFromOneGroupToAnotherGroup: state.invitedUsers.addingMembersFromOneGroupToAnotherGroup,\r\n\r\n        matchedInvitedUsers: state.invitedUsers.matchedInvitedUsers\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadInvitedUsers: () => dispatch(invitedUsersActions.loadInvitedUsers()),\r\n        toggleSearchMode: () => dispatch(invitedUsersActions.toggleInvitedUsersSearchMode()),\r\n        handleInputChanged: (event) => dispatch(invitedUsersActions.handleInputChanged(event)),\r\n        handleChangeTablePage: (event, newPage) => dispatch(invitedUsersActions.handleChangeTablePage(event, newPage)),\r\n        handleChangeTableRowsPerPage: (event) => dispatch(invitedUsersActions.handleChangeTableRowsPerPage(event)),\r\n        startListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.startListeningForInvitedUsersChanged()),\r\n        resendInvite: (invitedUser) => dispatch(invitedUsersActions.resendInvite(invitedUser)),\r\n        exportToCsv: () => dispatch(invitedUsersActions.exportToCsv()),\r\n        addMembersFromOneGroupToAnotherGroup: (fromGroup, toGroup) => dispatch(invitedUsersActions.addMembersFromOneGroupToAnotherGroup(fromGroup, toGroup)),\r\n\r\n        toggleInvitationDialog: () => dispatch(invitationDialogActions.toggleInvitationDialog())\r\n    }\r\n};\r\n\r\nclass InvitedUsers extends Component {\r\n\r\n    componentDidMount() {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n            invitedUsersBeingLoaded,\r\n\r\n            loadInvitedUsers\r\n        } = this.props;\r\n\r\n        if (invitedUsers && !invitedUsersBeingLoaded && !invitedUsersLoaded) {\r\n            loadInvitedUsers();\r\n        }\r\n\r\n        this.addListener();\r\n    }\r\n\r\n    /**\r\n     * Add listener\r\n     */\r\n    addListener = () => {\r\n        const {\r\n            invitedUsers,\r\n            invitedUsersLoaded,\r\n\r\n            startListeningForInvitedUsersChanged\r\n        } = this.props;\r\n\r\n        if (invitedUsers && invitedUsersLoaded) {\r\n            startListeningForInvitedUsersChanged();\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            admin,\r\n\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterMembers,\r\n            filterGroup,\r\n            invitedUserSearchText,\r\n            invitedUsersInSearchMode,\r\n\r\n            systemGroups,\r\n            groupsLoaded,\r\n            requestingCsv,\r\n            addingMembersFromOneGroupToAnotherGroup,\r\n\r\n            toggleInvitationDialog,\r\n            toggleSearchMode,\r\n            handleInputChanged,\r\n            exportToCsv,\r\n            addMembersFromOneGroupToAnotherGroup\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column width=\"100%\">\r\n                <Divider style={{marginBottom: 30}}/>\r\n\r\n                {/** Invite new user button - available for group admins only */}\r\n                {\r\n                    admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        <Row style={{marginBottom: 30}}>\r\n                            <Col xs={12} md={5} lg={12}>\r\n                                <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleInvitationDialog}>\r\n                                    <Add style={{ marginRight: 10, width: 20, height: \"auto\"}}/>Invite new group member</Button>\r\n                            </Col>\r\n                        </Row>\r\n                }\r\n\r\n                {/** Filters */}\r\n                <Row>\r\n                    {/** Registration status */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">Registration status</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterRegistrationStatus\"/>\r\n                                }\r\n                                style={{marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterRegistrationStatus\"\r\n                                value={filterRegistrationStatus}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={FILTER_REGISTRATION_STATUS_ALL}> All</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_NOT_REGISTERED}>Not registered</MenuItem>\r\n                                <MenuItem value={DB_CONST.INVITED_USER_STATUS_ACTIVE}>Active</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** User type */}\r\n                    <Col xs={12} sm={12} md={4} lg={3}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>\r\n                                <Typography variant=\"body1\" color=\"primary\" align=\"left\">User type</Typography>\r\n                            </InputLabel>\r\n                            <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterUserType\"/>\r\n                                }\r\n                                style={{ marginTop: 25, width: \"100%\"}}\r\n                                name=\"filterUserType\"\r\n                                value={filterUserType}\r\n                                onChange={handleInputChanged}>\r\n                                <MenuItem value={0}>All</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_INVESTOR}>Investor</MenuItem>\r\n                                <MenuItem value={DB_CONST.TYPE_ISSUER}>Issuer</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Col>\r\n\r\n                    {/** Group members */}\r\n                    {\r\n                        !admin.superAdmin\r\n                            ?\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FlexView vAlignContent=\"center\">\r\n                                    <FormControl fullWidth>\r\n                                        <InputLabel>\r\n                                            <Typography variant=\"body1\" color=\"primary\" align=\"left\">Members</Typography>\r\n                                        </InputLabel>\r\n                                        <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterMembers\"/>\r\n                                            }\r\n                                            style={{ marginTop: 25, width: \"100%\"}}\r\n                                            name=\"filterMembers\"\r\n                                            value={filterMembers}\r\n                                            onChange={handleInputChanged}\r\n                                        >\r\n                                            <MenuItem value={FILTER_GROUP_MEMBERS_ALL} key={FILTER_GROUP_MEMBERS_ALL}>All</MenuItem>\r\n                                            <MenuItem value={FILTER_HOME_MEMBERS} key={FILTER_HOME_MEMBERS}>Home members</MenuItem>\r\n                                            <MenuItem value={FILTER_PLATFORM_MEMBERS} key={FILTER_PLATFORM_MEMBERS}>Platform members</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n\r\n                                    <FlexView marginLeft={15}>\r\n                                        <InfoOverlay\r\n                                            placement=\"right\"\r\n                                            message={\r\n                                                \"Home members are the students that registered through this course. Platform members are existing users of Student Invest West who requested access to this course.\"\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </Col>\r\n                            :\r\n                            <Col xs={12} sm={12} md={4} lg={3}>\r\n                                <FormControl fullWidth>\r\n                                    <InputLabel>\r\n                                        <Typography variant=\"body1\" color=\"primary\" align=\"left\">Group</Typography>\r\n                                    </InputLabel>\r\n                                    <Select margin=\"dense\" input={<OutlinedInput labelWidth={0} name=\"filterGroup\" disabled={!groupsLoaded}/>\r\n                                        }\r\n                                        style={{marginTop: 25, width: \"100%\"}}\r\n                                        name=\"filterGroup\"\r\n                                        value={filterGroup}\r\n                                        onChange={handleInputChanged}>\r\n                                        <MenuItem value=\"null\" key=\"null\">\r\n                                            {\r\n                                                !groupsLoaded\r\n                                                    ?\r\n                                                    \"Loading courses ...\"\r\n                                                    :\r\n                                                    \"All\"\r\n                                            }\r\n                                        </MenuItem>\r\n                                        {\r\n                                            !groupsLoaded\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                systemGroups.map(group => (\r\n                                                    <MenuItem value={group.anid} key={group.anid}>{group.displayName}</MenuItem>\r\n                                                ))\r\n                                        }\r\n                                    </Select>\r\n                                </FormControl>\r\n                            </Col>\r\n                    }\r\n                </Row>\r\n\r\n                {/** Search email */}\r\n                <Row\r\n                    style={{ marginTop: 30,  marginBottom: 30}}>\r\n                    <Col xs={12} sm={12} md={12} lg={8}>\r\n                        <FlexView>\r\n                            <FlexView basis=\"90%\" vAlignContent=\"center\" hAlignContent=\"center\"\r\n                            >\r\n                                <TextField value={invitedUserSearchText} label=\"Search by email\" name=\"invitedUserSearchText\" fullWidth variant=\"outlined\" margin=\"dense\" onChange={handleInputChanged}/>\r\n                            </FlexView>\r\n                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" basis=\"10%\" marginLeft={10}>\r\n                                <IconButton style={{width: 50,height: 50}}\r\n                                    onClick={toggleSearchMode}>\r\n                                    {\r\n                                        !invitedUsersInSearchMode\r\n                                            ?\r\n                                            <SearchIcon/>\r\n                                            :\r\n                                            <CloseIcon/>\r\n                                    }\r\n                                </IconButton>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Add members (only investors) from QIB to Silicon Gorge and vice versa */}\r\n                {\r\n                    !admin.superAdmin\r\n                        ?\r\n                        null\r\n                        :\r\n                        systemGroups.findIndex(group => group.anid === filterGroup) !== -1\r\n                        && (\r\n                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                            || systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"iap-silicon-gorge\"\r\n                        )\r\n                            ?\r\n                            <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                                <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)}\r\n                                    onClick={\r\n                                        systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                            ?\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"iap-silicon-gorge\")].anid\r\n                                            )\r\n                                            :\r\n                                            () => addMembersFromOneGroupToAnotherGroup(\r\n                                                // from sg\r\n                                                systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].anid,\r\n                                                // to qib\r\n                                                systemGroups[systemGroups.findIndex(group => group.groupUserName === \"qib\")].anid\r\n                                            )\r\n                                    }\r\n                                    style={{marginRight: 10}}>\r\n                                    {\r\n                                        addingMembersFromOneGroupToAnotherGroup\r\n                                            ?\r\n                                            \"Adding ...\"\r\n                                            :\r\n                                            systemGroups[systemGroups.findIndex(group => group.anid === filterGroup)].groupUserName === \"qib\"\r\n                                                ?\r\n                                                \"Add members from QIB to Silicon Gorge\"\r\n                                                :\r\n                                                \"Add members from Silicon Gorge to QIB\"\r\n                                    }\r\n                                </Button>\r\n                            </FlexView>\r\n                            :\r\n                            null\r\n                }\r\n\r\n                {/** Export button - only available for admins */}\r\n                {\r\n                    admin.type !== DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        null\r\n                        :\r\n                        <FlexView vAlignContent=\"center\" marginTop={30} marginBottom={20}>\r\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={exportToCsv} style={{marginRight: 10}}\r\n                            >\r\n                                {\r\n                                    requestingCsv\r\n                                        ?\r\n                                        \"Exporting ...\"\r\n                                        :\r\n                                        \"Export to csv\"\r\n                                }\r\n                            </Button>\r\n\r\n                            <InfoOverlay placement=\"right\"\r\n                                message={\r\n                                    admin.superAdmin\r\n                                        ?\r\n                                        \"Export all the users in the system to a .csv file.\"\r\n                                        :\r\n                                        \"Export all the members in your course to a .csv file.\"\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                }\r\n\r\n                {\r\n                    this.renderInvitedUsersTable()\r\n                }\r\n            </FlexView>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render invited users table\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUsersTable() {\r\n        const {\r\n            admin,\r\n\r\n            matchedInvitedUsers,\r\n\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n\r\n            handleChangeTablePage,\r\n            handleChangeTableRowsPerPage\r\n        } = this.props;\r\n\r\n        return (\r\n            <Paper elevation={0} style={{width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Name</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Email</b></Typography>\r\n                            </TableCell>\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <Typography align=\"left\" variant=\"body2\"><b>Group</b></Typography>\r\n                                    </TableCell>\r\n                            }\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>User type</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Invited/requested to join date</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\" variant=\"body2\"><b>Registration status</b></Typography>\r\n                            </TableCell>\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\" ><b>Registered/joined date</b></Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {\r\n                            this.renderInvitedUsersRows()\r\n                        }\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                        <TableRow>\r\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} count={matchedInvitedUsers.length} rowsPerPage={invitedUsersRowsPerPage} page={invitedUsersPage}\r\n                                backIconButtonProps={{\r\n                                    'aria-label': 'Previous Page',\r\n                                }}\r\n                                nextIconButtonProps={{\r\n                                    'aria-label': 'Next Page',\r\n                                }}\r\n                                SelectProps={{\r\n                                    native: true,\r\n                                }}\r\n                                onChangePage={handleChangeTablePage}\r\n                                onChangeRowsPerPage={handleChangeTableRowsPerPage}/>\r\n                        </TableRow>\r\n                    </TableFooter>\r\n                </Table>\r\n            </Paper>\r\n        );\r\n    } catch (error) {\r\n        console.error(\"Error in renderInvitedUsersTable:\", error);\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Render invited users rows\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvitedUsersRows = () => {\r\n        const {\r\n            groupUserName,\r\n            groupProperties,\r\n            admin,\r\n            invitedUsersLoaded,\r\n            matchedInvitedUsers,\r\n            invitedUsersPage,\r\n            invitedUsersRowsPerPage,\r\n            invitedUsersInSearchMode,\r\n            filterRegistrationStatus,\r\n            filterUserType,\r\n            filterGroup,\r\n            filterMembers,\r\n            resendInvite\r\n        } = this.props;\r\n\r\n        let renderedInvitedUsers = [];\r\n\r\n        if (matchedInvitedUsers.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={12}>\r\n                        <FlexView style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            {\r\n                                invitedUsersLoaded\r\n                                    ?\r\n                                    <Typography variant=\"h6\" align=\"center\">\r\n                                        {\r\n                                            invitedUsersInSearchMode\r\n                                            || filterRegistrationStatus !== FILTER_REGISTRATION_STATUS_ALL\r\n                                            || filterUserType !== 0\r\n                                            || filterGroup !== \"null\"\r\n                                            || filterMembers !== FILTER_GROUP_MEMBERS_ALL\r\n                                                ?\r\n                                                \"There are no users found using your current filter criteria.\"\r\n                                                :\r\n                                                \"No users found.\"\r\n                                        }\r\n                                    </Typography>\r\n                                    :\r\n                                    <HashLoader color={colors.primaryColor}/>\r\n                            }\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let matchedUsersInvitedByTheGroup = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate !== \"none\"\r\n        );\r\n        matchedUsersInvitedByTheGroup.sort((user1, user2) => {\r\n            return user2.invitedDate - user1.invitedDate;\r\n        });\r\n\r\n        let matchedUsersRequestedToJoin = matchedInvitedUsers.filter(\r\n            user => user.hasOwnProperty('invitedDate') && user.invitedDate === \"none\"\r\n        );\r\n        matchedUsersRequestedToJoin.sort((user1, user2) => {\r\n            return user2.requestedToJoinDate - user1.requestedToJoinDate;\r\n        });\r\n\r\n        if (filterMembers === FILTER_HOME_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup];\r\n        } else if (filterMembers === FILTER_PLATFORM_MEMBERS) {\r\n            renderedInvitedUsers = [...matchedUsersRequestedToJoin];\r\n        } else {\r\n            renderedInvitedUsers = [...matchedUsersInvitedByTheGroup, ...matchedUsersRequestedToJoin];\r\n        }\r\n\r\n        return (\r\n            !renderedInvitedUsers\r\n                ?\r\n                null\r\n                :\r\n                renderedInvitedUsers\r\n                    .slice(invitedUsersPage * invitedUsersRowsPerPage, invitedUsersPage * invitedUsersRowsPerPage + invitedUsersRowsPerPage)\r\n                    .map(invitedUser => (\r\n                        <TableRow hover key={invitedUser.id}>\r\n                            {/** User name */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    {/** User name */}\r\n                                    {invitedUser.officialUser ? (\r\n                                    <NavLink\r\n                                        to={\r\n                                            invitedUser.hasOwnProperty('officialUserID')\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.EDIT_USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                    :\r\n                                                    ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.officialUserID)\r\n                                                :\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    ROUTES.USER_PROFILE\r\n                                                        .replace(\":groupUserName\", groupUserName)\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                                    :\r\n                                                    ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                        .replace(\":userID\", invitedUser.id)\r\n                                        }\r\n                                        className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                    >\r\n                                        <Typography color=\"primary\" align=\"left\">\r\n                                            {`${invitedUser.officialUser.firstName} ${invitedUser.officialUser.lastName}`}\r\n                                        </Typography>\r\n                                    </NavLink>\r\n\r\n                                    ) : (\r\n                                        <Typography color=\"textSecondary\" align=\"left\">\r\n                                            User not found\r\n                                        </Typography>\r\n                                    )}\r\n\r\n                                    {/** Resend invite button */}\r\n                                    {\r\n                                        invitedUser.status === DB_CONST.INVITED_USER_STATUS_ACTIVE\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            // this check to ensure only the group admin that initally invited this\r\n                                            // user can resend the invitation\r\n                                            admin.superAdmin\r\n                                            || (!admin.superAdmin\r\n                                                && groupProperties\r\n                                                && groupProperties.anid !== invitedUser.invitedBy\r\n                                            )\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <FlexView marginTop={10}>\r\n                                                    <Button variant=\"outlined\" size=\"small\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={() => resendInvite(invitedUser)}>Resend invite</Button>\r\n                                                </FlexView>\r\n                                    }\r\n\r\n                                    {/** Display home/platform members */}\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\" style={{ marginTop: 15}}>\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Email */}\r\n                            <TableCell colSpan={2}>\r\n                                <FlexView column>\r\n                                    <Typography align=\"left\" variant=\"body2\" paragraph={admin.superAdmin}>{invitedUser.email}</Typography>\r\n\r\n                                    {\r\n                                        admin.superAdmin\r\n                                            ?\r\n                                            <FlexView column>\r\n                                                <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>Invited ID:</u></b> {invitedUser.id}</Typography>\r\n                                                {\r\n                                                    !invitedUser.hasOwnProperty('officialUserID')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\"><b><u>UID:</u></b> {invitedUser.officialUserID}</Typography>\r\n                                                }\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n\r\n                            {/** Group the user belongs to - available only for super admins */}\r\n                            {\r\n                                !admin.superAdmin\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <TableCell colSpan={2}>\r\n                                        <FlexView column>\r\n                                            <Typography align=\"left\" variant=\"body2\" paragraph>\r\n                                                {invitedUser.Invitor.displayName}\r\n                                            </Typography>\r\n\r\n                                            <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                {\r\n                                                    invitedUser.hasOwnProperty('invitedDate')\r\n                                                    && invitedUser.invitedDate !== \"none\"\r\n                                                        ?\r\n                                                        \"Home member\"\r\n                                                        :\r\n                                                        \"Platform member\"\r\n                                                }\r\n                                            </Typography>\r\n                                        </FlexView>\r\n                                    </TableCell>\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <TableCell colSpan={1}>\r\n                                <Typography align=\"left\"  variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            \"Issuer\"\r\n                                            :\r\n                                            \"Investor\"\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Date invited / requested to join / registered via public link */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        invitedUser.invitedDate !== \"none\"\r\n                                        && (\r\n                                            invitedUser.hasOwnProperty('requestedToJoinDate')\r\n                                            && invitedUser.requestedToJoinDate !== \"none\"\r\n                                        )\r\n                                            ?\r\n                                            `Registered via public link on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                            :\r\n                                            invitedUser.invitedDate !== \"none\"\r\n                                                ?\r\n                                                `Invited on ${myUtils.dateInReadableFormat(invitedUser.invitedDate)}`\r\n                                                :\r\n                                                `Requested to join on ${myUtils.dateInReadableFormat(invitedUser.requestedToJoinDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n\r\n                            {/** Registration status */}\r\n                            <TableCell colSpan={1}>{this.renderInvitedUserRegistrationStatus(invitedUser)}</TableCell>\r\n\r\n                            {/** Date registered/joined */}\r\n                            <TableCell colSpan={2}>\r\n                                <Typography align=\"left\" variant=\"body2\">\r\n                                    {\r\n                                        !invitedUser.hasOwnProperty('joinedDate')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            !invitedUser.requestedToJoin\r\n                                                ?\r\n                                                `Registered on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                                :\r\n                                                `Joined on ${myUtils.dateInReadableFormat(invitedUser.joinedDate)}`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ))\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function is used to render invited users' registration status\r\n     *\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderInvitedUserRegistrationStatus = invitedUser => {\r\n\r\n        let msgObj = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        switch (invitedUser.status) {\r\n            case DB_CONST.INVITED_USER_NOT_REGISTERED:\r\n                msgObj.msg = 'Not registered';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_ACTIVE:\r\n                msgObj.msg = `Current ${invitedUser.type === DB_CONST.TYPE_INVESTOR ? \"investor\" : \"issuer\"}`;\r\n                msgObj.color = 'primary';\r\n                break;\r\n            case DB_CONST.INVITED_USER_DECLINED_TO_REGISTER:\r\n                msgObj.msg = 'Declined to join';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_LEFT:\r\n                msgObj.msg = 'Left';\r\n                msgObj.color = 'error';\r\n                break;\r\n            case DB_CONST.INVITED_USER_STATUS_KICKED_OUT:\r\n                msgObj.msg = 'Kicked out';\r\n                msgObj.color = 'error';\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"left\" variant=\"body2\" color={msgObj.color}>{msgObj.msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(InvitedUsers);","import React, {Component} from 'react';\nimport {\n    Button,\n    Dialog, DialogActions,\n    DialogContent,\n    DialogTitle,\n    FormControl,\n    IconButton,\n    TextField,\n    Typography,\n    SnackbarContent,\n    Snackbar\n} from '@material-ui/core';\nimport {Image} from 'react-bootstrap';\nimport CloseIcon from '@material-ui/icons/Close';\nimport AddIcon from '@material-ui/icons/Add';\nimport FlexView from 'react-flexview';\nimport {css, StyleSheet} from 'aphrodite';\nimport Files from 'react-files';\n\nimport {connect} from 'react-redux';\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\n\nimport sharedStyles, {SlideTransitionDown} from '../../../shared-js-css-styles/SharedStyles';\nimport * as DB_CONST from '../../../firebase/databaseConsts';\nimport * as colors from '../../../values/colors';\nimport * as utils from '../../../utils/utils';\n\nexport const ADD_STATUS_NONE = 0;\nexport const ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK = 1;\nexport const ADD_STATUS_USER_NAME_EXISTS = 2;\nexport const ADD_STATUS_EMAIL_ALREADY_USED = 3;\nexport const ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO = 4;\nexport const ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE = 5;\nexport const ADD_STATUS_SUCCESSFULLY_ADDED = 6;\nexport const ADD_STATUS_ERROR_HAPPENED = 7;\n\nexport const UPLOAD_NONE = 0;\nexport const UPLOAD_PLAIN_LOGO = 1;\nexport const UPLOAD_LOGO_WITH_TEXT = 2;\n\nconst mapStateToProps = state => {\n    return {\n        addAngelNetworkDialogOpen: state.manageAddAngelNetworkDialog.addAngelNetworkDialogOpen,\n\n        angelNetworkName: state.manageAddAngelNetworkDialog.angelNetworkName,\n        angelNetworkUsername: state.manageAddAngelNetworkDialog.angelNetworkUsername,\n        email: state.manageAddAngelNetworkDialog.email,\n        website: state.manageAddAngelNetworkDialog.website,\n        primaryColor: state.manageAddAngelNetworkDialog.primaryColor,\n        secondaryColor: state.manageAddAngelNetworkDialog.secondaryColor,\n\n        plainLogo: state.manageAddAngelNetworkDialog.plainLogo,\n        loadingPlainLogo: state.manageAddAngelNetworkDialog.loadingPlainLogo,\n        logoWithText: state.manageAddAngelNetworkDialog.logoWithText,\n        loadingLogoWithText: state.manageAddAngelNetworkDialog.loadingLogoWithText,\n\n        uploadMode: state.manageAddAngelNetworkDialog.uploadMode,\n        uploadProgress: state.manageAddAngelNetworkDialog.uploadProgress,\n\n        imgUploadError: state.manageAddAngelNetworkDialog.imgUploadError,\n        imgUploadErrorSnackbarOpen: state.manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen,\n\n        addButtonClicked: state.manageAddAngelNetworkDialog.addButtonClicked,\n        response: state.manageAddAngelNetworkDialog.addResult\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\n        handleInputChanged: (event) => dispatch(addAngelNetworkDialogActions.handleAddAngelNetworkInputChanged(event)),\n        addNewAngelNetwork: () => dispatch(addAngelNetworkDialogActions.addNewAngelNetwork()),\n\n        handleImageFilesChanged: (mode, files) => dispatch(addAngelNetworkDialogActions.handleImageFilesChanged(mode, files)),\n        handleImageFileError: (mode, error, file) => dispatch(addAngelNetworkDialogActions.handleImageFileError(mode, error, file)),\n        closeErrorSnackbar: () => dispatch(addAngelNetworkDialogActions.closeImageFileErrorSnackbar()),\n        resetImageFileErrorMessageWhenSnackbarExited: () => dispatch(addAngelNetworkDialogActions.resetImageFileErrorMessageWhenSnackbarExited())\n    }\n};\n\nclass AddAngelNetworkDialog extends Component {\n\n    handleImageFilesChanged = mode => files => {\n        this.props.handleImageFilesChanged(mode, files);\n    };\n\n    handleImageFileError = mode => (error, file) => {\n        this.props.handleImageFileError(mode, error, file);\n    };\n\n    render() {\n        const {\n            forwardedRef,\n            addAngelNetworkDialogOpen,\n\n            angelNetworkName,\n            angelNetworkUsername,\n            email,\n            website,\n            primaryColor,\n            secondaryColor,\n\n            plainLogo,\n            loadingPlainLogo,\n            logoWithText,\n            loadingLogoWithText,\n\n            imgUploadError,\n            imgUploadErrorSnackbarOpen,\n\n            addButtonClicked,\n\n            uploadMode,\n            uploadProgress,\n\n            handleImageFilesChanged,\n            handleImageFileError,\n            toggleAddAngelNetworkDialog,\n            handleInputChanged,\n            addNewAngelNetwork,\n            closeErrorSnackbar,\n            resetImageFileErrorMessageWhenSnackbarExited,\n\n            ...other\n        } = this.props;\n\n        return (\n            <Dialog ref={forwardedRef} open={addAngelNetworkDialogOpen} fullWidth maxWidth=\"md\" onClose={toggleAddAngelNetworkDialog} {...other}>\n                <DialogTitle disableTypography>\n                    <FlexView vAlignContent=\"center\">\n                        <FlexView grow={4}>\n                            <Typography variant='h6' color='primary' align=\"left\">\n                                Add new group\n                            </Typography>\n                        </FlexView>\n                        <FlexView grow={1} hAlignContent=\"right\">\n                            <IconButton onClick={toggleAddAngelNetworkDialog}>\n                                <CloseIcon/>\n                            </IconButton>\n                        </FlexView>\n                    </FlexView>\n                </DialogTitle>\n                <DialogContent style={{marginTop: 10}}>\n                    <TextField\n                        label=\"Course name\"\n                        placeholder=\"Write course's full name here ...\"\n                        name=\"angelNetworkName\"\n                        value={angelNetworkName}\n                        fullWidth\n                        margin=\"dense\"\n                        variant=\"outlined\"\n                        required\n                        error={addButtonClicked && angelNetworkName.length === 0}\n                        onChange={handleInputChanged}\n                    />\n\n                    <TextField\n                        label=\"Course username\"\n                        placeholder=\"Write course's username here. E.g. aba, or qtec\"\n                        helperText=\"Note: Username must be unique. For convention, use lowercase letters and use - to connect words. E.g. future-space\"\n                        name=\"angelNetworkUsername\"\n                        value={angelNetworkUsername}\n                        fullWidth\n                        margin=\"dense\"\n                        variant=\"outlined\"\n                        required\n                        error={addButtonClicked && angelNetworkUsername.trim().length === 0}\n                        onChange={handleInputChanged}\n                    />\n\n                    <FormControl fullWidth style={{marginTop: 25, marginBottom: 25}}>\n                        <TextField\n                            label=\"Registered email\"\n                            placeholder=\"Write email here ...\"\n                            helperText=\"This email will be used to login to course's admin page. Once added, an email with auto-generated password will be sent to this email address.\"\n                            name=\"email\"\n                            value={email}\n                            fullWidth\n                            margin=\"dense\"\n                            variant=\"outlined\"\n                            required\n                            error={addButtonClicked && email.trim().length === 0}\n                            onChange={handleInputChanged}\n                        />\n                    </FormControl>\n\n                    <FormControl fullWidth>\n                        <TextField\n                            label=\"Website\"\n                            placeholder=\"Course's official website\"\n                            name=\"website\"\n                            value={website}\n                            fullWidth\n                            margin=\"dense\"\n                            variant=\"outlined\"\n                            required\n                            error={addButtonClicked && website.trim().length === 0}\n                            onChange={handleInputChanged}\n                        />\n                        {\n                            website.trim().length === 0 || utils.isValidWebURL(website)\n                                ?\n                                null\n                                :\n                                <Typography\n                                    variant=\"body2\"\n                                    color=\"error\"\n                                    align=\"left\"\n                                >\n                                    Invalid website URL\n                                </Typography>\n                        }\n                    </FormControl>\n\n                    <FormControl fullWidth style={{marginTop: 25}}>\n                        <TextField\n                            label=\"Primary color\"\n                            placeholder=\"E.g. #FFFFFF\"\n                            name=\"primaryColor\"\n                            value={primaryColor.toUpperCase()}\n                            fullWidth\n                            margin=\"dense\"\n                            variant=\"outlined\"\n                            required\n                            error={addButtonClicked && primaryColor.trim().length === 0}\n                            onChange={handleInputChanged}\n                        />\n                        {\n                            primaryColor.trim().length === 0 || utils.isValidHexColorCode(primaryColor)\n                                ?\n                                null\n                                :\n                                <Typography variant=\"body2\" color=\"error\"  align=\"left\">Invalid color</Typography>\n                        }\n                    </FormControl>\n\n                    <FormControl fullWidth style={{marginBottom: 25}}>\n                        <TextField\n                            label=\"Secondary color\"\n                            placeholder=\"E.g. #FFFFFF\"\n                            name=\"secondaryColor\"\n                            value={secondaryColor.toUpperCase()}\n                            fullWidth\n                            margin=\"dense\"\n                            variant=\"outlined\"\n                            required\n                            error={addButtonClicked && secondaryColor.trim().length === 0}\n                            onChange={handleInputChanged}\n                        />\n\n                        {\n                            secondaryColor.trim().length === 0 || utils.isValidHexColorCode(secondaryColor)\n                                ?\n                                null\n                                :\n                                <Typography variant=\"body2\" color=\"error\" align=\"left\">Invalid color</Typography>\n                        }\n                    </FormControl>\n\n                    {/** Upload plain (main) logo (compulsory) */}\n                    <FlexView column>\n                        <Files\n                            className={css(styles.img_drop_zone)}\n                            onChange={this.handleImageFilesChanged(UPLOAD_PLAIN_LOGO)}\n                            onError={this.handleImageFileError(UPLOAD_PLAIN_LOGO)}\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\n                            minFileSize={0}\n                            multiple\n                            clickable\n                            style={{marginTop: 25}}\n                        >\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload plain logo (with no text)</FlexView>\n                            </Files>\n\n                        {\n                            !plainLogo\n                                ?\n                                null\n                                :\n                                (\n                                    <FlexView marginTop={20} width={270} height={270}>\n                                        <Image src={window.URL.createObjectURL(plainLogo)} roundedCircle thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\n                                    </FlexView>\n                                )\n                        }\n                    </FlexView>\n\n                    {/** Upload logo with text (optional) */}\n                    <FlexView column marginTop={25}>\n                        <Files\n                            className={css(styles.img_drop_zone)}\n                            onChange={this.handleImageFilesChanged(UPLOAD_LOGO_WITH_TEXT)}\n                            onError={this.handleImageFileError(UPLOAD_LOGO_WITH_TEXT)}\n                            accepts={['image/png', 'image/jpg', 'image/jpeg']}\n                            maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\n                            minFileSize={0}\n                            multiple\n                            clickable\n                        >\n                            <FlexView vAlignContent=\"center\" hAlignContent=\"center\">\n                                <AddIcon fontSize=\"small\" style={{marginRight: 8}}/>Upload logo with text (optional)</FlexView>\n                            </Files>\n\n                        {\n                            !logoWithText\n                                ?\n                                null\n                                :\n                                (\n                                    <FlexView marginTop={20} width={540} height={270}>\n                                        <Image src={window.URL.createObjectURL(logoWithText)} thumbnail style={{width: \"100%\", height: \"auto\", objectFit: \"fill\"}}/>\n                                    </FlexView>\n                                )\n                        }\n                    </FlexView>\n                </DialogContent>\n                <DialogActions>\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={15} hAlignContent=\"right\" vAlignContent=\"center\">\n                        {\n                            this.renderRespondCode()\n                        }\n                        <Button variant=\"outlined\" color=\"primary\" onClick={addNewAngelNetwork} size=\"large\" className={css(sharedStyles.no_text_transform)}\n                            disabled={\n                                angelNetworkName.trim().length === 0\n                                || angelNetworkUsername.trim().length === 0\n                                || email.trim().length === 0\n                                || website.trim().length === 0\n                                || (website.trim().length > 0 && !utils.isValidWebURL(website))\n                                || primaryColor.trim().length === 0\n                                || secondaryColor.trim().length === 0\n                                || (primaryColor.trim().length > 0 && !utils.isValidHexColorCode(primaryColor))\n                                || (secondaryColor.trim().length > 0 && !utils.isValidHexColorCode(secondaryColor))\n                                || !plainLogo\n                            }\n                            style={{ marginLeft: 35}}>\n                            Add\n                            <AddIcon fontSize=\"small\" style={{marginLeft: 8}}/>\n                        </Button>\n                    </FlexView>\n                </DialogActions>\n\n                <Snackbar\n                    open={imgUploadErrorSnackbarOpen}\n                    anchorOrigin={{ vertical: 'top', horizontal: 'center',}}\n                    autoHideDuration={3000}\n                    onClose={closeErrorSnackbar}\n                    onExited={resetImageFileErrorMessageWhenSnackbarExited}\n                    TransitionComponent={SlideTransitionDown}\n                    transitionDuration={{ enter: 130, exit: 130}}>\n                    <SnackbarContent style={{backgroundColor: colors.red_700}}\n                        message={imgUploadError}\n                        action={[\n                            <IconButton key=\"close\" color=\"inherit\" onClick={closeErrorSnackbar}>\n                                <CloseIcon/>\n                            </IconButton>\n                        ]}\n                    />\n                </Snackbar>\n            </Dialog>\n        );\n    }\n\n    /**\n     * Render add angel network result\n     *\n     * @returns {null|*}\n     */\n    renderRespondCode = () => {\n        const {\n            response,\n            uploadMode,\n            uploadProgress\n        } = this.props;\n\n        let res = {\n            msg: '',\n            color: ''\n        };\n\n        switch (response) {\n            case ADD_STATUS_NONE:\n                return null;\n            case ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK:\n                res.msg = \"Checking if the angel network has been added before ...\";\n                res.color = \"primary\";\n                break;\n            case ADD_STATUS_USER_NAME_EXISTS:\n                res.msg = \"This username has already been used.\";\n                res.color = \"error\";\n                break;\n            case ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO:\n                res.msg = `Uploading ${uploadMode === UPLOAD_PLAIN_LOGO ? \"plain logo\" : \"logo with text\"}, ${parseInt(uploadProgress)}% completed`;\n                res.color = \"primary\";\n                break;\n            case ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE:\n                res.msg = \"Creating angel network's profile ...\";\n                res.color = \"primary\";\n                break;\n            case ADD_STATUS_EMAIL_ALREADY_USED:\n                res.msg = \"This email has already been used.\";\n                res.color = \"error\";\n                break;\n            case ADD_STATUS_SUCCESSFULLY_ADDED:\n                res.msg = \"Added successfully. An email has been sent to the angel network for login information.\";\n                res.color = \"primary\";\n                break;\n            case ADD_STATUS_ERROR_HAPPENED:\n                res.msg = \"Error happened. Couldn't add the angel network.\";\n                res.color = \"error\";\n                break;\n            default:\n                break;\n        }\n\n        return (\n            <Typography color={res.color} variant=\"subtitle1\" align=\"left\">\n                {res.msg}\n            </Typography>\n        )\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddAngelNetworkDialog);\n\nconst styles = StyleSheet.create({\n\n    img_drop_zone: {\n        paddingTop: 10,\n        paddingBottom: 10,\n        paddingLeft: 30,\n        paddingRight: 30,\n        textAlign: 'center',\n        border: `1px solid ${colors.gray_400}`,\n\n        ':hover': {\n            backgroundColor: colors.gray_100,\n            cursor: 'pointer'\n        }\n    }\n});","import firebase from '../../firebase/firebaseApp';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as myUtils from '../../utils/utils';\nimport {\n    ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK,\n    ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE,\n    ADD_STATUS_EMAIL_ALREADY_USED,\n    ADD_STATUS_ERROR_HAPPENED,\n    ADD_STATUS_SUCCESSFULLY_ADDED,\n    ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\n    ADD_STATUS_USER_NAME_EXISTS,\n    UPLOAD_LOGO_WITH_TEXT,\n    UPLOAD_PLAIN_LOGO\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\nimport * as ROUTES from '../../router/routes';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\n\nexport const TOGGLE_ADD_ANGEL_NETWORK_DIALOG = 'TOGGLE_ADD_ANGEL_NETWORK_DIALOG';\nexport const toggleAddAngelNetworkDialog = () => {\n    return {\n        type: TOGGLE_ADD_ANGEL_NETWORK_DIALOG\n    }\n};\n\nexport const ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED = 'ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED';\nexport const handleAddAngelNetworkInputChanged = event => {\n    return {\n        type: ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED,\n        event\n    }\n};\n\nexport const ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED = 'ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED';\nexport const ADD_ANGEL_NETWORK_RESULT_CHANGED = 'ADD_ANGEL_NETWORK_RESULT_CHANGED';\nexport const addNewAngelNetwork = () => {\n    return async (dispatch, getState) => {\n\n        const currentUser = getState().auth.user;\n\n        dispatch({\n            type: ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED\n        });\n\n        const {\n            angelNetworkName,\n            angelNetworkUsername,\n            email,\n            website,\n            primaryColor,\n            secondaryColor,\n            plainLogo,\n            logoWithText\n        } = getState().manageAddAngelNetworkDialog;\n\n        dispatch({\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n            result: ADD_STATUS_CHECKING_FOR_EXISTING_ANGEL_NETWORK\n        });\n\n        // generate group id\n        const anid = firebase\n            .database()\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .push()\n            .key;\n\n        try {\n            // check if the group username has been used or not\n            const snapshots = await firebase\n                .database()\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n                .orderByChild(\"groupUserName\")\n                .equalTo(angelNetworkUsername.toLowerCase())\n                .once(\"value\");\n\n            // username has already exists\n            if (snapshots.numChildren() > 0) {\n                dispatch({\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                    result: ADD_STATUS_USER_NAME_EXISTS\n                });\n                return;\n            }\n\n            const checkExistingUser = await realtimeDBUtils.doesUserExist(email);\n\n            // email has already been used\n            if (checkExistingUser.userExists) {\n                dispatch({\n                    type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                    result: ADD_STATUS_EMAIL_ALREADY_USED\n                });\n                return;\n            }\n\n            // upload plain logo\n            const uploadedPlainLogo = await uploadLogo(dispatch, anid, UPLOAD_PLAIN_LOGO, plainLogo);\n\n            // upload logo with text\n            const uploadedLogoWithText = await uploadLogo(dispatch, anid, UPLOAD_LOGO_WITH_TEXT, logoWithText);\n\n            // new group properties\n            const newGroupProperties = {\n                anid,\n                isInvestWest: false,\n                displayName: angelNetworkName,\n                displayNameLower: angelNetworkName.toLowerCase(), // for search function\n                groupUserName: angelNetworkUsername.toLowerCase(),\n                description: \"\",\n                website: website,\n                dateAdded: myUtils.getCurrentDate(),\n                status: DB_CONST.GROUP_STATUS_ACTIVE,\n                plainLogo: [{\n                    storageID: uploadedPlainLogo.storageID,\n                    url: uploadedPlainLogo.url\n                }],\n                logoWithText:\n                    !uploadedLogoWithText\n                        ?\n                        null\n                        :\n                        [{\n                            storageID: uploadedLogoWithText.storageID,\n                            url: uploadedLogoWithText.url\n                        }],\n                settings: {\n                    projectVisibility: DB_CONST.PROJECT_VISIBILITY_PRIVATE,\n                    makeInvestorsContactDetailsVisibleToIssuers: false, // initially set this to false\n                    primaryColor: primaryColor.toUpperCase(),\n                    secondaryColor: secondaryColor.toUpperCase()\n                }\n            }\n\n            // add new group properties to the database\n            await firebase\n                .database()\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n                .child(anid)\n                .set(newGroupProperties);\n\n            dispatch({\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                result: ADD_STATUS_CREATING_ANGEL_NETWORK_PROFILE\n            });\n\n            await new Api().request(\n                \"post\",\n                ApiRoutes.addGroupAdminRoute,\n                {\n                    requestBody: {\n                        adder: currentUser,\n                        groupProperties: newGroupProperties,\n                        newGroupAdminEmail: email\n                    }\n                }\n            );\n\n            // send a notification to the newly created super course admin\n            await realtimeDBUtils\n                .sendNotification({\n                    title: \"Change your password\",\n                    message: \"Welcome to Invest West. It is important to change your password as soon as possible. Please do it by clicking on the Password tab in your dashboard.\",\n                    userID: anid,\n                    action: `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Change password`\n                });\n\n            // adding a new super group admin succeeds\n            dispatch({\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                result: ADD_STATUS_SUCCESSFULLY_ADDED\n            });\n        } catch (error) {\n            // remove the added group properties if error happened\n            await firebase\n                .database()\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n                .child(anid)\n                .remove();\n\n            dispatch({\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                result: ADD_STATUS_ERROR_HAPPENED,\n                error\n            });\n        }\n    }\n};\n\n/**\n * This function is used to upload an image (logo or profile picture)\n *\n * @returns {Promise<*>}\n */\nconst uploadLogo = async (dispatch, anid, mode, blob) => {\n\n    return new Promise((resolve, reject) => {\n\n        if (!blob) {\n            return resolve(null);\n        }\n\n        let firebaseStorage = firebase.storage();\n\n        dispatch({\n            type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n            result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\n            progress: 0\n        });\n\n        let storageID = myUtils.getCurrentDate();\n        let storageLocation = `${mode === UPLOAD_PLAIN_LOGO ? DB_CONST.PLAIN_LOGOS_CHILD : DB_CONST.LOGOS_WITH_TEXT_CHILD}/${storageID}`;\n\n        const storageRef = firebaseStorage\n            .ref(DB_CONST.GROUP_PROPERTIES_CHILD)\n            .child(anid)\n            .child(storageLocation);\n\n        // upload logo to firebase storage\n        const uploadTask = storageRef.put(blob);\n        uploadTask.on('state_changed', snapshot => {\n            let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            dispatch({\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                result: ADD_STATUS_UPLOADING_ANGEL_NETWORK_LOGO,\n                progress,\n                mode\n            });\n            // handle error\n        }, error => {\n\n            dispatch({\n                type: ADD_ANGEL_NETWORK_RESULT_CHANGED,\n                result: ADD_STATUS_ERROR_HAPPENED,\n                mode\n            });\n\n            return reject(error);\n            // logo successfully uploaded\n        }, () => {\n\n            // get download URL of the uploaded logo\n            uploadTask.snapshot.ref.getDownloadURL().then(imgDownloadURL => {\n\n                const imgUploadedObj = {\n                    storageID: storageID,\n                    url: imgDownloadURL\n                };\n\n                return resolve(imgUploadedObj);\n            });\n        });\n    });\n};\n\nexport const ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE = 'ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE';\nexport const ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED = 'ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED';\nexport const handleImageFilesChanged = (mode, files) => {\n    return (dispatch, getState) => {\n        if (getState().manageAddAngelNetworkDialog.imgUploadError.trim().length > 0 || getState().manageAddAngelNetworkDialog.imgUploadErrorSnackbarOpen) {\n            return null;\n        }\n\n        dispatch({\n            type: ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE,\n            mode\n        });\n\n        const blob = new Blob([files[files.length - 1]], {type: 'image/jpg'});\n\n        dispatch({\n            type: ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED,\n            blob,\n            mode\n        });\n    }\n};\n\nexport const ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR = 'ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR';\nexport const handleImageFileError = (mode, error, file) => {\n    if (error.code === 2) {\n        return {\n            type: ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR,\n            error,\n            file,\n            mode\n        }\n    }\n};\n\nexport const ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR = 'ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR';\nexport const closeImageFileErrorSnackbar = () => {\n    return {\n        type: ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR\n    }\n};\n\nexport const ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED = 'ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED';\nexport const resetImageFileErrorMessageWhenSnackbarExited = () => {\n    return {\n        type: ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED\n    }\n};\n\n","import firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const LOADING_ANGEL_NETWORKS = 'LOADING_ANGEL_NETWORKS';\nexport const FINISHED_LOADING_ANGEL_NETWORKS = 'FINISHED_LOADING_ANGEL_NETWORKS';\nexport const loadAngelNetworks = () => {\n    return (dispatch, getState) => {\n        const admin = getState().auth.user;\n\n        if (!admin || (admin && !admin.superAdmin)) {\n            dispatch({\n                type: FINISHED_LOADING_ANGEL_NETWORKS\n            });\n            return;\n        }\n\n        dispatch({\n            type: LOADING_ANGEL_NETWORKS\n        });\n\n        realtimeDBUtils\n            .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\n            .then(angelNetworks => {\n                dispatch({\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\n                    angelNetworks\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: FINISHED_LOADING_ANGEL_NETWORKS,\n                    error\n                });\n            });\n    }\n};\n\nexport const ANGEL_NETWORKS_TABLE_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_PAGE_CHANGED';\nexport const changePage = (event, newPage) => {\n    return {\n        type: ANGEL_NETWORKS_TABLE_PAGE_CHANGED,\n        newPage\n    }\n};\n\nexport const ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED = 'ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED';\nexport const changeRowsPerPage = event => {\n    return {\n        type: ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED,\n        value: parseInt(event.target.value, 10)\n    }\n};\n\nexport const ANGEL_NETWORKS_TABLE_INPUT_CHANGED = 'ANGEL_NETWORKS_TABLE_INPUT_CHANGED';\nexport const handleAngelNetworksTableInputChanged = event => {\n    return (dispatch, getState) => {\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\n\n        const searchText = event.target.value;\n        let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\n\n        dispatch({\n            type: ANGEL_NETWORKS_TABLE_INPUT_CHANGED,\n            searchText,\n            matchedAngelNetworks\n        });\n    }\n};\n\nexport const TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE = 'TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE';\nexport const toggleSearchMode = () => {\n    return (dispatch, getState) => {\n        const inSearchMode = getState().manageAngelNetworks.inSearchMode;\n        const searchText = getState().manageAngelNetworks.searchText;\n        const angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\n\n        if (inSearchMode) {\n            dispatch({\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\n                enter: false,\n                matchedAngelNetworks: []\n            });\n        } else {\n            let matchedAngelNetworks = angelNetworks.filter(angelNetwork => angelNetwork.displayName.toLowerCase().includes(searchText.trim().toLowerCase()));\n            dispatch({\n                type: TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE,\n                enter: true,\n                matchedAngelNetworks\n            });\n        }\n    }\n};\n\n// Listeners -----------------------------------------------------------------------------------------------------------\n\nlet angelNetworksListener = null;\n\nexport const ANGEL_NETWORKS_IN_TABLE_CHANGED = 'ANGEL_NETWORKS_IN_TABLE_CHANGED';\n\nexport const startListeningForAngelNetworksChanged = () => {\n    return (dispatch, getState) => {\n        if (!angelNetworksListener) {\n            angelNetworksListener = firebase\n                .database()\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\n\n            angelNetworksListener\n                .on('child_added', snapshot => {\n                    let angelNetwork = snapshot.val();\n\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\n\n                    if (angelNetworkIndex === -1) {\n                        dispatch({\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\n                            angelNetworks: [...angelNetworks, angelNetwork]\n                        });\n                    }\n                });\n\n            angelNetworksListener\n                .on('child_changed', snapshot => {\n                    let angelNetwork = snapshot.val();\n\n                    let angelNetworks = [...getState().manageAngelNetworks.angelNetworks];\n                    let angelNetworkIndex = angelNetworks.findIndex(existingAN => existingAN.anid === angelNetwork.anid);\n\n                    if (angelNetworkIndex !== -1) {\n                        angelNetworks[angelNetworkIndex] = angelNetwork;\n                        dispatch({\n                            type: ANGEL_NETWORKS_IN_TABLE_CHANGED,\n                            angelNetworks\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForAngelNetworksChanged = () => {\n    return (dispatch, getState) => {\n        if (angelNetworksListener) {\n            angelNetworksListener.off('child_added');\n            angelNetworksListener.off('child_changed');\n            angelNetworksListener = null;\n        }\n    }\n};","import React, {Component} from 'react';\nimport {\n    Button,\n    Divider,\n    IconButton,\n    InputAdornment,\n    InputBase,\n    Paper,\n    Table,\n    TableBody,\n    TableCell,\n    TableFooter,\n    TableHead,\n    TablePagination,\n    TableRow,\n    Typography\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SearchIcon from '@material-ui/icons/Search';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport AddIcon from '@material-ui/icons/Add';\nimport {Col, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport {HashLoader} from 'react-spinners';\n\nimport {css} from 'aphrodite';\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\n\nimport * as colors from '../../../values/colors';\nimport * as DB_CONST from '../../../firebase/databaseConsts';\nimport * as myUtils from '../../../utils/utils';\n\nimport {connect} from 'react-redux';\nimport * as addAngelNetworkDialogActions from '../../../redux-store/actions/addAngelNetworkDialogActions';\nimport * as angelNetworksActions from '../../../redux-store/actions/angelNetworksActions';\nimport {NavLink} from \"react-router-dom\";\nimport Routes from \"../../../router/routes\";\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        admin: state.auth.user,\n\n        angelNetworks: state.manageAngelNetworks.angelNetworks,\n        loadingAngelNetworks: state.manageAngelNetworks.loadingAngelNetworks,\n        angelNetworksLoaded: state.manageAngelNetworks.angelNetworksLoaded,\n        page: state.manageAngelNetworks.page,\n        rowsPerPage: state.manageAngelNetworks.rowsPerPage,\n\n        searchText: state.manageAngelNetworks.searchText,\n        inSearchMode: state.manageAngelNetworks.inSearchMode,\n        matchedAngelNetworks: state.manageAngelNetworks.matchedAngelNetworks\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleAddAngelNetworkDialog: () => dispatch(addAngelNetworkDialogActions.toggleAddAngelNetworkDialog()),\n        loadAngelNetworks: () => dispatch(angelNetworksActions.loadAngelNetworks()),\n        changePage: (event, newPage) => dispatch(angelNetworksActions.changePage(event, newPage)),\n        changeRowsPerPage: (event) => dispatch(angelNetworksActions.changeRowsPerPage(event)),\n        handleAngelNetworksTableInputChanged: (event) => dispatch(angelNetworksActions.handleAngelNetworksTableInputChanged(event)),\n        toggleSearchMode: () => dispatch(angelNetworksActions.toggleSearchMode()),\n        startListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.startListeningForAngelNetworksChanged()),\n        stopListeningForAngelNetworksChanged: () => dispatch(angelNetworksActions.stopListeningForAngelNetworksChanged())\n    }\n};\n\nclass AngelNetworks extends Component {\n\n    componentDidMount() {\n        this.loadData({inComponentDidMount: true});\n        this.addListener();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            shouldLoadOtherData,\n\n            admin,\n\n            stopListeningForAngelNetworksChanged\n        } = this.props;\n\n        // cancel all listeners if user is set to null\n        if (!admin || (admin && !admin.superAdmin) || !shouldLoadOtherData) {\n            stopListeningForAngelNetworksChanged();\n            return;\n        }\n\n        this.loadData({inComponentDidMount: false});\n        this.addListener();\n    }\n\n    componentWillUnmount() {\n        const {\n            stopListeningForAngelNetworksChanged\n        } = this.props;\n\n        stopListeningForAngelNetworksChanged();\n    }\n\n    /**\n     * Load data\n     */\n    loadData = ({inComponentDidMount = true}) => {\n        const {\n            shouldLoadOtherData,\n\n            admin,\n\n            loadingAngelNetworks,\n            angelNetworksLoaded,\n\n            loadAngelNetworks\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (inComponentDidMount) {\n                if (admin && admin.superAdmin) {\n                    loadAngelNetworks();\n                }\n            } else {\n                // loadAngelNetworks() is called in componentDidUpdate which happens after every state changes\n                // therefore, in order to avoid unlimited calls of loadAngelNetworks, another check variable called loadingAngelNetworks\n                // is added to ensure the function only gets called once.\n                if (admin && admin.superAdmin && !loadingAngelNetworks && !angelNetworksLoaded) {\n                    loadAngelNetworks();\n                }\n            }\n        }\n    };\n\n    /**\n     * Add listener\n     */\n    addListener = () => {\n        const {\n            shouldLoadOtherData,\n\n            angelNetworks,\n            angelNetworksLoaded,\n\n            startListeningForAngelNetworksChanged\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (angelNetworks && angelNetworksLoaded) {\n                startListeningForAngelNetworksChanged();\n            }\n        }\n    };\n\n    render() {\n        const {\n            toggleAddAngelNetworkDialog\n        } = this.props;\n\n        return (\n            <FlexView\n                column\n                width=\"100%\"\n            >\n                <Divider style={{marginBottom: 20}}/>\n                <Row style={{marginBottom: 10}}>\n                    <Col xs={12} md={5} lg={12} style={{marginBottom: 40}}>\n                        <Button color=\"primary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddAngelNetworkDialog}>\n                            <AddIcon style={{marginRight: 10, width: 20, height: \"auto\"}}/>\n                            Add new group\n                        </Button>\n                    </Col>\n                </Row>\n                {\n                    this.renderAngelNetworksTable()\n                }\n            </FlexView>\n        );\n    }\n\n    /**\n     * Render angel networks table\n     *\n     * @returns {*}\n     */\n    renderAngelNetworksTable = () => {\n        const {\n            groupPropertiesLoaded,\n            groupProperties,\n            admin,\n            angelNetworks,\n            page,\n            rowsPerPage,\n            searchText,\n            inSearchMode,\n            loadAngelNetworks,\n            changePage,\n            changeRowsPerPage,\n            handleAngelNetworksTableInputChanged,\n            toggleSearchMode\n        } = this.props;\n\n        if (!groupPropertiesLoaded || !admin || (admin && !admin.superAdmin)) {\n            return null;\n        }\n\n        // sort angel networks by added date\n        angelNetworks.sort((angelNetwork1, angelNetwork2) => {\n            return (angelNetwork2.dateAdded - angelNetwork1.dateAdded);\n        });\n\n        return (\n            <Paper elevation={1} style={{overflowX: \"auto\"}}>\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\n                                component={\n                                    <InputBase name=\"searchText\" value={searchText}  onChange={handleAngelNetworksTableInputChanged} fullWidth placeholder=\"Search group by name\" type=\"text\"\n                                        startAdornment={\n                                            <InputAdornment position=\"start\">\n                                                <OverlayTrigger trigger={['hover', 'focus']}  flip placement=\"bottom\"\n                                                    overlay={\n                                                        <Tooltip id={`tooltip-bottom`}>\n                                                            {\n                                                                inSearchMode\n                                                                    ?\n                                                                    \"Exit search mode\"\n                                                                    :\n                                                                    \"Enter search mode\"\n                                                            }\n                                                        </Tooltip>\n                                                    }>\n                                                    <IconButton onClick={toggleSearchMode}>\n                                                        {\n                                                            inSearchMode\n                                                                ?\n                                                                <CloseIcon/>\n                                                                :\n                                                                <SearchIcon/>\n                                                        }\n                                                    </IconButton>\n                                                </OverlayTrigger>\n                                            </InputAdornment>\n                                        }\n                                    />\n                                }\n                            />\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\n                                component={\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip  placement=\"bottom\"\n                                            overlay={\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\n                                            }>\n                                            <IconButton onClick={loadAngelNetworks} style={{marginLeft: 10}}>\n                                                <RefreshIcon/>\n                                            </IconButton>\n                                        </OverlayTrigger>\n                                    </FlexView>\n                                }\n                            />\n                        </TableRow>\n                        <TableRow>\n                            <StyledTableCell colSpan={2}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)}  align=\"left\">Groups</Typography>\n                                }/>\n                            <StyledTableCell colSpan={1}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">ID</Typography>\n                                }\n                            />\n                            <StyledTableCell colSpan={1}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">\n                                        Date added\n                                    </Typography>\n                                }\n                            />\n                            <StyledTableCell colSpan={1}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" className={css(sharedStyles.white_text)} align=\"left\">Status</Typography>\n                                }\n                            />\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {this.renderAngelNetworkRows()}\n                    </TableBody>\n                    <TableFooter>\n                        <TableRow>\n                            <TablePagination style={{backgroundColor: colors.blue_gray_50}} rowsPerPageOptions={[5, 10, 25]} count={angelNetworks.length} rowsPerPage={rowsPerPage}  page={page} backIconButtonProps={{'aria-label': 'Previous Page',}} nextIconButtonProps={{'aria-label': 'Next Page',}} SelectProps={{ native: true,}} onChangePage={changePage} onChangeRowsPerPage={changeRowsPerPage}/>\n                        </TableRow>\n                    </TableFooter>\n                </Table>\n            </Paper>\n        );\n    };\n\n    /**\n     * Render angel network rows\n     *\n     * @returns {*}\n     */\n    renderAngelNetworkRows = () => {\n        const {\n            groupUserName,\n            groupProperties,\n            angelNetworks,\n            angelNetworksLoaded,\n            matchedAngelNetworks,\n            inSearchMode,\n            page,\n            rowsPerPage\n        } = this.props;\n\n        let renderedAngelNetworks = [];\n\n        if (inSearchMode) {\n            renderedAngelNetworks = matchedAngelNetworks;\n        } else {\n            renderedAngelNetworks = angelNetworks;\n        }\n\n        if (renderedAngelNetworks.length === 0) {\n            return (\n                <TableRow>\n                    <TableCell colSpan={5}>\n                        <FlexView\n                         style={{ margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\n                            {\n                                angelNetworksLoaded\n                                    ?\n                                    <Typography variant=\"h6\" align=\"center\">\n                                        {\n                                            inSearchMode\n                                                ?\n                                                \"Can't find any groups with this name.\"\n                                                :\n                                                \"No groups added yet.\"\n                                        }\n                                    </Typography>\n                                    :\n                                    <HashLoader\n                                        color={\n                                            !groupProperties\n                                                ?\n                                                colors.primaryColor\n                                                :\n                                                groupProperties.settings.primaryColor\n                                        }/>\n                            }\n                        </FlexView>\n                    </TableCell>\n                </TableRow>\n            );\n        }\n\n        return (\n            renderedAngelNetworks.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(angelNetwork => (\n                <TableRow key={angelNetwork.anid} hover>\n                    <TableCell colSpan={2}>\n                        <NavLink to={Routes.constructGroupDetailRoute(groupUserName, angelNetwork.groupUserName)} className={css(sharedStyles.nav_link_hover_without_changing_text_color)}>\n                            <Typography color=\"primary\">{angelNetwork.displayName}</Typography>\n                        </NavLink>\n                    </TableCell>\n                    <TableCell colSpan={1}>\n                        <Typography color=\"primary\">{angelNetwork.anid}</Typography>\n                    </TableCell>\n                    <TableCell colSpan={1}>\n                        <Typography color=\"primary\">{myUtils.dateTimeInReadableFormat(angelNetwork.dateAdded)}</Typography>\n                    </TableCell>\n                    <TableCell colSpan={1}>\n                        <Typography\n                            color={\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\n                                    ?\n                                    \"primary\"\n                                    :\n                                    \"error\"\n                            }>\n                            {\n                                angelNetwork.status === DB_CONST.GROUP_STATUS_ACTIVE\n                                    ?\n                                    \"Active\"\n                                    :\n                                    \"Suspended\"\n                            }\n                        </Typography>\n                    </TableCell>\n                </TableRow>\n            ))\n        );\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AngelNetworks);","import firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as utils from '../../utils/utils';\nimport * as ROUTES from '../../router/routes';\n\nexport const MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS';\nexport const MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS = 'MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS';\nexport const loadJoinRequests = () => {\n    return (dispatch, getState) => {\n\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        if (!groupProperties) {\n            return;\n        }\n\n        dispatch({\n            type: MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS\n        });\n\n        realtimeDBUtils\n            .loadRequestsToJoin({anid: groupProperties.anid})\n            .then(joinRequests => {\n                dispatch({\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\n                    joinRequests\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS,\n                    joinRequests: [],\n                    error\n                });\n            });\n    }\n};\n\nexport const MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE';\nexport const toggleSearchMode = () => {\n    return (dispatch, getState) => {\n        const inSearchMode = getState().manageJoinRequests.inSearchMode;\n        const searchText = getState().manageJoinRequests.searchText;\n        const joinRequests = getState().manageJoinRequests.joinRequests;\n\n        if (inSearchMode) {\n            dispatch({\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\n                enter: false,\n                matchedJoinRequests: []\n            });\n        } else {\n            let matchedJoinRequests = joinRequests.filter(joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase()));\n            dispatch({\n                type: MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE,\n                enter: true,\n                matchedJoinRequests\n            });\n        }\n    }\n};\n\nexport const MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED';\nexport const changePage = (event, newPage) => {\n    return {\n        type: MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED,\n        newPage\n    }\n};\n\nexport const MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED';\nexport const changeRowsPerPage = event => {\n    return {\n        type: MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED,\n        value: parseInt(event.target.value, 10)\n    }\n};\n\nexport const MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED = 'MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED';\nexport const handleJoinRequestsTableInputChanged = event => {\n    return (dispatch, getState) => {\n        const joinRequests = getState().manageJoinRequests.joinRequests;\n\n        const searchText = event.target.value;\n        let matchedJoinRequests = joinRequests.filter(\n            joinRequest => joinRequest.userProfile.email.toLowerCase().includes(searchText.trim().toLowerCase())\n        );\n\n        dispatch({\n            type: MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED,\n            searchText,\n            matchedJoinRequests\n        });\n    }\n};\n\nexport const acceptJoinRequest = (request) => {\n    return (dispatch, getState) => {\n        // remove the join request\n        firebase\n            .database()\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\n            .child(request.id)\n            .remove()\n            .then(() => {\n                const pushKey = firebase.database().ref(DB_CONST.INVITED_USERS_CHILD).push().key;\n                const currentDate = utils.getCurrentDate();\n                // add a node in InvitedUsers\n                firebase\n                    .database()\n                    .ref(DB_CONST.INVITED_USERS_CHILD)\n                    .child(pushKey)\n                    .set({\n                        id: pushKey,\n                        email: request.userProfile.email,\n                        firstName: request.userProfile.firstName,\n                        lastName: request.userProfile.lastName,\n                        title: request.userProfile.title,\n                        type: request.userProfile.type,\n                        status: DB_CONST.INVITED_USER_STATUS_ACTIVE,\n                        officialUserID: request.userID,\n                        invitedBy: request.groupToJoin,\n                        invitedDate: \"none\",\n                        requestedToJoin: true,\n                        requestedToJoinDate: currentDate,\n                        joinedDate: currentDate\n                    })\n                    .then(() => {\n                        realtimeDBUtils\n                            .sendNotification({\n                                title: `${request.group.displayName} has accepted your join request`,\n                                message: `Congratulations. You are now a member of ${request.group.displayName}. You can see and interact with all offers from ${request.group.displayName}.`,\n                                userID: request.userID,\n                                action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\n                            })\n                            .then(() => {\n                                // do something\n                            })\n                            .catch(error => {\n                                // handle error\n                            });\n                    });\n            });\n    }\n};\n\nexport const rejectJoinRequest = (request) => {\n    return (dispatch, getState) => {\n        // remove the join request\n        firebase\n            .database()\n            .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\n            .child(request.id)\n            .remove()\n            .then(() => {\n                realtimeDBUtils\n                    .sendNotification({\n                        title: `${request.group.displayName} has rejected your join request`,\n                        message: `We are so sorry that ${request.group.displayName} has rejected your join request. However, there are other courses that you can take part in.`,\n                        userID: request.userID,\n                        action: `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Explore groups`\n                    })\n                    .then(() => {\n                        // do something\n                    })\n                    .catch(error => {\n                        // handle error\n                    });\n            });\n    }\n};\n\n//----------------------------------------------------------------------------------------------------------------------\nlet joinRequestsListener = null;\n\nexport const MANAGE_JOIN_REQUESTS_CHANGED = 'MANAGE_JOIN_REQUESTS_CHANGED';\nexport const startListeningForJoinRequestsChanged = () => {\n    return (dispatch, getState) => {\n        const user = getState().auth.user;\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        if (!user || !groupProperties) {\n            return;\n        }\n\n        if (!joinRequestsListener) {\n            joinRequestsListener = firebase\n                .database()\n                .ref(DB_CONST.REQUESTS_TO_JOIN_CHILD)\n                .orderByChild('groupToJoin')\n                .equalTo(groupProperties.anid);\n\n            joinRequestsListener\n                .on('child_added', snapshot => {\n                    let joinRequest = snapshot.val();\n\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\n                    if (index === -1) {\n                        realtimeDBUtils\n                            .getUserBasedOnID(joinRequest.userID)\n                            .then(userProfile => {\n                                joinRequest.userProfile = userProfile;\n\n                                realtimeDBUtils\n                                    .loadAngelNetworkBasedOnANID(joinRequest.groupToJoin)\n                                    .then(angelNetwork => {\n                                        joinRequest.group = angelNetwork;\n\n                                        dispatch({\n                                            type: MANAGE_JOIN_REQUESTS_CHANGED,\n                                            joinRequests: [...joinRequests, joinRequest]\n                                        });\n                                    });\n                            })\n                    }\n                });\n\n            joinRequestsListener\n                .on('child_removed', snapshot => {\n                    let joinRequest = snapshot.val();\n\n                    let joinRequests = [...getState().manageJoinRequests.joinRequests];\n                    const index = joinRequests.findIndex(existingJoinRequest => existingJoinRequest.id === joinRequest.id);\n\n                    if (index !== -1) {\n                        joinRequests.splice(index, 1);\n                        dispatch({\n                            type: MANAGE_JOIN_REQUESTS_CHANGED,\n                            joinRequests\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForJoinRequestsChanged = () => {\n    return (dispatch, getState) => {\n        if (joinRequestsListener) {\n            joinRequestsListener.off('child_added');\n            joinRequestsListener.off('child_removed');\n            joinRequestsListener = null;\n        }\n    }\n};\n","import React, {Component} from 'react';\nimport {\n    OverlayTrigger,\n    Tooltip\n} from 'react-bootstrap';\nimport {\n    Typography,\n    Paper,\n    TableHead,\n    TableRow,\n    TableCell,\n    TableBody,\n    TableFooter,\n    TablePagination,\n    Table,\n    InputBase,\n    InputAdornment,\n    IconButton, Button\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SearchIcon from '@material-ui/icons/Search';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport FlexView from 'react-flexview';\nimport {NavLink} from 'react-router-dom';\nimport {css} from 'aphrodite';\nimport {HashLoader} from 'react-spinners';\n\nimport {connect} from 'react-redux';\nimport * as manageJoinRequestsActions from '../../../redux-store/actions/manageJoinRequestsActions';\n\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\nimport * as colors from '../../../values/colors';\nimport * as ROUTES from '../../../router/routes';\nimport * as myUtils from '../../../utils/utils';\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        user: state.auth.user,\n\n        joinRequests: state.manageJoinRequests.joinRequests,\n        loadingJoinRequests: state.manageJoinRequests.loadingJoinRequests,\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded,\n\n        searchText: state.manageJoinRequests.searchText,\n        inSearchMode: state.manageJoinRequests.inSearchMode,\n        matchedJoinRequests: state.manageJoinRequests.matchedJoinRequests,\n\n        page: state.manageJoinRequests.page,\n        rowsPerPage: state.manageJoinRequests.rowsPerPage\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        loadJoinRequests: () => dispatch(manageJoinRequestsActions.loadJoinRequests()),\n        toggleSearchMode: () => dispatch(manageJoinRequestsActions.toggleSearchMode()),\n        changePage: (event, newPage) => dispatch(manageJoinRequestsActions.changePage(event, newPage)),\n        changeRowsPerPage: (event) => dispatch(manageJoinRequestsActions.changeRowsPerPage(event)),\n        handleJoinRequestsTableInputChanged: (event) => dispatch(manageJoinRequestsActions.handleJoinRequestsTableInputChanged(event)),\n        acceptJoinRequest: (request) => dispatch(manageJoinRequestsActions.acceptJoinRequest(request)),\n        rejectJoinRequest: (request) => dispatch(manageJoinRequestsActions.rejectJoinRequest(request)),\n        startListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.startListeningForJoinRequestsChanged()),\n        stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged())\n    }\n};\n\nclass JoinRequests extends Component {\n\n    componentDidMount() {\n        this.loadData();\n        this.attachListener();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            shouldLoadOtherData,\n            user,\n            stopListeningForJoinRequestsChanged\n        } = this.props;\n\n        // cancel all listeners if user is set to null\n        if (!user || !shouldLoadOtherData) {\n            stopListeningForJoinRequestsChanged();\n            return;\n        }\n\n        this.loadData();\n        this.attachListener();\n    }\n\n    /**\n     * Load data\n     */\n    loadData = () => {\n        const {\n            shouldLoadOtherData,\n\n            user,\n\n            loadingJoinRequests,\n            joinRequestsLoaded,\n\n            loadJoinRequests\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (user) {\n                if (!loadingJoinRequests && !joinRequestsLoaded) {\n                    loadJoinRequests();\n                }\n            }\n        }\n    };\n\n    /**\n     * Attach listener\n     */\n    attachListener = () => {\n        const {\n            shouldLoadOtherData,\n\n            joinRequests,\n            joinRequestsLoaded,\n\n            startListeningForJoinRequestsChanged\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (joinRequests && joinRequestsLoaded) {\n                startListeningForJoinRequestsChanged();\n            }\n        }\n    };\n\n    render() {\n        const {\n            groupProperties,\n            groupPropertiesLoaded,\n            user,\n            joinRequests,\n            searchText,\n            inSearchMode,\n            page,\n            rowsPerPage,\n            loadJoinRequests,\n            toggleSearchMode,\n            changePage,\n            changeRowsPerPage,\n            handleJoinRequestsTableInputChanged\n        } = this.props;\n\n        if (!groupPropertiesLoaded || !user) {\n            return null;\n        }\n\n        // sort join requests by request date (recent requests come first)\n        joinRequests.sort((joinRequest1, joinRequest2) => {\n            return (joinRequest2.requestedDate - joinRequest1.requestedDate);\n        });\n\n        return (\n            <Paper elevation={1} style={{ width: \"100%\", overflowX: \"auto\", marginTop: 20}}>\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                            <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\n                                component={\n                                    <InputBase name=\"searchText\" value={searchText} onChange={handleJoinRequestsTableInputChanged} fullWidth placeholder=\"Search access request by email\" type=\"text\"\n                                        startAdornment={\n                                            <InputAdornment position=\"start\">\n                                                <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\n                                                    overlay={\n                                                        <Tooltip id={`tooltip-bottom`}>\n                                                            {\n                                                                inSearchMode\n                                                                    ?\n                                                                    \"Exit search mode\"\n                                                                    :\n                                                                    \"Enter search mode\"\n                                                            }\n                                                        </Tooltip>\n                                                    }>\n                                                    <IconButton onClick={toggleSearchMode}>\n                                                        {\n                                                            inSearchMode\n                                                                ?\n                                                                <CloseIcon/>\n                                                                :\n                                                                <SearchIcon/>\n                                                        }\n                                                    </IconButton>\n                                                </OverlayTrigger>\n                                            </InputAdornment>\n                                        }\n                                    />\n                                }\n                            />\n                            <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50}\n                                component={\n                                    <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\n                                        <OverlayTrigger trigger={['hover', 'focus']} flip placement=\"bottom\"\n                                            overlay={\n                                                <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>\n                                            }>\n                                            <IconButton onClick={loadJoinRequests} style={{marginLeft: 10}}>\n                                                <RefreshIcon/>\n                                            </IconButton>\n                                        </OverlayTrigger>\n                                    </FlexView>\n                                }\n                            />\n                        </TableRow>\n                        <TableRow>\n                            <StyledTableCell colSpan={2}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>User's name</Typography>\n                                }\n                            />\n                            <StyledTableCell colSpan={1}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>\n                                }\n                            />\n                            <StyledTableCell colSpan={1}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Requested date</Typography>\n                                }\n                            />\n                            <StyledTableCell colSpan={1}\n                                cellColor={\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                                }\n                                textColor={colors.white}\n                                component={\n                                    <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Action</Typography>\n                                }\n                            />\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {\n                            this.renderJoinRequestsRows()\n                        }\n                    </TableBody>\n                    <TableFooter>\n                        <TableRow>\n                            <TablePagination rowsPerPageOptions={[5, 10, 25]} colSpan={5} count={joinRequests.length} rowsPerPage={rowsPerPage} page={page}\n                                backIconButtonProps={{'aria-label': 'Previous Page',}}\n                                nextIconButtonProps={{'aria-label': 'Next Page',}}\n                                SelectProps={{ native: true,}}\n                                onChangePage={changePage}\n                                onChangeRowsPerPage={changeRowsPerPage}/>\n                        </TableRow>\n                    </TableFooter>\n                </Table>\n            </Paper>\n        );\n    }\n\n    /**\n     * Render join requests table rows\n     *\n     * @returns {*}\n     */\n    renderJoinRequestsRows = () => {\n        const {\n            groupUserName,\n            groupProperties,\n            joinRequests,\n            joinRequestsLoaded,\n            matchedJoinRequests,\n            inSearchMode,\n            page,\n            rowsPerPage,\n            acceptJoinRequest,\n            rejectJoinRequest\n        } = this.props;\n\n        let renderedJoinRequests = [];\n\n        if (inSearchMode) {\n            renderedJoinRequests = matchedJoinRequests;\n        } else {\n            renderedJoinRequests = joinRequests;\n        }\n\n        if (renderedJoinRequests.length === 0) {\n            return (\n                <TableRow>\n                    <TableCell colSpan={5}>\n                        <FlexView style={{margin: 40}} hAlignContent=\"center\" vAlignContent=\"center\">\n                            {\n                                joinRequestsLoaded\n                                    ?\n                                    <Typography variant=\"h6\" align=\"center\">\n                                        {\n                                            inSearchMode\n                                                ?\n                                                \"Can't find any access request with this email.\"\n                                                :\n                                                \"No access requests yet.\"\n                                        }\n                                    </Typography>\n                                    :\n                                    <HashLoader\n                                        color={\n                                            !groupProperties\n                                                ?\n                                                colors.primaryColor\n                                                :\n                                                groupProperties.settings.primaryColor\n                                        }\n                                    />\n                            }\n                        </FlexView>\n                    </TableCell>\n                </TableRow>\n            );\n        }\n\n        return (\n            renderedJoinRequests.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(joinRequest => (\n                <TableRow key={joinRequest.id} hover>\n                    <TableCell colSpan={2}>\n                        <FlexView column>\n                            <NavLink\n                                to={\n                                    groupUserName\n                                        ?\n                                        `${ROUTES.USER_PROFILE.replace(\":groupUserName\", groupUserName).replace(\":userID\", joinRequest.userID)}`\n                                        :\n                                        `${ROUTES.USER_PROFILE_INVEST_WEST_SUPER.replace(\":userID\", joinRequest.userID)}`\n                                }\n                                className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\n                            >\n                                <Typography align=\"left\" variant=\"body1\" color=\"primary\">\n                                    {`${joinRequest.userProfile.title} ${joinRequest.userProfile.firstName} ${joinRequest.userProfile.lastName}`}\n                                </Typography>\n                            </NavLink>\n                        </FlexView>\n                    </TableCell>\n                    <TableCell colSpan={1}>\n                        <Typography align=\"left\" variant=\"body1\">\n                            {joinRequest.userProfile.email}\n                        </Typography>\n                    </TableCell>\n                    <TableCell colSpan={1}>\n                        <Typography align=\"left\" variant=\"body1\">\n                            {myUtils.dateInReadableFormat(joinRequest.requestedDate)}\n                        </Typography>\n                    </TableCell>\n                    <TableCell colSpan={1}>\n                        <FlexView>\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"secondary\" onClick={() => rejectJoinRequest(joinRequest)} style={{marginRight: 6}}>Reject</Button>\n                            <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} color=\"primary\" onClick={() => acceptJoinRequest(joinRequest)} style={{marginLeft: 6}}>Accept</Button>\n                        </FlexView>\n                    </TableCell>\n                </TableRow>\n            ))\n        );\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(JoinRequests);","import * as DB_CONST from \"../../firebase/databaseConsts\";\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\nimport {trackActivity} from \"../../firebase/realtimeDBUtils\";\nimport firebase from \"../../firebase/firebaseApp\";\nimport {\n    ADD_NEW_GROUP_ADMIN_STATUS_CHECKING,\n    ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED,\n    ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\n} from \"../../pages/admin/components/GroupAdminsTable\";\nimport * as feedbackSnackbarActions from \"./feedbackSnackbarActions\";\nimport Api, {ApiRoutes} from \"../../api/Api.tsx\";\n\nexport const GROUP_ADMINS_TABLE_SET_GROUP = 'GROUP_ADMINS_TABLE_SET_GROUP';\nexport const setGroup = newGroup => {\n    return (dispatch, getState) => {\n        const prevTableGroup = getState().manageGroupAdminsTable.tableGroup;\n\n        if (!newGroup || !prevTableGroup) {\n            dispatch({\n                type: GROUP_ADMINS_TABLE_SET_GROUP,\n                group: newGroup\n            });\n            return;\n        }\n\n        if (prevTableGroup.anid === newGroup.anid) {\n            return;\n        }\n\n        dispatch({\n            type: GROUP_ADMINS_TABLE_SET_GROUP,\n            group: newGroup\n        });\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS';\nexport const GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS = 'GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS';\nexport const loadGroupAdmins = () => {\n    return (dispatch, getState) => {\n        const currentUser = getState().auth.user;\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\n\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\n            dispatch({\n                type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\n                groupAdmins: []\n            });\n            return;\n        }\n\n        if (!currentUser.superAdmin) {\n            if (currentUser.anid !== tableGroup.anid) {\n                dispatch({\n                    type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\n                    groupAdmins: []\n                });\n                return;\n            }\n        }\n\n        dispatch({\n            type: GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS\n        });\n\n        realtimeDBUtils\n        .loadGroupAdminsBasedOnGroupID(tableGroup.anid)\n        .then(groupAdmins => {\n            dispatch({\n                type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\n                groupAdmins: [...groupAdmins]\n            });\n        })\n        .catch(error => {\n            console.error('Error loading group admins:', error);\n            dispatch({\n                type: GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS,\n                groupAdmins: []\n            });\n        });\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_PAGE_CHANGED';\nexport const changePage = (event, newPage) => {\n    return {\n        type: GROUP_ADMINS_TABLE_PAGE_CHANGED,\n        newPage\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED = 'GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED';\nexport const changeRowsPerPage = event => {\n    return {\n        type: GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED,\n        value: parseInt(event.target.value, 10)\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE = 'GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE';\nexport const toggleSearchMode = () => {\n    return {\n        type: GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED = 'GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED';\nexport const handleInputChanged = event => {\n    return {\n        type: GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED,\n        event\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG = 'GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG';\nexport const toggleAddNewGroupAdminDialog = () => {\n    return {\n        type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\n    }\n};\n\nexport const GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED = 'GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED';\nexport const handleAddNewGroupAdmin = () => {\n    return async (dispatch, getState) => {\n        const newGroupAdminEmail = getState().manageGroupAdminsTable.newGroupAdminEmail;\n        const currentUser = getState().auth.user;\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\n\n        if (!currentUser) {\n            return;\n        }\n\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\n            return;\n        }\n\n        if (!currentUser.superGroupAdmin) {\n            return;\n        }\n\n        if (newGroupAdminEmail.trim().length === 0) {\n            dispatch({\n                type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\n                status: ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL\n            });\n            return;\n        }\n\n        dispatch({\n            type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\n            status: ADD_NEW_GROUP_ADMIN_STATUS_CHECKING\n        });\n\n        try {\n            const checkResult = await realtimeDBUtils.doesUserExist(newGroupAdminEmail.toLowerCase());\n\n            // this email has already been used\n            if (checkResult.userExists) {\n                dispatch({\n                    type: GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED,\n                    status: ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED\n                });\n            } else {\n                const response = await new Api().request(\n                    \"post\",\n                    ApiRoutes.addGroupAdminRoute,\n                    {\n                        queryParameters: null,\n                        requestBody: {\n                            adder: currentUser,\n                            groupProperties: groupProperties,\n                            newGroupAdminEmail: newGroupAdminEmail\n                        }\n                    }\n                );\n\n                // obtain the newly created group admin profile from the server\n                const newGroupAdmin = response.data;\n\n                // track super group admin's activity\n                trackActivity({\n                    userID: currentUser.id,\n                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                    interactedObjectLocation: DB_CONST.ADMINISTRATORS_CHILD,\n                    interactedObjectID: newGroupAdmin.id,\n                    activitySummary:\n                        realtimeDBUtils\n                            .ACTIVITY_SUMMARY_TEMPLATE_ADDED_A_NEW_GROUP_ADMIN\n                            .replace(\"%groupAdminEmail%\", newGroupAdminEmail)\n                    ,\n                    value: newGroupAdmin\n                });\n\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Course admin added successfully.\",\n                    color: \"primary\",\n                    position: \"bottom\"\n                });\n\n                dispatch({\n                    type: GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG\n                });\n            }\n        } catch (error) {\n            dispatch({\n                type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                message: \"Error happened. Couldn't add this course admin.\",\n                color: \"error\",\n                position: \"bottom\"\n            });\n        }\n    }\n};\n//----------------------------------------------------------------------------------------------------------------------\n\nlet groupAdminsListener = null;\n\nexport const GROUP_ADMINS_TABLE_CHANGED = 'GROUP_ADMINS_TABLE_CHANGED';\nexport const startListeningForGroupAdminsChanged = () => {\n    return (dispatch, getState) => {\n        if (groupAdminsListener) {\n            return;\n        }\n\n        const currentUser = getState().auth.user;\n        const tableGroup = getState().manageGroupAdminsTable.tableGroup;\n\n        if (currentUser.type !== DB_CONST.TYPE_ADMIN) {\n            return;\n        }\n\n        if (!currentUser.superAdmin && currentUser.anid !== tableGroup.anid) {\n            return;\n        }\n\n        groupAdminsListener = firebase\n            .database()\n            .ref(DB_CONST.ADMINISTRATORS_CHILD);\n\n        groupAdminsListener\n            .on('child_added', snapshot => {\n                const groupAdmin = snapshot.val();\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\n\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\n                if (index === -1) {\n\n                    if (groupAdmin.anid === tableGroup.anid) {\n                        dispatch({\n                            type: GROUP_ADMINS_TABLE_CHANGED,\n                            groupAdmins: [...groupAdmins, groupAdmin]\n                        });\n                    }\n                }\n            });\n\n        groupAdminsListener\n            .on('child_changed', snapshot => {\n                const groupAdmin = snapshot.val();\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\n\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\n                if (index !== -1) {\n                    groupAdmins[index] = groupAdmin;\n                    dispatch({\n                        type: GROUP_ADMINS_TABLE_CHANGED,\n                        groupAdmins: [...groupAdmins]\n                    });\n                }\n            });\n\n        groupAdminsListener\n            .on('child_removed', snapshot => {\n                const groupAdmin = snapshot.val();\n                let groupAdmins = [...getState().manageGroupAdminsTable.groupAdmins];\n\n                const index = groupAdmins.findIndex(existingGroupAdmin => existingGroupAdmin.id === groupAdmin.id);\n                if (index !== -1) {\n                    groupAdmins.splice(index, 1);\n                    dispatch({\n                        type: GROUP_ADMINS_TABLE_CHANGED,\n                        groupAdmins: [...groupAdmins]\n                    });\n                }\n            });\n    }\n};\n\nexport const stopListeningForGroupAdminsChanged = () => {\n    return (dispatch, getState) => {\n        if (groupAdminsListener) {\n            groupAdminsListener.off('child_added');\n            groupAdminsListener.off('child_changed');\n            groupAdminsListener.off('child_removed');\n            groupAdminsListener = null;\n        }\n    }\n};","import React, {Component} from 'react';\nimport {\n    Paper,\n    Table,\n    TableHead,\n    TableBody,\n    TableFooter,\n    TableRow,\n    TableCell,\n    Typography,\n    Button,\n    InputBase,\n    TablePagination,\n    InputAdornment,\n    IconButton,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    TextField\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SearchIcon from '@material-ui/icons/Search';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport AddIcon from '@material-ui/icons/Add';\nimport {\n    OverlayTrigger,\n    Tooltip\n} from 'react-bootstrap';\nimport {\n    HashLoader,\n    BeatLoader\n} from 'react-spinners';\nimport {css} from 'aphrodite';\nimport FlexView from 'react-flexview';\n\nimport * as utils from '../../../utils/utils';\nimport * as colors from '../../../values/colors';\nimport sharedStyles, {StyledTableCell} from '../../../shared-js-css-styles/SharedStyles';\n\nimport {connect} from 'react-redux';\nimport * as groupAdminsTableActions from '../../../redux-store/actions/groupAdminsTableActions';\n\nexport const ADD_NEW_GROUP_ADMIN_STATUS_NONE = 0;\nexport const ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL = 1;\nexport const ADD_NEW_GROUP_ADMIN_STATUS_CHECKING = 2;\nexport const ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED = 3;\nexport const ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS = 4;\n\nconst mapStateToProps = state => {\n    return {\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n        currentUser: state.auth.user,\n        tableGroup: state.manageGroupAdminsTable.tableGroup,\n        groupAdmins: state.manageGroupAdminsTable.groupAdmins,\n        groupAdminsLoaded: state.manageGroupAdminsTable.groupAdminsLoaded,\n        loadingGroupAdmins: state.manageGroupAdminsTable.loadingGroupAdmins,\n        page: state.manageGroupAdminsTable.page,\n        rowsPerPage: state.manageGroupAdminsTable.rowsPerPage,\n        searchText: state.manageGroupAdminsTable.searchText,\n        inSearchMode: state.manageGroupAdminsTable.inSearchMode,\n\n        addNewGroupAdminDialogOpen: state.manageGroupAdminsTable.addNewGroupAdminDialogOpen,\n        newGroupAdminEmail: state.manageGroupAdminsTable.newGroupAdminEmail,\n        addNewGroupAdminStatus: state.manageGroupAdminsTable.addNewGroupAdminStatus\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        loadGroupAdmins: () => dispatch(groupAdminsTableActions.loadGroupAdmins()),\n        changePage: (event, newPage) => dispatch(groupAdminsTableActions.changePage(event, newPage)),\n        changeRowsPerPage: (event) => dispatch(groupAdminsTableActions.changeRowsPerPage(event)),\n        handleInputChanged: (event) => dispatch(groupAdminsTableActions.handleInputChanged(event)),\n        toggleSearchMode: () => dispatch(groupAdminsTableActions.toggleSearchMode()),\n        startListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.startListeningForGroupAdminsChanged()),\n        stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\n        handleAddNewGroupAdmin: () => dispatch(groupAdminsTableActions.handleAddNewGroupAdmin()),\n\n        toggleAddNewGroupAdminDialog: () => dispatch(groupAdminsTableActions.toggleAddNewGroupAdminDialog())\n    }\n};\n\nclass GroupAdminsTable extends Component {\n\n    componentDidMount() {\n        this.loadData();\n        this.addListeners();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        const {\n            shouldLoadOtherData,\n            tableGroup,\n            stopListeningForGroupAdminsChanged\n        } = this.props;\n\n        // cancel all listeners if tableGroup is set to null\n        if (!tableGroup || !shouldLoadOtherData) {\n            stopListeningForGroupAdminsChanged();\n            return;\n        }\n\n        this.loadData();\n        this.addListeners();\n    }\n\n    /**\n     * Load data\n     */\n    loadData = () => {\n        const {\n            shouldLoadOtherData,\n            tableGroup,\n            loadingGroupAdmins,\n            groupAdminsLoaded,\n            loadGroupAdmins\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (tableGroup && !loadingGroupAdmins && !groupAdminsLoaded) {\n                loadGroupAdmins();\n            }\n        }\n    };\n\n    /**\n     * Add listener\n     */\n    addListeners = () => {\n        const {\n            shouldLoadOtherData,\n            groupAdmins,\n            groupAdminsLoaded,\n            startListeningForGroupAdminsChanged\n        } = this.props;\n\n        if (shouldLoadOtherData) {\n            if (groupAdmins && groupAdminsLoaded) {\n                startListeningForGroupAdminsChanged();\n            }\n        }\n    };\n\n    render() {\n        const {\n            groupProperties,\n            currentUser,\n            tableGroup,\n            page,\n            rowsPerPage,\n            searchText,\n            inSearchMode,\n            addNewGroupAdminDialogOpen,\n            newGroupAdminEmail,\n            addNewGroupAdminStatus,\n            changePage,\n            changeRowsPerPage,\n            loadGroupAdmins,\n            handleInputChanged,\n            toggleSearchMode,\n            handleAddNewGroupAdmin,\n\n            toggleAddNewGroupAdminDialog\n        } = this.props;\n\n        return (\n            <div>\n                <Paper elevation={1} style={{overflowX: \"auto\"}}>\n                    <Table>\n                        <TableHead>\n                            <TableRow>\n                                <StyledTableCell colSpan={3} cellColor={colors.blue_gray_50}\n                                    component={\n                                        <InputBase name=\"searchText\" value={searchText} onChange={handleInputChanged} fullWidth placeholder=\"Search by email\" type=\"text\"\n                                            startAdornment={\n                                                <InputAdornment position=\"start\">\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" fli\n                                                        overlay={\n                                                            <Tooltip id={`tooltip-bottom`}>\n                                                                {\n                                                                    inSearchMode\n                                                                        ?\n                                                                        \"Exit search mode\"\n                                                                        :\n                                                                        \"Enter search mode\"\n                                                                }\n                                                            </Tooltip>\n                                                        }>\n                                                        <IconButton onClick={toggleSearchMode}>\n                                                            {\n                                                                inSearchMode\n                                                                    ?\n                                                                    <CloseIcon/>\n                                                                    :\n                                                                    <SearchIcon/>\n                                                            }\n                                                        </IconButton>\n                                                    </OverlayTrigger>\n                                                </InputAdornment>\n                                            }\n                                        />\n                                    }\n                                />\n                                <StyledTableCell colSpan={2} cellColor={colors.blue_gray_50} component={\n                                        <FlexView hAlignContent=\"right\" vAlignContent=\"center\">\n                                            {\n                                                currentUser.superGroupAdmin\n                                                && tableGroup !== null\n                                                && currentUser.anid === tableGroup.anid\n                                                    ?\n                                                    <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)} onClick={toggleAddNewGroupAdminDialog} style={{ marginRight: 8}}>Add new group admin</Button>\n                                                    :\n                                                    null\n                                            }\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\n                                                overlay={\n                                                    <Tooltip id={`tooltip-bottom`}>Refresh</Tooltip>}>\n                                                <IconButton onClick={loadGroupAdmins} style={{marginLeft: 10}}>\n                                                    <RefreshIcon/>\n                                                </IconButton>\n                                            </OverlayTrigger>\n                                        </FlexView>\n                                    }\n                                />\n                            </TableRow>\n                            <TableRow>\n                                <StyledTableCell colSpan={2}\n                                    cellColor={\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                    }\n                                    component={\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Email</Typography>}/>\n                                <StyledTableCell colSpan={1}\n                                    cellColor={\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                    }\n                                    component={\n                                        <Typography variant=\"body2\" align=\"left\"  className={css(sharedStyles.white_text)}>Type</Typography>}/>\n                                <StyledTableCell colSpan={1}\n                                    cellColor={\n                                        !groupProperties\n                                            ?\n                                            colors.primaryColor\n                                            :\n                                            groupProperties.settings.primaryColor\n                                    }\n                                    component={\n                                        <Typography variant=\"body2\" align=\"left\" className={css(sharedStyles.white_text)}>Date added</Typography>}/>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {\n                                this.renderTableRows()\n                            }\n                        </TableBody>\n                        <TableFooter>\n                            <TableRow>\n                                <TablePagination\n                                    style={{backgroundColor: colors.blue_gray_50}}\n                                    rowsPerPageOptions={[10, 30, 50]}\n                                    count={this.getRenderedGroupAdmins().length}\n                                    rowsPerPage={rowsPerPage}\n                                    page={page}\n                                    backIconButtonProps={{\n                                        'aria-label': 'Previous Page',\n                                    }}\n                                    nextIconButtonProps={{\n                                        'aria-label': 'Next Page',\n                                    }}\n                                    SelectProps={{\n                                        native: true,\n                                    }}\n                                    onChangePage={changePage}\n                                    onChangeRowsPerPage={changeRowsPerPage}\n                                />\n                            </TableRow>\n                        </TableFooter>\n                    </Table>\n                </Paper>\n\n                <AddGroupAdminDialog\n                    groupProperties={groupProperties}\n                    addNewGroupAdminDialogOpen={addNewGroupAdminDialogOpen}\n                    newGroupAdminEmail={newGroupAdminEmail}\n                    addNewGroupAdminStatus={addNewGroupAdminStatus}\n                    toggleAddNewGroupAdminDialog={toggleAddNewGroupAdminDialog}\n                    handleInputChanged={handleInputChanged}\n                    handleAddNewGroupAdmin={handleAddNewGroupAdmin}\n                />\n            </div>\n        );\n    }\n\n    /**\n     * Render table rows\n     *\n     * @returns {*[]|*}\n     */\n    renderTableRows = () => {\n        const {\n            groupProperties,\n            groupAdminsLoaded,\n            page,\n            rowsPerPage,\n            inSearchMode\n        } = this.props;\n\n        if (this.getRenderedGroupAdmins().length === 0) {\n            return (\n                <TableRow>\n                    <TableCell colSpan={4}>\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\" style={{margin: 20}}>\n                            {\n                                groupAdminsLoaded\n                                    ?\n                                    <Typography variant=\"body1\" align=\"center\">\n                                        {\n                                            inSearchMode\n                                                ?\n                                                \"No group admins found.\"\n                                                :\n                                                \"No group admins.\"\n                                        }\n                                    </Typography>\n                                    :\n                                    <HashLoader\n                                        color={\n                                            !groupProperties\n                                                ?\n                                                colors.primaryColor\n                                                :\n                                                groupProperties.settings.primaryColor\n                                        }\n                                    />\n                            }\n                        </FlexView>\n                    </TableCell>\n                </TableRow>\n            );\n        }\n\n        return (\n            this.getRenderedGroupAdmins()\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(groupAdmin => (\n                    <TableRow key={groupAdmin.id} hover>\n                        <TableCell colSpan={2}>\n                            <Typography variant=\"body2\" align=\"left\">\n                                {groupAdmin.email}\n                            </Typography>\n                        </TableCell>\n                        <TableCell colSpan={1}>\n                            <Typography variant=\"body2\" align=\"left\">\n                                {\n                                    groupAdmin.superGroupAdmin\n                                        ?\n                                        \"Super group admin\"\n                                        :\n                                        \"Group admin\"\n                                }\n                            </Typography>\n                        </TableCell>\n                        <TableCell colSpan={1}>\n                            <Typography variant=\"body2\" align=\"left\">\n                                {utils.dateTimeInReadableFormat(groupAdmin.dateAdded)}\n                            </Typography>\n                        </TableCell>\n                    </TableRow>\n                )\n            )\n        );\n    };\n\n    /**\n     * Get rendered group admins\n     *\n     * @returns {*[]}\n     */\n    getRenderedGroupAdmins = () => {\n        const {\n            searchText,\n            inSearchMode,\n            groupAdmins\n        } = this.props;\n\n        let searchedGroupAdmins = [...groupAdmins];\n\n        if (inSearchMode) {\n            searchedGroupAdmins = searchedGroupAdmins\n                .filter(groupAdmin => groupAdmin.email.includes(searchText.toLowerCase()));\n        }\n\n        return searchedGroupAdmins.sort((groupAdmin1, groupAdmin2) => {\n            return groupAdmin2.time - groupAdmin1.time;\n        });\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupAdminsTable);\n\nclass AddGroupAdminDialog extends Component {\n    render() {\n        const {\n            forwardedRef,\n            addNewGroupAdminDialogOpen,\n            newGroupAdminEmail,\n            toggleAddNewGroupAdminDialog,\n            handleInputChanged,\n            handleAddNewGroupAdmin\n        } = this.props;\n\n        return (\n            <Dialog open={addNewGroupAdminDialogOpen} ref={forwardedRef} fullWidth maxWidth=\"md\" onClose={toggleAddNewGroupAdminDialog}>\n                <DialogTitle disableTypography>\n                    <FlexView vAlignContent=\"center\">\n                        <FlexView grow={4}>\n                            <Typography variant='h6' color='primary' align=\"left\">Add new group admin\n                            </Typography>\n                        </FlexView>\n                        <FlexView grow={1} hAlignContent=\"right\">\n                            <IconButton onClick={toggleAddNewGroupAdminDialog}>\n                                <CloseIcon/>\n                            </IconButton>\n                        </FlexView>\n                    </FlexView>\n                </DialogTitle>\n                <DialogContent>\n                    <TextField\n                        variant=\"outlined\"\n                        label=\"Email\"\n                        name=\"newGroupAdminEmail\"\n                        placeholder=\"Write email here\"\n                        value={newGroupAdminEmail}\n                        onChange={handleInputChanged}\n                        fullWidth\n                        required\n                        style={{ marginTop: 10}}/>\n                </DialogContent>\n                <DialogActions>\n                    <FlexView width=\"100%\" marginRight={25} marginBottom={15} marginTop={20} hAlignContent=\"right\" vAlignContent=\"center\">\n                        {\n                            this.renderStatusMessage()\n                        }\n                        <Button variant=\"outlined\" color=\"primary\" onClick={handleAddNewGroupAdmin} size=\"medium\" className={css(sharedStyles.no_text_transform)} style={{marginLeft: 20}}>Add<AddIcon fontSize=\"small\" style={{ marginLeft: 8}}/>\n                        </Button>\n                    </FlexView>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n\n    /**\n     * Render status message\n     *\n     * @returns {null|*}\n     */\n    renderStatusMessage = () => {\n        const {\n            addNewGroupAdminStatus,\n            groupProperties\n        } = this.props;\n\n        let msg = {\n            text: '',\n            color: ''\n        };\n\n        switch (addNewGroupAdminStatus) {\n            case ADD_NEW_GROUP_ADMIN_STATUS_NONE:\n                return null;\n            case ADD_NEW_GROUP_ADMIN_STATUS_MISSING_EMAIL:\n                msg.tex = \"Please fill in the email.\";\n                msg.color = \"error\";\n                break;\n            case ADD_NEW_GROUP_ADMIN_STATUS_CHECKING:\n                return (\n                    <BeatLoader size={10}\n                        color={\n                            !groupProperties\n                                ?\n                                colors.primaryColor\n                                :\n                                groupProperties.settings.primaryColor\n                        }\n                    />\n                );\n            case ADD_NEW_GROUP_ADMIN_STATUS_EMAIL_USED:\n                msg.text = \"This email has been used by another account.\";\n                msg.color = \"error\";\n                break;\n            case ADD_NEW_GROUP_ADMIN_STATUS_SUCCESS:\n                return null;\n            default:\n                return null;\n        }\n\n        return (\n            <Typography color={msg.color} variant=\"body1\" align=\"left\">\n                {msg.text}\n            </Typography>\n        );\n    }\n}","import React, {Component} from 'react';\nimport {css, StyleSheet} from 'aphrodite';\nimport Sidebar from 'react-sidebar';\nimport FlexView from 'react-flexview';\nimport {Col, Container, OverlayTrigger, Row, Tooltip} from 'react-bootstrap';\nimport {Accordion, AccordionDetails, AccordionSummary, Badge, Divider, IconButton, Typography} from '@material-ui/core';\nimport Menu from '@material-ui/icons/Menu';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport HashLoader from 'react-spinners/HashLoader';\nimport queryString from 'query-string';\n\nimport firebase from '../../firebase/firebaseApp';\n\nimport SidebarContent, {\n    CHANGE_PASSWORD_TAB,\n    EXPLORE_GROUPS_TAB,\n    EXPLORE_OFFERS_TAB,\n    RESOURCES_TAB,\n    GROUP_ACTIVITIES_TAB,\n    HOME_TAB,\n    MY_ACTIVITIES_TAB,\n    SETTINGS_TAB\n} from '../../shared-components/nav-bars/SidebarContent';\nimport {AUTH_SUCCESS} from '../signin/Signin';\nimport InvitationDialog from './components/InvitationDialog';\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\nimport SuperAdminSettings from './components/SuperAdminSettings';\nimport GroupAdminSettings from './components/GroupAdminSettings';\nimport InvitedUsers from './components/InvitedUsers';\nimport AngelNetWorks from './components/AngelNetworks';\nimport AddAngelNetWorkDialog from './components/AddAngelNetWorkDialog';\nimport NotificationsBox from '../../shared-components/notifications/NotificationsBox';\nimport ChangePasswordPage from '../../shared-components/change-password/ChangePasswordPage';\nimport JoinRequests from './components/JoinRequests';\nimport ActivitiesTable from '../../shared-components/activities-components/ActivitiesTable';\nimport GroupAdminsTable from './components/GroupAdminsTable';\n\nimport * as colors from '../../values/colors';\nimport * as ROUTES from '../../router/routes';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport {connect} from 'react-redux';\nimport * as dashboardSidebarActions from '../../redux-store/actions/dashboardSidebarActions';\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\nimport * as notificationsActions from '../../redux-store/actions/notificationsActions';\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\nimport * as groupAdminsTableActions from '../../redux-store/actions/groupAdminsTableActions';\nimport ExploreOffers from \"../../shared-components/explore-offers/ExploreOffers\";\nimport OffersTable from \"../../shared-components/offers-table/OffersTable\";\nimport {successfullyFetchedOffers} from \"../../shared-components/offers-table/OffersTableReducer\";\nimport {isProjectWaitingToGoLive} from \"../../models/project\";\nimport ExploreGroups from \"../../shared-components/explore-groups/ExploreGroups\";\nimport Resources from \"../resources/Resources\";\n\nimport { safeGetItem, safeRemoveItem } from \"../../utils/browser\";\n\nexport const MAX_CARD_DETAILS_HEIGHT = 2000;\n\nconst mapStateToProps = state => {\n    return {\n        AuthenticationState: state.AuthenticationState,\n        OffersTableLocalState: state.OffersTableLocalState,\n\n        // --- old states ----------------------------------------------------------------------------------------------\n        groupUserName: state.manageGroupFromParams.groupUserName,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n\n        sidebarDocked: state.dashboardSidebar.sidebarDocked,\n        sidebarOpen: state.dashboardSidebar.sidebarOpen,\n\n        clubAttributes: state.manageClubAttributes.clubAttributes,\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\n\n        authStatus: state.auth.authStatus,\n        authenticating: state.auth.authenticating,\n        currentUser: state.auth.user,\n        currentUserLoaded: state.auth.userLoaded,\n\n        notifications: state.manageNotifications.notifications,\n        notificationsAnchorEl: state.manageNotifications.notificationsAnchorEl,\n        notificationBellRef: state.manageNotifications.notificationBellRef,\n\n        joinRequests: state.manageJoinRequests.joinRequests,\n        joinRequestsLoaded: state.manageJoinRequests.joinRequestsLoaded\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\n\n        toggleSidebar: (checkSidebarDocked) => dispatch(dashboardSidebarActions.toggleSidebar(checkSidebarDocked)),\n\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\n\n        groupAdminsTable_setGroup: (group) => dispatch(groupAdminsTableActions.setGroup(group)),\n\n        toggleNotifications: (event) => dispatch(notificationsActions.toggleNotifications(event)),\n        notificationRefUpdated: (ref) => dispatch(notificationsActions.notificationRefUpdated(ref)),\n    }\n};\n\nclass AdminDashboard extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.firebaseDB = firebase.database();\n        this.notificationBell = React.createRef();\n    }\n\n    /**\n     * Set required data for components used within this dashboard\n     */\n    setDataForComponents = () => {\n        const {\n            currentUser,\n            groupProperties,\n\n            // projectsTable_setUser,\n            activitiesTable_setUser,\n            groupAdminsTable_setGroup\n        } = this.props;\n\n        if (!currentUser\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\n        ) {\n            return;\n        }\n\n        // // set user so that information can be used in the projects table component\n        // projectsTable_setUser(currentUser);\n\n        // set user so that information can be used in the activities table component\n        activitiesTable_setUser(\n            currentUser.superAdmin\n                ?\n                currentUser\n                :\n                groupProperties\n        );\n\n        // set group so that information can be used in the group admins table component\n        groupAdminsTable_setGroup(groupProperties);\n    };\n\n    /**\n     * Component will mount\n     */\n    componentDidMount() {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            setGroupUserNameFromParams,\n            setExpectedAndCurrentPathsForChecking,\n            loadAngelNetwork,\n\n            notificationRefUpdated,\n\n            history,\n            match,\n        } = this.props;\n\n        const redirectTo = safeGetItem('redirectToAfterAuth');\n        if (redirectTo) {\n            safeRemoveItem('redirectToAfterAuth');\n            history.push(redirectTo);\n        }\n\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.ADMIN : ROUTES.ADMIN_INVEST_WEST_SUPER, match.path);\n\n        loadAngelNetwork()\n        .catch(error => {\n            console.error('Error loading angel network:', error);\n        });\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.setDataForComponents();\n        }\n\n        notificationRefUpdated(this.notificationBell.current);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            loadAngelNetwork,\n\n            notificationRefUpdated\n        } = this.props;\n\n        loadAngelNetwork()\n        .catch(error => {\n            console.error('Error loading angel network:', error);\n        });\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.setDataForComponents();\n        }\n\n        notificationRefUpdated(this.notificationBell.current);\n    };\n\n    /**\n     * Render page content\n     */\n    renderPageContent = () => {\n        const {\n            AuthenticationState,\n            OffersTableLocalState,\n\n            currentUser,\n\n            joinRequests,\n            joinRequestsLoaded\n        } = this.props;\n\n        const params = queryString.parse(this.props.location.search);\n\n        let projectsAwaitingDecision = 0;\n        // only do this if the table user is also set to the current admin\n        if (OffersTableLocalState.tableUser && OffersTableLocalState.tableUser.id === AuthenticationState.currentUser.id) {\n            if (successfullyFetchedOffers(OffersTableLocalState)) {\n                OffersTableLocalState.offerInstances.forEach(offerInstance => {\n                    if (isProjectWaitingToGoLive(offerInstance.projectDetail)) {\n                        projectsAwaitingDecision += 1;\n                    }\n                });\n            }\n        }\n\n        /**\n         * HOME TAB\n         */\n        if (params.tab === HOME_TAB) {\n            return (\n                <Row noGutters style={{marginBottom: 30}}>\n                    {/* Manage courses */}\n                    {\n                        !currentUser.superAdmin\n                            ?\n                            null\n                            :\n                            <Col xs={12} md={12} lg={12}>\n                                <Accordion className={css(styles.card_style)}>\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                                        <FlexView column>\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage courses</Typography>\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage courses that have joined the system.</Typography>\n                                        </FlexView>\n                                    </AccordionSummary>\n                                    <AccordionDetails>\n                                        <FlexView column width=\"100%\">\n                                            <AngelNetWorks/>\n                                        </FlexView>\n                                    </AccordionDetails>\n                                </Accordion>\n                            </Col>\n                    }\n\n                    {/* Manage course members (course admins) / system users (super admins) */}\n                    <Col xs={12} md={12} lg={12}>\n                        <Accordion className={css(styles.card_style)}>\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                                <FlexView column>\n                                    <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">\n                                        {\n                                            currentUser.superAdmin\n                                                ?\n                                                \"Manage system students\"\n                                                :\n                                                \"Manage course students\"\n                                        }\n                                    </Typography>\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\n                                        {\n                                            currentUser.superAdmin\n                                                ?\n                                                \"Manage all the system students including those who have been invited but not yet registered.\"\n                                                :\n                                                \"Manage all the course students including those who have been invited but not yet registered and those who joined this course from another course.\"\n                                        }\n                                    </Typography>\n                                </FlexView>\n                            </AccordionSummary>\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\n                                <InvitedUsers/>\n                            </AccordionDetails>\n                        </Accordion>\n                    </Col>\n\n                    {/* Manage access requests */}\n                    {\n                        currentUser.superAdmin\n                            ?\n                            null\n                            :\n                            <Col xs={12} md={12} lg={12}>\n                                <Accordion className={css(styles.card_style)}>\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                                        <FlexView column>\n                                            <FlexView width=\"100%\">\n                                                <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage access requests</Typography>\n                                                <FlexView marginLeft={28} marginTop={8}>\n                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\n                                                        overlay={\n                                                            <Tooltip id={`tooltip-top`}>\n                                                                {joinRequests.length} access requests\n                                                                are awaiting your review.\n                                                            </Tooltip>\n                                                        }>\n                                                        <Badge badgeContent={!joinRequestsLoaded ? 0 : joinRequests.length} color=\"error\"\n                                                            invisible={\n                                                                !joinRequestsLoaded\n                                                                    ?\n                                                                    true\n                                                                    :\n                                                                    joinRequests.length === 0\n                                                            }/>\n                                                    </OverlayTrigger>\n                                                </FlexView>\n                                            </FlexView>\n                                            <Typography paragraph variant=\"body1\" align=\"left\">\n                                                Manage access requests from other courses' students who would like\n                                                to\n                                                join this course.\n                                            </Typography>\n                                        </FlexView>\n                                    </AccordionSummary>\n                                    <AccordionDetails className={css(styles.card_details_expansion)}>\n                                        <JoinRequests/>\n                                    </AccordionDetails>\n                                </Accordion>\n                            </Col>\n                    }\n\n                    {/* Manage offers */}\n                    <Col xs={12} md={12} lg={12}>\n                        <Accordion className={css(styles.card_style)}>\n                            <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                                <FlexView column>\n                                    <FlexView width=\"100%\">\n                                        <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage projects</Typography>\n                                        <FlexView marginLeft={28} marginTop={8}>\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"top-start\" flip\n                                                overlay={\n                                                    <Tooltip\n                                                        id={`tooltip-top`}\n                                                    >\n                                                        {\n                                                            currentUser.superAdmin\n                                                                ?\n                                                                `${projectsAwaitingDecision} projects are awaiting course admins' review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\n                                                                :\n                                                                `${projectsAwaitingDecision} projects are awaiting your review. Select \"Awaiting review\" from the \"Phase\" dropdown to see details.`\n                                                        }\n                                                    </Tooltip>\n                                                }>\n                                                <Badge badgeContent={projectsAwaitingDecision} color=\"error\"\n                                                    invisible={projectsAwaitingDecision === 0}/>\n                                            </OverlayTrigger>\n                                        </FlexView>\n                                    </FlexView>\n                                    <Typography paragraph variant=\"body1\" align=\"left\">\n                                        {\n                                            currentUser.superAdmin\n                                                ?\n                                                \"Manage all the projects created by all the students and course teachers in the system.\"\n                                                :\n                                                \"Manage all the projects created by the students and course teachers of this course.\"\n                                        }\n                                    </Typography>\n                                </FlexView>\n                            </AccordionSummary>\n                            <AccordionDetails className={css(styles.card_details_expansion)}>\n                                <FlexView column width=\"100%\">\n                                    <Divider style={{marginBottom: 15}}/>\n                                    <OffersTable/>\n                                </FlexView>\n                            </AccordionDetails>\n                        </Accordion>\n                    </Col>\n\n                    {/* Manage group admins */}\n                    {\n                        currentUser.superAdmin\n                            ?\n                            null\n                            :\n                            <Col xs={12} md={12} lg={12}>\n                                <Accordion className={css(styles.card_style)}>\n                                    <AccordionSummary expandIcon={<ExpandMoreIcon/>}>\n                                        <FlexView column>\n                                            <Typography paragraph variant=\"h6\" color=\"primary\" align=\"left\">Manage course admins</Typography>\n                                            <Typography paragraph variant=\"body1\" align=\"left\">Manage course admins. Only super course admin can add a new course\n                                                admin.</Typography>\n                                        </FlexView>\n                                    </AccordionSummary>\n                                    <AccordionDetails>\n                                        <FlexView column width=\"100%\">\n                                            <GroupAdminsTable/>\n                                        </FlexView>\n                                    </AccordionDetails>\n                                </Accordion>\n                            </Col>\n                    }\n\n                </Row>\n            )\n        }\n\n        /**\n         * SETTINGS TAB\n         */\n        if (params.tab === SETTINGS_TAB) {\n            return (\n                currentUser.superAdmin\n                    ?\n                    <SuperAdminSettings/>\n                    :\n                    <GroupAdminSettings/>\n            );\n        }\n\n        /**\n         * CHANGE PASSWORD TAB\n         */\n        if (params.tab === CHANGE_PASSWORD_TAB) {\n            return (\n                <ChangePasswordPage/>\n            );\n        }\n\n        /**\n         * FORUMS TAB\n         */\n        // if (params.tab === FORUMS_TAB) {\n        //     return (\n        //         <Forums/>\n        //     );\n        // }\n\n        /**\n         * RESOURCES TAB\n         */\n        if (params.tab === RESOURCES_TAB) {\n            return (\n                <Resources/>\n            );\n        }\n\n        /**\n         * GROUP ACTIVITIES TAB\n         */\n        if (params.tab === GROUP_ACTIVITIES_TAB || params.tab === MY_ACTIVITIES_TAB) {\n            return (\n                <div\n                    style={{\n                        margin: 30\n                    }}\n                >\n                    <ActivitiesTable/>\n                </div>\n            );\n        }\n\n        /**\n         * EXPLORE OFFERS TAB\n         */\n        if (params.tab === EXPLORE_OFFERS_TAB) {\n            return <ExploreOffers/>;\n        }\n\n        /**\n         * EXPLORE GROUPS TAB\n         */\n        if (params.tab === EXPLORE_GROUPS_TAB) {\n            // return (\n            //     <ExploreGroups/>\n            // );\n            return <ExploreGroups/>;\n        }\n    };\n\n    render() {\n        const {\n            shouldLoadOtherData,\n            groupPropertiesLoaded,\n            groupProperties,\n\n            sidebarDocked,\n            sidebarOpen,\n\n            authStatus,\n            authenticating,\n            currentUser,\n            currentUserLoaded,\n\n            notifications,\n            notificationsAnchorEl,\n\n            toggleSidebar,\n            toggleNotifications\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader color={colors.primaryColor}/>\n                </FlexView>\n            )\n        }\n\n        if (!shouldLoadOtherData) {\n            return <PageNotFoundWhole/>;\n        }\n\n        if (authenticating || !currentUserLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader\n                        color={\n                            !groupProperties\n                                ?\n                                colors.primaryColor\n                                :\n                                groupProperties.settings.primaryColor\n                        }\n                    />\n                </FlexView>\n            );\n        }\n\n        if (authStatus !== AUTH_SUCCESS\n            || !currentUser\n            || (currentUser && currentUser.type !== DB_CONST.TYPE_ADMIN)\n        ) {\n            return <PageNotFoundWhole/>;\n        }\n\n        return <Sidebar\n            sidebar={\n                <SidebarContent\n                    dashboardProps={this.props}\n                />\n            }\n            shadow={false}\n            open={sidebarOpen}\n            docked={sidebarDocked}\n            onSetOpen={() => toggleSidebar(true)}\n            transitions\n            styles={{\n                sidebar: {backgroundColor: colors.blue_gray_50},\n                content: {backgroundColor: colors.gray_100}\n            }}\n        >\n            <Container\n                fluid\n                style={{ padding: 0}}>\n                {/** Header */}\n                <Row noGutters>\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <FlexView height={55} width=\"100%\" vAlignContent=\"center\"\n                         style={{backgroundColor:\n                                    !groupProperties\n                                        ?\n                                        colors.primaryColor\n                                        :\n                                        groupProperties.settings.primaryColor\n                            }}>\n                            <Row style={{width: \"100%\"}} noGutters>\n                                {/** Page title */}\n                                <Col xs={10} sm={10} md={11} lg={11}>\n                                    <FlexView vAlignContent=\"center\" width=\"100%\">\n                                        {\n                                            <IconButton className={css(sharedStyles.hamburger_button)} onClick={() => toggleSidebar(true)}>\n                                                <Menu/>\n                                            </IconButton>\n                                        }\n                                        {\n                                            this.renderPageTitle()\n                                        }\n                                    </FlexView>\n                                </Col>\n\n                                {/** Notification icon */}\n                                <Col xs={2} sm={2} md={1} lg={1} style={{paddingRight: 13}}>\n                                    <FlexView vAlignContent=\"center\" hAlignContent=\"right\" width=\"100%\" >\n                                        <div ref={this.notificationBell}>\n                                        <IconButton onMouseDown={ (e) => {toggleNotifications(e)} } id=\"notification-button\">\n                                            <Badge badgeContent={notifications.length} color=\"secondary\" invisible={notifications.length === 0}>\n                                                <NotificationsIcon className={css(sharedStyles.white_text)}/>\n                                            </Badge>\n                                        </IconButton>\n                                        </div>\n                                    </FlexView>\n                                </Col>\n                            </Row>\n                        </FlexView>\n                    </Col>\n                </Row>\n\n                <Row noGutters style={{backgroundColor: colors.white}}>\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Typography variant=\"body1\" align=\"center\" style={{paddingTop: 16,paddingBottom: 16}}>\n                            {\n                                currentUser.superAdmin\n                                    ?\n                                    \"System admin\"\n                                    :\n                                    currentUser.superGroupAdmin\n                                        ?\n                                        \"Super course admin\"\n                                        :\n                                        \"Course admin\"\n                            }\n                            : <b>{currentUser.email}</b>\n                        </Typography>\n                    </Col>\n\n                    <Col xs={12} sm={12} md={12} lg={12}>\n                        <Divider style={{backgroundColor: colors.kick_starter_gray_box_border}}/>\n                    </Col>\n                </Row>\n\n                {\n                    this.renderPageContent()\n                }\n            </Container>\n\n            {/** Notifications box */}\n            {notificationsAnchorEl !== null &&\n                <NotificationsBox/>\n            }\n\n            {/** User invitation dialog */}\n            <InvitationDialog/>\n\n            {/** Add angel network dialog */}\n            <AddAngelNetWorkDialog/>\n        </Sidebar>;\n    }\n\n    /**\n     * Render page's title\n     *\n     * @returns {*}\n     */\n    renderPageTitle = () => {\n        const params = queryString.parse(this.props.location.search);\n\n        let title = '';\n\n        switch (params.tab) {\n            case HOME_TAB:\n                title = HOME_TAB;\n                break;\n            case SETTINGS_TAB:\n                title = SETTINGS_TAB;\n                break;\n            case CHANGE_PASSWORD_TAB:\n                title = CHANGE_PASSWORD_TAB;\n                break;\n            // case FORUMS_TAB:\n            //     title = FORUMS_TAB;\n            //     break;\n            case RESOURCES_TAB:\n                title = RESOURCES_TAB;\n                break;\n            case GROUP_ACTIVITIES_TAB:\n                title = GROUP_ACTIVITIES_TAB;\n                break;\n            case EXPLORE_GROUPS_TAB:\n                title = EXPLORE_GROUPS_TAB;\n                break;\n            case EXPLORE_OFFERS_TAB:\n                title = EXPLORE_OFFERS_TAB;\n                break;\n            default:\n                return;\n        }\n\n        return (\n            <Typography variant=\"h6\" className={css(styles.page_title)}>\n                {title}\n            </Typography>\n        );\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdminDashboard);\n\nconst styles = StyleSheet.create({\n    page_title: {\n        fontSize: 19,\n        marginLeft: 8,\n        color: colors.white\n    },\n\n    card_style: {\n        marginTop: 25,\n        marginLeft: 30,\n        marginRight: 30\n    },\n\n    card_details_expansion: {\n        maxHeight: MAX_CARD_DETAILS_HEIGHT,\n        overflowY: \"auto\"\n    }\n});","import React, { Component } from 'react';\nimport FlexView from 'react-flexview';\nimport { StyleSheet, css } from 'aphrodite';\nimport {\n    IconButton,\n    List,\n    ListItem,\n    Typography\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport {\n    OverlayTrigger,\n    Tooltip\n} from 'react-bootstrap';\n\nimport * as colors from '../../values/colors';\n\nexport default class LegalDocuments extends Component {\n\n    onDeleteDocument = index => {\n        this.props.onDeleteDocument(index);\n    };\n\n    render() {\n\n        /**\n         * documents is an array with documents inside\n         * \n         * the document inside the array will have the following structure:\n         * \n         * {\n         *      file: File (obtained when uploading)\n         *      preview: preview obtained using FileReader\n         * }\n         */\n        const {\n            documents\n        } = this.props;\n\n        if (!documents || (documents && documents.length === 0)) {\n            return null;\n        }\n\n        return (\n            <FlexView column marginTop={20}>\n                <List>\n                    {\n                        documents.map((document, index) => (\n                            <FlexView key={index} vAlignContent=\"center\">\n                                <ListItem button style={{ padding: 7 }} >\n                                    <img alt=\"Document\" className={css(styles.preview_icon)} src={require(\"../../img/document_icon.png\").default} />\n                                    <FlexView column hAlignContent=\"left\" >\n                                        <Typography variant=\"body2\" className={css(styles.black_text)} align=\"left\" >{document.file.name}</Typography>\n                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{document.file.sizeReadable}</Typography>\n                                    </FlexView>\n                                </ListItem>\n\n                                <OverlayTrigger\n                                    trigger={['hover', 'focus']}\n                                    flip\n                                    placement=\"bottom\"\n                                    overlay={\n                                        <Tooltip id={`tooltip-bottom`} > Remove </Tooltip>\n                                    }>\n                                    <IconButton style={{ width: 44, height: 44 }} onClick={() => this.onDeleteDocument(index)}>\n                                        <CloseIcon fontSize=\"small\"/>\n                                    </IconButton>\n                                </OverlayTrigger>\n                            </FlexView>\n                        ))\n                    }\n                </List>\n            </FlexView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n\n    no_margin: {\n        margin: 0\n    },\n\n    preview_icon: {\n        width: 48, \n        height: 48\n    },\n\n    file_name: {\n        fontSize: 14,\n        marginBottom: 2\n    },\n\n    file_size: {\n        fontSize: 13,\n        color: colors.blue_gray_700\n    }\n});","import React, { Component } from 'react';\nimport FlexView from 'react-flexview';\nimport { StyleSheet, css } from 'aphrodite';\nimport {\n    IconButton,\n    List,\n    ListItem,\n    Typography\n} from '@material-ui/core';\nimport CloseIcon from '@material-ui/icons/Close';\nimport {\n    OverlayTrigger,\n    Tooltip\n} from 'react-bootstrap';\n\nimport * as colors from '../../values/colors';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nexport default class DocumentsDownload extends Component {\n\n    onDocumentClick = downloadURL => {\n        this.props.onDocumentClick(downloadURL);\n    };\n\n    onDeleteDocument = index => {\n        this.props.onDeleteDocument(index);\n    };\n\n    render() {\n\n        /**\n         * documents is an array with documents inside\n         * \n         * the document inside the array will have the following structure:\n         * \n         * {\n         *      downloadURL: download URL from firebase storage\n         *      fileName: ...\n         *      readableSize: ...\n         * }\n         */\n        const {\n            documents,\n            deleteEnable\n        } = this.props;\n\n        if (!documents || documents.length === 0) {\n            return null;\n        }\n\n        return (\n            <FlexView column marginTop={20} >\n                <List>\n                    {\n                        documents.map((document, index) => (\n                            document.hasOwnProperty('removed')\n                                ?\n                                null\n                                :\n                                <FlexView key={index} vAlignContent=\"center\" >\n                                    {\n                                        <a\n                                            href={document.downloadURL}\n                                            rel=\"noopener noreferrer\"\n                                            target=\"_blank\"\n                                            className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\n                                            style={{\n                                                width: \"100%\"\n                                            }}\n                                        >\n                                            <ListItem button style={{ padding: 7 }} >\n                                                <img\n                                                    alt=\"Document\"\n                                                    className={css(styles.preview_icon)}\n                                                    src={require(\"../../img/document_icon.png\").default}\n                                                />\n                                                <FlexView column hAlignContent=\"left\" >\n                                                    <Typography variant=\"body2\" className={css(styles.black_text)} align=\"left\">{document.fileName}</Typography>\n                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" >{document.readableSize}</Typography>\n                                                </FlexView>\n                                            </ListItem>\n                                        </a>\n                                    }\n                                    {\n                                        deleteEnable\n                                            ?\n                                            <OverlayTrigger\n                                                trigger={['hover', 'focus']}\n                                                flip\n                                                placement=\"top\"\n                                                overlay={\n                                                    <Tooltip id={`tooltip-top`}>Delete this document</Tooltip>\n                                                }>\n                                                <IconButton\n                                                    style={{ width: 44, height: 44 }}\n                                                    onClick={() => this.onDeleteDocument(index)}\n                                                >\n                                                    <CloseIcon fontSize=\"small\" />\n                                                </IconButton>\n                                            </OverlayTrigger>\n                                            :\n                                            null\n                                    }\n                                </FlexView>\n                        ))\n                    }\n                </List>\n            </FlexView>\n        );\n    }\n}\n\nconst styles = StyleSheet.create({\n\n    no_margin: {\n        margin: 0\n    },\n\n    preview_icon: {\n        width: 48, \n        height: 48\n    },\n\n    file_name: {\n        fontSize: 14,\n        marginBottom: 2\n    },\n\n    file_size: {\n        fontSize: 13,\n        color: colors.blue_gray_700\n    },\n\n    black_text: {\n        color: colors.black\n    }\n});","export const SELECT_PROJECT_VISIBILITY_SET_PROJECT = 'SELECT_PROJECT_VISIBILITY_SET_PROJECT';\nexport const setProject = project => {\n    return {\n        type: SELECT_PROJECT_VISIBILITY_SET_PROJECT,\n        project\n    }\n};\n\nexport const HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED = 'HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED';\nexport const handleProjectVisibilityChanged = (event) => {\n    return {\n        type: HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED,\n        event\n    }\n};","import React, {Component} from 'react';\r\n\r\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from \"@material-ui/core\";\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\r\nimport {isValidatingGroupUrl, successfullyValidatedGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\r\n        project: state.manageSelectProjectVisibility.project\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\r\n    }\r\n};\r\n\r\nclass SelectPitchVisibility extends Component {\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            projectVisibilitySetting,\r\n            project,\r\n\r\n            handleProjectVisibilityChanged\r\n        } = this.props;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState)) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <FormControl fullWidth >\r\n                <FormHelperText className={css(sharedStyles.black_text)} style={{ marginBottom: 6 }}>Select project visibility</FormHelperText>\r\n                <Select\r\n                    value={\r\n                        projectVisibilitySetting === -1\r\n                            ?\r\n                            !project\r\n                                ?\r\n                                successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                    ?\r\n                                    ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility\r\n                                    :\r\n                                    project.group.settings.projectVisibility\r\n                                :\r\n                                project.visibility\r\n                            :\r\n                            projectVisibilitySetting\r\n                    }\r\n                    name=\"projectVisibilitySetting\"\r\n                    margin=\"dense\"\r\n                    onChange={handleProjectVisibilityChanged}\r\n                    input={\r\n                        <OutlinedInput labelWidth={0} name=\"projectVisibilitySetting\"/>\r\n                    }\r\n                >\r\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PUBLIC}>\r\n                        {`Public (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        The full project will be visible to all students)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED}\r\n                    >\r\n                        {`Restricted (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Restricted information from this project will be visible to all Invest West users. Only members of your course will see the full project)`}\r\n                    </MenuItem>\r\n                    <MenuItem\r\n                        value={DB_CONST.PROJECT_VISIBILITY_PRIVATE}\r\n                    >\r\n                        {`Private (\r\n                        ${\r\n                            successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                ?\r\n                                ManageGroupUrlState.group && ManageGroupUrlState.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                                :\r\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                                    ?\r\n                                    \"Default - \"\r\n                                    :\r\n                                    \"\"\r\n                        }\r\n                        Only members of this course will see this project)`}\r\n                    </MenuItem>\r\n                </Select>\r\n            </FormControl>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPitchVisibility);\r\n\r\n","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    CircularProgress,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    Divider,\r\n    Fab,\r\n    FormControl,\r\n    FormControlLabel,\r\n    FormHelperText,\r\n    FormLabel,\r\n    IconButton,\r\n    InputAdornment,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Radio,\r\n    RadioGroup,\r\n    Select,\r\n    Step,\r\n    StepLabel,\r\n    Stepper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport Files from \"react-files\";\r\nimport {NavLink, Redirect} from \"react-router-dom\";\r\nimport {Col, Container, Image, Overlay, OverlayTrigger, Popover, ProgressBar, Row, Tooltip} from \"react-bootstrap\";\r\nimport ReactPlayer from \"react-player\";\r\nimport {BeatLoader, HashLoader} from \"react-spinners\";\r\n\r\nimport queryString from \"query-string\";\r\n// React Quill - text editor\r\nimport ReactQuill from \"react-quill\";\r\nimport \"react-quill/dist/quill.snow.css\";\r\n\r\nimport UploadDocuments from \"../../shared-components/upload-documents/DocumentsUpload\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport DocumentsDownload from \"../../shared-components/download-documents/DocumentsDownload\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\n\r\nimport {connect} from \"react-redux\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\n\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport Routes from \"../../router/routes\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\nimport {getGroupRouteTheme, isValidatingGroupUrl} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {isAuthenticating, successfullyAuthenticated} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {isLoadingSystemAttributes} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {isIssuer} from \"../../models/user\";\r\nimport {getHomeGroup} from \"../../models/group_of_membership\";\r\nimport {isDraftProjectNotSubmitted} from \"../../models/project\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\nconst PITCH_COVER_FILES_CHANGED = 1;\r\nconst PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED = 2;\r\nconst PITCH_PRESENTATION_FILES_CHANGED = 3;\r\n\r\nexport const PITCH_COVER_FILE_TYPE_SELECTED = 1; // users select to upload an image or a video for their project cover\r\nexport const PITCH_COVER_VIDEO_URL_TYPE_SELECTED = 2; // users select to upload a video URL for their project cover\r\n\r\n// project create non-check\r\nexport const PITCH_PUBLISH_CHECK_NONE = 0;\r\n// project cannot be created due to missing fields\r\nexport const PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION = 1;\r\n// project cannot be created due to 0 or negative value of fund or equity\r\nexport const PITCH_PUBLISH_FALSE_INVALID_DATE = 2;\r\nexport const PITCH_PUBLISH_FALSE_INVALID_FUND = 3;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER = 4;\r\nexport const PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION = 5;\r\n\r\nexport const UPLOAD_NONE = 0;\r\nexport const UPLOAD_PITCH_COVER_MODE = 1;\r\nexport const UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE = 2;\r\nexport const UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE = 3;\r\nexport const UPLOAD_REALTIME_DB = 4;\r\nexport const UPLOAD_DONE_MODE = 5;\r\n\r\nexport const STEP_PITCH_GENERAL_INFORMATION = 0;\r\nexport const STEP_PITCH_COVER = 1;\r\nexport const STEP_PITCH_DECK = 2;\r\nexport const STEP_PITCH_SUPPORTING_DOCUMENTS = 3;\r\nexport const STEP_ACCEPT_TERMS_AND_CONDITIONS = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createProject: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        groupIssuerCreateOfferFor: \"undefined\",\r\n\r\n        // project sector\r\n        pitchSector: '-',\r\n        // project project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiryDate: null,\r\n\r\n        financialRound: '',\r\n        detailsAboutEarlierFundraisingRounds: '',\r\n        pitchInvestorsCommitted: '',\r\n\r\n        // project cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // project cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // project supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // project presentation file (user uploads a file for project presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // project presentation text (user uses the provided text editor to make project presentation)\r\n        pitchPresentationText: {ops: []},\r\n        // plain text obtained from quill editor\r\n        pitchPresentationPlainText: null,\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        // T&Cs and marketing preferences ------------------------------------------------------------------------------\r\n        acceptedTermsAndConditions: false,\r\n        agreedToShareRaisePublicly: false,\r\n        agreedToReceiveLocalInvestmentInfo: false,\r\n        // -------------------------------------------------------------------------------------------------------------\r\n\r\n        projectID: null, // set when project has been successfully published to pass to UploadDialog\r\n\r\n        // customized fields (for specific groups only) ------------------------------------------------------------------\r\n        // this field is only available for QIB\r\n        qibSpecialNews: ''\r\n        // -------------------------------------------------------------------------------------------------------------\r\n    }\r\n};\r\n\r\nclass CreatePitchPageMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n        this.firebaseStorage = firebase.storage();\r\n\r\n        // listen for changes made in save project mode\r\n        this.projectEditedSaveModeRefListener = null;\r\n\r\n        // these variables contain the data that is formatted to be uploaded on Realtime DB\r\n        this.pitchCoverRealtimeDB = [];\r\n        this.pitchSupportingDocumentsRealtimeDB = [];\r\n        this.pitchPresentationDocumentRealtimeDB = [];\r\n\r\n        this.state = {\r\n            ...initState\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            requestToLoadData\r\n        } = this.state;\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n        console.log('Page loaded. Authentication status:', this.props.AuthenticationState.isAuthenticated ? 'Authenticated' : 'Not Authenticated');\r\n        console.log('Current user on page load:', this.props.AuthenticationState.currentUser);\r\n        console.log(`Data request status on page load: ${this.state.requestToLoadData ? 'Pending' : 'Not Requested'}`);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            recoveredFromPreviousState,\r\n            requestToLoadData,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const previousState = this.props.location.state;\r\n        // when the user clicks Save for the first time\r\n        // or when they click on the Next button in the STEP_PITCH_GENERAL_INFORMATION step\r\n        // the page will reload to take them to the edit page with the project ID.\r\n        // If the user clicks on the Next button in the STEP_PITCH_GENERAL_INFORMATION step, once the page is\r\n        // reloaded, they should be taken to the next step rather than stay in the same step.\r\n        if (previousState !== undefined && previousState !== null) {\r\n            if (!recoveredFromPreviousState) {\r\n                this.setState({\r\n                    recoveredFromPreviousState: true,\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep:\r\n                            previousState.activeStep !== -1\r\n                                ?\r\n                                previousState.activeStep\r\n                                :\r\n                                this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: !previousState.groupIssuerCreateOfferFor\r\n                            ? ManageGroupUrlState.group\r\n                                ? ManageGroupUrlState.group.anid\r\n                                : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                                    ? \"undefined\"\r\n                                    : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid\r\n                            : previousState.groupIssuerCreateOfferFor,\r\n                        requestToLoadData: !previousState.requestToLoadData ? true : previousState.requestToLoadData\r\n                    }\r\n                }, () => console.log('New state after next step:', this.state));\r\n            }\r\n        }\r\n\r\n        if (requestToLoadData) {\r\n            // call load data here when the save progress button is hit for the first time --> navigate to edit mode\r\n            this.loadData();\r\n        }\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.uploadProject();\r\n        }\r\n\r\n        if (prevProps.ManageGroupUrlState !== this.props.ManageGroupUrlState) {\r\n            console.log('ManageGroupUrlState changed:', this.props.ManageGroupUrlState);\r\n        }\r\n\r\n        if (prevProps.AuthenticationState.currentUser !== this.props.AuthenticationState.currentUser) {\r\n            console.log('Authentication state changed. Current user:', this.props.AuthenticationState.currentUser);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.projectEditedSaveModeRefListener) {\r\n            this.projectEditedSaveModeRefListener.off('child_changed');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Navigate to the same page with active step saved\r\n     * This will save the activeStep of the page, so when the user refreshes the page,\r\n     * they can still continue with their previous step.\r\n     *\r\n     * @param activeStep\r\n     * @param projectID\r\n     */\r\n    navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            this.props.history.push({\r\n                pathname:\r\n                    ManageGroupUrlState.groupNameFromUrl\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", ManageGroupUrlState.groupNameFromUrl)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        console.log(`Navigating to step ${activeStep} with projectID ${projectID}. Current state:`, this.state);\r\n    };\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = this.state;\r\n\r\n        if (isValidatingGroupUrl(ManageGroupUrlState) || isAuthenticating(AuthenticationState)) {\r\n            return;\r\n        }\r\n\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n        || (AuthenticationState.currentUser && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            requestToLoadData: false\r\n        });\r\n\r\n        // get project id from the URL\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        selectProjectVisibility_setProject(project);\r\n                    }\r\n\r\n                    // project is in draft mode\r\n                    if (project.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        if (!this.projectEditedSaveModeRefListener) {\r\n                            this.projectEditedSaveModeRefListener = this.firebaseDB\r\n                                .ref(DB_CONST.PROJECTS_CHILD)\r\n                                .orderByKey()\r\n                                .equalTo(project.id);\r\n\r\n                            this.projectEditedSaveModeRefListener\r\n                                .on('child_changed', snapshot => {\r\n\r\n                                    let project = snapshot.val();\r\n\r\n                                    this.setState({\r\n                                        projectEdited: Object.assign({}, project)\r\n                                    });\r\n                                });\r\n                        }\r\n                    }\r\n\r\n                    this.setState({\r\n                        projectBeforeEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEdited: JSON.parse(JSON.stringify(project)),\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            groupIssuerCreateOfferFor:\r\n                                !isDraftProjectNotSubmitted(project)\r\n                                    ? \"undefined\"\r\n                                    : project.hasOwnProperty('anid')\r\n                                    ? project.anid\r\n                                    : \"undefined\",\r\n                            // project sector\r\n                            pitchSector:\r\n                                project.hasOwnProperty('sector')\r\n                                    ?\r\n                                    project.sector\r\n                                    :\r\n                                    '-'\r\n                            ,\r\n                            // project project name\r\n                            pitchProjectName:\r\n                                project.hasOwnProperty('projectName')\r\n                                    ?\r\n                                    project.projectName\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchProjectDescription:\r\n                                project.hasOwnProperty('description')\r\n                                    ?\r\n                                    project.description\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchExpiryDate:\r\n                                project.Pitch.hasOwnProperty('expiredDate')\r\n                                    ?\r\n                                    project.Pitch.expiredDate\r\n                                    :\r\n                                    null\r\n                            ,\r\n                            financialRound:\r\n                                project.Pitch.hasOwnProperty('financialRound')\r\n                                    ?\r\n                                    project.Pitch.financialRound\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            detailsAboutEarlierFundraisingRounds:\r\n                                project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                    ?\r\n                                    project.Pitch.detailsAboutEarlierFundraisingRounds\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchInvestorsCommitted:\r\n                                project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                    ?\r\n                                    project.Pitch.investorsCommitted\r\n                                    :\r\n                                    ''\r\n                            ,\r\n                            pitchPresentationText:\r\n                                !project.Pitch.presentationText\r\n                                    ?\r\n                                    {ops: []}\r\n                                    :\r\n                                    project.Pitch.presentationText\r\n                            ,\r\n                            // this field is only available for QIB\r\n                            qibSpecialNews:\r\n                                project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                    ?\r\n                                    project.Pitch.qibSpecialNews\r\n                                    :\r\n                                    ''\r\n                        }\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    console.error('Error loading project data:', error);\r\n                    //console.log('Current state at error:', this.state);\r\n                    this.setState({\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null,\r\n                        loadError: 'There was a problem loading the project data. Please try again.'\r\n                    });\r\n                    this.setState({\r\n                        projectEditedLoaded: true,\r\n                        projectIDToBeLoadedAfterSavingFirstTime: null\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            this.setState({\r\n                projectEditedLoaded: true,\r\n                projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    groupIssuerCreateOfferFor: ManageGroupUrlState.group\r\n                        ? ManageGroupUrlState.group.anid\r\n                        : getHomeGroup(AuthenticationState.groupsOfMembership) === null\r\n                            ? \"undefined\"\r\n                            : getHomeGroup(AuthenticationState.groupsOfMembership).group.anid,\r\n                    pitchExpiryDate:\r\n                        ManageGroupUrlState.group.groupUserName === \"qib\"\r\n                            ?\r\n                            // if the group is QIB,\r\n                            // set the project expiry date to the one specified by the QIB' admins\r\n                            // Note: must ensure the defaultPitchExpiryDate field is valid\r\n                            ManageGroupUrlState.group.settings.defaultPitchExpiryDate\r\n                            :\r\n                            this.state.createProject.pitchExpiryDate\r\n                }\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                selectProjectVisibility_setProject(null);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Next Step button is clicked\r\n     */\r\n    handleNextStepClick = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            financialRound,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiryDate === null\r\n                    || financialRound.trim().length === 0\r\n                    || (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n                    || (isIssuer(AuthenticationState.currentUser) && !(params.edit && projectEdited) && groupIssuerCreateOfferFor === \"undefined\")\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiryDate)\r\n                    ||\r\n                    (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // project cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded project cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createProject: {\r\n                                ...this.state.createProject,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // project summary\r\n            case STEP_PITCH_DECK:\r\n                // for QIB, project summary is considered as one-pager\r\n                // there will be no presentation text, so don't need to check\r\n                if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                        ) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their project presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                    // for other groups, we need to ensure the user is uploading a project summary file or filling\r\n                // in the text editor or both\r\n                else {\r\n                    // in edit mode\r\n                    if (params.edit && projectEdited) {\r\n                        if (pitchPresentationDocument.length === 0\r\n                            && pitchPresentationText.ops.length === 0\r\n                            && (\r\n                                !projectEdited.Pitch.presentationDocument\r\n                                ||\r\n                                (\r\n                                    projectEdited.Pitch.presentationDocument\r\n                                    && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                )\r\n                            )\r\n                            && !projectEdited.Pitch.presentationText) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    } else {\r\n                        // if the user has not created their project presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                        if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                    pitchPublishErrorMessageShowed: true\r\n                                }\r\n                            });\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the project\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to handle when the Back button is clicked (got to previous step)\r\n     */\r\n    handleBackClick = () => {\r\n        const projectEdited = this.state.projectEdited;\r\n        const activeStep = this.state.createProject.activeStep;\r\n\r\n        if (activeStep === 0) {\r\n            return;\r\n        }\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                activeStep: activeStep - 1\r\n            }\r\n        });\r\n        this.navigateToTheSamePageWithActiveStepSaved(activeStep - 1, projectEdited.id);\r\n    };\r\n\r\n    /**\r\n     * Handle between selecting to upload an image or a video or adding a video URL for the project cover.\r\n     *\r\n     * @param type\r\n     */\r\n    handleSelectPitchCoverTypeClick = type => {\r\n\r\n        const {\r\n            pitchCoverTypeSelected,\r\n            pitchCover,\r\n            pitchCoverVideoURL\r\n        } = this.state.createProject;\r\n\r\n        if (pitchCoverTypeSelected === type) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: null,\r\n                    pitchCover: type === PITCH_COVER_FILE_TYPE_SELECTED ? [] : pitchCover,\r\n                    pitchCoverVideoURL: type === PITCH_COVER_VIDEO_URL_TYPE_SELECTED ? '' : pitchCoverVideoURL\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchCoverTypeSelected: type\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded changed.\r\n     */\r\n    handleFilesChanged = (mode, files) => {\r\n\r\n        const {\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const reader = new FileReader();\r\n        reader.addEventListener('load', () => {\r\n            const fileRead = {\r\n                file: files[files.length - 1],\r\n                preview: reader.result\r\n            };\r\n\r\n            switch (mode) {\r\n                // there can only be 1 file uploaded for the project cover\r\n                case PITCH_COVER_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchCover: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                // there can be more than 1 project supporting files\r\n                case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                    // for QIB, supporting document will be considered as project summary\r\n                    // so, the user can only upload one file\r\n                    if (ManageGroupUrlState.groupNameFromUrl === \"qib\") {\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    // for other groups, the user can upload multiple files for supporting documents\r\n                    else {\r\n                        if (projectEdited) {\r\n                            if (!projectEdited.Pitch.supportingDocuments) {\r\n                                if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            } else {\r\n                                if (pitchSupportingDocuments.length >=\r\n                                    DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length) {\r\n                                    setFeedbackSnackbarContent(\r\n                                        'Max file count reached.',\r\n                                        \"error\",\r\n                                        \"bottom\"\r\n                                    );\r\n                                    break;\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (pitchSupportingDocuments.length >= DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS) {\r\n                                setFeedbackSnackbarContent(\r\n                                    'Max file count reached.',\r\n                                    \"error\",\r\n                                    \"bottom\"\r\n                                );\r\n                                break;\r\n                            }\r\n                        }\r\n\r\n                        this.setState(prevState => ({\r\n                            createProject: {\r\n                                ...prevState.createProject,\r\n                                pitchSupportingDocuments: [...prevState.createProject.pitchSupportingDocuments, fileRead]\r\n                            }\r\n                        }));\r\n                    }\r\n                    break;\r\n                // there can only be 1 file for project presentation\r\n                case PITCH_PRESENTATION_FILES_CHANGED:\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            pitchPresentationDocument: [fileRead]\r\n                        }\r\n                    });\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        });\r\n        reader.readAsDataURL(files[files.length - 1]);\r\n    };\r\n\r\n    /**\r\n     * This function gets called when files to be uploaded have error (exceed size, type not matched, etc.).\r\n     */\r\n    handleFileError = (error, file) => {\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        let errorMessage = error.message;\r\n        errorMessage = errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1);\r\n\r\n        setFeedbackSnackbarContent(\r\n            errorMessage,\r\n            \"error\",\r\n            \"bottom\"\r\n        );\r\n    };\r\n\r\n    /**\r\n     * This function gets called when the texts in the Create project Dialog changed.\r\n     */\r\n    handleCreatePitchInputChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        if (name === \"groupIssuerCreateOfferFor\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n\r\n            const {\r\n                AuthenticationState\r\n            } = this.props;\r\n\r\n            const params = queryString.parse(this.props.location.search);\r\n\r\n            let index = AuthenticationState.groupsOfMembership.findIndex(groupOfMembership => groupOfMembership.group.anid === value);\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n\r\n            // edit mode\r\n            if (params.edit) {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    search: `?edit=${params.edit}`,\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n            // create mode\r\n            else {\r\n                this.props.history.push({\r\n                    pathname: ROUTES.CREATE_OFFER\r\n                        .replace(\":groupUserName\", AuthenticationState.groupsOfMembership[index].group.groupUserName),\r\n                    state: {\r\n                        activeStep: this.state.createProject.activeStep,\r\n                        groupIssuerCreateOfferFor: value,\r\n                        requestToLoadData: true\r\n                    }\r\n                });\r\n            }\r\n        } else {\r\n            // maximum characters for description is 300\r\n            if (name === \"pitchProjectDescription\" && value.trim().length >= 300) {\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    [name]: value\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle changes when the Quill editor is changed.\r\n     */\r\n    handlePitchEditorChanged = (content, delta, source, editor) => {\r\n\r\n        // check if the editor is empty (or does not have any text)\r\n        // we must ensure that a project body contains text\r\n        if (editor.getText().trim().length === 0) {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: {ops: []}\r\n                }\r\n            });\r\n        } else {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchPresentationText: editor.getContents(),\r\n                    pitchPresentationPlainText: editor.getText()\r\n                }\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function gets called to create a new project.\r\n     */\r\n    uploadProject = () => {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n\r\n            projectVisibilitySetting\r\n        } = this.props;\r\n\r\n        const {\r\n            projectBeforeEdited,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved\r\n        } = this.state;\r\n\r\n        const {\r\n            groupIssuerCreateOfferFor,\r\n\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            financialRound,\r\n            detailsAboutEarlierFundraisingRounds,\r\n            pitchInvestorsCommitted,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n            pitchPresentationPlainText,\r\n\r\n            agreedToShareRaisePublicly,\r\n            agreedToReceiveLocalInvestmentInfo,\r\n\r\n            // this field is only available for QIB\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n\r\n        if (saveProgress && !progressBeingSaved) {\r\n            this.setState({\r\n                progressBeingSaved: true\r\n            });\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit && projectEdited) {\r\n            // new cover has been chosen\r\n            if (pitchCover.length > 0 || pitchCoverVideoURL.trim().length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('cover')) {\r\n                    // mark the existing cover with the 'removed' tag\r\n                    projectEdited.Pitch.cover.forEach((coverItem, index) => {\r\n                        coverItem.removed = true;\r\n                        projectEdited.Pitch.cover[index] = coverItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // new project presentation document has been chosen\r\n            if (pitchPresentationDocument.length > 0) {\r\n                if (projectEdited.Pitch.hasOwnProperty('presentationDocument')) {\r\n                    // mark the existing presentation document with the 'removed' tag\r\n                    projectEdited.Pitch.presentationDocument.forEach((presentationItem, index) => {\r\n                        presentationItem.removed = true;\r\n                        // noinspection TypeScriptValidateTypes\r\n                        projectEdited.Pitch.presentationDocument[index] = presentationItem;\r\n                    });\r\n                }\r\n            }\r\n\r\n            // project reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n\r\n            // project storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(projectEdited.issuerID)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectEdited.id);\r\n\r\n            // upload project cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload project supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload project presentation or project summary\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    let updatedProject = {\r\n                                        ...JSON.parse(JSON.stringify(projectEdited)),\r\n                                        issuer: null,\r\n                                        group: null,\r\n                                        anid:\r\n                                            isDraftProjectNotSubmitted(projectEdited)\r\n                                                ? groupIssuerCreateOfferFor !== \"undefined\"\r\n                                                ? groupIssuerCreateOfferFor\r\n                                                : projectEdited.anid\r\n                                                : projectEdited.anid,\r\n                                        projectName:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectName.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectName\r\n                                                :\r\n                                                pitchProjectName\r\n                                        ,\r\n                                        sector:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchSector === \"-\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchSector\r\n                                                :\r\n                                                pitchSector\r\n                                        ,\r\n                                        description:\r\n                                            saveProgress\r\n                                                ?\r\n                                                pitchProjectDescription.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchProjectDescription\r\n                                                :\r\n                                                pitchProjectDescription\r\n                                        ,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                projectEdited.visibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                // in save progress mode --> set status to DRAFT\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // not in save progress mode --> publish mode\r\n                                                // check if the edited project is a draft one --> if so, change its status to being checked\r\n                                                // otherwise, keep the previous project status\r\n                                                projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                                    :\r\n                                                    projectEdited.status\r\n                                        ,\r\n                                        edited:\r\n                                            saveProgress\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                utils.getCurrentDate()\r\n                                        ,\r\n                                        PrimaryOffer:\r\n                                            projectEdited.PrimaryOffer\r\n                                                ?\r\n                                                projectEdited.PrimaryOffer\r\n                                                :\r\n                                                null\r\n                                        ,\r\n                                        Pitch: {\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments:\r\n                                                projectEdited.Pitch.supportingDocuments\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.supportingDocuments, ...this.pitchSupportingDocumentsRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchSupportingDocumentsRealtimeDB\r\n                                            ,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument:\r\n                                                this.pitchPresentationDocumentRealtimeDB.length === 0\r\n                                                    ?\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            projectEdited.Pitch.presentationDocument\r\n                                                            :\r\n                                                            null\r\n                                                    )\r\n                                                    :\r\n                                                    (\r\n                                                        projectEdited.Pitch.presentationDocument\r\n                                                            ?\r\n                                                            [...projectEdited.Pitch.presentationDocument, ...this.pitchPresentationDocumentRealtimeDB]\r\n                                                            :\r\n                                                            this.pitchPresentationDocumentRealtimeDB\r\n                                                    )\r\n                                            ,\r\n                                            cover:\r\n                                                projectEdited.Pitch.cover\r\n                                                    ?\r\n                                                    [...projectEdited.Pitch.cover, ...this.pitchCoverRealtimeDB]\r\n                                                    :\r\n                                                    this.pitchCoverRealtimeDB\r\n                                            ,\r\n                                            postedDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    utils.getCurrentDate()\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        utils.getCurrentDate()\r\n                                                        :\r\n                                                        projectEdited.Pitch.postedDate\r\n                                            ,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        DB_CONST.PITCH_STATUS_ON_GOING\r\n                                                        :\r\n                                                        projectEdited.Pitch.status\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    // set the updated project in firebase\r\n                                    projectRef\r\n                                        .child(projectEdited.id)\r\n                                        .update(updatedProject)\r\n                                        .then(() => {\r\n                                            // publish button is clicked\r\n                                            // only check and send notifications if the save progress is not triggered (save progress is only available for saving draft)\r\n                                            if (!saveProgress) {\r\n                                                // if the draft offer is published, don't need to check for sending notifications\r\n                                                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                                                    projectBeforeEdited.issuer = null;\r\n                                                    projectBeforeEdited.group = null;\r\n                                                    // track activity for editing a published project\r\n                                                    realtimeDBUtils\r\n                                                        .trackActivity({\r\n                                                            userID: AuthenticationState.currentUser.id,\r\n                                                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                            interactedObjectID: projectEdited.id,\r\n                                                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_PROJECT.replace(\"%project%\", projectEdited.projectName),\r\n                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id),\r\n                                                            value: {\r\n                                                                before: JSON.parse(JSON.stringify(projectBeforeEdited)),\r\n                                                                after: JSON.parse(JSON.stringify(updatedProject))\r\n                                                            }\r\n                                                        });\r\n\r\n                                                    // Send notifications to investors who voted or pledged\r\n                                                    // load votes\r\n                                                    realtimeDBUtils\r\n                                                        .loadVotes(projectEdited.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                                                        .then(votes => {\r\n\r\n                                                            let listOfInvestorsToBeNotified = [];\r\n                                                            votes.forEach(vote => {\r\n                                                                listOfInvestorsToBeNotified.push(vote.investorID);\r\n                                                            });\r\n\r\n                                                            // load pledges\r\n                                                            realtimeDBUtils\r\n                                                                .loadPledges(projectEdited.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                                                                .then(pledges => {\r\n                                                                    pledges.forEach(pledge => {\r\n                                                                        if (listOfInvestorsToBeNotified.findIndex(investorID => investorID === pledge.investorID) === -1) {\r\n                                                                            listOfInvestorsToBeNotified.push(pledge.investorID);\r\n                                                                        }\r\n                                                                    });\r\n\r\n                                                                    let notifications = [];\r\n                                                                    listOfInvestorsToBeNotified.forEach(investorID => {\r\n                                                                        const notification = {\r\n                                                                            title: `${projectEdited.projectName} has been edited`,\r\n                                                                            message: `Please have a look at the changes that have been made in this offer. You may find some more useful information.`,\r\n                                                                            userID: investorID,\r\n                                                                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectEdited.id)\r\n                                                                        };\r\n                                                                        notifications.push(notification);\r\n                                                                    });\r\n\r\n                                                                    // push all the notifications to firebase\r\n                                                                    Promise.all(notifications.map(notification => {\r\n                                                                        return new Promise((resolve, reject) => {\r\n                                                                            realtimeDBUtils\r\n                                                                                .sendNotification(notification)\r\n                                                                                .then(() => {\r\n                                                                                    return resolve();\r\n                                                                                })\r\n                                                                                .catch(error => {\r\n                                                                                    return reject(error);\r\n                                                                                });\r\n                                                                        });\r\n                                                                    })).then(() => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100,\r\n                                                                                projectID: projectEdited.id\r\n                                                                            }\r\n                                                                        });\r\n\r\n                                                                    }).catch(error => {\r\n\r\n                                                                        this.setState({\r\n                                                                            createProject: {\r\n                                                                                ...this.state.createProject,\r\n                                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                                uploadFileProgress: 100\r\n                                                                            }\r\n                                                                        });\r\n                                                                    });\r\n                                                                });\r\n                                                        });\r\n                                                }\r\n                                                // a draft offer is published\r\n                                                else {\r\n                                                    // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                    const acceptedTCsObj = {\r\n                                                        issuerID: AuthenticationState.currentUser.id,\r\n                                                        projectID: projectEdited.id,\r\n                                                        date: utils.getCurrentDate(),\r\n                                                        agreedToShareRaisePublicly\r\n                                                    };\r\n\r\n                                                    // push to Create project T&Cs\r\n                                                    this.firebaseDB\r\n                                                        .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                        .push(acceptedTCsObj)\r\n                                                        .then(async () => {\r\n                                                            await new Api().request(\r\n                                                                \"post\",\r\n                                                                ApiRoutes.sendEmailRoute,\r\n                                                                {\r\n                                                                    queryParameters: null,\r\n                                                                    requestBody: {\r\n                                                                        emailType: 3,\r\n                                                                        emailInfo: {\r\n                                                                            projectID: projectEdited.id\r\n                                                                        }\r\n                                                                    }\r\n                                                                }\r\n                                                            );\r\n\r\n                                                            // track activity for creating a new project from a draft one\r\n                                                            realtimeDBUtils\r\n                                                                .trackActivity({\r\n                                                                    userID: AuthenticationState.currentUser.id,\r\n                                                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                                    interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                                    interactedObjectID: projectEdited.id,\r\n                                                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", updatedProject.projectName),\r\n                                                                    action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\r\n                                                                    value: updatedProject\r\n                                                                });\r\n\r\n                                                            // if the user is an issuer,\r\n                                                            // update the marketing preferences setting\r\n                                                            if (AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER) {\r\n                                                                realtimeDBUtils\r\n                                                                    .updateMarketingPreferencesSetting({\r\n                                                                        userID: AuthenticationState.currentUser.id,\r\n                                                                        field: \"agreedToReceiveLocalInvestmentInfo\",\r\n                                                                        value: agreedToReceiveLocalInvestmentInfo\r\n                                                                    })\r\n                                                                    .catch(error => {\r\n                                                                        // handle error\r\n                                                                    });\r\n                                                            }\r\n\r\n                                                            this.setState({\r\n                                                                createProject: {\r\n                                                                    ...this.state.createProject,\r\n                                                                    uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                    uploadFileProgress: 100,\r\n                                                                    projectID: projectEdited.id\r\n                                                                }\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                            // save button is clicked\r\n                                            else {\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectEdited.id\r\n                                                );\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n        // in create new mode\r\n        else {\r\n            // calculate posted date (current time)\r\n            const postedDate = utils.getCurrentDate();\r\n\r\n            // project reference in Realtime DB\r\n            const projectRef = this.firebaseDB\r\n                .ref(DB_CONST.PROJECTS_CHILD);\r\n            // get project's publishing id\r\n            const projectID = projectRef.push().key;\r\n\r\n            // project storage reference\r\n            const projectStorageRef = this.firebaseStorage\r\n                .ref(DB_CONST.USERS_CHILD)\r\n                .child(AuthenticationState.currentUser.id)\r\n                .child(DB_CONST.PROJECTS_CHILD)\r\n                .child(projectID);\r\n\r\n            // upload project cover\r\n            this.uploadMultipleFiles(UPLOAD_PITCH_COVER_MODE, projectStorageRef)\r\n                .then(successful => {\r\n\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: 100\r\n                        }\r\n                    });\r\n\r\n                    // upload project supporting documents\r\n                    this.uploadMultipleFiles(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE, projectStorageRef)\r\n                        .then(successful => {\r\n\r\n                            this.setState({\r\n                                createProject: {\r\n                                    ...this.state.createProject,\r\n                                    uploadFileProgress: 100\r\n                                }\r\n                            });\r\n\r\n                            // upload project presentation or project summary\r\n                            this.uploadMultipleFiles(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE, projectStorageRef)\r\n                                .then(successful => {\r\n\r\n                                    this.setState({\r\n                                        createProject: {\r\n                                            ...this.state.createProject,\r\n                                            uploadFileMode: UPLOAD_REALTIME_DB,\r\n                                            uploadFileProgress: 100\r\n                                        }\r\n                                    });\r\n\r\n                                    const projectObj = {\r\n                                        id: projectID,\r\n                                        anid: groupIssuerCreateOfferFor === \"undefined\" ? ManageGroupUrlState.group.anid : groupIssuerCreateOfferFor,\r\n                                        visibility:\r\n                                            projectVisibilitySetting === -1\r\n                                                ?\r\n                                                ManageGroupUrlState.group.settings.projectVisibility\r\n                                                :\r\n                                                projectVisibilitySetting\r\n                                        ,\r\n                                        issuerID:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then the issuerID is set to the id of the issuer that the\r\n                                                // group admin is creating an offer for\r\n                                                params.issuer\r\n                                                :\r\n                                                // in this case, it can be the issuer creating their own offer\r\n                                                // or a group admin is doing so for an unknown issuer --> this means\r\n                                                // the group admin clicks on the \"Create new investment opportunity\" in their\r\n                                                // main dashboard.\r\n                                                AuthenticationState.currentUser.id\r\n                                        , // this can the id of the issuer or the group admin\r\n                                        createdByGroupAdmin:\r\n                                        // a group admin is creating an offer on behalf of a known issuer\r\n                                            params.admin && params.issuer\r\n                                                ?\r\n                                                // then, set the admin id as a proof of creating\r\n                                                params.admin\r\n                                                :\r\n                                                // the group admin is creating an offer for an unknown issuer\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // then, this field is also set to the group admin id\r\n                                                    AuthenticationState.currentUser.id\r\n                                                    :\r\n                                                    // this case means that the issuer is creating their own offer\r\n                                                    // so this field is set to null\r\n                                                    null\r\n                                        ,\r\n                                        projectName: saveProgress ? (pitchProjectName.trim().length === 0 ? null : pitchProjectName) : pitchProjectName,\r\n                                        sector: saveProgress ? (pitchSector === \"-\" ? null : pitchSector) : pitchSector,\r\n                                        description: saveProgress ? (pitchProjectDescription.trim().length === 0 ? null : pitchProjectDescription) : pitchProjectDescription,\r\n                                        status:\r\n                                            saveProgress\r\n                                                ?\r\n                                                DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                :\r\n                                                // if a group admin creates the offer\r\n                                                // then let it go live\r\n                                                AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                                    :\r\n                                                    // if an issuer creates the offer\r\n                                                    // let the group admin check it first\r\n                                                    DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                        ,\r\n                                        Pitch: {\r\n                                            detailsAboutEarlierFundraisingRounds:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    detailsAboutEarlierFundraisingRounds.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        detailsAboutEarlierFundraisingRounds\r\n                                                    :\r\n                                                    detailsAboutEarlierFundraisingRounds\r\n                                            ,\r\n                                            financialRound:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    financialRound.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        financialRound\r\n                                                    :\r\n                                                    financialRound\r\n                                            ,\r\n                                            investorsCommitted:\r\n                                                pitchInvestorsCommitted.trim().length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchInvestorsCommitted\r\n                                            ,\r\n                                            supportingDocuments: this.pitchSupportingDocumentsRealtimeDB,\r\n                                            presentationText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationText\r\n                                            ,\r\n                                            presentationPlainText:\r\n                                                pitchPresentationText.ops.length === 0\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    pitchPresentationPlainText\r\n                                            ,\r\n                                            presentationDocument: this.pitchPresentationDocumentRealtimeDB,\r\n                                            cover: this.pitchCoverRealtimeDB,\r\n                                            postedDate: postedDate,\r\n                                            expiredDate:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    !pitchExpiryDate\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        pitchExpiryDate\r\n                                                    :\r\n                                                    pitchExpiryDate\r\n                                            ,\r\n                                            status:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    :\r\n                                                    DB_CONST.PITCH_STATUS_ON_GOING\r\n                                            ,\r\n                                            // this field is only available for QIB\r\n                                            qibSpecialNews:\r\n                                                saveProgress\r\n                                                    ?\r\n                                                    qibSpecialNews.trim().length === 0\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        qibSpecialNews\r\n                                                    :\r\n                                                    qibSpecialNews\r\n                                            ,\r\n                                        }\r\n                                    };\r\n\r\n                                    projectRef\r\n                                        .child(projectID)\r\n                                        .set(projectObj)\r\n                                        .then(() => {\r\n                                            // save button is clicked\r\n                                            if (saveProgress) {\r\n                                                // don't need to track activity for draft project\r\n\r\n                                                // reset all variables and states\r\n                                                this.pitchCoverRealtimeDB = [];\r\n                                                this.pitchPresentationDocumentRealtimeDB = [];\r\n                                                this.pitchSupportingDocumentsRealtimeDB = [];\r\n\r\n                                                this.setState({\r\n                                                    requestToLoadData: true,\r\n                                                    projectIDToBeLoadedAfterSavingFirstTime: projectID,\r\n                                                    saveProgress: false,\r\n                                                    progressBeingSaved: false,\r\n                                                    projectEditedLoaded: false,\r\n                                                    acceptedTermsAndConditions: false,\r\n\r\n                                                    createProject: {\r\n                                                        ...this.state.createProject,\r\n                                                        uploadFileMode: UPLOAD_NONE,\r\n                                                        uploadFileProgress: 0,\r\n                                                        pitchCover: [],\r\n                                                        pitchCoverVideoURL: '',\r\n                                                        pitchCoverTypeSelected: null,\r\n                                                        pitchSupportingDocuments: [],\r\n                                                        pitchPresentationDocument: []\r\n                                                    }\r\n                                                });\r\n\r\n                                                this.navigateToTheSamePageWithActiveStepSaved(\r\n                                                    activeStep,\r\n                                                    projectID\r\n                                                );\r\n                                            }\r\n                                            // publish button is clicked\r\n                                            else {\r\n                                                // track activity for creating a new project\r\n                                                realtimeDBUtils\r\n                                                    .trackActivity({\r\n                                                        userID: AuthenticationState.currentUser.id,\r\n                                                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                                        interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                                                        interactedObjectID: projectID,\r\n                                                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PROJECT.replace(\"%project%\", projectObj.projectName),\r\n                                                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectObj.id),\r\n                                                        value: projectObj\r\n                                                    });\r\n\r\n                                                const id = this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .push()\r\n                                                    .key;\r\n\r\n                                                // don't need to check for prior TCs acceptance because this is create new mode\r\n                                                const acceptedTCsObj = {\r\n                                                    id,\r\n                                                    issuerID: AuthenticationState.currentUser.id,\r\n                                                    projectID: projectID,\r\n                                                    date: utils.getCurrentDate()\r\n                                                };\r\n\r\n                                                this.firebaseDB\r\n                                                    .ref(DB_CONST.ACCEPTED_CREATE_PITCH_TERM_AND_CONDITIONS_CHILD)\r\n                                                    .child(id)\r\n                                                    .set(acceptedTCsObj)\r\n                                                    .then(() => {\r\n                                                        this.setState({\r\n                                                            createProject: {\r\n                                                                ...this.state.createProject,\r\n                                                                uploadFileMode: UPLOAD_DONE_MODE,\r\n                                                                uploadFileProgress: 100,\r\n                                                                projectID: projectID\r\n                                                            }\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        })\r\n                                        .catch(error => {\r\n                                            // handle error\r\n                                            return error;\r\n                                        });\r\n                                });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Upload multiple files\r\n     */\r\n    uploadMultipleFiles = async (mode, projectStorageRef) => {\r\n\r\n        const {\r\n            saveProgress\r\n        } = this.state;\r\n\r\n        const {\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchSupportingDocuments,\r\n            pitchPresentationDocument\r\n        } = this.state.createProject;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                openUploadingProgressDialog: !saveProgress,\r\n                uploadFileMode: mode,\r\n                uploadFileProgress: 0\r\n            }\r\n        });\r\n\r\n        let filesArray = null;\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // no project cover selected\r\n                if (!pitchCoverTypeSelected) {\r\n                    return null;\r\n                }\r\n                // project cover as a video URL\r\n                if (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED) {\r\n                    const formattedCover = {\r\n                        url: pitchCoverVideoURL,\r\n                        fileType: DB_CONST.FILE_TYPE_VIDEO,\r\n                        fileExtension: \"\",\r\n                        storageID: \"\"\r\n                    };\r\n                    this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                    return;\r\n                }\r\n                filesArray = pitchCover;\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                filesArray = pitchSupportingDocuments;\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                filesArray = pitchPresentationDocument;\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return Promise\r\n            .all(\r\n                filesArray.map(file => this.uploadIndividualFile(mode, projectStorageRef, file))\r\n            )\r\n            .then(() => {\r\n                return true;\r\n            })\r\n            .catch(error => {\r\n                return false;\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Upload a single file (document)\r\n     */\r\n    uploadIndividualFile = async (mode, pitchStorageRef, document) => {\r\n\r\n        const {\r\n            pitchSupportingDocuments\r\n        } = this.state.createProject;\r\n\r\n        let docRef = null;\r\n\r\n        const storageID = utils.getCurrentDate();\r\n        const storageFileName = utils.constructStorageFileName(document, storageID);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD)\r\n                    .child(`${storageID}.${document.file.extension}`);\r\n                break;\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                docRef = pitchStorageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD)\r\n                    .child(storageFileName);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const uploadTask = docRef.put(document.file);\r\n            uploadTask.on('state_changed', snapshot => {\r\n                // do nothing here\r\n                let progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n\r\n                if (mode === UPLOAD_PITCH_COVER_MODE || mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE) {\r\n                    this.setState({\r\n                        createProject: {\r\n                            ...this.state.createProject,\r\n                            uploadFileProgress: progress\r\n                        }\r\n                    });\r\n                }\r\n\r\n            }, error => {\r\n                // handle error\r\n                return reject(error);\r\n            }, () => {\r\n\r\n                uploadTask.snapshot.ref.getDownloadURL().then(fileDownloadURL => {\r\n\r\n                    let percentDone = 0;\r\n\r\n                    switch (mode) {\r\n                        case UPLOAD_PITCH_COVER_MODE:\r\n                            // capture the downloadable URL of the project cover and store in this variable for uploading to Realtime DB\r\n                            const formattedCover = {\r\n                                url: fileDownloadURL,\r\n                                fileType: document.file.type === \"video/mp4\" ? DB_CONST.FILE_TYPE_VIDEO : DB_CONST.FILE_TYPE_IMAGE,\r\n                                fileExtension: document.file.extension,\r\n                                storageID: storageID\r\n                            };\r\n                            this.pitchCoverRealtimeDB = [...this.pitchCoverRealtimeDB, formattedCover];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                            percentDone = 100 / (pitchSupportingDocuments.length);\r\n                            this.setState(prevState => ({\r\n                                createProject: {\r\n                                    ...prevState.createProject,\r\n                                    uploadFileProgress: prevState.createProject.uploadFileProgress + percentDone.toFixed(0)\r\n                                }\r\n                            }));\r\n                            const formattedSupportingDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchSupportingDocumentsRealtimeDB = [...this.pitchSupportingDocumentsRealtimeDB, formattedSupportingDocument];\r\n                            return resolve();\r\n                        case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                            const formattedPresentationDocument = {\r\n                                fileName: storageFileName.split(DB_CONST.STORAGE_FILE_NAME_ID_SPLIT)[1],\r\n                                readableSize: document.file.sizeReadable,\r\n                                downloadURL: fileDownloadURL,\r\n                                storageID: storageID\r\n                            };\r\n                            // capture the file uploaded to storage and store in this variable for uploading to Realtime DB\r\n                            this.pitchPresentationDocumentRealtimeDB = [...this.pitchPresentationDocumentRealtimeDB, formattedPresentationDocument];\r\n                            return resolve();\r\n                        default:\r\n                            return reject(\"Not existing mode\");\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function handles when a document is deleted\r\n     *\r\n     * @param mode\r\n     * @param index\r\n     */\r\n    handleDeleteDocument = (mode, index) => {\r\n\r\n        switch (mode) {\r\n            case PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED:\r\n                let supportingDocuments = this.state.createProject.pitchSupportingDocuments;\r\n                supportingDocuments.splice(index, 1);\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchSupportingDocuments: supportingDocuments\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_PRESENTATION_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchPresentationDocument: []\r\n                    }\r\n                });\r\n                break;\r\n            case PITCH_COVER_FILES_CHANGED:\r\n                this.setState({\r\n                    createProject: {\r\n                        ...this.state.createProject,\r\n                        pitchCover: []\r\n                    }\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * This function is used to set the reference of the Publish button so that the error message popover can be displayed properly\r\n     *\r\n     * @param target\r\n     */\r\n    attachNextStepButtonRef = target => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchNextStepButtonTarget: target\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close the popover error message displayed when the user hits the Publish click without filling all the required fields\r\n     */\r\n    handlePopoverErrorMessageClose = () => {\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchPublishErrorMessageShowed: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is deleted ==> displaying a list of support documents ==> able to delete them\r\n     *\r\n     * @param index\r\n     */\r\n    handleDownloadDocumentDeleteClick = index => {\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let updatedProjectEdited = JSON.parse(JSON.stringify(projectEdited));\r\n        updatedProjectEdited.Pitch.supportingDocuments[index].removed = true;\r\n\r\n        this.setState({\r\n            projectEdited: updatedProjectEdited\r\n        });\r\n    };\r\n\r\n    /**\r\n     * This function is used to close file upload error snackbar\r\n     */\r\n    handleCloseErrorSnackbar = (event, reason) => {\r\n\r\n        if (reason === 'clickaway') {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    errorSnackbarOpen: false\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                errorSnackbarOpen: false\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when date changed\r\n     */\r\n    handleDateChanged = date => {\r\n\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                createProject: {\r\n                    ...this.state.createProject,\r\n                    pitchExpiryDate: NaN\r\n                }\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                pitchExpiryDate:\r\n                    !date\r\n                        ?\r\n                        null\r\n                        :\r\n                        date.getTime()\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when accept terms and conditions checkbox changed\r\n     */\r\n    handleCheckboxChanged = event => {\r\n\r\n        const name = event.target.name;\r\n\r\n        this.setState({\r\n            createProject: {\r\n                ...this.state.createProject,\r\n                [name]: event.target.checked\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the save progress button is clicked\r\n     */\r\n    handleSaveProgressClick = () => {\r\n\r\n        const {\r\n            ManageGroupUrlState,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiryDate,\r\n\r\n            financialRound,\r\n\r\n            qibSpecialNews\r\n        } = this.state.createProject;\r\n\r\n        if (activeStep === STEP_PITCH_GENERAL_INFORMATION) {\r\n            // check if at least one field is filled\r\n            if (pitchSector === \"-\"\r\n                && pitchProjectName.trim().length === 0\r\n                && pitchProjectDescription.trim().length === 0\r\n                && pitchExpiryDate === null\r\n                && financialRound.trim().length === 0\r\n                && (ManageGroupUrlState.groupNameFromUrl === \"qib\" && qibSpecialNews.trim().length === 0)\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'You have nothing to save.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n\r\n            // check if the entered date is in a valid format or the entered date is less than the minimum date\r\n            if (isNaN(pitchExpiryDate)\r\n                ||\r\n                (pitchExpiryDate && (pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)))\r\n            ) {\r\n                setFeedbackSnackbarContent(\r\n                    'Please enter a valid date.',\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.setState({\r\n            saveProgress: true,\r\n            progressBeingSaved: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user clicks on the Delete draft button\r\n     */\r\n    handleDeleteDraftClick = () => {\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            draftBeingDeleted: true\r\n        });\r\n\r\n        // delete project cover\r\n        this.deleteMultiplesOnStorage(UPLOAD_PITCH_COVER_MODE)\r\n            .then(() => {\r\n                // delete project summary\r\n                this.deleteMultiplesOnStorage(UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE)\r\n                    .then(() => {\r\n                        // delete project supporting documents\r\n                        this.deleteMultiplesOnStorage(UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE)\r\n                            .then(() => {\r\n                                this.firebaseDB\r\n                                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                                    .child(projectEdited.id)\r\n                                    .remove()\r\n                                    .then(() => {\r\n                                        // reset all variables and states to refresh the page\r\n                                        this.pitchCoverRealtimeDB = [];\r\n                                        this.pitchPresentationDocumentRealtimeDB = [];\r\n                                        this.pitchSupportingDocumentsRealtimeDB = [];\r\n                                        this.selectedProjectVisibilitySetting = -1;\r\n\r\n                                        this.setState({\r\n                                            ...initState\r\n                                        });\r\n\r\n                                        // remove listener\r\n                                        if (this.projectEditedSaveModeRefListener) {\r\n                                            this.projectEditedSaveModeRefListener.off('child_changed');\r\n                                        }\r\n\r\n                                        this.navigateToTheSamePageWithActiveStepSaved(0, null);\r\n                                        // reload the page\r\n                                        window.location.reload();\r\n                                    });\r\n                            });\r\n                    });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle delete multiple files on firebase storage\r\n     */\r\n    deleteMultiplesOnStorage = async (mode) => {\r\n        const {\r\n            AuthenticationState\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited\r\n        } = this.state;\r\n\r\n        let storageRef = this.firebaseStorage\r\n            .ref(DB_CONST.USERS_CHILD)\r\n            .child(AuthenticationState.currentUser.id)\r\n            .child(DB_CONST.PROJECTS_CHILD)\r\n            .child(projectEdited.id);\r\n\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                if (!projectEdited.Pitch.cover) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_COVER_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.cover.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                if (!projectEdited.Pitch.presentationDocument) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_PRESENTATION_DOCUMENT_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.presentationDocument.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                if (!projectEdited.Pitch.supportingDocuments) {\r\n                    return;\r\n                }\r\n                storageRef = storageRef\r\n                    .child(DB_CONST.PROJECT_SUPPORTING_DOCUMENTS_CHILD);\r\n                return Promise\r\n                    .all(\r\n                        projectEdited.Pitch.supportingDocuments.map(coverItem => (\r\n                            this.deleteASingleFileOnStorage(mode, storageRef, coverItem)\r\n                        ))\r\n                    )\r\n                    .then(() => {\r\n                        return true;\r\n                    })\r\n                    .catch(error => {\r\n                        return (error);\r\n                    });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle delete a single file on firebase storage\r\n     */\r\n    deleteASingleFileOnStorage = async (mode, storageRef, file) => {\r\n        switch (mode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                // a video URL from other servers instead of from Firebase storage\r\n                if (file.storageID === \"\") {\r\n                    return;\r\n                }\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}.${file.fileExtension}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return new Promise((resolve, reject) => {\r\n                    storageRef = storageRef\r\n                        .child(`${file.storageID}${DB_CONST.STORAGE_FILE_NAME_ID_SPLIT}${file.fileName}`)\r\n                        .delete()\r\n                        .then(() => {\r\n                            return resolve();\r\n                        })\r\n                        .catch(error => {\r\n                            return reject(error);\r\n                        });\r\n                });\r\n            default:\r\n                return;\r\n        }\r\n    };\r\n\r\n    render() {\r\n\r\n        const params = queryString.parse(this.props.location.search);\r\n\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            isMobile\r\n        } = this.props;\r\n\r\n        const {\r\n            projectEdited,\r\n            projectEditedLoaded,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            draftBeingDeleted\r\n        } = this.state;\r\n\r\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\r\n            || isValidatingGroupUrl(ManageGroupUrlState)\r\n            || isAuthenticating(AuthenticationState)\r\n        ) {\r\n            return null;\r\n        }\r\n\r\n        // when creating a new offer,\r\n        // if no user found or found user is an investor or a super admin\r\n        // --> display Page Not Found\r\n        if (!successfullyAuthenticated(AuthenticationState)\r\n            || (successfullyAuthenticated(AuthenticationState) && AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n            || (!params.edit && AuthenticationState.currentUser && (AuthenticationState.currentUser.type === DB_CONST.TYPE_INVESTOR\r\n                    || (AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN && AuthenticationState.currentUser.superAdmin))\r\n            )\r\n        ) {\r\n            return (\r\n                <Redirect to={Routes.error404}/>\r\n            );\r\n        }\r\n\r\n        // in edit mode\r\n        if (params.edit) {\r\n            // offer not loaded yet\r\n            if (!projectEditedLoaded) {\r\n                return (\r\n                    <FlexView width=\"100%\" hAlignContent=\"center\"  style={{padding: 30}}>\r\n                        <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // no offer found or found offer does not belong to the current issuer/group admin\r\n            if (\r\n                !projectEdited\r\n                // current user is an issuer that does not own the project\r\n                || (projectEdited\r\n                    && AuthenticationState.currentUser.type === DB_CONST.TYPE_ISSUER\r\n                    && AuthenticationState.currentUser.id !== projectEdited.issuerID\r\n                )\r\n            ) {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n\r\n            // check editable offer\r\n            if (!utils.shouldAProjectBeEdited(AuthenticationState.currentUser, projectEdited)) {\r\n                return (\r\n                    <FlexView marginTop={50} width=\"100%\">\r\n                        <Typography variant=\"h4\" align=\"center\">This offer can't be edited anymore</Typography>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            // current user is a group admin that does not own the project\r\n            if (projectEdited\r\n                && AuthenticationState.currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && !AuthenticationState.currentUser.superAdmin\r\n                && AuthenticationState.currentUser.anid !== projectEdited.anid\r\n            ) {\r\n                return <FlexView marginTop={50} hAlignContent=\"center\">\r\n                    <Typography variant=\"h4\" align=\"center\">\r\n                        {`You can only edit offers from ${getHomeGroup(AuthenticationState.groupsOfMembership).group.displayName}.`}\r\n                    </Typography>\r\n                </FlexView>;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <CreateProject\r\n                    clubAttributes={ManageSystemAttributesState.systemAttributes}\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    groupProperties={ManageGroupUrlState.group}\r\n                    params={params}\r\n                    AuthenticationState={AuthenticationState}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    projectEdited={projectEdited}\r\n                    projectEditedLoaded={projectEditedLoaded}\r\n                    saveProgress={saveProgress}\r\n                    progressBeingSaved={progressBeingSaved}\r\n                    draftBeingDeleted={draftBeingDeleted}\r\n                    isMobile={isMobile}\r\n                    createProjectState={this.state.createProject}\r\n                    onSelectPitchCoverTypeClick={this.handleSelectPitchCoverTypeClick}\r\n                    onFilesChanged={this.handleFilesChanged}\r\n                    onFilesError={this.handleFileError}\r\n                    onDeleteDocument={this.handleDeleteDocument}\r\n                    onInputChanged={this.handleCreatePitchInputChanged}\r\n                    onPitchEditorChanged={this.handlePitchEditorChanged}\r\n                    attachNextStepButtonRef={this.attachNextStepButtonRef}\r\n                    onPopoverErrorMessageClose={this.handlePopoverErrorMessageClose}\r\n                    onNextStepClick={this.handleNextStepClick}\r\n                    onBackClick={this.handleBackClick}\r\n                    onDownloadDocumentDeleteClick={this.handleDownloadDocumentDeleteClick}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCheckboxChanged={this.handleCheckboxChanged}\r\n                    onSaveProgressClick={this.handleSaveProgressClick}\r\n                    onDeleteDraftClick={this.handleDeleteDraftClick}\r\n                />\r\n\r\n                <UploadingDialog\r\n                    groupUserName={ManageGroupUrlState.group ? ManageGroupUrlState.group.groupUserName : null}\r\n                    currentUser={AuthenticationState.currentUser}\r\n                    open={this.state.createProject.openUploadingProgressDialog}\r\n                    uploadFileMode={this.state.createProject.uploadFileMode}\r\n                    uploadFileProgress={this.state.createProject.uploadFileProgress}\r\n                    params={params}\r\n                    projectEdited={projectEdited}\r\n                    projectID={this.state.createProject.projectID}\r\n                />\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * This component contains the main UI elements for the whole page\r\n */\r\nclass CreateProject extends Component {\r\n\r\n    onNextStepClick = () => {\r\n        this.props.onNextStepClick();\r\n    };\r\n\r\n    onBackClick = () => {\r\n        this.props.onBackClick();\r\n    };\r\n\r\n    onSelectPitchCoverTypeClick = type => {\r\n        this.props.onSelectPitchCoverTypeClick(type);\r\n    };\r\n\r\n    onFilesChanged = mode => files => {\r\n        this.props.onFilesChanged(mode, files);\r\n    };\r\n\r\n    onFilesError = (error, files) => {\r\n        this.props.onFilesError(error, files);\r\n    };\r\n\r\n    onInputChanged = event => {\r\n        this.props.onInputChanged(event);\r\n    };\r\n\r\n    onPitchEditorChanged = (content, delta, source, editor) => {\r\n        this.props.onPitchEditorChanged(content, delta, source, editor);\r\n    };\r\n\r\n    onDeleteDocument = mode => index => {\r\n        this.props.onDeleteDocument(mode, index);\r\n    };\r\n\r\n    attachNextStepButtonRef = (target) => {\r\n        this.props.attachNextStepButtonRef(target);\r\n    };\r\n\r\n    onPopoverErrorMessageClose = () => {\r\n        this.props.onPopoverErrorMessageClose();\r\n    };\r\n\r\n    onDownloadDocumentDeleteClick = index => {\r\n        this.props.onDownloadDocumentDeleteClick(index);\r\n    };\r\n\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    };\r\n\r\n    onCheckboxChanged = event => {\r\n        this.props.onCheckboxChanged(event);\r\n    };\r\n\r\n    onSaveProgressClick = () => {\r\n        this.props.onSaveProgressClick();\r\n    };\r\n\r\n    onDeleteDraftClick = () => {\r\n        this.props.onDeleteDraftClick();\r\n    };\r\n\r\n    /**\r\n     * Render pop-over error message (if any) when the user clicks to move to the next step\r\n     */\r\n    renderPitchPublishErrorMessage = () => {\r\n\r\n        const {\r\n            groupUserName\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (this.props.createProjectState.pitchPublishCheck) {\r\n            case PITCH_PUBLISH_CHECK_NONE:\r\n                return null;\r\n            case PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION:\r\n                msg = \"Please fill in all the General information.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_INVALID_FUND:\r\n                msg = \"Please check your entered funds again.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER:\r\n                msg = \"Please upload an image or a video for your project cover.\";\r\n                break;\r\n            case PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION:\r\n                // for QIB, project summary is a one-pager\r\n                if (groupUserName === \"qib\") {\r\n                    msg = \"Please upload your one-pager.\";\r\n                }\r\n                // for other groups, project summary is still project summary\r\n                else {\r\n                    msg = \"Please upload a file or use our provided text editor to make your project presentation.\";\r\n                }\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"body2\" color=\"error\">{msg}</Typography>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            clubAttributes,\r\n            groupUserName,\r\n            groupProperties,\r\n            currentUser,\r\n            params,\r\n            projectEdited,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n            draftBeingDeleted,\r\n\r\n            isMobile,\r\n\r\n            createProjectState\r\n        } = this.props;\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {/** Stepper */}\r\n                <Row noGutters style={{ marginTop: 40, padding: 20}}>\r\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                            <Stepper activeStep={createProjectState.activeStep} alternativeLabel style={{ width: isMobile ? \"auto\" : \"100%\", padding: 0}}>\r\n                                <Step key={0}>\r\n                                    <StepLabel>General information</StepLabel>\r\n                                </Step>\r\n                                <Step key={1}>\r\n                                    <StepLabel>Project cover</StepLabel>\r\n                                </Step>\r\n                                <Step key={2}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>One-pager</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Project deck</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                <Step key={3}>\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <StepLabel>Project deck</StepLabel>\r\n                                            :\r\n                                            <StepLabel>Supporting documents</StepLabel>\r\n                                    }\r\n                                </Step>\r\n                                {\r\n                                    params.edit && projectEdited\r\n                                        ?\r\n                                        (\r\n                                            projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Step key={4}>\r\n                                                    <StepLabel>Terms and conditions</StepLabel>\r\n                                                </Step>\r\n                                        )\r\n                                        :\r\n                                        <Step key={4}>\r\n                                            <StepLabel>Terms and conditions</StepLabel>\r\n                                        </Step>\r\n                                }\r\n                            </Stepper>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main content (changed based on activeStep) */}\r\n                <Row noGutters style={{padding: 18}}>\r\n                    {\r\n                        createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION\r\n                            ?\r\n                            /**\r\n                             * General information column\r\n                             */\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                {\r\n                                    /**\r\n                                     * Step 1: General information\r\n                                     */\r\n                                }\r\n                                <FlexView column>\r\n                                    <FlexView>\r\n                                        <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 1: General information</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <SelectPitchVisibility/>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n\r\n                                    {/** Let the issuer select the group they want to create an offer for */}\r\n                                    {\r\n                                        createProjectState.groupIssuerCreateOfferFor === \"undefined\"\r\n                                            ? null\r\n                                            : params.edit && projectEdited && !isDraftProjectNotSubmitted(projectEdited)\r\n                                            ? null\r\n                                            : !isIssuer(AuthenticationState.currentUser)\r\n                                                ? null\r\n                                                : AuthenticationState.groupsOfMembership === null || AuthenticationState.groupsOfMembership.length === 0\r\n                                                    ? null\r\n                                                    : <FlexView marginTop={30}>\r\n                                                        <FormControl fullWidth required>\r\n                                                            <FormLabel>Select course</FormLabel>\r\n                                                            <Select name=\"groupIssuerCreateOfferFor\" value={createProjectState.groupIssuerCreateOfferFor} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                                {\r\n                                                                    AuthenticationState.groupsOfMembership.map(\r\n                                                                        groupOfMembership =>\r\n                                                                            <MenuItem key={groupOfMembership.group.anid} value={groupOfMembership.group.anid}>{groupOfMembership.group.displayName}</MenuItem>\r\n                                                                    )\r\n                                                                }\r\n                                                            </Select>\r\n                                                        </FormControl>\r\n                                                    </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Choosing sector\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={30}>\r\n                                        <FormControl\r\n                                            fullWidth\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchSector === \"-\"\r\n                                            }\r\n                                        >\r\n                                            <FormLabel>Choose sector</FormLabel>\r\n                                            <Select name=\"pitchSector\" value={createProjectState.pitchSector} margin=\"dense\" input={<OutlinedInput/>} onChange={this.onInputChanged}>\r\n                                                <MenuItem key={-1} value=\"-\">\r\n                                                    -\r\n                                                </MenuItem>\r\n                                                {\r\n                                                    !clubAttributes\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        clubAttributes.Sectors.map((sector, index) => (\r\n                                                            <MenuItem key={index} value={sector}>{sector}</MenuItem>\r\n                                                        ))\r\n                                                }\r\n                                            </Select>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Select expiry date\r\n                                         *\r\n                                         * For QIB: Hide this section as the group admins will set\r\n                                         * the default expiry date for all the projects.\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                            ?\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">\r\n                                                            Project expiry\r\n                                                            date: {utils.dateInReadableFormat(groupProperties.settings.defaultPitchExpiryDate)} (set\r\n                                                            by QIB admins)\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView marginTop={30}>\r\n                                                <Row noGutters style={{width: \"100%\"}}>\r\n                                                    <Col xs={12} sm={12} md={8} lg={6}>\r\n                                                        {\r\n                                                            !params.edit || !projectEdited\r\n                                                                ?\r\n                                                                <KeyboardDatePicker\r\n                                                                    autoOk\r\n                                                                    fullWidth\r\n                                                                    variant=\"dialog\"\r\n                                                                    inputVariant=\"outlined\"\r\n                                                                    label=\"Choose expiry date for this project\"\r\n                                                                    format=\"dd/MM/yyyy\"\r\n                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                    value={createProjectState.pitchExpiryDate}\r\n                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                    error={\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                            && createProjectState.pitchExpiryDate === null)\r\n                                                                        ||\r\n                                                                        (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                            && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                        )\r\n                                                                    }\r\n                                                                    onChange={date => this.onDateChanged(date)}\r\n                                                                />\r\n                                                                :\r\n                                                                (\r\n                                                                    utils.isDraftProject(projectEdited)\r\n                                                                        ?\r\n                                                                        <KeyboardDatePicker\r\n                                                                            autoOk\r\n                                                                            fullWidth\r\n                                                                            variant=\"dialog\"\r\n                                                                            inputVariant=\"outlined\"\r\n                                                                            label=\"Choose expiry date for this project\"\r\n                                                                            format=\"dd/MM/yyyy\"\r\n                                                                            minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                            value={createProjectState.pitchExpiryDate}\r\n                                                                            InputAdornmentProps={{position: \"start\"}}\r\n                                                                            error={\r\n                                                                                (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                    && createProjectState.pitchExpiryDate === null)\r\n                                                                                || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                    && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                        || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                )\r\n                                                                            }\r\n                                                                            onChange={date => this.onDateChanged(date)}\r\n                                                                        />\r\n                                                                        :\r\n                                                                        <FlexView column>\r\n                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                {\r\n                                                                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                                                        ?\r\n                                                                                        null\r\n                                                                                        :\r\n                                                                                        projectEdited.PrimaryOffer\r\n                                                                                            ?\r\n                                                                                            `Pledge phase will be active in ${utils.dateDiff(projectEdited.PrimaryOffer.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                            :\r\n                                                                                            projectEdited.Pitch\r\n                                                                                                ?\r\n                                                                                                `Project phase will be active in ${utils.dateDiff(projectEdited.Pitch.expiredDate)} days. Please contact us if you need to change the expiry date.`\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                }\r\n                                                                            </Typography>\r\n                                                                            {\r\n                                                                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                                                                    ?\r\n                                                                                    null\r\n                                                                                    :\r\n                                                                                    (\r\n                                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                                                                            ?\r\n                                                                                            <Typography variant=\"body1\" align=\"left\" color=\"primary\">\r\n                                                                                                Project phase has ended.\r\n                                                                                                Waiting\r\n                                                                                                for the issuer to create\r\n                                                                                                pledge.\r\n                                                                                            </Typography>\r\n                                                                                            :\r\n                                                                                            <KeyboardDatePicker\r\n                                                                                                autoOk\r\n                                                                                                fullWidth\r\n                                                                                                variant=\"dialog\"\r\n                                                                                                inputVariant=\"outlined\"\r\n                                                                                                label={\r\n                                                                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                                                                                        ?\r\n                                                                                                        \"Choose expiry date for pledge phase\"\r\n                                                                                                        :\r\n                                                                                                        \"Choose expiry date for project phase\"\r\n                                                                                                }\r\n                                                                                                format=\"dd/MM/yyyy\"\r\n                                                                                                minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                                value={createProjectState.pitchExpiryDate}\r\n                                                                                                InputAdornmentProps={{position: \"start\"}}\r\n                                                                                                error={\r\n                                                                                                    (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                                                                        && createProjectState.pitchExpiryDate === null)\r\n                                                                                                    || (createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_INVALID_DATE\r\n                                                                                                        && (isNaN(createProjectState.pitchExpiryDate)\r\n                                                                                                            || createProjectState.pitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0))\r\n                                                                                                    )\r\n                                                                                                }\r\n                                                                                                onChange={date => this.onDateChanged(date)}\r\n                                                                                            />\r\n                                                                                    )\r\n                                                                            }\r\n                                                                        </FlexView>\r\n                                                                )\r\n                                                        }\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Student project name (or project name)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={20}>\r\n                                        <TextField\r\n                                            label=\"Student project name\"\r\n                                            name=\"pitchProjectName\"\r\n                                            value={createProjectState.pitchProjectName}\r\n                                            fullWidth\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            required\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.pitchProjectName.trim().length === 0\r\n                                            }\r\n                                            onChange={this.onInputChanged}\r\n                                        />\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Company description (or project description)\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={10}>\r\n                                        <FormControl required fullWidth>\r\n                                            <TextField\r\n                                                label=\"Please provide a brief summary of what your project is about (max 300 characters)\"\r\n                                                name=\"pitchProjectDescription\"\r\n                                                value={createProjectState.pitchProjectDescription}\r\n                                                margin=\"normal\"\r\n                                                variant=\"outlined\"\r\n                                                error={\r\n                                                    createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                    && createProjectState.pitchProjectDescription.trim().length === 0\r\n                                                }\r\n                                                multiline\r\n                                                rowsMax={5}\r\n                                                rows={5}\r\n                                                onChange={this.onInputChanged}\r\n                                            />\r\n                                            <FormHelperText>\r\n                                                This will be circulated to students in and outside course.\r\n                                            </FormHelperText>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Financial round\r\n                                         */\r\n                                    }\r\n                                    <FlexView marginTop={45}>\r\n                                        <FormControl required fullWidth\r\n                                            error={\r\n                                                createProjectState.pitchPublishCheck === PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION\r\n                                                && createProjectState.financialRound.trim().length === 0\r\n                                            }\r\n                                        >\r\n                                            <FormLabel style={{marginBottom: 16}}>Do you want to seek investment?</FormLabel>\r\n                                            <RadioGroup name=\"financialRound\" value={createProjectState.financialRound} onChange={this.onInputChanged}>\r\n                                                {\r\n                                                    DB_CONST.FINANCIAL_ROUNDS.map(round =>\r\n                                                        <FormControlLabel key={round} value={round} control={<Radio/>} label={round}/>\r\n                                                    )\r\n                                                }\r\n                                            </RadioGroup>\r\n                                        </FormControl>\r\n                                    </FlexView>\r\n\r\n                                    {\r\n                                        /**\r\n                                         * Special news - QIB only\r\n                                         */\r\n                                    }\r\n                                    {\r\n                                        groupUserName === \"qib\"\r\n                                        || (\r\n                                            !groupUserName\r\n                                            && currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                            && currentUser.superAdmin\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={45}>\r\n                                                <FormControl required fullWidth>\r\n                                                    <FormLabel>What special news should Briony talk about when she mentions your investment raise at the QIB?</FormLabel>\r\n                                                    <TextField name=\"qibSpecialNews\" value={createProjectState.qibSpecialNews} placeholder=\"This would be a good place to mention if you have already made progress in your funding round.\" fullWidth variant=\"outlined\" onChange={this.onInputChanged} multiline rowsMax={3}\r\n                                                        error={\r\n                                                            groupUserName === \"qib\"\r\n                                                            && createProjectState.qibSpecialNews === PITCH_PUBLISH_FALSE_INVALID_FUND\r\n                                                            && createProjectState.qibSpecialNews.trim().length === 0\r\n                                                        }\r\n                                                    />\r\n                                                    <FormHelperText>QIB won't be able to mention everyone. So, you can make it REALLY exciting.</FormHelperText>\r\n                                                </FormControl>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                \r\n\r\n                                <Divider style={{marginTop: 60}}/>\r\n                            </Col>\r\n                            :\r\n                            (\r\n                                createProjectState.activeStep === STEP_PITCH_COVER\r\n                                    ?\r\n                                    // project cover\r\n                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                        <FlexView column width=\"100%\">\r\n                                            <FlexView vAlignContent=\"center\">\r\n                                                <Typography color=\"primary\" variant=\"h6\" align=\"left\" style={{marginRight: 15}}>Step 2: Upload project cover</Typography>\r\n                                                <InfoOverlay message=\"project cover is an image or video that will appear on your project summary tile.\" placement=\"right\"/>\r\n                                            </FlexView>\r\n\r\n                                            {\r\n                                                !params.edit || !projectEdited\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                        ?\r\n                                                        null\r\n                                                        :\r\n                                                        <FlexView column width=\"100%\" marginTop={25} marginBottom={25}>\r\n                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginBottom: 20}}>Your current project cover</Typography>\r\n\r\n                                                            {\r\n                                                                projectEdited.Pitch.cover.map((coverItem, index) => (\r\n                                                                    coverItem.hasOwnProperty('removed')\r\n                                                                        ?\r\n                                                                        null\r\n                                                                        :\r\n                                                                        coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                                            ?\r\n                                                                            <ReactPlayer key={index} playsInline url={coverItem.url} width=\"100%\" height={coverItem.storageID === \"\" ? 280 : \"auto\"} playing={false} controls={true}/>\r\n                                                                            :\r\n                                                                            <Image key={index} fluid src={coverItem.url}/>\r\n                                                                ))\r\n                                                            }\r\n\r\n                                                            <Divider style={{marginTop: 45}}/></FlexView>\r\n                                            }\r\n\r\n                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 18}}>\r\n                                                {\r\n                                                    !params.edit || !projectEdited\r\n                                                        ?\r\n                                                        \"You need to upload an image or a video for the cover of your project.\"\r\n                                                        :\r\n                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('cover')\r\n                                                            ?\r\n                                                            \"You need to upload an image or a video for the cover of your project.\"\r\n                                                            :\r\n                                                            \"Upload an image or a video to change your project cover. We will use the new cover for your project instead of the old one.\"\r\n                                                }\r\n                                            </Typography>\r\n\r\n                                            {\r\n                                                groupUserName !== \"qib\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>Please upload your project logo here.</Typography>\r\n                                            }\r\n\r\n                                            <FlexView column marginTop={32}>\r\n                                                <FlexView>\r\n                                                    <Button\r\n                                                        variant={\r\n                                                            createProjectState.pitchCoverTypeSelected\r\n                                                            && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                \"contained\"\r\n                                                                :\r\n                                                                \"outlined\"\r\n                                                        }\r\n                                                        className={css(sharedStyles.no_text_transform)}\r\n                                                        color=\"primary\"\r\n                                                        onClick={() => this.onSelectPitchCoverTypeClick(PITCH_COVER_FILE_TYPE_SELECTED)}\r\n                                                    >\r\n                                                        {\r\n                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                ?\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image or a video\"\r\n                                                                    :\r\n                                                                    \"Upload an image or a video\"\r\n                                                                :\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload an image\"\r\n                                                                    :\r\n                                                                    \"Upload an image\"\r\n                                                        }\r\n                                                    </Button>\r\n\r\n                                                    <FlexView marginLeft={20} vAlignContent=\"center\">\r\n                                                        <Button\r\n                                                            variant={\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"contained\"\r\n                                                                    :\r\n                                                                    \"outlined\"\r\n                                                            }\r\n                                                            className={css(sharedStyles.no_text_transform)}\r\n                                                            color=\"primary\"\r\n                                                            onClick={\r\n                                                                () => this.onSelectPitchCoverTypeClick(PITCH_COVER_VIDEO_URL_TYPE_SELECTED)\r\n                                                            }\r\n                                                            style={{marginRight: 15}}>\r\n                                                            {\r\n                                                                createProjectState.pitchCoverTypeSelected\r\n                                                                && createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                                    ?\r\n                                                                    \"Cancel upload a video URL\"\r\n                                                                    :\r\n                                                                    \"Upload a video URL\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        <InfoOverlay message=\"If your company has a short explainer or introductory video, we suggest you embed it here.\" placement=\"right\"/>\r\n                                                    </FlexView>\r\n                                                </FlexView>\r\n\r\n                                                <FlexView column marginTop={20}>\r\n                                                    {\r\n                                                        !createProjectState.pitchCoverTypeSelected\r\n                                                            ?\r\n                                                            null\r\n                                                            :\r\n                                                            createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                                ?\r\n                                                                <FlexView column marginTop={10}>\r\n                                                                    <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_COVER_FILES_CHANGED)} onError={this.onFilesError}\r\n                                                                        accepts={\r\n                                                                            clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                ?\r\n                                                                                ['video/mp4', 'image/*']\r\n                                                                                :\r\n                                                                                ['image/*']\r\n                                                                        }\r\n                                                                        multiple\r\n                                                                        maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                        minFileSize={0}\r\n                                                                        clickable>\r\n                                                                        <Typography variant=\"body2\" align=\"left\">\r\n                                                                            {\r\n                                                                                clubAttributes && clubAttributes.allowVideoUpload\r\n                                                                                    ?\r\n                                                                                    \"Drop an image or a video here or click to upload\"\r\n                                                                                    :\r\n                                                                                    \"Drop an image here or click to upload\"\r\n                                                                            }\r\n                                                                        </Typography>\r\n                                                                    </Files>\r\n                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}><u>Note:</u> project cover must not exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column>\r\n                                                                    <TextField name=\"pitchCoverVideoURL\" value={createProjectState.pitchCoverVideoURL} placeholder=\"Enter your video URL here\" variant=\"outlined\" margin=\"dense\" onChange={this.onInputChanged}/>\r\n                                                                </FlexView>\r\n                                                    }\r\n\r\n                                                    {/** project cover file type preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCover.length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35}>\r\n                                                                {\r\n                                                                    createProjectState.pitchCover[0].file.type !== \"video/mp4\"\r\n                                                                        ?\r\n                                                                        <Image fluid src={createProjectState.pitchCover[0].preview}/>\r\n                                                                        :\r\n                                                                        <ReactPlayer url={createProjectState.pitchCover[0].preview} playsInline width=\"100%\" height=\"auto\" playing={false} controls={true}/>\r\n                                                                }\r\n                                                                <FlexView marginTop={10} hAlignContent=\"center\">\r\n                                                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"bottom\" flip\r\n                                                                        overlay={\r\n                                                                            <Tooltip id={`tooltip-bottom`}>Delete this cover</Tooltip>\r\n                                                                        }>\r\n                                                                        <IconButton onClick={this.onDeleteDocument(PITCH_COVER_FILES_CHANGED)}>\r\n                                                                            <DeleteIcon fontSize=\"default\" color=\"error\"/>\r\n                                                                        </IconButton>\r\n                                                                    </OverlayTrigger>\r\n                                                                </FlexView>\r\n\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n\r\n                                                    {/** project cover video URL preview */}\r\n                                                    {\r\n                                                        createProjectState.pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n                                                        && createProjectState.pitchCoverVideoURL.trim().length > 0\r\n                                                            ?\r\n                                                            <FlexView column marginTop={35} height={280}>\r\n                                                                <ReactPlayer url={createProjectState.pitchCoverVideoURL} playsInline width=\"100%\" height=\"100%\" playing={false} controls={true}/>\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            null\r\n                                                    }\r\n                                                </FlexView>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </Col>\r\n                                    :\r\n                                    (\r\n                                        createProjectState.activeStep === STEP_PITCH_DECK\r\n                                            ?\r\n                                            // project summary (other groups)\r\n                                            // One-pager (for QIB only)\r\n                                            <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                {\r\n                                                    groupUserName === \"qib\"\r\n                                                        ?\r\n                                                        // QIB project summary which is also known as one-pager\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Submit your one-pager</Typography>\r\n\r\n                                                            {/** Display the current one-pager if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current one-pager\"\r\n                                                                                            :\r\n                                                                                            \"You haven't submitted your one-pager.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={30}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload your one-pager</Typography>\r\n                                                                <Files className={css(styles.file_drop_zone)} onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)} onError={this.onFilesError} accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']} multiple maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES} minFileSize={0} clickable>\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> The one-pager must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments documents={createProjectState.pitchPresentationDocument} onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}/>\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <FlexView column marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" align=\"left\" component=\"span\">\r\n                                                                    We recommend the following headings for your\r\n                                                                    one-page, one-sided summary:\r\n                                                                    <ul>\r\n                                                                        <li>Problem</li>\r\n                                                                        <li>Solution</li>\r\n                                                                        <li>Business model</li>\r\n                                                                        <li>Market opportunity</li>\r\n                                                                        <li>Team</li>\r\n                                                                        <li>Journey so far/timeline</li>\r\n                                                                        <li>Ask/Investment proposition</li>\r\n                                                                    </ul>\r\n                                                                </Typography>\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                        :\r\n                                                        // other groups project summary\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 3: Upload project outline</Typography>\r\n\r\n                                                            {/** Display the current project summary if there is one */}\r\n                                                            {\r\n                                                                !params.edit || !projectEdited\r\n                                                                    ?\r\n                                                                    null\r\n                                                                    :\r\n                                                                    (\r\n                                                                        utils.isDraftProject(projectEdited)\r\n                                                                        && (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument\r\n                                                                                    .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.presentationDocument\r\n                                                                                        && projectEdited.Pitch.presentationDocument\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            \"Your current project summary\"\r\n                                                                                            :\r\n                                                                                            \"You have no project summary.\"\r\n                                                                                    }\r\n                                                                                </Typography>\r\n                                                                                <DocumentsDownload documents={projectEdited.Pitch.presentationDocument}/>\r\n\r\n                                                                                <Divider style={{marginTop: 20}}/>\r\n                                                                            </FlexView>\r\n                                                                    )\r\n                                                            }\r\n\r\n                                                            {/** Explanation text */}\r\n                                                            <Typography variant=\"subtitle1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                {\r\n                                                                    !params.edit || !projectEdited\r\n                                                                        ?\r\n                                                                        \"You need to either upload your project summary (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                        :\r\n                                                                        projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                                        &&\r\n                                                                        (\r\n                                                                            !projectEdited.Pitch.presentationDocument\r\n                                                                            ||\r\n                                                                            (\r\n                                                                                projectEdited.Pitch.presentationDocument\r\n                                                                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                            )\r\n                                                                        )\r\n                                                                            ?\r\n                                                                            \"You need to either upload your project summary (PDF, Word, or Power Point file) or use our provided text editor to create your own presentation.\"\r\n                                                                            :\r\n                                                                            \"Upload a PDF, Word, or Power Point file to change your project summary. We will use the new document for your project summary instead of the old one.\"\r\n                                                                }\r\n                                                            </Typography>\r\n\r\n                                                            {/** File upload area */}\r\n                                                            <FlexView column marginTop={30} marginBottom={60}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Upload project summary</Typography>\r\n                                                                <Files\r\n                                                                    className={css(styles.file_drop_zone)}\r\n                                                                    onChange={this.onFilesChanged(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                    onError={this.onFilesError}\r\n                                                                    accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx']}\r\n                                                                    multiple\r\n                                                                    maxFileSize={DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_BYTES}\r\n                                                                    minFileSize={0}\r\n                                                                    clickable\r\n                                                                >\r\n                                                                    <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                </Files>\r\n\r\n                                                                <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                    <u>Note:</u> Project summary must not\r\n                                                                    exceed {DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.\r\n                                                                    Files in\r\n                                                                    formats .pdf, .doc, .docx, .ppt, and .pptx are\r\n                                                                    accepted\r\n                                                                    only.\r\n                                                                </Typography>\r\n\r\n                                                                <UploadDocuments\r\n                                                                    documents={createProjectState.pitchPresentationDocument}\r\n                                                                    onDeleteDocument={this.onDeleteDocument(PITCH_PRESENTATION_FILES_CHANGED)}\r\n                                                                />\r\n                                                            </FlexView>\r\n\r\n                                                            {/** Rich text editor */}\r\n                                                            <FlexView column marginTop={20}>\r\n                                                                <Typography variant=\"body1\" paragraph align=\"left\">Write overview</Typography>\r\n                                                                <ReactQuill\r\n                                                                    theme=\"snow\"\r\n                                                                    placeholder={\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            \"Write your project presentation here. Add images for visual effects.\"\r\n                                                                            :\r\n                                                                            projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT && !projectEdited.Pitch.hasOwnProperty('presentationText')\r\n                                                                                ?\r\n                                                                                \"Write your project presentation here. Add images for visual effects.\"\r\n                                                                                :\r\n                                                                                \"You haven't had text presentation\" +\r\n                                                                                \" for this offer.\"\r\n                                                                    }\r\n                                                                    onChange={this.onPitchEditorChanged}\r\n                                                                    modules={modules}\r\n                                                                    value={createProjectState.pitchPresentationText}\r\n                                                                />\r\n                                                            </FlexView>\r\n                                                        </FlexView>\r\n                                                }\r\n                                            </Col>\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                    ?\r\n                                                    // Supporting documents (other groups)\r\n                                                    // project summary (for QIB only)\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        {\r\n                                                            groupUserName === \"qib\"\r\n                                                                ?\r\n                                                                // QIB supporting document which is also known as project summary\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload project summary (optional)</Typography>\r\n\r\n                                                                    {/** Display current project summary if there is */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your current project summary</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no project summary.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/></FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/></FlexView>\r\n                                                                :\r\n                                                                // Other groups supporting documents\r\n                                                                <FlexView column>\r\n                                                                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 4: Upload supporting documents</Typography>\r\n\r\n                                                                    {/** Display current supporting documents if there are */}\r\n                                                                    {\r\n                                                                        !params.edit || !projectEdited\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            utils.isDraftProject(projectEdited)\r\n                                                                            &&\r\n                                                                            (\r\n                                                                                !projectEdited.Pitch.supportingDocuments\r\n                                                                                ||\r\n                                                                                (\r\n                                                                                    projectEdited.Pitch.supportingDocuments\r\n                                                                                    && projectEdited.Pitch.supportingDocuments\r\n                                                                                        .filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                                                                                )\r\n                                                                            )\r\n                                                                                ?\r\n                                                                                null\r\n                                                                                :\r\n                                                                                <FlexView column marginTop={25} marginBottom={25}>\r\n                                                                                    {\r\n                                                                                        projectEdited.Pitch.supportingDocuments\r\n                                                                                        && projectEdited.Pitch.supportingDocuments\r\n                                                                                            .filter(document => !document.hasOwnProperty('removed')).length > 0\r\n                                                                                            ?\r\n                                                                                            <FlexView column>\r\n                                                                                                <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your supporting documents</Typography>\r\n                                                                                                <DocumentsDownload documents={projectEdited.Pitch.supportingDocuments} deleteEnable onDeleteDocument={this.onDownloadDocumentDeleteClick}/>\r\n                                                                                            </FlexView>\r\n                                                                                            :\r\n                                                                                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">You have no supporting documents.</Typography>\r\n                                                                                    }\r\n\r\n                                                                                    <Divider style={{marginTop: 20}}/>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/** Explanation text */}\r\n                                                                    <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\" style={{marginTop: 8}}>\r\n                                                                        {\r\n                                                                            !params.edit || !projectEdited\r\n                                                                                ?\r\n                                                                                `You can upload supporting documents to help strengthen your project. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                :\r\n                                                                                (\r\n                                                                                    !projectEdited.Pitch.supportingDocuments\r\n                                                                                        ?\r\n                                                                                        `You can upload supporting documents to help strengthen your project. You can upload up to ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS} files.`\r\n                                                                                        :\r\n                                                                                        `Upload new supporting documents. \r\n                                                                        You can still upload ${DB_CONST.MAX_FILES_FOR_PITCH_SUPPORTING_DOCUMENTS - projectEdited.Pitch.supportingDocuments.filter(document => !document.hasOwnProperty('removed')).length} \r\n                                                                        more documents.`\r\n                                                                                )\r\n                                                                        }\r\n                                                                    </Typography>\r\n\r\n                                                                    {/** File upload area */}\r\n                                                                    <FlexView column marginTop={25}>\r\n                                                                        <Files\r\n                                                                            className={css(styles.file_drop_zone)}\r\n                                                                            onChange={this.onFilesChanged(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}\r\n                                                                            onError={this.onFilesError}\r\n                                                                            accepts={['.pdf', '.doc', '.docx', '.ppt', '.pptx', '.xls', '.xlsx']}\r\n                                                                            multiple\r\n                                                                            maxFileSize={DB_CONST.MAX_FILE_SIZE_IN_BYTES}\r\n                                                                            minFileSize={0}\r\n                                                                            clickable>\r\n                                                                            <Typography variant=\"body2\" align=\"left\">Drop a file here or click to upload</Typography>\r\n                                                                        </Files>\r\n\r\n                                                                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" style={{marginTop: 11}}>\r\n                                                                            <u>Note:</u> Each document must not\r\n                                                                            exceed {DB_CONST.MAX_FILE_SIZE_IN_MB}MB.\r\n                                                                            Files\r\n                                                                            in formats .pdf, .doc, .docx, .ppt, .pptx,\r\n                                                                            .xls,\r\n                                                                            and .xlsx are accepted only.\r\n                                                                        </Typography>\r\n\r\n                                                                        <UploadDocuments documents={createProjectState.pitchSupportingDocuments} onDeleteDocument={this.onDeleteDocument(PITCH_SUPPORTING_DOCUMENTS_FILES_CHANGED)}/>\r\n                                                                    </FlexView>\r\n\r\n                                                                    {/** Divider */}\r\n                                                                    <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                                        <FlexView column>\r\n                                                            <Typography color=\"primary\" variant=\"h6\" align=\"left\">Step 5: Accept terms and conditions</Typography>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to share raise publicly\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\" style={{marginTop: 30}}>\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToShareRaisePublicly\" value={createProjectState.agreedToShareRaisePublicly} checked={createProjectState.agreedToShareRaisePublicly} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to share news of your raise publicly e.g. via Twitter, please tick this box.</Typography>\r\n                                                                    }/>\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to receive local investment information\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <FormControlLabel\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"agreedToReceiveLocalInvestmentInfo\" value={createProjectState.agreedToReceiveLocalInvestmentInfo} checked={createProjectState.agreedToReceiveLocalInvestmentInfo} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">If you're happy to receive information about the local investment ecosystem (max 8 times a year), please tick this box.</Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            {/** Divider */}\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n\r\n                                                            {\r\n                                                                /**\r\n                                                                 * Agree to T&Cs\r\n                                                                 */\r\n                                                            }\r\n                                                            <FormControl component=\"fieldset\">\r\n                                                                <Typography variant=\"body1\" align=\"left\">Please tick the box below to confirm that you agree\r\n                                                                    to comply with the terms and conditions of creating\r\n                                                                    a project in our platform.</Typography>\r\n                                                                <FormControlLabel style={{marginTop: 10}}\r\n                                                                    control={\r\n                                                                        <Checkbox color=\"primary\" name=\"acceptedTermsAndConditions\" value={createProjectState.acceptedTermsAndConditions} checked={createProjectState.acceptedTermsAndConditions} onChange={this.onCheckboxChanged}/>\r\n                                                                    }\r\n                                                                    label={\r\n                                                                        <Typography variant=\"body1\" align=\"left\">I've read and accept the\r\n                                                                            <b>\r\n                                                                                &nbsp;\r\n                                                                                <NavLink\r\n                                                                                    to={ROUTES.CREATE_PITCH_TERMS_AND_CONDITIONS}\r\n                                                                                    target=\"_blank\"\r\n                                                                                    className={css(sharedStyles.nav_link_hover)}\r\n                                                                                    style={{\r\n                                                                                        color:\r\n                                                                                            !groupProperties\r\n                                                                                                ?\r\n                                                                                                colors.primaryColor\r\n                                                                                                :\r\n                                                                                                groupProperties.settings.primaryColor\r\n                                                                                    }}\r\n                                                                                >\r\n                                                                                    terms and conditions.\r\n                                                                                </NavLink>\r\n                                                                            </b>\r\n                                                                        </Typography>\r\n                                                                    }\r\n                                                                />\r\n                                                            </FormControl>\r\n\r\n                                                            <Divider style={{marginTop: 20, marginBottom: 20}}/>\r\n                                                        </FlexView>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            )\r\n                    }\r\n                </Row>\r\n\r\n                {/** Navigation buttons */}\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={{span: 10, offset: 1}} lg={{span: 6, offset: 3}} style={{marginTop: 20, marginBottom: 120, padding: 18}}>\r\n\r\n                        {\r\n                            params.edit && projectEdited\r\n                                ?\r\n                                (\r\n                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                            ?\r\n                                            (\r\n                                                !createProjectState.acceptedTermsAndConditions\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before you submit.</Typography>\r\n                                            )\r\n                                            :\r\n                                            null\r\n                                        :\r\n                                        createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                            ?\r\n                                            <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                            :\r\n                                            null\r\n                                )\r\n                                :\r\n                                (\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                        ?\r\n                                        (\r\n                                            !createProjectState.acceptedTermsAndConditions\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                <Typography color=\"error\" variant=\"body1\" align=\"right\" style={{marginBottom: 25}}>Please check everything carefully again before publishing.</Typography>\r\n                                        )\r\n                                        :\r\n                                        null\r\n                                )\r\n                        }\r\n\r\n                        <FlexView width=\"100%\" hAlignContent=\"right\">\r\n                            <Button variant=\"text\" onClick={this.onBackClick} disabled={createProjectState.activeStep === STEP_PITCH_GENERAL_INFORMATION} size=\"large\" className={css(sharedStyles.no_text_transform)}>Back</Button>\r\n                            <Button ref={this.attachNextStepButtonRef} variant=\"outlined\" color=\"primary\" onClick={this.onNextStepClick} size=\"large\" className={css(sharedStyles.no_text_transform)}\r\n                                disabled={\r\n                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                    && !createProjectState.acceptedTermsAndConditions\r\n                                }\r\n                                style={{marginLeft: 15}}>\r\n                                {\r\n                                    progressBeingSaved\r\n                                        ?\r\n                                        <BeatLoader size={8}/>\r\n                                        :\r\n                                        params.edit && projectEdited\r\n                                            ?\r\n                                            (\r\n                                                projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                    ?\r\n                                                    createProjectState.activeStep === STEP_PITCH_SUPPORTING_DOCUMENTS\r\n                                                        ?\r\n                                                        \"Update\"\r\n                                                        :\r\n                                                        \"Next\"\r\n                                                    :\r\n                                                    createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                        ?\r\n                                                        \"Submit\"\r\n                                                        :\r\n                                                        \"Save and Next\"\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                createProjectState.activeStep === STEP_ACCEPT_TERMS_AND_CONDITIONS\r\n                                                    ?\r\n                                                    \"Submit\"\r\n                                                    :\r\n                                                    \"Save and Next\"\r\n                                            )\r\n                                }\r\n                            </Button>\r\n                            <Overlay show={createProjectState.pitchPublishErrorMessageShowed} target={createProjectState.pitchNextStepButtonTarget} placement=\"bottom\">\r\n                                <Popover style={{marginTop: 14}} id=\"publish-popover-bottom\">\r\n                                    <FlexView vAlignContent=\"center\">\r\n                                        {\r\n                                            this.renderPitchPublishErrorMessage()\r\n                                        }\r\n                                        <IconButton\r\n                                            style={{width: 42, height: 42}}  onClick={this.onPopoverErrorMessageClose}>\r\n                                            <CloseIcon fontSize=\"small\"/>\r\n                                        </IconButton>\r\n                                    </FlexView>\r\n                                </Popover>\r\n                            </Overlay>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    (!params.edit || !projectEdited)\r\n                    || (params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT)\r\n                        ?\r\n                        <div\r\n                            style={{position: 'fixed', width: 'auto', height: 'auto', bottom: 0, right: 0, marginRight: isMobile ? 72 : 120, marginBottom: isMobile ? 80 : 100}}>\r\n                            <FlexView column>\r\n                                <div>\r\n                                    <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                        overlay={\r\n                                            <Tooltip id={`tooltip-left`}>Save draft</Tooltip>\r\n                                        }>\r\n                                        <Fab color=\"primary\" size={isMobile ? \"medium\" : \"large\"} onClick={this.onSaveProgressClick} disabled={saveProgress && progressBeingSaved} style={{position: 'absolute',zIndex: 1}}>\r\n                                            <SaveIcon/>\r\n                                        </Fab>\r\n                                    </OverlayTrigger>\r\n                                    {\r\n                                        saveProgress && progressBeingSaved\r\n                                            ?\r\n                                            <CircularProgress thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: -6, left: -6}}/>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </div>\r\n\r\n                                {\r\n                                    params.edit && projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                        ?\r\n                                        <div style={{marginTop: isMobile ? 62 : 72}}>\r\n                                            <OverlayTrigger trigger={['hover', 'focus']} placement=\"left\" flip\r\n                                             overlay={\r\n                                                    <Tooltip id={`tooltip-left`}>Delete this draft</Tooltip>\r\n                                                }>\r\n                                                <Fab size={isMobile ? \"medium\" : \"large\"} onClick={this.onDeleteDraftClick} disabled={draftBeingDeleted} style={{ position: 'absolute', zIndex: 1}}>\r\n                                                    <DeleteIcon color=\"error\"/>\r\n                                                </Fab>\r\n                                            </OverlayTrigger>\r\n                                            {\r\n                                                draftBeingDeleted\r\n                                                    ?\r\n                                                    <CircularProgress color=\"secondary\" thickness={2.7} size={isMobile ? 60 : 68} style={{position: 'absolute', top: isMobile ? 56 : 66, left: -6}}/>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </div>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n                        </div>\r\n                        :\r\n                        null\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nconst modules = {\r\n    toolbar: [\r\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\r\n        ['bold', 'italic', 'underline', 'strike'],\r\n        ['blockquote', 'code-block'],\r\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\r\n        [{'script': 'sub'}, {'script': 'super'}],\r\n        [{'color': []}, {'background': []}],\r\n        ['link', 'image'],\r\n        ['clean']\r\n    ]\r\n};\r\n\r\n/**\r\n * This component shows the uploading progress\r\n */\r\nclass UploadingDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupUserName,\r\n\r\n            open,\r\n            uploadFileMode,\r\n            uploadFileProgress,\r\n\r\n            saveProgress,\r\n            progressBeingSaved,\r\n\r\n            params,\r\n            projectEdited, // pass in if in edit mode\r\n            projectID,\r\n            currentUser,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog maxWidth=\"sm\" fullWidth open={open} {...other}>\r\n                <DialogTitle disableTypography={true}>\r\n                    <Typography color=\"primary\" variant=\"h6\" align=\"left\">\r\n                        {\r\n                            uploadFileMode === UPLOAD_DONE_MODE\r\n                                ?\r\n                                \"Congratulations!\"\r\n                                :\r\n                                \"You are almost done...\"\r\n                        }\r\n                    </Typography>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <FlexView column>\r\n                        <Typography variant=\"body1\" align=\"left\">\r\n                            {\r\n                                uploadFileMode !== UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    \"Please stay tuned while we are publishing your project\"\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </Typography>\r\n                        <FlexView column marginBottom={20}>\r\n                            {\r\n                                this.renderUploadFileMode()\r\n                            }\r\n                            {\r\n                                uploadFileMode === UPLOAD_DONE_MODE\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <ProgressBar style={{marginTop: 25}} striped variant=\"success\" now={uploadFileProgress} label={`${parseInt(uploadFileProgress)}%`}/>\r\n                            }\r\n                        </FlexView>\r\n                    </FlexView>\r\n                </DialogContent>\r\n                {\r\n                    uploadFileMode !== UPLOAD_DONE_MODE\r\n                        ?\r\n                        null\r\n                        :\r\n                        <DialogActions>\r\n                            <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20} marginRight={20} marginLeft={20}>\r\n                                <NavLink\r\n                                    to={\r\n                                        groupUserName\r\n                                            ?\r\n                                            ROUTES.PROJECT_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":projectID\", projectID)\r\n                                            :\r\n                                            ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", projectID)\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{ width: \"100%\", marginRight: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}>\r\n                                        {\r\n                                            params.edit && projectEdited\r\n                                                ?\r\n                                                (\r\n                                                    projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT\r\n                                                        ?\r\n                                                        \"View submitted offer\"\r\n                                                        :\r\n                                                        \"View updated offer\"\r\n                                                )\r\n                                                :\r\n                                                \"View submitted offer\"\r\n                                        }\r\n                                    </Button>\r\n                                </NavLink>\r\n                                <NavLink\r\n                                    to={\r\n                                        currentUser.type === DB_CONST.TYPE_ISSUER\r\n                                            ?\r\n                                            groupUserName\r\n                                                ?\r\n                                                `${ROUTES.DASHBOARD_ISSUER.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                :\r\n                                                `${ROUTES.DASHBOARD_ISSUER_INVEST_WEST_SUPER}?tab=Home`\r\n                                            :\r\n                                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                groupUserName\r\n                                                    ?\r\n                                                    `${ROUTES.ADMIN.replace(\":groupUserName\", groupUserName)}?tab=Home`\r\n                                                    :\r\n                                                    `${ROUTES.ADMIN_INVEST_WEST_SUPER}?tab=Home`\r\n                                                :\r\n                                                \"\"\r\n                                    }\r\n                                    className={css(sharedStyles.nav_link_hover)}\r\n                                    style={{width: \"100%\", marginLeft: 10}}>\r\n                                    <Button variant=\"outlined\" color=\"primary\" size=\"medium\" fullWidth className={css(sharedStyles.no_text_transform)}> Go back to your dashboard</Button>\r\n                                </NavLink>\r\n                            </FlexView>\r\n                        </DialogActions>\r\n                }\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    renderUploadFileMode = () => {\r\n\r\n        const {\r\n            groupUserName,\r\n            uploadFileMode,\r\n            params,\r\n            projectEdited,\r\n            currentUser\r\n        } = this.props;\r\n\r\n        switch (uploadFileMode) {\r\n            case UPLOAD_PITCH_COVER_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading project cover</Typography>\r\n                );\r\n            case UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Uploading project supporting documents</Typography>\r\n                );\r\n            case UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\"  align=\"left\"\r\n                    >Uploading project presentation document</Typography>\r\n                );\r\n            case UPLOAD_REALTIME_DB:\r\n                return (\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">Finalizing</Typography>\r\n                );\r\n            case UPLOAD_DONE_MODE: {\r\n                if (params.edit && projectEdited) {\r\n                    if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Your offer has been successfully updated.</Typography>;\r\n                    } else if (currentUser.type === DB_CONST.TYPE_ADMIN) {\r\n                        return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                            {\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and publish it.\"\r\n                            }\r\n                        </Typography>;\r\n                    } else {\r\n                        return <FlexView column>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                                {\r\n                                    \"Your offer has been uploaded.\\n\" +\r\n                                    \"It will not be published until the group administrator has approved\" +\r\n                                    \" it.\\n\" +\r\n                                    \"You will be notified once approved.\\n\"\r\n                                }\r\n                            </Typography>\r\n                            <br/>\r\n                            <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">Invite others to upload their projects using following link:</Typography>\r\n                            <br/>\r\n                            <Box border={1} bgcolor={colors.gray_100} padding=\"6px\">\r\n                                <CustomLink url={Routes.constructSignUpRoute(groupUserName)} target=\"_blank\" color=\"none\" activeColor=\"none\" activeUnderline={true} component=\"a\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">{process.env.REACT_APP_PUBLIC_URL + Routes.constructSignUpRoute(groupUserName)}</Typography>\r\n                                    }\r\n                                />\r\n                            </Box>\r\n                        </FlexView>;\r\n                    }\r\n                } else {\r\n                    return <Typography variant=\"body1\" color=\"textSecondary\" align=\"left\">\r\n                        {/** Note: This is unnecessary --> Consider removing it. */}\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"Please double check and make it go live.\"\r\n                                :\r\n                                \"Your offer has been uploaded.\\n\" +\r\n                                \"It will not be published until the group administrator has approved it.\\n\" +\r\n                                \"You will be notified once approved.\"\r\n                        }\r\n                    </Typography>;\r\n                }\r\n            }\r\n            default:\r\n                return;\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreatePitchPageMain);\r\n\r\nconst styles = StyleSheet.create({\r\n\r\n    file_drop_zone: {\r\n        padding: 12,\r\n        border: `1px solid ${colors.gray_400}`,\r\n\r\n        ':hover': {\r\n            backgroundColor: colors.gray_100,\r\n            cursor: 'pointer'\r\n        }\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport {Col, Container, Image, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {Divider, Paper, Typography} from '@material-ui/core';\r\nimport ReactPlayer from 'react-player';\r\n\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\nimport LetterAvatar from '../../shared-components/profile/LetterAvatar';\r\n\r\nimport firebase from '../../firebase/firebaseApp';\r\nimport * as colors from '../../values/colors';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as utils from '../../utils/utils';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        currentUser: state.auth.user,\r\n        currentUserLoaded: state.auth.userLoaded,\r\n\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n    }\r\n};\r\n\r\nclass ProfilePageViewOnly extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.firebaseDB = firebase.database();\r\n\r\n        this.state = {\r\n            userToBeViewed: null,\r\n            userToBeViewedLoaded: false,\r\n\r\n            userToBeViewedInvited: null,\r\n            userToBeViewedInvitedLoaded: false,\r\n\r\n            loadingUserToBeViewed: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.USER_PROFILE : ROUTES.USER_PROFILE_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.loadData();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load data\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            currentUser,\r\n            currentUserLoaded\r\n\r\n        } = this.props;\r\n\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded,\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        if (!currentUserLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!currentUser) {\r\n            if (!userToBeViewedLoaded && !userToBeViewedInvitedLoaded && !loadingUserToBeViewed) {\r\n                this.setState({\r\n                    userToBeViewedLoaded: true,\r\n                    userToBeViewedInvitedLoaded: true,\r\n                    loadingUserToBeViewed: false\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        this.loadUserToBeViewedProfile();\r\n\r\n    };\r\n\r\n    /**\r\n     * Load profile of the user to be viewed\r\n     */\r\n    loadUserToBeViewedProfile = () => {\r\n\r\n        const {\r\n            userToBeViewed,\r\n            loadingUserToBeViewed,\r\n            userToBeViewedLoaded,\r\n            userToBeViewedInvitedLoaded\r\n        } = this.state;\r\n\r\n        if (!userToBeViewed && !loadingUserToBeViewed && !userToBeViewedLoaded && !userToBeViewedInvitedLoaded) {\r\n            this.setState({\r\n                loadingUserToBeViewed: true,\r\n                userToBeViewedLoaded: false,\r\n                userToBeViewedInvitedLoaded: false\r\n            });\r\n\r\n            // this id can be wither official user id or invited id (pass invited id if the user has not registered)\r\n            // Note: this id can be official id or invited id\r\n            // if the user has registered, this id is an official id. Otherwise, it is the invited id\r\n            const userToBeViewedID = this.props.match.params.userID;\r\n\r\n            // get profile of the user to be viewed\r\n            realtimeDBUtils\r\n                .getUserBasedOnID(userToBeViewedID)\r\n                .then(user => {\r\n                    this.setState({\r\n                        userToBeViewed: user,\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    this.setState({\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedLoaded: true\r\n                    });\r\n                });\r\n\r\n            // get the invited profile of this user\r\n            // first call --> assume this id is an official id\r\n            realtimeDBUtils\r\n                .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_OFFICIAL_ID)\r\n                .then(invitedUser => {\r\n                    this.setState({\r\n                        userToBeViewedInvited: invitedUser[0],\r\n                        loadingUserToBeViewed: false,\r\n                        userToBeViewedInvitedLoaded: true\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    // no invited user with the official id found\r\n                    // second call --> this id is an invited id\r\n                    realtimeDBUtils\r\n                        .getInvitedUserBasedOnIDOrEmail(userToBeViewedID, realtimeDBUtils.GET_INVITED_USER_BASED_ON_INVITED_ID)\r\n                        .then(invitedUser => {\r\n                            this.setState({\r\n                                userToBeViewedInvited: invitedUser[0],\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        })\r\n                        .catch(error => {\r\n                            // if this error happens --> this id is non-sense\r\n                            this.setState({\r\n                                loadingUserToBeViewed: false,\r\n                                userToBeViewedInvitedLoaded: true\r\n                            });\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            userToBeViewed,\r\n            userToBeViewedLoaded,\r\n\r\n            userToBeViewedInvited,\r\n            userToBeViewedInvitedLoaded,\r\n\r\n            loadingUserToBeViewed\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            currentUser,\r\n            currentUserLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating\r\n            || !currentUserLoaded\r\n            || !userToBeViewedLoaded\r\n            || !userToBeViewedInvitedLoaded\r\n            || loadingUserToBeViewed\r\n        ) {\r\n            return (\r\n                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !currentUser) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (!userToBeViewed) {\r\n            // user was invited but not yet registered\r\n            if (userToBeViewedInvited) {\r\n                return (\r\n                    <Container fluid style={{padding: 0}}>\r\n                        <Row noGutters>\r\n                            <Col xs={12} sm={12} md={12} lg={12}>\r\n                                <Typography align=\"center\" variant=\"h5\" style={{marginTop: 35}}>\r\n                                    {`${userToBeViewedInvited.title} ${userToBeViewedInvited.firstName} ${userToBeViewedInvited.lastName} has been invited by ${userToBeViewedInvited.Invitor.displayName} but not yet registered.`}\r\n                                </Typography>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                );\r\n            } else {\r\n                return (\r\n                    <PageNotFoundWhole/>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0, backgroundColor: colors.gray_100, height: \"100%\", minHeight: \"100vh\", paddingTop: 50, paddingBottom: 100, paddingLeft: 12, paddingRight: 12}}>\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                        <Paper elevation={1} style={{padding: 15}}>\r\n                            <Row noGutters>\r\n                                <Col xs={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                        {\r\n                                            !userToBeViewed.profilePicture\r\n                                            || (\r\n                                                userToBeViewed.profilePicture\r\n                                                && userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1\r\n                                            )\r\n                                                ?\r\n                                                <LetterAvatar firstName={userToBeViewed.firstName} lastName={userToBeViewed.lastName} width={150} height={150} textVariant=\"h4\"/>\r\n                                                :\r\n                                                <FlexView width={156} height={156}>\r\n                                                    <Image roundedCircle thumbnail src={ userToBeViewed.profilePicture[userToBeViewed.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url} style={{width: \"100%\", maxHeight: 156, objectFit: \"contain\"}}/>\r\n                                                </FlexView>\r\n                                        }\r\n                                    </FlexView>\r\n                                </Col>\r\n                                <Col xs={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\r\n                                    <FlexView column vAlignContent=\"center\" hAlignContent=\"center\" height=\"100%\" marginTop={10} marginBottom={10}>\r\n                                        <Typography align=\"center\" variant=\"h6\">\r\n                                            {`${userToBeViewed.title} ${userToBeViewed.firstName} ${userToBeViewed.lastName}`}\r\n                                        </Typography>\r\n                                        {\r\n                                            this.renderUserStatus(userToBeViewedInvited)\r\n                                        }\r\n                                        <FlexView column marginTop={18} hAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">{`Email: ${userToBeViewed.email}`}</Typography>\r\n                                            {\r\n                                                userToBeViewed.hasOwnProperty('linkedin') && userToBeViewed.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={userToBeViewed.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64, height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                            }\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Paper>\r\n\r\n                        <Paper elevation={1} style={{padding: 20, marginTop: 15}}>\r\n                            {\r\n                                !userToBeViewed.BusinessProfile\r\n                                    ?\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Uni profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                            <Typography align=\"center\" variant=\"body1\">Uni profile has not been uploaded.</Typography>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                                    :\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"h6\" color=\"primary\">Uni profile</Typography>\r\n                                        <FlexView column marginTop={15} marginLeft={15} marginRight={15}>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\"> Student project name:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.companyName}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Course sector:&nbsp;&nbsp;\r\n                                                <b>{userToBeViewed.BusinessProfile.sector}</b>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <Typography variant=\"subtitle1\" align=\"left\">Course Website:&nbsp;&nbsp;\r\n                                                <a href={userToBeViewed.BusinessProfile.companyWebsite} rel=\"noopener noreferrer\" target=\"_blank\">\r\n                                                    <b>{userToBeViewed.BusinessProfile.companyWebsite}</b>\r\n                                                </a>\r\n                                            </Typography>\r\n                                            <Divider className={css(styles.divider_style)}/>\r\n                                            <FlexView column>\r\n                                                <Typography variant=\"subtitle1\" align=\"left\">Introduction video\r\n                                                </Typography>\r\n                                                <FlexView marginTop={20} marginBottom={20} hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                    {\r\n                                                        !userToBeViewed.BusinessProfile.video\r\n                                                        || (\r\n                                                            userToBeViewed.BusinessProfile.video\r\n                                                            && userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed')) === -1\r\n                                                        )\r\n                                                            ?\r\n                                                            <Typography align=\"center\" variant=\"subtitle1\" color=\"textSecondary\">No introduction video available.</Typography>\r\n                                                            :\r\n                                                            <ReactPlayer\r\n                                                                url={\r\n                                                                    userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].url\r\n                                                                }\r\n                                                                playsinline\r\n                                                                width=\"100%\"\r\n                                                                height={userToBeViewed.BusinessProfile.video[userToBeViewed.BusinessProfile.video.findIndex(video => !video.hasOwnProperty('removed'))].storageID === \"\" ? 360 : \"auto\"}\r\n                                                                playing={false}\r\n                                                                controls={true}/>\r\n                                                    }\r\n                                                </FlexView>\r\n                                                <Divider className={css(styles.divider_style)}/>\r\n                                            </FlexView>\r\n                                        </FlexView>\r\n                                    </FlexView>\r\n                            }\r\n                        </Paper>\r\n\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render the current status of the to-be-viewed user's profile\r\n     * @param invitedUser\r\n     * @returns {null|*}\r\n     */\r\n    renderUserStatus = invitedUser => {\r\n        let statusMessage = {\r\n            msg: '',\r\n            color: ''\r\n        };\r\n\r\n        if (invitedUser.status) {\r\n            if (invitedUser.type === DB_CONST.TYPE_ISSUER) {\r\n                statusMessage.msg = \"Teacher of Student\";\r\n                statusMessage.color = \"primary\";\r\n            } else {\r\n                statusMessage.msg = \"Student\";\r\n                statusMessage.color = \"primary\";\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color={statusMessage.color}>{statusMessage.msg}</Typography>\r\n        )\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageViewOnly);\r\n\r\nconst styles = StyleSheet.create({\r\n    divider_style: {\r\n        marginTop: 12,\r\n        marginBottom: 12\r\n    }\r\n});","import React, {Component} from 'react';\n\nimport {FormControl, FormHelperText, MenuItem, OutlinedInput, Select} from '@material-ui/core';\nimport {css} from 'aphrodite';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nimport {connect} from 'react-redux';\nimport * as selectProjectVisibilityActions from '../../redux-store/actions/selectProjectVisibilityActions';\n\nconst mapStateToProps = state => {\n    return {\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting,\n        project: state.manageSelectProjectVisibility.project\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        handleProjectVisibilityChanged: (event) => dispatch(selectProjectVisibilityActions.handleProjectVisibilityChanged(event))\n    }\n};\n\nclass SelectPledgeVisibility extends Component {\n\n    render() {\n        const {\n            groupProperties,\n            groupPropertiesLoaded,\n            projectVisibilitySetting,\n            project,\n\n            handleProjectVisibilityChanged\n        } = this.props;\n\n        if (!groupPropertiesLoaded) {\n            return null;\n        }\n\n        return (\n            <FormControl fullWidth >\n                <FormHelperText className={css(sharedStyles.black_text)} style={{ marginBottom: 6 }} >\n                    Select pledge visibility\n                </FormHelperText>\n                <Select\n                    value={\n                        projectVisibilitySetting === -1\n                            ?\n                            !project\n                                ?\n                                groupProperties\n                                    ?\n                                    groupProperties.settings.projectVisibility\n                                    :\n                                    project.group.settings.projectVisibility\n                                :\n                                project.visibility\n                            :\n                            projectVisibilitySetting\n                    }\n                    name=\"projectVisibilitySetting\"\n                    margin=\"dense\"\n                    onChange={handleProjectVisibilityChanged}\n                    input={\n                        <OutlinedInput labelWidth={0} name=\"projectVisibilitySetting\" />\n                    }\n                >\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PUBLIC} >\n                        {`Public (\n                        ${\n                            groupProperties\n                                ?\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\n                                    ?\n                                    \"Default - \"\n                                    :\n                                    \"\"\n                                :\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PUBLIC\n                                    ?\n                                    \"Default - \"\n                                    :\n                                    \"\"\n                        }\n                        The full pledge will be visible to all Invest West users)`}\n                    </MenuItem>\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_RESTRICTED} >\n                        {`Restricted (\n                        ${\n                            groupProperties\n                                ?\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\n                                    ?\n                                    \"Default - \"\n                                    :\n                                    \"\"\n                                :\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_RESTRICTED\n                                    ?\n                                    \"Default - \"\n                                    :\n                                    \"\"\n                        }\n                        Restricted information from this pledge will be visible to all Invest West users. Only members of your course will see the full pledge)`}\n                    </MenuItem>\n                    <MenuItem value={DB_CONST.PROJECT_VISIBILITY_PRIVATE} >\n                        {`Private (\n                        ${\n                            groupProperties\n                                ?\n                                groupProperties.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\n                                    ?\n                                    \"Default - \"\n                                    :\n                                    \"\"\n                                :\n                                project.group.settings.projectVisibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\n                                    ?\n                                    \"Default - \"\n                                    :\n                                    \"\"\n                        } \n                        Only members of this course will see this pledge)`}\n                    </MenuItem>\n                </Select>\n            </FormControl>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectPledgeVisibility);\n\n","import {\n    CREATE_PLEDGE_STATUS_INVALID_DATE,\n    CREATE_PLEDGE_STATUS_INVALID_FUND,\n    CREATE_PLEDGE_STATUS_MISSING_FIELDS,\n    CREATE_PLEDGE_STATUS_VALID,\n} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\nimport * as utils from '../../utils/utils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as ROUTES from '../../router/routes';\n\nexport const TOGGLE_CREATE_PLEDGE_DIALOG = 'TOGGLE_CREATE_PLEDGE_DIALOG';\nexport const toggleCreatePledgeDialog = () => {\n    return {\n        type: TOGGLE_CREATE_PLEDGE_DIALOG\n    }\n};\n\nexport const CREATE_PLEDGE_DIALOG_SET_PROJECT = 'CREATE_PLEDGE_DIALOG_SET_PROJECT';\nexport const setProject = (project) => {\n    return {\n        type: CREATE_PLEDGE_DIALOG_SET_PROJECT,\n        project: project\n    }\n};\n\nexport const CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED';\nexport const handleInputChanged = (event) => {\n    return {\n        type: CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED,\n        event\n    }\n};\n\nexport const CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED = 'CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED';\nexport const handleDateChanged = date => {\n    return {\n        type: CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED,\n        date\n    }\n};\n\nexport const CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED = 'CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED';\nexport const createPledge = () => {\n    return (dispatch, getState) => {\n        const {\n            project,\n            postMoneyValuation,\n            expiredDate,\n            extraNotes\n        } = getState().manageCreatePledgeDialog;\n\n        // when a group admin creates a pledge, they will have the option to set the project visibility again\n        const projectVisibilitySetting = getState().manageSelectProjectVisibility.projectVisibilitySetting;\n\n        const currentUser = getState().auth.user;\n\n        // check if all the fields in creating primary offer dialog have been filled\n        if (expiredDate === null) {\n            dispatch({\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\n                status: CREATE_PLEDGE_STATUS_MISSING_FIELDS\n            });\n        } else {\n            if (isNaN(expiredDate)\n                ||\n                (expiredDate && (expiredDate < utils.getDateWithDaysFurtherThanToday(0)))\n            ) {\n                dispatch({\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\n                    status: CREATE_PLEDGE_STATUS_INVALID_DATE\n                });\n                return;\n            }\n\n            if (postMoneyValuation.trim().length > 0\n                && !utils.getNumberFromInputString(postMoneyValuation)\n            ) {\n                dispatch({\n                    type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\n                    status: CREATE_PLEDGE_STATUS_INVALID_FUND\n                });\n                return;\n            }\n\n            dispatch({\n                type: CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED,\n                status: CREATE_PLEDGE_STATUS_VALID\n            });\n\n            const primaryOfferObj = {\n                status: DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING,\n                postMoneyValuation:\n                    postMoneyValuation.trim().length === 0\n                        ?\n                        null\n                        :\n                        utils.getNumberFromInputString(postMoneyValuation)\n                ,\n                expiredDate: expiredDate,\n                extraNotes: extraNotes.trim().length === 0 ? null : extraNotes\n            };\n\n            let shouldSendNotificationToIssuer = false;\n            // if the issuerID returns an issuer and the offer was created by a group admin\n            // and the group admin is creating a pledge for this offer\n            // then we will notify the issuer that their offer has gone to the pledge phase and is ready to\n            // receive pledges from investor BECAUSE the pledge will not be double checked, it will go straight to\n            // live when created by a group admin.\n            if (project.issuer.type === DB_CONST.TYPE_ISSUER\n                && project.hasOwnProperty('createdByGroupAdmin')\n                && currentUser.type === DB_CONST.TYPE_ADMIN\n            ) {\n                shouldSendNotificationToIssuer = true;\n            }\n\n            let projectBeforeUpdating = JSON.parse(JSON.stringify(project));\n            projectBeforeUpdating.issuer = null;\n            projectBeforeUpdating.group = null;\n            projectBeforeUpdating.pledges = null;\n\n            let updatedProject = JSON.parse(JSON.stringify(project));\n            updatedProject.issuer = null;\n            updatedProject.group = null;\n            updatedProject.pledges = null;\n\n            updatedProject.status =\n                // if an admin is creating the pledge,\n                // then let it go live directly\n                currentUser.type === DB_CONST.TYPE_ADMIN\n                    ?\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\n                    :\n                    // if an issuer is creating the pledge,\n                    // then let the admin check first\n                    DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED;\n            updatedProject.Pitch.status = DB_CONST.PITCH_STATUS_ACCEPTED;\n            updatedProject.PrimaryOffer = primaryOfferObj;\n            // if projectVisibilitySetting = -1, then go with the previous value of visibility\n            updatedProject.visibility =\n                projectVisibilitySetting === -1 ? projectBeforeUpdating.visibility : projectVisibilitySetting;\n\n            // create primary offer node in the project\n            firebase\n                .database()\n                .ref(DB_CONST.PROJECTS_CHILD)\n                .child(project.id)\n                .update(updatedProject)\n                .then(() => {\n                    dispatch({\n                        type: TOGGLE_CREATE_PLEDGE_DIALOG\n                    });\n\n                    // track issuer's activity\n                    realtimeDBUtils\n                        .trackActivity({\n                            userID: currentUser.id,\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\n                            interactedObjectID: project.id,\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_CREATED_PLEDGE.replace(\"%project%\", updatedProject.projectName),\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", updatedProject.id),\n                            value: {\n                                before: projectBeforeUpdating,\n                                after: updatedProject\n                            }\n                        });\n\n                    if (shouldSendNotificationToIssuer) {\n                        realtimeDBUtils\n                            .sendNotification({\n                                title: project.projectName,\n                                message: \"Congratulations! Your investment opportunity has been published. Investors can now pledge.\",\n                                userID: project.issuerID,\n                                action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\n                            })\n                            .catch(error => {\n                                // handle error\n                            });\n                    }\n                });\n        }\n    }\n};","import React, {Component} from 'react';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport {\r\n    AppBar,\r\n    Button,\r\n    Dialog,\r\n    DialogContent,\r\n    DialogTitle,\r\n    IconButton,\r\n    TextField,\r\n    Toolbar,\r\n    Typography,\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport {KeyboardDatePicker} from '@material-ui/pickers';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\n\r\nimport SelectPledgeVisibility from '../select-pledge-visibility/SelectPledgeVisibility';\r\n\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles, {SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as creatPledgeDialogActions from '../../redux-store/actions/createPledgeDialogActions';\r\n\r\nexport const CREATE_PLEDGE_STATUS_NONE = 0;\r\nexport const CREATE_PLEDGE_STATUS_VALID = 1;\r\nexport const CREATE_PLEDGE_STATUS_MISSING_FIELDS = 2;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_FUND = 3;\r\nexport const CREATE_PLEDGE_STATUS_INVALID_DATE = 4;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currentUser: state.auth.user,\r\n\r\n        open: state.manageCreatePledgeDialog.open,\r\n        project: state.manageCreatePledgeDialog.project,\r\n        postMoneyValuation: state.manageCreatePledgeDialog.postMoneyValuation,\r\n        expiredDate: state.manageCreatePledgeDialog.expiredDate,\r\n        extraNotes: state.manageCreatePledgeDialog.extraNotes,\r\n        createStatus: state.manageCreatePledgeDialog.createStatus\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreatePledgeDialog: () => dispatch(creatPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        handleInputChanged: (event) => dispatch(creatPledgeDialogActions.handleInputChanged(event)),\r\n        handleDateChanged: (date) => dispatch(creatPledgeDialogActions.handleDateChanged(date)),\r\n        createPledge: () => dispatch(creatPledgeDialogActions.createPledge())\r\n    }\r\n};\r\n\r\nclass CreatePledgeDialog extends Component {\r\n\r\n    render() {\r\n\r\n        const {\r\n            forwardedRef,\r\n\r\n            currentUser,\r\n\r\n            project,\r\n\r\n            postMoneyValuation,\r\n            expiredDate,\r\n            extraNotes,\r\n            createStatus,\r\n\r\n            toggleCreatePledgeDialog,\r\n            handleInputChanged,\r\n            handleDateChanged,\r\n            createPledge,\r\n\r\n            ...other\r\n        } = this.props;\r\n\r\n        return (\r\n            <Dialog\r\n                ref={forwardedRef}\r\n                fullScreen\r\n                onClose={toggleCreatePledgeDialog}\r\n                TransitionComponent={\r\n                    SlideTransitionUp\r\n                }\r\n                {...other}\r\n            >\r\n                <DialogTitle>\r\n                    <AppBar elevation={0} >\r\n                        <Toolbar>\r\n                            <IconButton color=\"inherit\" onClick={toggleCreatePledgeDialog} aria-label=\"Close\" >\r\n                                <CloseIcon/>\r\n                            </IconButton>\r\n                            <FlexView marginLeft={10} >\r\n                                <Typography variant=\"h6\" color=\"inherit\">Create pledge</Typography>\r\n                            </FlexView>\r\n                        </Toolbar>\r\n                    </AppBar>\r\n                </DialogTitle>\r\n                <DialogContent>\r\n                    <Container fluid style={{ marginTop: 40 }} >\r\n                        <Row noGutters >\r\n                            <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} >\r\n\r\n                                {/** Get the project name from the project and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Project name\"\r\n                                    value={!project ? \"\" : project.projectName}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the Total raise from the project and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Total fund needs raising ()\"\r\n                                    value={!project ? \"\" : project.Pitch.totalRaise}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the raise required from the project and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Fund required ()\"\r\n                                    value={!project ? \"\" : project.Pitch.fundRequired}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the investors committed from the project and put here */}\r\n                                <TextField\r\n                                    disabled\r\n                                    label=\"Investors committed\"\r\n                                    value={!project ? \"\" : (project.Pitch.investorsCommitted ? project.Pitch.investorsCommitted : \"None\")}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n\r\n                                {/** Get the post money valuation from the project and put here */}\r\n                                <TextField\r\n                                    label=\"Post money valuation ()\"\r\n                                    name=\"postMoneyValuation\"\r\n                                    value={postMoneyValuation}\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n\r\n                                <FlexView marginTop={15} width=\"100%\" >\r\n                                    <KeyboardDatePicker\r\n                                        autoOk\r\n                                        variant=\"dialog\"\r\n                                        inputVariant=\"outlined\"\r\n                                        label=\"Choose expired date\"\r\n                                        format=\"dd/MM/yyyy\"\r\n                                        minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                        value={expiredDate}\r\n                                        InputAdornmentProps={{position: \"start\"}}\r\n                                        onChange={handleDateChanged}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Some notes if the Issuer wants to add */}\r\n                                <TextField\r\n                                    label=\"Your extra notes\"\r\n                                    value={extraNotes}\r\n                                    name=\"extraNotes\"\r\n                                    fullWidth\r\n                                    margin=\"normal\"\r\n                                    variant=\"outlined\"\r\n                                    onChange={handleInputChanged}\r\n                                />\r\n                            </Col>\r\n\r\n                            {\r\n                                currentUser.type !== DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} style={{ marginTop: 10 }} >\r\n                                        <SelectPledgeVisibility/>\r\n                                    </Col>\r\n                            }\r\n\r\n                            <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}} style={{ marginTop: 40, marginBottom: 50 }} >\r\n                                <FlexView hAlignContent=\"center\" marginBottom={30} >\r\n                                    {\r\n                                        this.renderCreatePledgeError()\r\n                                    }\r\n                                </FlexView>\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" >\r\n                                    <Button\r\n                                        size=\"large\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={createPledge}\r\n                                    >Create pledge</Button>\r\n                                </FlexView>\r\n                            </Col>\r\n                        </Row>\r\n                    </Container>\r\n                </DialogContent>\r\n            </Dialog>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render error (if has) when the user clicks on the Create button\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderCreatePledgeError = () => {\r\n        const {\r\n            createStatus\r\n        } = this.props;\r\n\r\n        let msg = \"\";\r\n\r\n        switch (createStatus) {\r\n            case CREATE_PLEDGE_STATUS_NONE:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_VALID:\r\n                return null;\r\n            case CREATE_PLEDGE_STATUS_MISSING_FIELDS:\r\n                msg = \"Please fill in all the fields.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_FUND:\r\n                msg = \"Please enter a valid fund.\";\r\n                break;\r\n            case CREATE_PLEDGE_STATUS_INVALID_DATE:\r\n                msg = \"Please enter a valid date.\";\r\n                break;\r\n            default:\r\n                return null;\r\n        }\r\n\r\n        return (\r\n            <Typography align=\"center\" variant=\"subtitle1\" color=\"error\">{msg}</Typography>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(React.forwardRef(\r\n    (props, ref) => <CreatePledgeDialog {...props} forwardedRef={ref}/>));","import firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const MANAGE_PLEDGES_TABLE_SET_PROJECT = 'MANAGE_PLEDGES_TABLE_SET_PROJECT';\nexport const setProject = project => {\n    return (dispatch, getState) => {\n        const prevProject = getState().managePledgesTable.project;\n        // if the newly set project is actually the same as the one set before\n        // do nothing\n        if (prevProject && prevProject.id === project.id) {\n            return;\n        }\n\n        dispatch({\n            type: MANAGE_PLEDGES_TABLE_SET_PROJECT,\n            project\n        });\n    };\n};\n\nexport const MANAGE_PLEDGES_TABLE_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_LOADING_PLEDGES';\nexport const MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES = 'MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES';\nexport const loadPledges = () => {\n    return (dispatch, getState) => {\n        const {\n            project\n        } = getState().managePledgesTable;\n\n        dispatch({\n            type: MANAGE_PLEDGES_TABLE_LOADING_PLEDGES\n        });\n\n        realtimeDBUtils\n            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\n            .then(pledges => {\n                Promise.all(pledges.map(pledge => {\n                    return new Promise((resolve, reject) => {\n                        realtimeDBUtils\n                            .loadGroupsUserIsIn(pledge.investorID)\n                            .then(groupsInvestorIsIn => {\n                                pledge.groupsInvestorIsIn = groupsInvestorIsIn;\n                                return resolve(pledges);\n                            });\n                    })\n                })).then(() => {\n                    dispatch({\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\n                        pledges\n                    });\n                }).catch(error => {\n                    dispatch({\n                        type: MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES,\n                        pledges: [],\n                        error\n                    });\n                });\n            });\n    }\n};\n\nexport const MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE = 'MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE';\nexport const toggleSearchMode = () => {\n    return (dispatch, getState) => {\n        const inSearchMode = getState().managePledgesTable.inSearchMode;\n        const searchText = getState().managePledgesTable.searchText;\n        const pledges = getState().managePledgesTable.pledges;\n\n        if (inSearchMode) {\n            dispatch({\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\n                enter: false,\n                matchedPledges: []\n            });\n        } else {\n            let matchedPledges = pledges.filter(\n                pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\n                    || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\n            );\n            dispatch({\n                type: MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE,\n                enter: true,\n                matchedPledges\n            });\n        }\n    }\n};\n\nexport const MANAGE_PLEDGES_TABLE_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_PAGE_CHANGED';\nexport const changePage = (event, newPage) => {\n    return {\n        type: MANAGE_PLEDGES_TABLE_PAGE_CHANGED,\n        newPage\n    }\n};\n\nexport const MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED = 'MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED';\nexport const changeRowsPerPage = event => {\n    return {\n        type: MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED,\n        value: parseInt(event.target.value, 10)\n    }\n};\n\nexport const MANAGE_PLEDGES_TABLE_INPUT_CHANGED = 'MANAGE_PLEDGES_TABLE_INPUT_CHANGED';\nexport const handlePledgesTableInputChanged = event => {\n    return (dispatch, getState) => {\n        const pledges = getState().managePledgesTable.pledges;\n\n        const searchText = event.target.value;\n        let matchedPledges = pledges.filter(\n            pledge => pledge.investor.firstName.toLowerCase().includes(searchText.trim().toLowerCase())\n                || pledge.investor.lastName.toLowerCase().includes(searchText.trim().toLowerCase())\n        );\n\n        dispatch({\n            type: MANAGE_PLEDGES_TABLE_INPUT_CHANGED,\n            searchText,\n            matchedPledges\n        });\n    }\n};\n\n//----------------------------------------------------------------------------------------------------------------------\nlet pledgesListener = null;\n\nexport const MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED = 'MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED';\nexport const startListeningForPledgesChanged = () => {\n    return (dispatch, getState) => {\n        if (!pledgesListener) {\n            const project = getState().managePledgesTable.project;\n\n            pledgesListener = firebase\n                .database()\n                .ref(DB_CONST.PLEDGES_CHILD)\n                .orderByChild('projectID')\n                .equalTo(project.id);\n\n            pledgesListener\n                .on('child_added', snapshot => {\n                    let pledge = snapshot.val();\n\n                    const pledges = [...getState().managePledgesTable.pledges];\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\n                    if (pledgeIndex === -1) {\n                        realtimeDBUtils\n                            .getUserBasedOnID(pledge.investorID)\n                            .then(investor => {\n                                pledge.investor = investor;\n\n                                realtimeDBUtils\n                                    .loadGroupsUserIsIn(pledge.investorID)\n                                    .then(groupsInvestorIsIn => {\n                                        pledge.groupsInvestorIsIn = groupsInvestorIsIn;\n\n                                        dispatch({\n                                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\n                                            pledges: [...pledges, pledge]\n                                        });\n                                    });\n                            });\n                    }\n                });\n\n            pledgesListener\n                .on('child_changed', snapshot => {\n                    let pledge = snapshot.val();\n\n                    const pledges = [...getState().managePledgesTable.pledges];\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\n\n                    // pledge is in the local list\n                    if (pledgeIndex !== -1) {\n                        let updatedPledges = [...pledges];\n\n                        if (pledge.amount !== '') {\n                            pledge.investor = updatedPledges[pledgeIndex].investor;\n                            pledge.groupsInvestorIsIn = updatedPledges[pledgeIndex].groupsInvestorIsIn;\n                            updatedPledges[pledgeIndex] = pledge;\n                        }\n                        else {\n                            updatedPledges.splice(pledgeIndex, 1);\n                        }\n\n                        dispatch({\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\n                            pledges: [...updatedPledges]\n                        });\n                    }\n                    // pledge is not in the local list\n                    else {\n                        if (pledge.amount !== '') {\n                            realtimeDBUtils\n                                .getUserBasedOnID(pledge.investorID)\n                                .then(investor => {\n                                    pledge.investor = investor;\n\n                                    realtimeDBUtils\n                                        .loadGroupsUserIsIn(pledge.investorID)\n                                        .then(groupsInvestorIsIn => {\n                                            pledge.groupsInvestorIsIn = groupsInvestorIsIn;\n\n                                            dispatch({\n                                                type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\n                                                pledges: [...pledges, pledge]\n                                            });\n                                        });\n                                });\n                        }\n                    }\n                });\n\n            pledgesListener\n                .on('child_removed', snapshot => {\n                    let pledgeRemovedID = snapshot.key;\n\n                    const pledges = [...getState().managePledgesTable.pledges];\n                    let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\n\n                    if (pledgeIndex !== -1) {\n                        let updatedPledges = pledges;\n                        updatedPledges.splice(pledgeIndex, 1);\n\n                        dispatch({\n                            type: MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED,\n                            pledges: updatedPledges\n                        });\n                    }\n                });\n        }\n    }\n};\n\nexport const stopListeningForPledgesChanged = () => {\n    return (dispatch, getState) => {\n        if (pledgesListener) {\n            pledgesListener.off('child_added');\n            pledgesListener.off('child_changed');\n            pledgesListener.off('child_removed');\n            pledgesListener = null;\n        }\n    }\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport EmailRepository, {\n    ClientEmailTypes,\n    ContactPitchOwnerEmailData\n} from \"../../../../api/repositories/EmailRepository\";\nimport User from \"../../../../models/user\";\nimport {openFeedbackSnackbar} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarActions\";\nimport {FeedbackSnackbarTypes} from \"../../../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\n\nexport enum ContactPitchOwnerDialogEvents {\n    ToggleContactDialog = \"ContactPitchOwnerDialogEvents.ToggleContactDialog\",\n    SendingContactEmail = \"ContactPitchOwnerDialogEvents.SendingContactEmail\",\n    CompleteSendingContactEmail = \"ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\"\n}\n\nexport interface ContactPitchOwnerDialogAction extends Action {\n\n}\n\nexport interface ToggleContactDialogAction extends ContactPitchOwnerDialogAction {\n    projectName: string | null;\n    projectOwnerEmail: string | null;\n}\n\nexport interface CompleteSendingContactEmailAction extends ContactPitchOwnerDialogAction {\n    error?: string;\n}\n\nexport const toggleContactPitchOwnerDialog: ActionCreator<any> = (projectName?: string, projectOwnerEmail?: string) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: ToggleContactDialogAction = {\n            type: ContactPitchOwnerDialogEvents.ToggleContactDialog,\n            projectName: projectName ?? null,\n            projectOwnerEmail: projectOwnerEmail ?? null\n        };\n        return dispatch(action);\n    }\n}\n\nexport const sendContactEmail: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            projectName,\n            projectOwnerEmail,\n            sendingContactEmail\n        } = getState().ContactPitchOwnerDialogLocalState;\n\n        if (sendingContactEmail) {\n            return;\n        }\n\n        if (!projectName || !projectOwnerEmail) {\n            return;\n        }\n\n        const {\n            currentUser\n        } = getState().AuthenticationState;\n\n        if (!currentUser) {\n            return;\n        }\n\n        dispatch({\n            type: ContactPitchOwnerDialogEvents.SendingContactEmail\n        });\n\n        const completeAction: CompleteSendingContactEmailAction = {\n            type: ContactPitchOwnerDialogEvents.CompleteSendingContactEmail\n        };\n\n        try {\n            const emailInfo: ContactPitchOwnerEmailData = {\n                receiver: projectOwnerEmail,\n                sender: currentUser.email,\n                userName: `${(currentUser as User).firstName} ${(currentUser as User).lastName}`,\n                projectName: projectName\n            };\n\n            await new EmailRepository().sendEmail({\n                emailType: ClientEmailTypes.ContactPitchOwner,\n                emailInfo: emailInfo\n            });\n\n            dispatch(completeAction);\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Success, \"Email sent.\"));\n        } catch (error) {\n            completeAction.error = error.toString();\n            dispatch(completeAction);\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, completeAction.error));\n        }\n    }\n}","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {PitchDocument} from \"../../models/project\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    List,\r\n    ListItem,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {DocumentsDownloadState} from \"./DocumentsDownloadReducer\";\r\nimport {onAcceptRiskWarningClick, onCancelRiskWarningClick, onDocumentClick} from \"./DocumentsDownloadActions\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Routes from \"../../router/routes\";\r\n\r\ninterface DocumentsDownloadProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    documents: PitchDocument[];\r\n    shouldShowRiskWarningOnDownload?: boolean;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => any;\r\n    onAcceptRiskWarningClick: () => any;\r\n    onCancelRiskWarningClick: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        DocumentsDownloadLocalState: state.DocumentsDownloadLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onDocumentClick: (document: PitchDocument, shouldShowRiskWarning: boolean) => dispatch(onDocumentClick(document, shouldShowRiskWarning)),\r\n        onAcceptRiskWarningClick: () => dispatch(onAcceptRiskWarningClick()),\r\n        onCancelRiskWarningClick: () => dispatch(onCancelRiskWarningClick())\r\n    }\r\n}\r\n\r\nclass DocumentsDownload extends Component<DocumentsDownloadProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState,\r\n            documents,\r\n            shouldShowRiskWarningOnDownload,\r\n            DocumentsDownloadLocalState,\r\n            onDocumentClick,\r\n            onAcceptRiskWarningClick,\r\n            onCancelRiskWarningClick\r\n        } = this.props;\r\n\r\n        if (!documents || documents.length === 0) {\r\n            return null;\r\n        }\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Default student\"\r\n            );\r\n\r\n        let riskWarningTextSplits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        return <Box\r\n            marginTop=\"20px\"\r\n        >\r\n            <List>\r\n                {\r\n                    documents.map((document, index) => (\r\n                        document.removed !== undefined && document.removed\r\n                            ? null\r\n                            : <ListItem\r\n                                key={index}\r\n                                button\r\n                                onClick={() => onDocumentClick(document, shouldShowRiskWarningOnDownload ?? false)}\r\n                            >\r\n                                <img\r\n                                    alt=\"Document image\"\r\n                                    src={require(\"../../img/document_icon.png\").default}\r\n                                    width={48}\r\n                                    height={48}\r\n                                />\r\n                                <Box display=\"flex\" flexDirection=\"row\" >\r\n                                    <Typography variant=\"body2\" align=\"left\">{document.fileName}</Typography>\r\n                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">{document.readableSize}</Typography>\r\n                                </Box>\r\n                            </ListItem>\r\n                    ))\r\n                }\r\n            </List>\r\n\r\n            <Dialog\r\n                open={DocumentsDownloadLocalState.openRiskWarningDialog}\r\n                onClose={() => onCancelRiskWarningClick()}\r\n            >\r\n                <DialogTitle>Accept Risk Warning</DialogTitle>\r\n                <DialogContent>\r\n                    <Box marginTop=\"18px\" whiteSpace=\"pre-line\" >\r\n                        <Typography variant=\"body1\" align=\"justify\" >\r\n                            {riskWarningTextSplits[0]}\r\n                            <CustomLink\r\n                                url={Routes.nonGroupRiskWarning}\r\n                                target=\"_blank\"\r\n                                color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                                activeColor=\"none\"\r\n                                activeUnderline={true}\r\n                                component=\"nav-link\"\r\n                                childComponent={\r\n                                    riskWarningTextSplits[1]\r\n                                }\r\n                            />\r\n                            {riskWarningTextSplits[2]}\r\n                        </Typography>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Box display=\"flex\" flexDirection=\"row\" marginRight=\"4px\" marginBottom=\"4px\" >\r\n                        <Button\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onCancelRiskWarningClick()}\r\n                        >Cancel</Button>\r\n                        <Box width=\"14px\" />\r\n                        <Button\r\n                            color=\"primary\"\r\n                            variant=\"contained\"\r\n                            className={css(sharedStyles.no_text_transform)}\r\n                            onClick={() => onAcceptRiskWarningClick()}\r\n                        >Accept</Button>\r\n                    </Box>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DocumentsDownload);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ManageSystemAttributesState} from \"../../redux-store/reducers/manageSystemAttributesReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Box, colors, Typography} from \"@material-ui/core\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\n\r\ninterface RiskWarningProps {\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState\r\n    }\r\n}\r\n\r\nclass RiskWarning extends Component<RiskWarningProps, any> {\r\n    render() {\r\n        const {\r\n            ManageSystemAttributesState,\r\n            ManageGroupUrlState\r\n        } = this.props;\r\n\r\n        if (!ManageSystemAttributesState.systemAttributes) {\r\n            return null;\r\n        }\r\n\r\n        let riskWarningFooter = ManageSystemAttributesState.systemAttributes.riskWarningFooter;\r\n        riskWarningFooter = riskWarningFooter\r\n            .split(\"%groupName%\")\r\n            .join(ManageGroupUrlState.group\r\n                ? ManageGroupUrlState.group.displayName\r\n                : \"Default student\"\r\n            );\r\n\r\n        let splits = riskWarningFooter.split(\"%URL%\");\r\n\r\n        const urlText = splits[1];\r\n\r\n        return <Box\r\n            border={`1px solid ${colors.grey[\"600\"]}`}\r\n            borderRadius=\"24px\"\r\n            padding=\"24px\"\r\n            bgcolor={colors.grey[\"100\"]}\r\n        >\r\n            <Typography variant=\"body1\" align=\"left\" ><u>Risk warning</u></Typography>\r\n            <Box marginTop=\"18px\" whiteSpace=\"pre-line\" >\r\n                <Typography variant=\"body1\" align=\"justify\" >\r\n                    {splits[0]}\r\n                    <CustomLink\r\n                        url={Routes.nonGroupRiskWarning}\r\n                        target=\"_blank\"\r\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.error.main}\r\n                        activeColor=\"none\"\r\n                        activeUnderline={true}\r\n                        component=\"nav-link\"\r\n                        childComponent={ urlText }\r\n                    />\r\n                    {splits[2]}\r\n                </Typography>\r\n            </Box>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(RiskWarning);","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport GroupProperties from \"../../models/group_properties\";\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\nimport {ProjectInstance} from \"../../models/project\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport GroupRepository from \"../../api/repositories/GroupRepository\";\nimport OfferRepository, {FetchProjectsOrderByOptions} from \"../../api/repositories/OfferRepository\";\nimport AccessRequest, {AccessRequestInstance} from \"../../models/access_request\";\nimport Admin, {isAdmin} from \"../../models/admin\";\nimport AccessRequestRepository from \"../../api/repositories/AccessRequestRepository\";\n\nexport enum GroupDetailsEvents {\n    LoadingData = \"GroupDetailsEvents.LoadData\",\n    CompleteLoadingData = \"GroupDetailsEvents.CompleteLoadingData\",\n    SendingAccessRequest = \"GroupDetailsEvents.SendingAccessRequest\",\n    CompleteSendingAccessRequest = \"GroupDetailsEvents.CompleteSendingAccessRequest\",\n    RemovingAccessRequest = \"GroupDetailsEvents.RemovingAccessRequest\",\n    CompleteRemovingAccessRequest = \"GroupDetailsEvents.CompleteRemovingAccessRequest\"\n}\n\nexport interface GroupDetailsAction extends Action {\n\n}\n\nexport interface CompleteLoadingDataAction extends GroupDetailsAction {\n    group?: GroupProperties;\n    members?: InvitedUserWithProfile[];\n    offers?: ProjectInstance[];\n    accessRequestInstances?: AccessRequestInstance[];\n    error?: string;\n}\n\nexport interface CompleteSendingAccessRequestAction extends GroupDetailsAction {\n    error?: string;\n    updatedAccessRequestInstances?: AccessRequestInstance[]\n}\n\nexport interface CompleteRemovingAccessRequestAction extends GroupDetailsAction {\n    error?: string;\n    updatedAccessRequestInstances?: AccessRequestInstance[]\n}\n\nexport const loadData: ActionCreator<any> = (groupUserName: string) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            accessRequestsInstances\n        } = getState().GroupDetailsLocalState;\n\n        dispatch({\n            type: GroupDetailsEvents.LoadingData\n        });\n\n        const currentUser = getState().AuthenticationState.currentUser;\n\n        const completeAction: CompleteLoadingDataAction = {\n            type: GroupDetailsEvents.CompleteLoadingData\n        }\n\n        if (!currentUser) {\n            completeAction.error = \"Unauthenticated user.\";\n            return dispatch(completeAction);\n        }\n\n        if (groupUserName === undefined) {\n            completeAction.error = \"Invalid request.\";\n            return dispatch(completeAction);\n        }\n\n        try {\n            const groupResponse = await new GroupRepository().getGroup(groupUserName);\n            const group: GroupProperties = groupResponse.data;\n\n            const membersResponse = await new GroupRepository().fetchGroupMembers(group.anid);\n            const members: InvitedUserWithProfile[] = membersResponse.data;\n\n            const offersResponse = await new OfferRepository().fetchOffers({\n                phase: \"all\",\n                group: group.anid,\n                orderBy: FetchProjectsOrderByOptions.Group\n            });\n            const offers: ProjectInstance[] = offersResponse.data;\n\n            const admin: Admin | null = isAdmin(currentUser);\n            if (!admin || (admin && !admin.superAdmin)) {\n                // user is an issuer, investor, or group admin\n                // and access requests have not been fetched\n                if (!accessRequestsInstances) {\n                    const accessRequestInstancesResponse = await new AccessRequestRepository().fetchAccessRequests({\n                        user: currentUser.id,\n                        orderBy: \"user\"\n                    });\n                    completeAction.accessRequestInstances = accessRequestInstancesResponse.data;\n                }\n            }\n\n            completeAction.group = group;\n            completeAction.members = members;\n            completeAction.offers = offers;\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const sendAccessRequest: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const currentUser = getState().AuthenticationState.currentUser;\n        if (!currentUser) {\n            return;\n        }\n\n        const group = getState().GroupDetailsLocalState.group;\n\n        dispatch({\n            type: GroupDetailsEvents.SendingAccessRequest\n        });\n\n        const completeAction: CompleteSendingAccessRequestAction = {\n            type: GroupDetailsEvents.CompleteSendingAccessRequest\n        };\n\n        if (!group) {\n            completeAction.error = \"Invalid request.\";\n            return dispatch(completeAction);\n        }\n\n        try {\n            const response = await new AccessRequestRepository().createAccessRequest(currentUser.id, group.anid);\n            const accessRequestInstance: AccessRequestInstance = response.data;\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().ExploreGroupsLocalState.accessRequestsInstances;\n            if (currentAccessRequestInstances !== undefined) {\n                completeAction.updatedAccessRequestInstances = [\n                    ...currentAccessRequestInstances,\n                    accessRequestInstance\n                ];\n            } else {\n                completeAction.updatedAccessRequestInstances = [accessRequestInstance];\n            }\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const removeAccessRequest: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const currentUser = getState().AuthenticationState.currentUser;\n        if (!currentUser) {\n            return;\n        }\n\n        const group = getState().GroupDetailsLocalState.group;\n\n        dispatch({\n            type: GroupDetailsEvents.RemovingAccessRequest\n        });\n\n        const completeAction: CompleteRemovingAccessRequestAction = {\n            type: GroupDetailsEvents.CompleteRemovingAccessRequest\n        };\n\n        if (!group) {\n            completeAction.error = \"Invalid request.\";\n            return dispatch(completeAction);\n        }\n\n        try {\n            const currentAccessRequestInstances: AccessRequestInstance[] | undefined = getState().GroupDetailsLocalState.accessRequestsInstances;\n            if (!currentAccessRequestInstances) {\n                return dispatch(completeAction);\n            }\n            const accessRequestIndex = currentAccessRequestInstances.findIndex(\n                accessRequestInstance => accessRequestInstance.group.anid === group.anid && accessRequestInstance.user.id === currentUser.id);\n            if (accessRequestIndex === -1) {\n                return dispatch(completeAction);\n            }\n            let updatedAccessRequestInstances: AccessRequestInstance[] = [...currentAccessRequestInstances];\n            const accessRequest: AccessRequest = updatedAccessRequestInstances[accessRequestIndex].request;\n            await new AccessRequestRepository().removeAccessRequest(accessRequest.id);\n            updatedAccessRequestInstances.splice(accessRequestIndex, 1);\n\n            completeAction.updatedAccessRequestInstances = updatedAccessRequestInstances;\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}","import {\n    CompleteSendingContactEmailAction,\n    ContactPitchOwnerDialogAction,\n    ContactPitchOwnerDialogEvents,\n    ToggleContactDialogAction\n} from \"./ContactPitchOwnerDialogActions\";\nimport Error from \"../../../../models/error\";\n\nexport interface ContactPitchOwnerDialogState {\n    projectName: string | null;\n    projectOwnerEmail: string | null;\n    contactDialogOpen: boolean;\n    sendingContactEmail: boolean;\n    errorSendingContactEmail?: Error;\n}\n\nconst initialState: ContactPitchOwnerDialogState = {\n    projectName: null,\n    projectOwnerEmail: null,\n    contactDialogOpen: false,\n    sendingContactEmail: false\n}\n\nexport const isSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\n    return state.sendingContactEmail;\n}\n\nexport const hasErrorSendingContactEmail = (state: ContactPitchOwnerDialogState) => {\n    return !state.sendingContactEmail && state.errorSendingContactEmail !== undefined;\n}\n\nconst contactPitchOwnerDialogReducer = (state = initialState, action: ContactPitchOwnerDialogAction) => {\n    switch (action.type) {\n        case ContactPitchOwnerDialogEvents.ToggleContactDialog:\n            const toggleContactDialogAction: ToggleContactDialogAction = action as ToggleContactDialogAction;\n            return {\n                ...state,\n                contactDialogOpen: !state.contactDialogOpen,\n                projectName: toggleContactDialogAction.projectName,\n                projectOwnerEmail: toggleContactDialogAction.projectOwnerEmail\n            }\n        case ContactPitchOwnerDialogEvents.SendingContactEmail:\n            return {\n                ...state,\n                sendingContactEmail: true,\n                errorSendingContactEmail: undefined\n            }\n        case ContactPitchOwnerDialogEvents.CompleteSendingContactEmail:\n            const completeSendingContactEmailFunction: CompleteSendingContactEmailAction = action as CompleteSendingContactEmailAction;\n            return {\n                ...state,\n                contactDialogOpen: false,\n                sendingContactEmail: false,\n                errorSendingContactEmail: completeSendingContactEmailFunction.error !== undefined\n                    ? {detail: completeSendingContactEmailFunction.error}\n                    : state.errorSendingContactEmail\n            }\n        default:\n            return state;\n    }\n}\n\nexport default contactPitchOwnerDialogReducer;","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {Box, Button, Dialog, DialogActions, DialogContent, Typography} from \"@material-ui/core\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../../../shared-js-css-styles/SharedStyles\";\nimport {ContactPitchOwnerDialogState, isSendingContactEmail} from \"./ContactPitchOwnerDialogReducer\";\nimport {AnyAction} from \"redux\";\nimport {sendContactEmail, toggleContactPitchOwnerDialog} from \"./ContactPitchOwnerDialogActions\";\n\ninterface ContactPitchOwnerDialogProps {\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\n    toggleContactDialog: () => any;\n    sendContactEmail: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ContactPitchOwnerDialogLocalState: state.ContactPitchOwnerDialogLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        toggleContactDialog: () => dispatch(toggleContactPitchOwnerDialog()),\n        sendContactEmail: () => dispatch(sendContactEmail())\n    }\n}\n\nclass ContactPitchOwnerDialog extends Component<ContactPitchOwnerDialogProps, any> {\n    render() {\n        const {\n            ContactPitchOwnerDialogLocalState,\n            toggleContactDialog,\n            sendContactEmail\n        } = this.props;\n\n        return <Dialog\n            open={ContactPitchOwnerDialogLocalState.contactDialogOpen}\n            onClose={() => toggleContactDialog()}\n        >\n            <DialogContent>\n                <Box display=\"flex\" flexDirection=\"column\">\n                    <Typography variant=\"body1\" align=\"left\">{`We will let the project owner know that you would like to find out more.`}</Typography>\n                    <Box height=\"20px\"/>\n                    <Typography variant=\"body1\" align=\"left\">{`Are you happy for us to share your email address?`}</Typography>\n                </Box>\n            </DialogContent>\n            <DialogActions>\n                {\n                    isSendingContactEmail(ContactPitchOwnerDialogLocalState)\n                        ? null\n                        : <Button\n                            onClick={() => toggleContactDialog()}\n                            className={css(sharedStyles.no_text_transform)}\n                        >Cancel</Button>\n                }\n                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={isSendingContactEmail(ContactPitchOwnerDialogLocalState)} onClick={() => sendContactEmail()}>\n                    {\n                        isSendingContactEmail(ContactPitchOwnerDialogLocalState)\n                            ? `Sending email to ${ContactPitchOwnerDialogLocalState.projectOwnerEmail} ...`\n                            : \"Yes\"\n                    }\n                </Button>\n            </DialogActions>\n        </Dialog>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactPitchOwnerDialog);","import React, {Component} from \"react\";\r\nimport FlexView from \"react-flexview\";\r\nimport {css, StyleSheet} from \"aphrodite\";\r\nimport {\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogContentText,\r\n    DialogTitle,\r\n    Divider,\r\n    InputBase,\r\n    Paper,\r\n    Step,\r\n    StepButton,\r\n    StepContent,\r\n    StepLabel,\r\n    Stepper,\r\n    Tab,\r\n    Tabs,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EditIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CreateIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport ReactPlayer from \"react-player\";\r\nimport * as colors from \"../../values/colors\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport PageNotFound from \"../../shared-components/page-not-found/PageNotFound\";\r\nimport PageNotFoundWhole from \"../../shared-components/page-not-found/PageNotFoundWhole\";\r\nimport CreatePledgeDialog from \"../../shared-components/create-pledge-dialog/CreatePledgeDialog\";\r\nimport SelectPitchVisibility from \"../../shared-components/select-pitch-visibility/SelectPitchVisibility\";\r\nimport InfoOverlay from \"../../shared-components/info_overlay/InfoOverlay\";\r\nimport {connect} from \"react-redux\";\r\nimport * as manageGroupFromParamsActions from \"../../redux-store/actions/manageGroupFromParamsActions\";\r\nimport * as pledgesTableActions from \"../../redux-store/actions/pledgesTableActions\";\r\nimport * as createPledgeDialogActions from \"../../redux-store/actions/createPledgeDialogActions\";\r\nimport * as selectProjectVisibilityActions from \"../../redux-store/actions/selectProjectVisibilityActions\";\r\nimport * as feedbackSnackbarActions from \"../../redux-store/actions/feedbackSnackbarActions\";\r\nimport \"./ProjectDetails.scss\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport {TYPE_INVESTOR} from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport * as ROUTES from \"../../router/routes\";\r\nimport {AUTH_SUCCESS} from \"../signin/Signin\";\r\nimport {KeyboardDatePicker} from \"@material-ui/pickers\";\r\nimport Api, {ApiRoutes} from \"../../api/Api\";\r\nimport {\r\n    isDraftProject,\r\n    isProjectCreatedByGroupAdmin,\r\n    isProjectFailed,\r\n    isProjectInLivePitchPhase,\r\n    isProjectInLivePledgePhase,\r\n    isProjectLive,\r\n    isProjectOwner,\r\n    isProjectPitchExpiredWaitingForAdminToCheck,\r\n    isProjectRejectedToGoLive,\r\n    isProjectSuccessful,\r\n    isProjectTemporarilyClosed,\r\n    isProjectWaitingForPledgeToBeChecked,\r\n    isProjectWaitingForPledgeToBeCreated,\r\n    isProjectWaitingToGoLive\r\n} from \"../../models/project\";\r\nimport DocumentsDownload from \"../../shared-components/documents-download/DocumentsDownload\";\r\nimport RiskWarning from \"../../shared-components/risk-warning/RiskWarning\";\r\nimport {toggleContactPitchOwnerDialog} from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialogActions\";\r\nimport ContactPitchOwnerDialog from \"./components/contact-pitch-owner-dialog/ContactPitchOwnerDialog\";\r\nimport FeedbackSnackbarNew from \"../../shared-components/feedback-snackbar/FeedbackSnackbarNew\";\r\nimport {hasAuthenticationError, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\n\r\nconst ADMIN_OFFER_STATES_PUBLISH_PITCH = 0;\r\nconst ADMIN_OFFER_STATES_MOVE_TO_PLEDGE = 1;\r\nconst ADMIN_OFFER_STATES_PUBLISH_PLEDGE = 2;\r\n\r\nconst MAIN_BODY_ADMIN_OFFER_STATES = 0;\r\nconst MAIN_BODY_CAMPAIGN = 1;\r\nconst MAIN_BODY_DOCUMENTS = 2;\r\nconst MAIN_BODY_COMMENTS = 3;\r\nconst MAIN_BODY_NOTES = 4;\r\nconst MAIN_BODY_INVESTORS_PLEDGED = 5; // only available for issuer and admin\r\n\r\nconst MAX_COVER_HEIGHT_IN_MOBILE_MODE = 240;\r\nconst MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE = 550;\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        AuthenticationState: state.AuthenticationState,\r\n\r\n        isMobile: state.MediaQueryState.isMobile,\r\n\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        userBeingLoaded: state.auth.userBeingLoaded,\r\n        groupsUserIsIn: state.auth.groupsUserIsIn,\r\n\r\n        projectVisibilitySetting: state.manageSelectProjectVisibility.projectVisibilitySetting\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n\r\n        pledgesTable_setProject: (project) => dispatch(pledgesTableActions.setProject(project)),\r\n        pledgesTable_stopListeningForPledgesChanged: () => dispatch(pledgesTableActions.stopListeningForPledgesChanged()),\r\n\r\n        createPledgeDialog_toggleDialog: () => dispatch(createPledgeDialogActions.toggleCreatePledgeDialog()),\r\n        createPledgeDialog_setProject: (project) => dispatch(createPledgeDialogActions.setProject(project)),\r\n\r\n        selectProjectVisibility_setProject: (project) => dispatch(selectProjectVisibilityActions.setProject(project)),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position)),\r\n\r\n        toggleContactPitchOwnerDialog: (projectName, projectOwnerEmail) => dispatch(toggleContactPitchOwnerDialog(projectName, projectOwnerEmail))\r\n    }\r\n};\r\n\r\nclass ProjectDetailsMain extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.database = firebase.database();\r\n\r\n        // project changed listener\r\n        this.projectListener = null;\r\n        // comments changed listener\r\n        this.commentsListener = null;\r\n        // comments replies changed listener\r\n        this.commentsRepliesListener = null;\r\n        // pledges changed listener\r\n        this.pledgesListener = null;\r\n        // votes changed listener\r\n        this.votesListener = null;\r\n\r\n        this.state = {\r\n            // variables to check if all the data has been loaded or being loaded\r\n            dataLoaded: false,\r\n            dataBeingLoaded: false,\r\n\r\n            investorPledge: null,\r\n            investorPledgeLoaded: false,\r\n\r\n            mainBody: MAIN_BODY_CAMPAIGN,\r\n            adminOfferStatesActiveStep: ADMIN_OFFER_STATES_PUBLISH_PITCH,\r\n\r\n            comments: [],\r\n            commentsLoaded: false,\r\n\r\n            // states for an investor to post a NEW comment\r\n            commentDialogOpen: false,\r\n            commentText: \"\",\r\n            commentSubmitClick: false,\r\n            // ---------------------------------\r\n\r\n            // existing comment of the current investor\r\n            currentComment: null,\r\n            currentCommentText: \"\",\r\n            // -------------------------------------------\r\n\r\n            // available for the issuer/group admins who own the project only\r\n            // allow the owners to reply to the investor's comments\r\n            replyingToComment: null,\r\n            replyText: \"\",\r\n            replyEdited: null,\r\n            // -------------------------------------------\r\n\r\n            // this state is used to capture the change in date when an admin wants to bring\r\n            // an expired project back to live\r\n            changedPitchExpiryDate: null,\r\n\r\n            // when an admin wants to send the project back to the issuer with some feedback rather than publish it\r\n            addingRejectFeedback: false,\r\n            rejectFeedback: \"\",\r\n            sendingProjectBack: false,\r\n\r\n            // project's details\r\n            projectDetail: {\r\n                // the project object\r\n                project: null,\r\n                projectLoaded: false,\r\n\r\n                pledges: [],\r\n                pledgesLoaded: false,\r\n\r\n                votes: [],\r\n                votesLoaded: false,\r\n\r\n                // the issuer object (the issuer who made this pitch)\r\n                projectIssuer: null,\r\n                projectIssuerLoaded: false\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n            loadAngelNetwork,\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty(\"groupUserName\")\r\n            ?\r\n            match.params.groupUserName\r\n            :\r\n            null\r\n        );\r\n        setExpectedAndCurrentPathsForChecking(\r\n            match.params.hasOwnProperty(\"groupUserName\")\r\n                ?\r\n                ROUTES.PROJECT_DETAILS\r\n                :\r\n                ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER, match.path\r\n        );\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n            }\r\n        }\r\n        console.log('Page loaded. Authentication status:', this.props.AuthenticationState.isAuthenticated ? 'Authenticated' : 'Not Authenticated');\r\n        console.log('Current user on page load:', this.props.AuthenticationState.currentUser);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            user,\r\n            userLoaded,\r\n            userBeingLoaded,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (!userBeingLoaded && userLoaded) {\r\n                if (!dataBeingLoaded && !dataLoaded) {\r\n                    // load data if not loaded\r\n                    this.loadData();\r\n                }\r\n\r\n            }\r\n\r\n            // attach project changed listener\r\n            if (projectLoaded && project) {\r\n                this.attachProjectChangedListener();\r\n            }\r\n\r\n            this.loadDataWhenUIElementsChange();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        const {\r\n            pledgesTable_stopListeningForPledgesChanged\r\n        } = this.props;\r\n\r\n        // detach project changed listener\r\n        this.detachProjectChangedListener();\r\n\r\n        // detach listener for votes\r\n        if (this.votesListener) {\r\n            this.votesListener.off(\"child_added\");\r\n            this.votesListener.off(\"child_changed\");\r\n            this.votesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for pledges\r\n        if (this.pledgesListener) {\r\n            this.pledgesListener.off(\"child_added\");\r\n            this.pledgesListener.off(\"child_changed\");\r\n            this.pledgesListener.off(\"child_removed\");\r\n        }\r\n\r\n        // detach listener for comments\r\n        if (this.commentsListener) {\r\n            this.commentsListener.off(\"child_added\");\r\n            this.commentsListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for comments replies\r\n        if (this.commentsRepliesListener) {\r\n            this.commentsRepliesListener.off(\"child_added\");\r\n            this.commentsRepliesListener.off(\"child_changed\");\r\n        }\r\n\r\n        // detach listener for pledges changed in pledges table\r\n        pledgesTable_stopListeningForPledgesChanged();\r\n    }\r\n\r\n    /**\r\n     * This function is used to load data for the whole page\r\n     */\r\n    loadData = () => {\r\n        const {\r\n            user,\r\n            userLoaded,\r\n\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            dataLoaded,\r\n            dataBeingLoaded\r\n        } = this.state;\r\n\r\n        if (!userLoaded) {\r\n            return;\r\n        }\r\n\r\n        if (!user) {\r\n            if (!dataLoaded) {\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n                return;\r\n            }\r\n        }\r\n\r\n        // data is being loaded\r\n        if (dataBeingLoaded) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            dataLoaded: false,\r\n            dataBeingLoaded: true\r\n        });\r\n\r\n        // load the requested project\r\n        const projectID = this.props.match.params.projectID;\r\n        realtimeDBUtils\r\n            .loadAParticularProject(projectID)\r\n            .then(project => {\r\n                // track activity for investors only\r\n                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_VIEW,\r\n                            interactedObjectLocation: DB_CONST.PROJECTS_CHILD,\r\n                            interactedObjectID: project.id,\r\n                            activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_VIEWED_PROJECT_DETAILS.replace(\"%project%\", project.projectName),\r\n                            action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                        });\r\n                }\r\n\r\n                // set project for the Select component that is used to choose the project visibility\r\n                selectProjectVisibility_setProject(project);\r\n\r\n                this.setState({\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        project: project,\r\n                        projectLoaded: true\r\n                    },\r\n                    mainBody:\r\n                        user.type === DB_CONST.TYPE_ADMIN\r\n                            ?\r\n                            user.anid === project.anid\r\n                                ?\r\n                                MAIN_BODY_ADMIN_OFFER_STATES\r\n                                :\r\n                                MAIN_BODY_CAMPAIGN\r\n                            :\r\n                            MAIN_BODY_CAMPAIGN\r\n                    ,\r\n                    adminOfferStatesActiveStep:\r\n                        project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                            ?\r\n                            ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                            :\r\n                            (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED)\r\n                                ?\r\n                                ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                :\r\n                                (project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE)\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                    :\r\n                                    ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                });\r\n\r\n                // load votes\r\n                realtimeDBUtils\r\n                    .loadVotes(project.id, null, realtimeDBUtils.LOAD_VOTES_ORDER_BY_PROJECT)\r\n                    .then(votes => {\r\n\r\n                        this.setState({\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                votes: votes,\r\n                                votesLoaded: true\r\n                            }\r\n                        });\r\n\r\n                        // load pledges\r\n                        realtimeDBUtils\r\n                            .loadPledges(project.id, null, realtimeDBUtils.LOAD_PLEDGES_ORDER_BY_PROJECT)\r\n                            .then(pledges => {\r\n\r\n                                // if the current user is an investor, check if they pledged this project\r\n                                if (user.type === DB_CONST.TYPE_INVESTOR) {\r\n                                    let currentUserPledgeIndex = pledges.findIndex(pledge => pledge.investorID === user.id && pledge.amount !== '');\r\n                                    // this investor has pledges this project before\r\n                                    if (currentUserPledgeIndex !== -1) {\r\n                                        this.setState({\r\n                                            investorPledge: pledges[currentUserPledgeIndex]\r\n                                        });\r\n                                    }\r\n                                }\r\n\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: pledges,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n\r\n                                // load the profile of the Issuer or the Group Admin created this project\r\n                                // this user can be the issuer who created the offer themselves\r\n                                // or the group admin who created this offer on behalf of an unknown issuer\r\n                                // or the issuer who got the group admin create this offer for\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(project.issuerID)\r\n                                    .then(projectIssuer => {\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectIssuer: projectIssuer,\r\n                                                projectIssuerLoaded: true\r\n                                            }\r\n                                        });\r\n                                    })\r\n                                    .catch(error => {\r\n                                        this.setState({\r\n                                            dataLoaded: true,\r\n                                            dataBeingLoaded: false,\r\n                                            investorPledgeLoaded: true,\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                projectLoaded: true, // project is null\r\n                                                projectIssuerLoaded: true, // project issuer is null\r\n                                                votesLoaded: true,\r\n                                                pledgesLoaded: true\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    dataLoaded: true,\r\n                                    dataBeingLoaded: false,\r\n                                    investorPledgeLoaded: true,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        projectLoaded: true, // project is null\r\n                                        projectIssuerLoaded: true, // project issuer is null\r\n                                        votesLoaded: true,\r\n                                        pledgesLoaded: true\r\n                                    }\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            dataLoaded: true,\r\n                            dataBeingLoaded: false,\r\n                            investorPledgeLoaded: true,\r\n                            projectDetail: {\r\n                                ...this.state.projectDetail,\r\n                                projectLoaded: true, // project is null\r\n                                projectIssuerLoaded: true, // project issuer is null\r\n                                votesLoaded: true,\r\n                                pledgesLoaded: true\r\n                            }\r\n                        });\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                // error happens when loading the requested project\r\n                // we'll stop the loading process for all others\r\n                this.setState({\r\n                    dataLoaded: true,\r\n                    dataBeingLoaded: false,\r\n                    investorPledgeLoaded: true,\r\n                    projectDetail: {\r\n                        ...this.state.projectDetail,\r\n                        projectLoaded: true, // project is null\r\n                        projectIssuerLoaded: true, // project issuer is null\r\n                        votesLoaded: true,\r\n                        pledgesLoaded: true\r\n                    }\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Load data when UI elements change\r\n     */\r\n    loadDataWhenUIElementsChange = () => {\r\n        const {\r\n            user,\r\n\r\n            pledgesTable_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            mainBody,\r\n            commentsLoaded\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        // attach votes changed listener\r\n        if (votes && votesLoaded && project && projectLoaded) {\r\n            // votes can only happen if the project is in Project phase\r\n            if (project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE) {\r\n                if (!this.votesListener) {\r\n                    this.votesListener = this.database\r\n                        .ref(DB_CONST.VOTES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // vote added\r\n                    this.votesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n                            if (voteIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(vote.investorID)\r\n                                    .then(investor => {\r\n                                        vote.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                votes: [...votes, vote]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // vote changed\r\n                    this.votesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let vote = snapshot.val();\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === vote.id);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n\r\n                                vote.investor = updatedVotes[voteIndex].investor;\r\n                                updatedVotes[voteIndex] = vote;\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // vote removed\r\n                    this.votesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let voteRemovedID = snapshot.key;\r\n\r\n                            const votes = this.state.projectDetail.votes;\r\n                            let voteIndex = votes.findIndex(existingVote => existingVote.id === voteRemovedID);\r\n\r\n                            if (voteIndex !== -1) {\r\n                                let updatedVotes = votes;\r\n                                updatedVotes.splice(voteIndex, 1);\r\n\r\n                                this.setState({\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        votes: updatedVotes\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // attach pledges changed listener\r\n        if (pledges && pledgesLoaded && projectLoaded && project) {\r\n            // pledges can only happen if the project is in Primary offer phase\r\n            if (project.status !== DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_FAILED\r\n                && project.status !== DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n            ) {\r\n                if (!this.pledgesListener) {\r\n                    this.pledgesListener = this.database\r\n                        .ref(DB_CONST.PLEDGES_CHILD)\r\n                        .orderByChild(\"projectID\")\r\n                        .equalTo(project.id);\r\n\r\n                    // new pledge added\r\n                    this.pledgesListener\r\n                        .on(\"child_added\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n                            if (pledgeIndex === -1) {\r\n                                realtimeDBUtils\r\n                                    .getUserBasedOnID(pledge.investorID)\r\n                                    .then(investor => {\r\n                                        pledge.investor = investor;\r\n                                        this.setState({\r\n                                            projectDetail: {\r\n                                                ...this.state.projectDetail,\r\n                                                pledges: [...pledges, pledge]\r\n                                            }\r\n                                        });\r\n                                    });\r\n                            }\r\n                        });\r\n\r\n                    // pledge changed\r\n                    this.pledgesListener\r\n                        .on(\"child_changed\", snapshot => {\r\n                            let pledge = snapshot.val();\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledge.id);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n\r\n                                pledge.investor = updatedPledges[pledgeIndex].investor;\r\n                                updatedPledges[pledgeIndex] = pledge;\r\n\r\n                                const currentPledge = JSON.parse(JSON.stringify(this.state.investorPledge));\r\n\r\n                                this.setState({\r\n                                    investorPledge:\r\n                                    // current pledge is not null\r\n                                        currentPledge !== null\r\n                                            ?\r\n                                            currentPledge.id === pledge.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                currentPledge\r\n                                            :\r\n                                            // current pledge is null\r\n                                            pledge.investorID === user.id\r\n                                                ?\r\n                                                pledge.amount === \"\"\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    JSON.parse(JSON.stringify(pledge))\r\n                                                :\r\n                                                null\r\n                                    ,\r\n                                    projectDetail: {\r\n                                        ...this.state.projectDetail,\r\n                                        pledges: updatedPledges\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n\r\n                    // pledge removed\r\n                    this.pledgesListener\r\n                        .on(\"child_removed\", snapshot => {\r\n                            let pledgeRemovedID = snapshot.key;\r\n\r\n                            let pledges = [...this.state.projectDetail.pledges];\r\n                            let pledgeIndex = pledges.findIndex(existingPledge => existingPledge.id === pledgeRemovedID);\r\n\r\n                            if (pledgeIndex !== -1) {\r\n                                let updatedPledges = pledges;\r\n                                updatedPledges.splice(pledgeIndex, 1);\r\n\r\n                                const currentPledge = this.state.investorPledge;\r\n                                if (!currentPledge && currentPledge.id === pledgeRemovedID) {\r\n                                    this.setState({\r\n                                        investorPledge: null,\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    this.setState({\r\n                                        projectDetail: {\r\n                                            ...this.state.projectDetail,\r\n                                            pledges: updatedPledges\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        });\r\n                }\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Pledges tab\r\n        if (mainBody === MAIN_BODY_INVESTORS_PLEDGED) {\r\n            if (project) {\r\n                pledgesTable_setProject(project);\r\n            }\r\n        }\r\n\r\n        // if the user clicks on the Comments tab\r\n        if (mainBody === MAIN_BODY_COMMENTS) {\r\n            // if comments have not been loaded yet\r\n            if (!commentsLoaded) {\r\n                // load comments\r\n                realtimeDBUtils\r\n                    .loadComments(project.id)\r\n                    .then(returnedComments => {\r\n\r\n                        realtimeDBUtils\r\n                            .loadCommentsReplies(returnedComments)\r\n                            .then(commentsWithReplies => {\r\n                                // comments loaded with replies\r\n                                this.setState({\r\n                                    comments: [...commentsWithReplies],\r\n                                    commentsLoaded: true\r\n                                });\r\n\r\n                                // attach comments listener\r\n                                if (!this.commentsListener) {\r\n                                    this.commentsListener = this.database\r\n                                        .ref(DB_CONST.COMMENTS_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    // new comment added\r\n                                    this.commentsListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n                                            comment.replies = [];\r\n\r\n                                            // assign comment to currentComment object if it belongs to the current investor\r\n                                            if (comment.commentedBy === user.id) {\r\n                                                const currentComment = this.state.currenComment;\r\n                                                if (!currentComment) {\r\n                                                    this.setState({\r\n                                                        currentComment: comment,\r\n                                                        currentCommentText: comment.comment\r\n                                                    });\r\n                                                }\r\n                                            }\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex === -1) {\r\n                                                realtimeDBUtils\r\n                                                    .getUserBasedOnID(comment.commentedBy)\r\n                                                    .then(user => {\r\n                                                        comment.author = user;\r\n                                                        this.setState({\r\n                                                            comments: [...comments, comment]\r\n                                                        });\r\n                                                    });\r\n                                            }\r\n                                        });\r\n\r\n                                    // comment changed\r\n                                    this.commentsListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let comment = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n                                            let commentIndex = comments.findIndex(existingComment => existingComment.id === comment.id);\r\n\r\n                                            if (commentIndex !== -1) {\r\n                                                let updatedComments = [...comments];\r\n                                                comment.author = updatedComments[commentIndex].author;\r\n                                                comment.replies = updatedComments[commentIndex].replies;\r\n\r\n                                                updatedComments[commentIndex] = comment;\r\n\r\n                                                // NOTE: Must explicitly call state here to avoid null from previous state\r\n                                                const currentComment = this.state.currentComment;\r\n\r\n                                                if (currentComment && currentComment.id === comment.id) {\r\n                                                    this.setState({\r\n                                                        comments: updatedComments,\r\n                                                        currentComment: comment\r\n                                                    });\r\n                                                } else {\r\n                                                    this.setState({\r\n                                                        comments: [...updatedComments]\r\n                                                    });\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n\r\n                                // attach comments replies listener\r\n                                if (!this.commentsRepliesListener) {\r\n                                    this.commentsRepliesListener = this.database\r\n                                        .ref(DB_CONST.COMMENT_REPLIES_CHILD)\r\n                                        .orderByChild(\"projectID\")\r\n                                        .equalTo(project.id);\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_added\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex === -1) {\r\n                                                    if (reply.hasOwnProperty('deleted') && reply.deleted === true) {\r\n                                                        return;\r\n                                                    }\r\n                                                    realtimeDBUtils\r\n                                                        .getUserBasedOnID(reply.repliedBy)\r\n                                                        .then(user => {\r\n                                                            reply.author = user;\r\n                                                            comment.replies = [...comment.replies, reply];\r\n\r\n                                                            comments[correspondingCommentIndex] = comment;\r\n\r\n                                                            this.setState({\r\n                                                                comments: [...comments]\r\n                                                            });\r\n                                                        });\r\n                                                }\r\n                                            }\r\n                                        });\r\n\r\n                                    this.commentsRepliesListener\r\n                                        .on(\"child_changed\", snapshot => {\r\n                                            let reply = snapshot.val();\r\n\r\n                                            let comments = [...this.state.comments];\r\n\r\n                                            const correspondingCommentIndex = comments.findIndex(comment => comment.id === reply.commentID);\r\n\r\n                                            // ensure the comment exists locally\r\n                                            if (correspondingCommentIndex !== -1) {\r\n                                                let comment = comments[correspondingCommentIndex];\r\n                                                const replyIndex = comment.replies.findIndex(existingReply => existingReply.id === reply.id);\r\n\r\n                                                // the newly added reply does not exist in the local replies list of this comment\r\n                                                if (replyIndex !== -1) {\r\n                                                    // reply has been deleted\r\n                                                    if (reply.hasOwnProperty(\"deleted\") && reply.deleted === true) {\r\n                                                        // remove reply from the local replies list\r\n                                                        comment.replies.splice(replyIndex, 1);\r\n\r\n                                                        comments[correspondingCommentIndex] = comment;\r\n\r\n                                                        this.setState({\r\n                                                            comments: [...comments]\r\n                                                        });\r\n                                                    }\r\n                                                    // reply is live\r\n                                                    else {\r\n                                                        realtimeDBUtils\r\n                                                            .getUserBasedOnID(reply.repliedBy)\r\n                                                            .then(user => {\r\n                                                                reply.author = comment.replies[replyIndex].author;\r\n                                                                comment.replies[replyIndex] = reply;\r\n\r\n                                                                comments[correspondingCommentIndex] = comment;\r\n\r\n                                                                this.setState({\r\n                                                                    comments: [...comments]\r\n                                                                });\r\n                                                            });\r\n                                                    }\r\n                                                }\r\n                                            }\r\n                                        });\r\n                                }\r\n                            })\r\n                            .catch(error => {\r\n                                this.setState({\r\n                                    commentsLoaded: true\r\n                                });\r\n                            });\r\n                    })\r\n                    .catch(error => {\r\n                        this.setState({\r\n                            commentsLoaded: true\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Vot for project function\r\n     *\r\n     * @param voteVal\r\n     */\r\n    handleVotePitch = voteVal => {\r\n        const {\r\n            groupProperties,\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            project,\r\n            votes\r\n        } = this.state.projectDetail;\r\n\r\n        let currentVoteObj = getInvestorVote(votes, user);\r\n        if (currentVoteObj) {\r\n            currentVoteObj.investor = null;\r\n        }\r\n\r\n        let newVoteObj = {};\r\n\r\n        // investor has already voted before or voted and cancelled\r\n        // when an investor cancelled their vote, the vote value will be ''\r\n        if (currentVoteObj) {\r\n\r\n            newVoteObj = JSON.parse(JSON.stringify(currentVoteObj));\r\n\r\n            // the investor cancelled their vote\r\n            if (newVoteObj.voted === '') {\r\n                newVoteObj.voted = voteVal;\r\n            }\r\n            // the investor now clicks to cancel their vote\r\n            else {\r\n                newVoteObj.voted = ''; // update vote to void\r\n            }\r\n\r\n            // update the existing vote\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(newVoteObj.id)\r\n                .update(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: newVoteObj.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: currentVoteObj,\r\n                                after: newVoteObj\r\n                            }\r\n                        });\r\n                });\r\n        }\r\n        // investor has not voted before\r\n        else {\r\n            const id = this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .push()\r\n                .key;\r\n\r\n            newVoteObj.id = id;\r\n            newVoteObj.anid = groupProperties ? groupProperties.anid : null;\r\n            newVoteObj.investorID = user.id;\r\n            newVoteObj.projectID = project.id;\r\n            newVoteObj.voted = voteVal;\r\n            newVoteObj.date = utils.getCurrentDate();\r\n\r\n            this.database\r\n                .ref(DB_CONST.VOTES_CHILD)\r\n                .child(id)\r\n                .set(newVoteObj)\r\n                .then(() => {\r\n                    // record the investor's activity for first time voting\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.VOTES_CHILD,\r\n                            interactedObjectID: id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_MADE_A_VOTE_FOR_PROJECT\r\n                                .replace(\"%project%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: newVoteObj\r\n                        });\r\n\r\n                    // send a notification to notify the issuer\r\n                    realtimeDBUtils\r\n                        .sendNotification({\r\n                            title: \"Someone liked your project\",\r\n                            message: \"Congratulations. A new investor has showed interest in your project.\",\r\n                            userID: project.issuerID,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                        })\r\n                        .then(() => {\r\n                            // do something\r\n                        })\r\n                        .catch(error => {\r\n                            // handle error\r\n                        });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Attach listener for any changes that happen on this project\r\n     * Attach listener for any changes that happen on this project\r\n     */\r\n    attachProjectChangedListener = () => {\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (this.projectListener === null) {\r\n            this.projectListener = this.database\r\n                .ref(DB_CONST.PROJECTS_CHILD)\r\n                .child(project.id);\r\n\r\n            this.projectListener\r\n                .on(\"value\", snapshot => {\r\n                    const project = snapshot.val();\r\n                    project.group = this.state.projectDetail.project.group;\r\n                    project.issuer = this.state.projectDetail.project.issuer;\r\n\r\n                    this.setState({\r\n                        projectDetail: {\r\n                            ...this.state.projectDetail,\r\n                            project: project,\r\n                        },\r\n                        adminOfferStatesActiveStep:\r\n                            project.status === DB_CONST.PROJECT_STATUS_BEING_CHECKED\r\n                                ?\r\n                                ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                                :\r\n                                project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE\r\n                                || project.status === DB_CONST.PROJECT_STATUS_PITCH_PHASE_EXPIRED_WAITING_TO_BE_CHECKED\r\n                                    ?\r\n                                    ADMIN_OFFER_STATES_MOVE_TO_PLEDGE\r\n                                    :\r\n                                    project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED\r\n                                    || project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_PHASE\r\n                                        ?\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PLEDGE\r\n                                        :\r\n                                        ADMIN_OFFER_STATES_PUBLISH_PITCH\r\n                    });\r\n                });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Detach changes listener for this project\r\n     */\r\n    detachProjectChangedListener = () => {\r\n        if (this.projectListener) {\r\n            this.projectListener.off(\"value\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked (download it)\r\n     *\r\n     * @param downloadURL\r\n     */\r\n    handleDocumentClick = downloadURL => {\r\n        window.open(downloadURL, \"_blank\");\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go live or not\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectGoToPledgePhaseDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING\r\n            && project.Pitch.status !== DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        realtimeDBUtils\r\n            .makeProjectGoToPledgePhaseDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Super user decides whether the project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    handleMakeProjectPledgeGoLiveDecision = decision => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .makeProjectPledgeGoLiveDecision(user, JSON.parse(JSON.stringify(project)), decision)\r\n            .then(() => {\r\n                // success\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the main body tab changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    handleMainBodyTabChanged = (event, value) => {\r\n        this.setState({\r\n            mainBody: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post a comment button clicked (open a dialog for the Investors to write their comment)\r\n     */\r\n    handlePostACommentClick = () => {\r\n        this.setState({\r\n            commentDialogOpen: true\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the comment dialog is closed\r\n     */\r\n    handleCloseCommentDialog = () => {\r\n        this.setState({\r\n            commentDialogOpen: false,\r\n            commentText: '',\r\n            commentSubmitClick: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    handleTextChanged = event => {\r\n        const name = event.target.name;\r\n        const value = event.target.value;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    handleDateChanged = date => {\r\n        if (date && date === \"Invalid Date\") {\r\n            this.setState({\r\n                changedPitchExpiryDate: NaN\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            changedPitchExpiryDate:\r\n                !date\r\n                    ?\r\n                    null\r\n                    :\r\n                    date.getTime()\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle when the Investor clicks to submit their comment\r\n     */\r\n    handleSubmitCommentClick = () => {\r\n        const {\r\n            groupProperties,\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            commentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        this.setState({\r\n            commentSubmitClick: true\r\n        });\r\n\r\n        if (commentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        const id = this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .push()\r\n            .key;\r\n\r\n        const comment = {\r\n            id,\r\n            commenterANID: groupProperties ? groupProperties.anid : null,\r\n            projectID: project.id,\r\n            commentedBy: user.id,\r\n            status: DB_CONST.COMMENT_STATUS_POSTED,\r\n            commentedDate: utils.getCurrentDate(),\r\n            comment: commentText\r\n        };\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(id)\r\n            .set(comment)\r\n            .then(() => {\r\n                // track investor's activity for posting a new comment\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_COMMENTED_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: comment\r\n                    });\r\n\r\n                // send a notification to notify the issuer\r\n                realtimeDBUtils\r\n                    .sendNotification({\r\n                        title: \"Someone commented on your project\",\r\n                        message: \"An investor has commented on your project. Go and see what they said.\",\r\n                        userID: project.issuerID,\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id)\r\n                    })\r\n                    .then(() => {\r\n                        this.handleCloseCommentDialog();\r\n                    })\r\n                    .catch(error => {\r\n                        this.handleCloseCommentDialog();\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment added.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                this.handleCloseCommentDialog();\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not add comment.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) cancels the update for their comment\r\n     */\r\n    handleCancelUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment\r\n        } = this.state;\r\n\r\n        this.setState({\r\n            currentCommentText: !currentComment.comment ? '' : currentComment.comment\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle when the user (investor) submits the update for their comment\r\n     */\r\n    handleSubmitUpdateCurrentComment = () => {\r\n        const {\r\n            currentComment,\r\n            currentCommentText\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (currentCommentText.trim().length === 0) {\r\n            return;\r\n        }\r\n\r\n        let newComment = JSON.parse(JSON.stringify(currentComment));\r\n        newComment.status = DB_CONST.COMMENT_STATUS_EDITED;\r\n        newComment.comment = currentCommentText;\r\n        newComment.commentedDate = utils.getCurrentDate();\r\n        newComment.replies = null;\r\n        newComment.author = null;\r\n\r\n        this.database\r\n            .ref(DB_CONST.COMMENTS_CHILD)\r\n            .child(newComment.id)\r\n            .update(newComment)\r\n            .then(() => {\r\n                // track investor's activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: currentComment.commentedBy,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENTS_CHILD,\r\n                        interactedObjectID: currentComment.id,\r\n                        activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_EDITED_COMMENT_IN_PROJECT.replace(\"%project%\", project.projectName),\r\n                        action: ROUTES.PROJECT_DETAILS_INVEST_WEST_SUPER.replace(\":projectID\", project.id),\r\n                        value: {\r\n                            before: JSON.parse(JSON.stringify(currentComment)),\r\n                            after: newComment\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Comment updated.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle the input area to allow the project's owners to reply to investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    handleToggleReplyToComment = (comment, replyEdited) => {\r\n        this.setState({\r\n            replyingToComment: comment,\r\n            replyText: replyEdited ? replyEdited.text : '',\r\n            replyEdited\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    handleSubmitCommentReply = () => {\r\n        const {\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited\r\n        } = this.state;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (!replyEdited) {\r\n            const commentReply = {\r\n                text: replyText,\r\n                repliedDate: utils.getCurrentDate(),\r\n                projectID: project.id,\r\n                commentID: replyingToComment.id,\r\n                repliedBy: user.id,\r\n                status: DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n            };\r\n\r\n            realtimeDBUtils\r\n                .postCommentReply(commentReply)\r\n                .then(replyID => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyID,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_REPLIED_TO_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                ...commentReply,\r\n                                id: replyID\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply added.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not add reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        } else {\r\n            let replyBeforeUpdating = JSON.parse(JSON.stringify(replyEdited));\r\n            replyBeforeUpdating.author = null\r\n\r\n            let replyAfterUpdating = JSON.parse(JSON.stringify(replyBeforeUpdating));\r\n            replyAfterUpdating.text = replyText;\r\n            replyAfterUpdating.status = DB_CONST.COMMENT_REPLY_STATUS_EDITED;\r\n            replyAfterUpdating.repliedDate = utils.getCurrentDate();\r\n\r\n            realtimeDBUtils\r\n                .updateCommentReply(replyAfterUpdating)\r\n                .then(() => {\r\n                    // track activity\r\n                    realtimeDBUtils\r\n                        .trackActivity({\r\n                            userID: user.id,\r\n                            activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                            interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                            interactedObjectID: replyAfterUpdating.id,\r\n                            activitySummary: realtimeDBUtils\r\n                                .ACTIVITY_SUMMARY_TEMPLATE_EDITED_A_REPLY_OF_A_COMMENT\r\n                                .replace(\"%projectName%\", project.projectName)\r\n                            ,\r\n                            action: ROUTES\r\n                                .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                                .replace(\":projectID\", project.id)\r\n                            ,\r\n                            value: {\r\n                                before: replyBeforeUpdating,\r\n                                after: replyAfterUpdating\r\n                            }\r\n                        });\r\n\r\n                    // turn off input area\r\n                    this.handleToggleReplyToComment(null, null);\r\n\r\n                    setFeedbackSnackbarContent(\r\n                        \"Reply updated.\",\r\n                        \"primary\",\r\n                        \"bottom\"\r\n                    );\r\n                })\r\n                .catch(error => {\r\n                    // handle error\r\n                    setFeedbackSnackbarContent(\r\n                        \"Error happened. Could not update reply.\",\r\n                        \"error\",\r\n                        \"bottom\"\r\n                    );\r\n                });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    handleDeleteCommentReply = reply => {\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        realtimeDBUtils\r\n            .deleteCommentReply(reply.id)\r\n            .then(() => {\r\n                // track activity\r\n                realtimeDBUtils\r\n                    .trackActivity({\r\n                        userID: user.id,\r\n                        activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                        interactedObjectLocation: DB_CONST.COMMENT_REPLIES_CHILD,\r\n                        interactedObjectID: reply.id,\r\n                        activitySummary: realtimeDBUtils\r\n                            .ACTIVITY_SUMMARY_TEMPLATE_DELETED_A_REPLY_OF_A_COMMENT\r\n                            .replace(\"%projectName%\", project.projectName)\r\n                        ,\r\n                        action: ROUTES\r\n                            .PROJECT_DETAILS_INVEST_WEST_SUPER\r\n                            .replace(\":projectID\", project.id)\r\n                        ,\r\n                        value: {\r\n                            before: {\r\n                                ...reply,\r\n                                author: null\r\n                            },\r\n                            after: {\r\n                                ...reply,\r\n                                author: null,\r\n                                deleted: true\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Reply deleted.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n            })\r\n            .catch(error => {\r\n                // handle error\r\n                setFeedbackSnackbarContent(\r\n                    \"Error happened. Could not delete reply.\",\r\n                    \"error\",\r\n                    \"bottom\"\r\n                );\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Offer states click to change active step\r\n     *\r\n     * @param step\r\n     */\r\n    handleAdminOfferStatesStepClick = step => {\r\n        this.setState({\r\n            adminOfferStatesActiveStep: step\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Bring project back to live again\r\n     *\r\n     * @returns {Promise<void>}\r\n     */\r\n    bringPitchBackToLive = async () => {\r\n        const {\r\n            project\r\n        } = this.state.projectDetail;\r\n\r\n        const {\r\n            changedPitchExpiryDate\r\n        } = this.state;\r\n\r\n        const {\r\n            user,\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await realtimeDBUtils\r\n                .bringPitchBackToLive({\r\n                    project: JSON.parse(JSON.stringify(project)),\r\n                    newPitchExpiryDate: changedPitchExpiryDate\r\n                });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Project is now live again.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            // handle error\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't update project.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.setState({\r\n            addingRejectFeedback: !this.state.addingRejectFeedback,\r\n            rejectFeedback: \"\"\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = async () => {\r\n        const {\r\n            projectDetail,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        if (rejectFeedback.trim().length === 0 || sendingProjectBack) {\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sendingProjectBack: true\r\n        });\r\n\r\n        try {\r\n            // send project back to the issuer\r\n            await new Api().request(\r\n                \"post\",\r\n                ApiRoutes.sendProjectBackToIssuerRoute,\r\n                {\r\n                    queryParameters: null,\r\n                    requestBody: {\r\n                        projectID: projectDetail.project.id,\r\n                        feedback: rejectFeedback\r\n                    }\r\n                }\r\n            );\r\n\r\n            this.setState({\r\n                sendingProjectBack: false\r\n            });\r\n\r\n            setFeedbackSnackbarContent(\r\n                \"Project has been sent back.\",\r\n                \"primary\",\r\n                \"bottom\"\r\n            );\r\n        } catch (error) {\r\n            setFeedbackSnackbarContent(\r\n                \"Error happened. Couldn't send offer back.\",\r\n                \"error\",\r\n                \"bottom\"\r\n            );\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            isMobile,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded,\r\n            groupsUserIsIn,\r\n\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n\r\n            projectVisibilitySetting,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        const {\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            commentDialogOpen,\r\n            commentText,\r\n            commentSubmitClick,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack\r\n        } = this.state;\r\n\r\n        const {\r\n            project,\r\n            projectLoaded,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votes,\r\n            votesLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded\r\n        } = this.state.projectDetail;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || isAuthenticating(AuthenticationState)) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS || !user || hasAuthenticationError(AuthenticationState)) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <ProjectDetails\r\n                    AuthenticationState={this.props.AuthenticationState}\r\n                    groupUserName={groupUserName}\r\n                    groupProperties={groupProperties}\r\n                    isMobile={isMobile}\r\n                    user={user}\r\n                    userLoaded={userLoaded}\r\n                    groupsUserIsIn={groupsUserIsIn}\r\n                    mainBody={mainBody}\r\n                    adminOfferStatesActiveStep={adminOfferStatesActiveStep}\r\n                    comments={comments}\r\n                    commentsLoaded={commentsLoaded}\r\n                    currentComment={currentComment}\r\n                    currentCommentText={currentCommentText}\r\n                    replyingToComment={replyingToComment}\r\n                    replyText={replyText}\r\n                    replyEdited={replyEdited}\r\n                    changedPitchExpiryDate={changedPitchExpiryDate}\r\n                    addingRejectFeedback={addingRejectFeedback}\r\n                    rejectFeedback={rejectFeedback}\r\n                    sendingProjectBack={sendingProjectBack}\r\n                    project={project}\r\n                    projectLoaded={projectLoaded}\r\n                    votes={votes}\r\n                    votesLoaded={votesLoaded}\r\n                    pledges={pledges}\r\n                    pledgesLoaded={pledgesLoaded}\r\n                    investorPledge={investorPledge}\r\n                    investorPledgeLoaded={investorPledgeLoaded}\r\n                    projectIssuer={projectIssuer}\r\n                    projectIssuerLoaded={projectIssuerLoaded}\r\n                    projectVisibilitySetting={projectVisibilitySetting}\r\n                    onVote={this.handleVotePitch}\r\n                    onDocumentClick={this.handleDocumentClick}\r\n                    // only available for admins ----------------------------\r\n                    onMakeProjectGoLiveDecision={this.handleMakeProjectGoLiveDecision}\r\n                    onMakeProjectGoToPledgePhaseDecision={this.handleMakeProjectGoToPledgePhaseDecision}\r\n                    onMakeProjectPledgeGoLiveDecision={this.handleMakeProjectPledgeGoLiveDecision}\r\n                    //-------------------------------------------------------\r\n                    onTabChanged={this.handleMainBodyTabChanged}\r\n                    onPostACommentClick={this.handlePostACommentClick}\r\n                    onTextChanged={this.handleTextChanged}\r\n                    onDateChanged={this.handleDateChanged}\r\n                    onCancelUpdateCurrentComment={this.handleCancelUpdateCurrentComment}\r\n                    onSubmitUpdateCurrentComment={this.handleSubmitUpdateCurrentComment}\r\n                    onToggleReplyToComment={this.handleToggleReplyToComment}\r\n                    onSubmitCommentReply={this.handleSubmitCommentReply}\r\n                    onDeleteCommentReply={this.handleDeleteCommentReply}\r\n                    onAdminOfferStatesStepClick={this.handleAdminOfferStatesStepClick}\r\n                    createPledgeDialog_toggleDialog={createPledgeDialog_toggleDialog}\r\n                    createPledgeDialog_setProject={createPledgeDialog_setProject}\r\n                    selectProjectVisibility_setProject={selectProjectVisibility_setProject}\r\n                    bringPitchBackToLive={this.bringPitchBackToLive}\r\n                    toggleRejectFeedback={this.toggleRejectFeedback}\r\n                    sendProjectBackToIssuer={this.sendProjectBackToIssuer}\r\n                    toggleContactPitchOwnerDialog={() => this.props.toggleContactPitchOwnerDialog(project.projectName, projectIssuer.email)}\r\n                />\r\n\r\n                <CommentDialog\r\n                    open={commentDialogOpen}\r\n                    project={project}\r\n                    commentText={commentText}\r\n                    commentSubmitClick={commentSubmitClick}\r\n                    onClose={this.handleCloseCommentDialog}\r\n                    onCommentTextChanged={this.handleTextChanged}\r\n                    onSubmitCommentClick={this.handleSubmitCommentClick}\r\n                />\r\n\r\n                <CreatePledgeDialog/>\r\n\r\n                <ContactPitchOwnerDialog/>\r\n\r\n                <FeedbackSnackbarNew/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ProjectDetails extends Component {\r\n\r\n    /**\r\n     * Handle when the navigation tab is changed\r\n     *\r\n     * @param event\r\n     * @param value\r\n     */\r\n    onTabChanged = (event, value) => {\r\n        this.props.onTabChanged(event, value);\r\n    };\r\n\r\n    /**\r\n     * Handle when text input changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    };\r\n\r\n    /**\r\n     * Handle date changed\r\n     *\r\n     * @param date\r\n     */\r\n    onDateChanged = date => {\r\n        this.props.onDateChanged(date);\r\n    }\r\n\r\n    /**\r\n     * Handle when the vote button is clicked.\r\n     *\r\n     * @param vote\r\n     */\r\n    onVote = vote => {\r\n        this.props.onVote(vote);\r\n    };\r\n\r\n    /**\r\n     * Handle when a document is clicked\r\n     */\r\n    onDocumentClick = downloadURL => {\r\n        this.props.onDocumentClick(downloadURL);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go live (Admin only)\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoLiveDecision = decision => {\r\n        this.props.onMakeProjectGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Make a decision whether a project can go to the Pledge phase\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectGoToPledgePhaseDecision = decision => {\r\n        this.props.onMakeProjectGoToPledgePhaseDecision(decision);\r\n    };\r\n    /**\r\n     * Make a decision whether a project's Pledge can go live\r\n     *\r\n     * @param decision\r\n     */\r\n    onMakeProjectPledgeGoLiveDecision = decision => {\r\n        this.props.onMakeProjectPledgeGoLiveDecision(decision);\r\n    };\r\n\r\n    /**\r\n     * Handle when the Post comment button is clicked --> Open comment dialog\r\n     */\r\n    onPostACommentClick = () => {\r\n        this.props.onPostACommentClick();\r\n    };\r\n\r\n    /**\r\n     * Handle to cancel updating current comment\r\n     */\r\n    onCancelUpdateCurrentComment = () => {\r\n        this.props.onCancelUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to submit the updated comment\r\n     */\r\n    onSubmitUpdateCurrentComment = () => {\r\n        this.props.onSubmitUpdateCurrentComment();\r\n    };\r\n\r\n    /**\r\n     * Handle to toggle input area to allow the project's owners to reply to the investor's comments\r\n     *\r\n     * @param comment\r\n     * @param replyEdited\r\n     */\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    /**\r\n     * Handle to submit comment reply\r\n     */\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    /**\r\n     * Handle to delete a reply of a comment\r\n     *\r\n     * @param reply\r\n     */\r\n    onDeleteCommentReply = reply => {\r\n        this.props.onDeleteCommentReply(reply);\r\n    }\r\n\r\n    /**\r\n     * Handle when the offer state is changed\r\n     *\r\n     * @param step\r\n     */\r\n    onAdminOfferStatesStepClick = step => {\r\n        this.props.onAdminOfferStatesStepClick(step);\r\n    };\r\n\r\n    /**\r\n     * Bring project back to live\r\n     */\r\n    bringPitchBackToLive = () => {\r\n        this.props.bringPitchBackToLive();\r\n    }\r\n\r\n    /**\r\n     * Toggle reject feedback\r\n     */\r\n    toggleRejectFeedback = () => {\r\n        this.props.toggleRejectFeedback();\r\n    }\r\n\r\n    /**\r\n     * Send project back to issuer\r\n     */\r\n    sendProjectBackToIssuer = () => {\r\n        this.props.sendProjectBackToIssuer();\r\n    }\r\n\r\n    /**\r\n     * Toggle contact project owner dialog\r\n     */\r\n    toggleContactPitchOwnerDialog = () => {\r\n        this.props.toggleContactPitchOwnerDialog();\r\n    }\r\n\r\n    /**\r\n     * Render the page content\r\n     */\r\n    renderPageContent = () => {\r\n        const {\r\n            AuthenticationState,\r\n\r\n            groupsUserIsIn,\r\n\r\n            groupUserName,\r\n            groupProperties,\r\n\r\n            isMobile,\r\n\r\n            user,\r\n\r\n            mainBody,\r\n            adminOfferStatesActiveStep,\r\n\r\n            comments,\r\n            commentsLoaded,\r\n\r\n            project,\r\n\r\n            pledges,\r\n            pledgesLoaded,\r\n\r\n            votesLoaded,\r\n\r\n            investorPledge,\r\n            investorPledgeLoaded,\r\n\r\n            projectIssuer,\r\n            projectIssuerLoaded,\r\n\r\n            currentComment,\r\n            currentCommentText,\r\n\r\n            replyingToComment,\r\n            replyText,\r\n            replyEdited,\r\n\r\n            changedPitchExpiryDate,\r\n\r\n            addingRejectFeedback,\r\n            rejectFeedback,\r\n            sendingProjectBack,\r\n\r\n            projectVisibilitySetting,\r\n\r\n            createPledgeDialog_toggleDialog,\r\n            createPledgeDialog_setProject,\r\n            selectProjectVisibility_setProject\r\n        } = this.props;\r\n\r\n        // if the data is being loaded\r\n        // display loading\r\n        if (!pledgesLoaded\r\n            || !votesLoaded\r\n            || !investorPledgeLoaded\r\n            || !projectIssuerLoaded\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <FlexView width=\"100%\" marginTop={20} hAlignContent=\"center\">\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // return Page Not Found for security reason\r\n        if (!project\r\n            || !pledges\r\n            || !projectIssuer\r\n            // the project is private\r\n            // the user is an investor/issuer that is not in the group that owns this project\r\n            || (\r\n                project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n                && (user.type === DB_CONST.TYPE_INVESTOR || user.type === DB_CONST.TYPE_ISSUER)\r\n                && (groupsUserIsIn !== null && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters>\r\n                    <Col xs={12} md={12} lg={12}>\r\n                        <PageNotFound/>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is temporarily closed\r\n        // only display its content to the super admins,\r\n        // group admins that own this project, and the issuer of this project\r\n        if (utils.isProjectTemporarilyClosed(project)\r\n            && (\r\n                (user.type === DB_CONST.TYPE_ISSUER && user.id !== project.issuerID)\r\n                || (user.type === DB_CONST.TYPE_INVESTOR)\r\n                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin && user.anid !== project.anid)\r\n            )\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\">This offer has been closed temporarily.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        // the project is private\r\n        // the user is a group admin that does not own this project\r\n        if (project.visibility === DB_CONST.PROJECT_VISIBILITY_PRIVATE\r\n            && (user.type === DB_CONST.TYPE_ADMIN)\r\n            && !user.superAdmin\r\n            && user.anid !== project.anid\r\n        ) {\r\n            return (\r\n                <Row noGutters style={{marginLeft: 10, marginRight: 10}}>\r\n                    <Col xs={12} md={{span: 10, offset: 1}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView marginTop={40} hAlignContent=\"center\">\r\n                            <Typography variant=\"h5\" align=\"center\"> You can only edit offers from your group.</Typography>\r\n                        </FlexView>\r\n                    </Col>\r\n                </Row>\r\n            );\r\n        }\r\n\r\n        let sortedComments = comments;\r\n        // if the list of comments is not null\r\n        if (sortedComments) {\r\n            // sort by oldest day first\r\n            sortedComments.sort((comment1, comment2) => {\r\n                return (comment1.commentedDate - comment2.commentedDate);\r\n            });\r\n\r\n            let currentCommentIndex = sortedComments.findIndex(comment => comment.commentedBy === user.id);\r\n            if (currentCommentIndex !== -1) {\r\n                const currentComment = comments[currentCommentIndex];\r\n                sortedComments.splice(currentCommentIndex, 1);\r\n                sortedComments.push(currentComment);\r\n            }\r\n\r\n            sortedComments.reverse();\r\n        }\r\n\r\n        // sort replies in each comment\r\n        sortedComments.forEach(comment => {\r\n            comment.replies.sort((reply1, reply2) => {\r\n                return reply2.repliedDate - reply1.repliedDate;\r\n            });\r\n        });\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingTop: 0, paddingBottom: 100}}>\r\n                <Row noGutters style={{paddingTop: 25, paddingBottom: 25, backgroundColor: colors.kick_starter_background_color}}>\r\n                    {/** Banner to announce if a project is temporarily closed */}\r\n                    {\r\n                        !utils.isProjectTemporarilyClosed(project)\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 0}} sm={{span: 12, offset: 0, order: 0}} md={{span: 12, offset: 0, order: 0}} lg={{span: 12, offset: 0, order: 0}}>\r\n                                <FlexView marginBottom={20} hAlignContent=\"center\" style={{backgroundColor: colors.errorColor, padding: 15}} >\r\n                                    <Typography variant=\"body2\" align=\"center\" className={css(sharedStyles.white_text)}><b>This offer has been temporarily closed.</b></Typography>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Pledge (displayed if the user is an investor and has pledged this project before) */}\r\n                    {\r\n                        !investorPledge\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={{span: 12, offset: 0, order: 2}} sm={{span: 12, offset: 0, order: 2}} md={{span: 10, offset: 1, order: 2}} lg={{span: 10, offset: 1, order: 1}}>\r\n                                <Paper elevation={3} style={{margin: 12}} square>\r\n                                    <Row noGutters style={{padding: 6}}>\r\n                                        <Col xs={12} sm={12} md={{span: 5, order: 1}} lg={{span: 3, order: 1}}>\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\" height=\"100%\" width=\"100%\" style={{padding: 10}}>\r\n                                                <CheckCircleIcon color=\"primary\" style={{marginRight: 15}}/>\r\n                                                <Typography align=\"left\" variant=\"body1\">\r\n                                                    {\r\n                                                        investorPledge.status === DB_CONST.MAKE_A_NEW_PLEDGE\r\n                                                            ?\r\n                                                            `You pledged ${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                            :\r\n                                                            `You updated your pledge to ${Number(investorPledge.amount.toFixed(2)).toLocaleString()}.`\r\n                                                    }\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        <Col xs={12} sm={12} md={{span: 5, offset: 2, order: 2}} lg={{span: 3, offset: 6, order: 2}}>\r\n                                            <FlexView width=\"100%\" hAlignContent=\"center\" style={{padding: 10}}>\r\n                                                {\r\n                                                    !utils.isProjectInLivePledgePhase(project)\r\n                                                        ?\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"secondary\">Offer has ended. You can't change your pledge anymore.</Typography>\r\n                                                        :\r\n                                                        <NavLink\r\n                                                            to={{\r\n                                                                pathname: groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.PLEDGE.replace(\":groupUserName\", groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.PLEDGE_INVEST_WEST_SUPER\r\n                                                                ,\r\n                                                                search: `?project=${project.id}`\r\n                                                            }}\r\n                                                            className={css(sharedStyles.nav_link_hover)}\r\n                                                        >\r\n                                                            <Button className={css(sharedStyles.no_text_transform)} variant=\"outlined\" color=\"primary\">Manage your pledge</Button>\r\n                                                        </NavLink>\r\n                                                }\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Paper>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Project title and description */}\r\n                    <Col xs={{span: 12, offset: 0, order: 3}} sm={{span: 12, offset: 0, order: 3}} md={{span: 10, offset: 1, order: 3}} lg={{span: 8, offset: 2, order: 2}} style={{paddingLeft: 20, paddingRight: 20, paddingTop: 20, paddingBottom: 40}}>\r\n                        <FlexView column width=\"100%\" hAlignContent=\"center\">\r\n                            <Typography align=\"center\" variant=\"h5\" style={{marginBottom: 12}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        \"This is an offer\"\r\n                                        :\r\n                                        project.projectName\r\n                                }\r\n                            </Typography>\r\n                            <Typography className={css(styles.gray_text)} align=\"center\" variant=\"body1\" style={{whiteSpace: \"pre-line\"}}>\r\n                                {\r\n                                    this.shouldHideInformation()\r\n                                        ?\r\n                                        `in ${project.sector} sector`\r\n                                        :\r\n                                        project.description\r\n                                }\r\n                            </Typography>\r\n                            {\r\n                                user.type === DB_CONST.TYPE_ADMIN\r\n                                || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)\r\n                                    ?\r\n                                    <FlexView width=\"100%\" hAlignContent=\"center\" vAlignContent=\"center\" marginTop={20}>\r\n                                        {\r\n                                            !utils.shouldAProjectBeEdited(user, project)\r\n                                                ?\r\n                                                <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)} disabled>\r\n                                                    <CreateIcon style={{marginRight: 8,  width: 20, height: \"auto\"}}\r\n                                                    />Edit offer</Button>\r\n                                                :\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.EDIT_OFFER\r\n                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                            :\r\n                                                            ROUTES.EDIT_OFFER_INVEST_WEST_SUPER\r\n                                                                .replace(\":projectID\", project.id)\r\n                                                    }\r\n                                                    className={css(sharedStyles.nav_link_hover_without_changing_text_color)}\r\n                                                >\r\n                                                    <Button color=\"default\" variant=\"outlined\" size=\"medium\" className={css(sharedStyles.no_text_transform)}>\r\n                                                        <CreateIcon style={{marginRight: 8, width: 20, height: \"auto\"}}/>Edit offer</Button>\r\n                                                </NavLink>\r\n                                        }\r\n                                        {/*<FlexView*/}\r\n                                        {/*    marginLeft={15}*/}\r\n                                        {/*>*/}\r\n                                        {/*    <InfoOverlay*/}\r\n                                        {/*        message={*/}\r\n                                        {/*            user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                        {/*                ?*/}\r\n                                        {/*                \"Edit offer.\"*/}\r\n                                        {/*                :*/}\r\n                                        {/*                utils.isDraftProject(project)*/}\r\n                                        {/*                    ?*/}\r\n                                        {/*                    \"This offer is still a draft. Complete it.\"*/}\r\n                                        {/*                    :*/}\r\n                                        {/*                    !utils.shouldAProjectBeEdited(user, project)*/}\r\n                                        {/*                        ?*/}\r\n                                        {/*                        \"Pages cannot be edited.\"*/}\r\n                                        {/*                        :*/}\r\n                                        {/*                        `Pages can only be edited before the project phase expires. You can edit until ${utils.dateInReadableFormat(project.Pitch.expiredDate)}.`*/}\r\n                                        {/*        }*/}\r\n                                        {/*        placement=\"right\"*/}\r\n                                        {/*    />*/}\r\n                                        {/*</FlexView>*/}\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            {\r\n                                user.id === project.issuerID\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column hAlignContent=\"center\">\r\n                                        <NavLink\r\n                                            to={\r\n                                                this.shouldHideInformation()\r\n                                                || (\r\n                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                    && project.createdByGroupAdmin\r\n                                                )\r\n                                                    ?\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.VIEW_GROUP_DETAILS\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                        :\r\n                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER\r\n                                                            .replace(\":groupID\", project.group.groupUserName)\r\n                                                    :\r\n                                                    groupUserName\r\n                                                        ?\r\n                                                        ROUTES.USER_PROFILE\r\n                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                                        :\r\n                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                            .replace(\":userID\", projectIssuer.id)\r\n                                            }\r\n                                            className={css(sharedStyles.nav_link_hover, styles.black_text)}\r\n                                        >\r\n                                            <Typography align=\"center\" variant=\"body2\" style={{marginTop: 23}}>\r\n                                                {\r\n                                                    this.shouldHideInformation()\r\n                                                    || (\r\n                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                        && project.createdByGroupAdmin\r\n                                                    )\r\n                                                        ?\r\n                                                        <u>by {`${project.group.displayName}`}</u>\r\n                                                        :\r\n                                                        <u>by {`${projectIssuer.firstName} ${projectIssuer.lastName}`}</u>\r\n                                                }\r\n                                            </Typography>\r\n                                        </NavLink>\r\n                                        {\r\n                                            project.hasOwnProperty('createdByGroupAdmin')\r\n                                            && project.createdByGroupAdmin\r\n                                                ?\r\n                                                null\r\n                                                :\r\n                                                projectIssuer.hasOwnProperty('linkedin')\r\n                                                && projectIssuer.linkedin.trim().length > 0\r\n                                                    ?\r\n                                                    <a href={projectIssuer.linkedin} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                                                        <img alt=\"linkedin_logo\" src={require(\"../../img/linkedin_logo.png\").default} style={{width: 64,  height: 64}}/>\r\n                                                    </a>\r\n                                                    :\r\n                                                    null\r\n                                        }\r\n                                    </FlexView>\r\n                            }\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    {/** Project cover (image or video) */}\r\n                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 7, offset: 1, order: 3}} style={{paddingLeft: 20, paddingRight: 20, height: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE}}>\r\n                        {\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Image src={utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, project.group)}\r\n                                    style={{\r\n                                        maxHeight:\r\n                                            isMobile\r\n                                                ?\r\n                                                MAX_COVER_HEIGHT_IN_MOBILE_MODE\r\n                                                :\r\n                                                MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE\r\n                                        ,\r\n                                        border: `1px solid ${colors.gray_300}`,\r\n                                        width: \"100%\",\r\n                                        objectFit: \"scale-down\"\r\n                                    }}\r\n                                />\r\n                                :\r\n                                project.Pitch.cover.map((coverItem, index) => (\r\n                                    coverItem.hasOwnProperty('removed')\r\n                                        ?\r\n                                        null\r\n                                        :\r\n                                        (\r\n                                            coverItem.fileType === DB_CONST.FILE_TYPE_VIDEO\r\n                                                ?\r\n                                                <ReactPlayer\r\n                                                    key={index}\r\n                                                    url={coverItem.url}\r\n                                                    playsInline\r\n                                                    pip={true}\r\n                                                    width=\"100%\"\r\n                                                    height={coverItem.storageID === \"\" ? \"100%\" : \"auto\"}\r\n                                                    playing={false}\r\n                                                    controls={true}\r\n                                                />\r\n                                                :\r\n                                                <Image key={index} src={coverItem.url} style={{maxHeight: isMobile ? MAX_COVER_HEIGHT_IN_MOBILE_MODE : MAX_COVER_HEIGHT_IN_BIG_SCREEN_MODE, border: `1px solid ${colors.gray_300}`, width: \"100%\", objectFit: \"scale-down\"}}/>\r\n                                        )\r\n                                ))\r\n                        }\r\n                    </Col>\r\n\r\n                    {/** Project information */}\r\n                    <Col xs={{span: 12, order: 4}} sm={{span: 12, order: 4}} md={{span: 12, order: 4}} lg={{span: 3, order: 4}} style={{paddingLeft: 20, paddingRight: 20}}>\r\n                        <Row noGutters>\r\n\r\n                            {/** Divider */}\r\n                            <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 1}} lg={{span: 12, offset: 0, order: 1}}>\r\n                                <FlexView width=\"100%\" height={4} style={{\r\n                                        backgroundColor:\r\n                                            !groupProperties\r\n                                                ?\r\n                                                colors.primaryColor\r\n                                                :\r\n                                                groupProperties.settings.primaryColor\r\n                                    }}\r\n                                />\r\n                            </Col>\r\n\r\n                            {/** Funding goal / Pledged \r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 1, order: 2}} lg={{span: 12, offset: 0, order: 2}}>\r\n                                <FlexView column marginTop={18}>\r\n                                    {\r\n                                        utils.isDraftProject(project)\r\n                                        || utils.isProjectWaitingToGoLive(project)\r\n                                        || utils.isProjectRejectedToGoLive(project)\r\n                                        || utils.isProjectInLivePitchPhase(project)\r\n                                        || utils.isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeCreated(project)\r\n                                        || utils.isProjectWaitingForPledgeToBeChecked(project)\r\n                                    }\r\n                                </FlexView>\r\n                            </Col>\r\n                            */}\r\n                            \r\n\r\n                            {/** Project status */}\r\n                            <Col xs={12} sm={12} md={{span: 5, offset: 0, order: 4}} lg={{span: 12, offset: 0, order: 4}}>\r\n                                {\r\n                                    this.renderProjectStatus()\r\n                                }\r\n                            </Col>\r\n\r\n                            {/** Contact us */}\r\n                            {\r\n                                isProjectOwner(AuthenticationState.currentUser, project)\r\n                                    ? null\r\n                                    : <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 5}} lg={{span: 12, offset: 0, order: 7}} style={{marginTop: 15}}>\r\n                                        <FlexView column hAlignContent=\"left\">\r\n                                            <FlexView hAlignContent=\"center\" vAlignContent=\"center\">\r\n                                                <Button color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={this.shouldHideInformation() || (user.type === TYPE_INVESTOR)} onClick={() => this.toggleContactPitchOwnerDialog()}>Contact us</Button>\r\n                                                {/*<Button*/}\r\n                                                {/*    size=\"medium\"*/}\r\n                                                {/*    variant={getInvestorVote(votes, user) && getInvestorVote(votes, user).voted ? \"contained\" : \"outlined\"}*/}\r\n                                                {/*    color=\"primary\"*/}\r\n                                                {/*    disabled={this.shouldVoteDisabled()}*/}\r\n                                                {/*    onClick={() => this.onVote(true)}*/}\r\n                                                {/*    className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <i*/}\r\n                                                {/*        style={{*/}\r\n                                                {/*            fontSize: 21,*/}\r\n                                                {/*            marginRight: 8*/}\r\n                                                {/*        }}*/}\r\n                                                {/*        className=\"far fa-thumbs-up\"*/}\r\n                                                {/*    />*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        Like*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</Button>*/}\r\n                                                {/*<FlexView*/}\r\n                                                {/*    marginLeft={10}*/}\r\n                                                {/*>*/}\r\n                                                {/*    <Typography*/}\r\n                                                {/*        variant=\"body1\"*/}\r\n                                                {/*        color=\"primary\"*/}\r\n                                                {/*    >*/}\r\n                                                {/*        {this.displayVote(true)}*/}\r\n                                                {/*    </Typography>*/}\r\n                                                {/*</FlexView>*/}\r\n                                            </FlexView>\r\n                                            {/*{*/}\r\n                                            {/*    user.type === DB_CONST.TYPE_ISSUER*/}\r\n                                            {/*        ?*/}\r\n                                            {/*        <Typography*/}\r\n                                            {/*            variant=\"body2\"*/}\r\n                                            {/*            align=\"left\"*/}\r\n                                            {/*            color=\"error\"*/}\r\n                                            {/*            style={{*/}\r\n                                            {/*                marginTop: 10*/}\r\n                                            {/*            }}*/}\r\n                                            {/*        >*/}\r\n                                            {/*            Only investors can vote.*/}\r\n                                            {/*        </Typography>*/}\r\n                                            {/*        :*/}\r\n                                            {/*        null*/}\r\n                                            {/*}*/}\r\n                                        </FlexView>\r\n                                        {\r\n                                            this.shouldHideInformation()\r\n                                                ?\r\n                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">You cannot see detailed information of this restricted offer.</Typography>\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    <FlexView column marginTop={20}>\r\n                                                        <Typography align=\"left\" variant=\"body2\" color=\"textSecondary\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                        <NavLink\r\n                                                            to={\r\n                                                                groupUserName\r\n                                                                    ?\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                                    :\r\n                                                                    ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                            }\r\n                                                            style={{marginTop: 4}}>\r\n                                                            <Typography variant=\"body2\">Request access</Typography>\r\n                                                        </NavLink>\r\n                                                    </FlexView>\r\n                                                :\r\n                                                this.renderInvestorSelfCertifyReminder()\r\n                                        }\r\n                                    </Col>\r\n                            }\r\n\r\n                            {/** Pledge this project (available only for investor and only appears when the project is in the Primary offer phase) */}\r\n                            {\r\n                                !utils.isProjectInLivePledgePhase(project)\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    (\r\n                                        user.type !== DB_CONST.TYPE_INVESTOR\r\n                                            ?\r\n                                            (\r\n                                                <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                    <Typography align=\"left\" variant=\"body2\">\r\n                                                        <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                    </Typography>\r\n                                                </Col>\r\n                                            )\r\n                                            :\r\n                                            (\r\n                                                investorPledge\r\n                                                    ?\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n                                                        <Typography align=\"left\" variant=\"body2\"><u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u>\r\n                                                        </Typography>\r\n                                                    </Col>\r\n                                                    :\r\n                                                    <Col xs={12} sm={12} md={{span: 10, offset: 1, order: 6}} lg={{span: 12, offset: 0, order: 6}} style={{marginTop: 30}}>\r\n\r\n                                                        <Typography align=\"left\" variant=\"body2\" style={{marginTop: 15}}>\r\n                                                            <u>Closes on {utils.dateTimeInReadableFormat(project.PrimaryOffer.expiredDate)}.</u></Typography>\r\n                                                    </Col>\r\n                                            )\r\n                                    )\r\n                            }\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Sections bar */}\r\n                <Row noGutters className={css(styles.sticky_body_sections_bar)}>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n\r\n                    <Col style={{padding: 10}} xs={{span: 12, offset: 0}} sm={{span: 12, offset: 0}} md={{span: 12, offset: 0}} lg={{span: 8, offset: 2}}>\r\n                        <FlexView hAlignContent=\"center\">\r\n                            <Tabs value={mainBody} onChange={this.onTabChanged} indicatorColor=\"primary\" textColor=\"primary\" variant=\"scrollable\" scrollButtons=\"on\">\r\n                                {\r\n                                    // user is a super admin\r\n                                    // or a course admin that owns the project\r\n                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))\r\n                                    )\r\n                                    // project is not a draft\r\n                                    && !utils.isDraftProject(project)\r\n                                        ?\r\n                                        <Tab value={MAIN_BODY_ADMIN_OFFER_STATES} className={css(sharedStyles.tab_title)} fullWidth label=\"Control phases\"\r\n                                         style={{\r\n                                                color:\r\n                                                    !groupProperties\r\n                                                        ?\r\n                                                        colors.secondaryColor\r\n                                                        :\r\n                                                        groupProperties.settings.secondaryColor\r\n                                            }}\r\n                                        />\r\n                                        :\r\n                                        null\r\n                                }\r\n                                {/*{*/}\r\n                                {/*    // user is a super admin*/}\r\n                                {/*    // or a group admin that owns the project*/}\r\n                                {/*    (user.type === DB_CONST.TYPE_ADMIN*/}\r\n                                {/*        && (user.superAdmin || (!user.superAdmin && user.anid === project.anid))*/}\r\n                                {/*    )*/}\r\n                                {/*    // user is the issuer that owns the project*/}\r\n                                {/*    || (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID)*/}\r\n                                {/*        ?*/}\r\n                                {/*        <Tab*/}\r\n                                {/*            value={MAIN_BODY_INVESTORS_PLEDGED}*/}\r\n                                {/*            className={css(sharedStyles.tab_title)}*/}\r\n                                {/*            fullWidth*/}\r\n                                {/*            label=\"Pledges\"*/}\r\n                                {/*            style={{*/}\r\n                                {/*                color:*/}\r\n                                {/*                    !groupProperties*/}\r\n                                {/*                        ?*/}\r\n                                {/*                        colors.secondaryColor*/}\r\n                                {/*                        :*/}\r\n                                {/*                        groupProperties.settings.secondaryColor*/}\r\n                                {/*            }}*/}\r\n                                {/*        />*/}\r\n                                {/*        :*/}\r\n                                {/*        null*/}\r\n                                {/*}*/}\r\n                                <Tab value={MAIN_BODY_CAMPAIGN} className={css(sharedStyles.tab_title)} fullWidth label=\"Project\"/>\r\n                                <Tab value={MAIN_BODY_DOCUMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Documents\"/>\r\n                                <Tab value={MAIN_BODY_COMMENTS} className={css(sharedStyles.tab_title)} fullWidth label=\"Student comments\"/>\r\n                                <Tab value={MAIN_BODY_NOTES} className={css(sharedStyles.tab_title)} fullWidth label=\"Extra information\"/>\r\n                            </Tabs>\r\n                        </FlexView>\r\n                    </Col>\r\n\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Divider/>\r\n                    </Col>\r\n                </Row>\r\n\r\n                {/** Main body */}\r\n                <Row noGutters className={css(styles.main_body_section)}>\r\n                    {/** Offer states (only visible to Admin) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_ADMIN_OFFER_STATES\r\n                            ?\r\n                            null\r\n                            :\r\n                            <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                <FlexView column marginTop={30}>\r\n                                    <Typography variant=\"h5\"> Control phases</Typography>\r\n\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 8, order: 0}} lg={{span: 8, order: 0}}>\r\n                                            <Stepper nonLinear orientation=\"vertical\" activeStep={adminOfferStatesActiveStep} style={{marginTop: 15}}>\r\n                                                {/** Publish project step */}\r\n                                                <Step key={ADMIN_OFFER_STATES_PUBLISH_PITCH} completed={!utils.isProjectWaitingToGoLive(project)}>\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PITCH)}>\r\n                                                        <StepLabel>Publish project</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            utils.isProjectWaitingToGoLive(project)\r\n                                                                ?\r\n                                                                <FlexView column width=\"100%\" marginTop={20} className={css(styles.admin_state_control_box)}>\r\n                                                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                                                        Please check this offer\r\n                                                                        carefully\r\n                                                                        before publishing as this action cannot be\r\n                                                                        reversed. You\r\n                                                                        can control who can see this investment\r\n                                                                        opportunity\r\n                                                                        using the options below.\r\n                                                                    </Typography>\r\n\r\n                                                                    <Divider style={{marginTop: 25, marginBottom: 20}}/>\r\n\r\n                                                                    {/** Select project visibility before publishing project */}\r\n                                                                    <SelectPitchVisibility/>\r\n\r\n                                                                    <Divider style={{marginTop: 35, marginBottom: 25}}/>\r\n\r\n                                                                    {\r\n                                                                        !addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column>\r\n                                                                                <TextField\r\n                                                                                    label=\"Feedback\"\r\n                                                                                    placeholder=\"Feedback for issuer\"\r\n                                                                                    name=\"rejectFeedback\"\r\n                                                                                    value={rejectFeedback}\r\n                                                                                    fullWidth\r\n                                                                                    margin=\"normal\"\r\n                                                                                    variant=\"outlined\"\r\n                                                                                    required\r\n                                                                                    multiline\r\n                                                                                    rows={5}\r\n                                                                                    rowsMax={5}\r\n                                                                                    onChange={this.onTextChanged}\r\n                                                                                />\r\n\r\n                                                                                <FlexView width=\"100%\" hAlignContent=\"right\" marginTop={10}>\r\n                                                                                    <FlexView marginRight={6}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={rejectFeedback.trim().length === 0} onClick={() => this.sendProjectBackToIssuer()}>\r\n                                                                                            {\r\n                                                                                                sendingProjectBack\r\n                                                                                                    ?\r\n                                                                                                    \"Sending...\"\r\n                                                                                                    :\r\n                                                                                                    \"Send\"\r\n                                                                                            }\r\n                                                                                        </Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView marginLeft={6}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => this.toggleRejectFeedback()}>Cancel</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        addingRejectFeedback\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            isProjectCreatedByGroupAdmin(project)\r\n                                                                                ?\r\n                                                                                <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish project</Button>\r\n                                                                                :\r\n                                                                                <FlexView>\r\n                                                                                    <FlexView grow marginRight={10}>\r\n                                                                                        <Button fullWidth color=\"primary\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.onMakeProjectGoLiveDecision({decision: true, projectVisibilitySetting})}>Publish project</Button>\r\n                                                                                    </FlexView>\r\n                                                                                    <FlexView grow marginLeft={10}>\r\n                                                                                        <Button fullWidth color=\"secondary\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} disabled={user.superAdmin} onClick={() => this.toggleRejectFeedback()}>Send back to issuer</Button>\r\n                                                                                    </FlexView>\r\n                                                                                </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {\r\n                                                                        !user.superAdmin\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <Typography variant=\"body1\" color=\"error\" align=\"left\" style={{marginTop: 20}}>Only course admin can do this.</Typography>\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            isProjectRejectedToGoLive(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                isDraftProject(project)\r\n                                                                                    ?\r\n                                                                                    \"This offer is in draft phase.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has been published.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                </FlexView>\r\n                                                        }\r\n\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/** Move project to Pledge step */}\r\n                                                <Step\r\n                                                    key={ADMIN_OFFER_STATES_MOVE_TO_PLEDGE}\r\n                                                    disabled={\r\n                                                        isProjectWaitingToGoLive(project)\r\n                                                        || isProjectRejectedToGoLive(project)\r\n                                                    }\r\n                                                    completed={\r\n                                                        isProjectSuccessful(project)\r\n                                                        || isProjectFailed(project)\r\n                                                        || isProjectInLivePledgePhase(project)\r\n                                                        || isProjectWaitingForPledgeToBeCreated(project)\r\n                                                        || isProjectWaitingForPledgeToBeChecked(project)\r\n                                                    }\r\n                                                >\r\n                                                    <StepButton onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_MOVE_TO_PLEDGE)}>\r\n                                                        {/*<StepLabel*/}\r\n                                                        {/*    error={utils.isProjectRejectedToGoLive(project)}*/}\r\n                                                        {/*>*/}\r\n                                                        {/*    Move project to pledge phase*/}\r\n                                                        {/*</StepLabel>*/}\r\n                                                        <StepLabel error={utils.isProjectRejectedToGoLive(project)}>Make decision for expired project</StepLabel>\r\n                                                    </StepButton>\r\n                                                    <StepContent>\r\n                                                        {\r\n                                                            (isProjectInLivePitchPhase(project)\r\n                                                                || isProjectPitchExpiredWaitingForAdminToCheck(project))\r\n                                                            && !isProjectWaitingForPledgeToBeCreated(project)\r\n                                                            && !isProjectWaitingForPledgeToBeChecked(project)\r\n                                                                ?\r\n                                                                <FlexView\r\n                                                                    column\r\n                                                                >\r\n                                                                    {\r\n                                                                        !isProjectPitchExpiredWaitingForAdminToCheck(project)\r\n                                                                            ?\r\n                                                                            null\r\n                                                                            :\r\n                                                                            <FlexView column width=\"100%\" marginTop={20} marginBottom={20} className={css(styles.admin_state_control_box)}>\r\n                                                                                <Typography align=\"left\" variant=\"body1\" style={{marginBottom: 35}}>This project has expired. You can bring it back to live by updating the expiry date or close it.</Typography>\r\n\r\n                                                                                <KeyboardDatePicker\r\n                                                                                    autoOk\r\n                                                                                    fullWidth\r\n                                                                                    variant=\"dialog\"\r\n                                                                                    inputVariant=\"outlined\"\r\n                                                                                    label=\"Update expiry date for this project\"\r\n                                                                                    format=\"dd/MM/yyyy\"\r\n                                                                                    minDate={utils.getDateWithDaysFurtherThanToday(1)}\r\n                                                                                    value={changedPitchExpiryDate}\r\n                                                                                    InputAdornmentProps={{position: \"start\"}}\r\n                                                                                    onChange={this.onDateChanged}\r\n                                                                                />\r\n\r\n                                                                                <Button variant=\"contained\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                    disabled={\r\n                                                                                        !changedPitchExpiryDate\r\n                                                                                        || isNaN(changedPitchExpiryDate)\r\n                                                                                        || changedPitchExpiryDate < utils.getDateWithDaysFurtherThanToday(0)\r\n                                                                                    }\r\n                                                                                    style={{marginTop: 25}} onClick={this.bringPitchBackToLive}>Make project live again</Button>\r\n\r\n                                                                                <FlexView column marginTop={100}>\r\n                                                                                    <Button fullWidth color=\"secondary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" disabled={user.superAdmin} onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}>Close project</Button>\r\n\r\n                                                                                    <Typography align=\"center\" variant=\"body2\" style={{marginTop: 12}}>\r\n                                                                                        <b>\r\n                                                                                            <u>\r\n                                                                                                Please do it carefully\r\n                                                                                                as you cannot\r\n                                                                                                reverse\r\n                                                                                                your action.\r\n                                                                                            </u>\r\n                                                                                        </b>\r\n                                                                                    </Typography>\r\n                                                                                </FlexView>\r\n                                                                            </FlexView>\r\n                                                                    }\r\n\r\n                                                                    {/*<FlexView*/}\r\n                                                                    {/*    column*/}\r\n                                                                    {/*    width=\"100%\"*/}\r\n                                                                    {/*    marginTop={20}*/}\r\n                                                                    {/*    className={css(styles.admin_state_control_box)}*/}\r\n                                                                    {/*>*/}\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*        paragraph*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        This offer is currently in the*/}\r\n                                                                    {/*        project*/}\r\n                                                                    {/*        phase. You can now move it to the pledge*/}\r\n                                                                    {/*        phase.*/}\r\n                                                                    {/*        The*/}\r\n                                                                    {/*        issuer will be notified and prompted to*/}\r\n                                                                    {/*        create*/}\r\n                                                                    {/*        their*/}\r\n                                                                    {/*        pledge page.*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Typography*/}\r\n                                                                    {/*        align=\"left\"*/}\r\n                                                                    {/*        variant=\"body1\"*/}\r\n                                                                    {/*    >*/}\r\n                                                                    {/*        <b>*/}\r\n                                                                    {/*            <u>*/}\r\n                                                                    {/*                Please do it carefully as you cannot*/}\r\n                                                                    {/*                reverse*/}\r\n                                                                    {/*                your action.*/}\r\n                                                                    {/*            </u>*/}\r\n                                                                    {/*        </b>*/}\r\n                                                                    {/*    </Typography>*/}\r\n\r\n                                                                    {/*    <Divider*/}\r\n                                                                    {/*        style={{*/}\r\n                                                                    {/*            marginTop: 30,*/}\r\n                                                                    {/*            marginBottom: 30*/}\r\n                                                                    {/*        }}*/}\r\n                                                                    {/*    />*/}\r\n\r\n                                                                    {/*    <FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginRight={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"primary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(true)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Move to pledge phase*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*        <FlexView*/}\r\n                                                                    {/*            grow*/}\r\n                                                                    {/*            marginLeft={10}*/}\r\n                                                                    {/*        >*/}\r\n                                                                    {/*            <Button*/}\r\n                                                                    {/*                fullWidth*/}\r\n                                                                    {/*                color=\"secondary\"*/}\r\n                                                                    {/*                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                                    {/*                variant=\"outlined\"*/}\r\n                                                                    {/*                disabled={user.superAdmin}*/}\r\n                                                                    {/*                onClick={() => this.onMakeProjectGoToPledgePhaseDecision(false)}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Close project*/}\r\n                                                                    {/*            </Button>*/}\r\n                                                                    {/*        </FlexView>*/}\r\n                                                                    {/*    </FlexView>*/}\r\n\r\n                                                                    {/*    {*/}\r\n                                                                    {/*        !user.superAdmin*/}\r\n                                                                    {/*            ?*/}\r\n                                                                    {/*            null*/}\r\n                                                                    {/*            :*/}\r\n                                                                    {/*            <Typography*/}\r\n                                                                    {/*                variant=\"body1\"*/}\r\n                                                                    {/*                color=\"error\"*/}\r\n                                                                    {/*                align=\"left\"*/}\r\n                                                                    {/*                style={{*/}\r\n                                                                    {/*                    marginTop: 20*/}\r\n                                                                    {/*                }}*/}\r\n                                                                    {/*            >*/}\r\n                                                                    {/*                Only group admin can do this.*/}\r\n                                                                    {/*            </Typography>*/}\r\n                                                                    {/*    }*/}\r\n                                                                    {/*</FlexView>*/}\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView column width=\"100%\" marginTop={20}>\r\n                                                                    <Typography\r\n                                                                        color={\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"secondary\"\r\n                                                                                :\r\n                                                                                \"primary\"\r\n                                                                        }\r\n                                                                        align=\"left\"\r\n                                                                        variant=\"body1\"\r\n                                                                    >\r\n                                                                        {\r\n                                                                            utils.isProjectFailed(project)\r\n                                                                                ?\r\n                                                                                \"This offer has been rejected.\"\r\n                                                                                :\r\n                                                                                project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                                    ?\r\n                                                                                    project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                    && project.createdByGroupAdmin\r\n                                                                                    && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                                        ?\r\n                                                                                        \"You can create a pledge page for this offer now.\"\r\n                                                                                        :\r\n                                                                                        \"The issuer has been prompted to create their pledge page. You will then be able to check the pledge before publishing.\"\r\n                                                                                    :\r\n                                                                                    \"This offer has moved to the pledge phase.\"\r\n                                                                        }\r\n                                                                    </Typography>\r\n                                                                    {\r\n                                                                        project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                        && project.createdByGroupAdmin\r\n                                                                        && (groupProperties && project.anid === groupProperties.anid)\r\n                                                                        && project.Pitch.status === DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER\r\n                                                                            ?\r\n                                                                            <FlexView marginTop={20}>\r\n                                                                                <Button color=\"primary\" variant=\"outlined\" size=\"medium\"\r\n                                                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                                                    onClick={() => {\r\n                                                                                        createPledgeDialog_toggleDialog();\r\n                                                                                        createPledgeDialog_setProject(project);\r\n                                                                                        selectProjectVisibility_setProject(project);\r\n                                                                                    }}>\r\n                                                                                    Create pledge\r\n                                                                                </Button>\r\n                                                                            </FlexView>\r\n                                                                            :\r\n                                                                            null\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                        }\r\n                                                    </StepContent>\r\n                                                </Step>\r\n\r\n                                                {/*/!** Publish Pledge step *!/*/}\r\n                                                {/*<Step*/}\r\n                                                {/*    key={ADMIN_OFFER_STATES_PUBLISH_PLEDGE}*/}\r\n                                                {/*    disabled={*/}\r\n                                                {/*        isProjectWaitingToGoLive(project)*/}\r\n                                                {/*        || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*        || isProjectInLivePitchPhase(project)*/}\r\n                                                {/*        || isProjectPitchExpiredWaitingForAdminToCheck(project)*/}\r\n                                                {/*        || isProjectFailed(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*    completed={*/}\r\n                                                {/*        isProjectFailed(project)*/}\r\n                                                {/*        || isProjectSuccessful(project)*/}\r\n                                                {/*        || isProjectInLivePledgePhase(project)*/}\r\n                                                {/*    }*/}\r\n                                                {/*>*/}\r\n                                                {/*    <StepButton*/}\r\n                                                {/*        onClick={() => this.onAdminOfferStatesStepClick(ADMIN_OFFER_STATES_PUBLISH_PLEDGE)}*/}\r\n                                                {/*    >*/}\r\n                                                {/*        <StepLabel*/}\r\n                                                {/*            error={*/}\r\n                                                {/*                isProjectFailed(project)*/}\r\n                                                {/*                || isProjectRejectedToGoLive(project)*/}\r\n                                                {/*            }*/}\r\n                                                {/*        >*/}\r\n                                                {/*            Publish pledge*/}\r\n                                                {/*        </StepLabel>*/}\r\n                                                {/*    </StepButton>*/}\r\n                                                {/*    <StepContent>*/}\r\n                                                {/*        {*/}\r\n                                                {/*            project.status === DB_CONST.PROJECT_STATUS_PRIMARY_OFFER_CREATED_WAITING_TO_BE_CHECKED*/}\r\n                                                {/*                ?*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                    className={css(styles.admin_state_control_box)}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                        paragraph*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        The issuer has now created their pledge page.*/}\r\n                                                {/*                        Please*/}\r\n                                                {/*                        check this carefully before publishing as you*/}\r\n                                                {/*                        cannot*/}\r\n                                                {/*                        reverse this action. You can also control who*/}\r\n                                                {/*                        can see*/}\r\n                                                {/*                        this pledge using the options below.*/}\r\n                                                {/*                    </Typography>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 25,*/}\r\n                                                {/*                            marginBottom: 20*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    /!** Select project visibility before publishing pledge *!/*/}\r\n                                                {/*                    <SelectPledgeVisibility/>*/}\r\n\r\n                                                {/*                    <Divider*/}\r\n                                                {/*                        style={{*/}\r\n                                                {/*                            marginTop: 35,*/}\r\n                                                {/*                            marginBottom: 25*/}\r\n                                                {/*                        }}*/}\r\n                                                {/*                    />*/}\r\n\r\n                                                {/*                    <FlexView*/}\r\n                                                {/*                        marginTop={20}*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginRight={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"primary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({*/}\r\n                                                {/*                                    decision: true,*/}\r\n                                                {/*                                    projectVisibilitySetting*/}\r\n                                                {/*                                })}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Publish pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                        <FlexView*/}\r\n                                                {/*                            grow*/}\r\n                                                {/*                            marginLeft={10}*/}\r\n                                                {/*                        >*/}\r\n                                                {/*                            <Button*/}\r\n                                                {/*                                fullWidth*/}\r\n                                                {/*                                color=\"secondary\"*/}\r\n                                                {/*                                className={css(sharedStyles.no_text_transform)}*/}\r\n                                                {/*                                variant=\"outlined\"*/}\r\n                                                {/*                                disabled={user.superAdmin}*/}\r\n                                                {/*                                onClick={() => this.onMakeProjectPledgeGoLiveDecision({decision: false})}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Close pledge*/}\r\n                                                {/*                            </Button>*/}\r\n                                                {/*                        </FlexView>*/}\r\n                                                {/*                    </FlexView>*/}\r\n\r\n                                                {/*                    {*/}\r\n                                                {/*                        !user.superAdmin*/}\r\n                                                {/*                            ?*/}\r\n                                                {/*                            null*/}\r\n                                                {/*                            :*/}\r\n                                                {/*                            <Typography*/}\r\n                                                {/*                                variant=\"body1\"*/}\r\n                                                {/*                                color=\"error\"*/}\r\n                                                {/*                                align=\"left\"*/}\r\n                                                {/*                                style={{*/}\r\n                                                {/*                                    marginTop: 20*/}\r\n                                                {/*                                }}*/}\r\n                                                {/*                            >*/}\r\n                                                {/*                                Only group admin can do this.*/}\r\n                                                {/*                            </Typography>*/}\r\n                                                {/*                    }*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*                :*/}\r\n                                                {/*                <FlexView*/}\r\n                                                {/*                    column*/}\r\n                                                {/*                    width=\"100%\"*/}\r\n                                                {/*                    marginTop={20}*/}\r\n                                                {/*                >*/}\r\n                                                {/*                    <Typography*/}\r\n                                                {/*                        color={*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"secondary\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"primary\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                        align=\"left\"*/}\r\n                                                {/*                        variant=\"body1\"*/}\r\n                                                {/*                    >*/}\r\n                                                {/*                        {*/}\r\n                                                {/*                            isProjectFailed(project)*/}\r\n                                                {/*                                ?*/}\r\n                                                {/*                                \"This offer has been rejected.\"*/}\r\n                                                {/*                                :*/}\r\n                                                {/*                                \"This offer has been published.\"*/}\r\n                                                {/*                        }*/}\r\n                                                {/*                    </Typography>*/}\r\n                                                {/*                </FlexView>*/}\r\n                                                {/*        }*/}\r\n                                                {/*    </StepContent>*/}\r\n                                                {/*</Step>*/}\r\n                                            </Stepper>\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 0}} sm={{span: 12, order: 0}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}}>\r\n                                            {\r\n                                                !isProjectLive(project)\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <FlexView column marginTop={30}>\r\n                                                        <Button variant=\"outlined\" color=\"primary\" className={css(sharedStyles.no_text_transform)}\r\n                                                            onClick={() => realtimeDBUtils.toggleProjectLivelinessTemporarily(user, JSON.parse(JSON.stringify(project)))}\r\n                                                            disabled={\r\n                                                                user.type !== DB_CONST.TYPE_ADMIN\r\n                                                                || (\r\n                                                                    user.type === DB_CONST.TYPE_ADMIN\r\n                                                                    && user.anid !== project.anid\r\n                                                                )\r\n                                                            }\r\n                                                        >\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"Open again\"\r\n                                                                    :\r\n                                                                    \"Close temporarily\"\r\n                                                            }\r\n                                                        </Button>\r\n                                                        {\r\n                                                            !user.superAdmin\r\n                                                                ?\r\n                                                                null\r\n                                                                :\r\n                                                                <Typography variant=\"body2\" align=\"left\" color=\"error\" style={{marginTop: 12}}>Only group admins can do this.</Typography>\r\n                                                        }\r\n                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 15}}>\r\n                                                            {\r\n                                                                isProjectTemporarilyClosed(project)\r\n                                                                    ?\r\n                                                                    \"This offer will be opened again.\"\r\n                                                                    :\r\n                                                                    \"This offer will be closed temporarily and it will no longer be visible to any investors until you open it again.\"\r\n                                                            }\r\n                                                        </Typography>\r\n                                                    </FlexView>\r\n                                            }\r\n                                        </Col>\r\n                                    </Row>\r\n                                </FlexView>\r\n                            </Col>\r\n                    }\r\n\r\n                    {/** Main presentation (Campaign) */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_CAMPAIGN\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\"> Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n\r\n                                    {\r\n                                        // Project deck\r\n                                        !project.Pitch.presentationDocument\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography variant=\"h5\">Project deck</Typography>\r\n                                                <DocumentsDownload documents={project.Pitch.presentationDocument} shouldShowRiskWarningOnDownload={true}/>\r\n                                                <Divider style={{marginTop: 10}}/>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {\r\n                                        // project presentation text\r\n                                        !project.Pitch.presentationText\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView column dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(project.Pitch.presentationText.ops)}} marginTop={30}/>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/*/!** Investors pledged (only available when the primary offer expired and there are investors pledging the offer) *!/*/}\r\n                    {/*{*/}\r\n                    {/*    mainBody !== MAIN_BODY_INVESTORS_PLEDGED*/}\r\n                    {/*        ?*/}\r\n                    {/*        null*/}\r\n                    {/*        :*/}\r\n                    {/*        <Col*/}\r\n                    {/*            xs={12}*/}\r\n                    {/*            sm={12}*/}\r\n                    {/*            md={12}*/}\r\n                    {/*            lg={{span: 6, offset: 3}}*/}\r\n                    {/*        >*/}\r\n                    {/*            <FlexView*/}\r\n                    {/*                column*/}\r\n                    {/*                marginTop={30}*/}\r\n                    {/*            >*/}\r\n                    {/*                <Typography*/}\r\n                    {/*                    variant=\"h5\"*/}\r\n                    {/*                    align=\"left\"*/}\r\n                    {/*                    paragraph*/}\r\n                    {/*                >*/}\r\n                    {/*                    Pledges from investors*/}\r\n                    {/*                </Typography>*/}\r\n\r\n                    {/*                /!** Pledges table *!/*/}\r\n                    {/*                <PledgesTable/>*/}\r\n                    {/*            </FlexView>*/}\r\n                    {/*        </Col>*/}\r\n                    {/*}*/}\r\n\r\n                    {/** Comments */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_COMMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}}>\r\n                                    <Row>\r\n                                        <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 8, order: 1}} lg={{span: 8, order: 1}} style={{marginTop: 40}}>\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    null\r\n                                                    :\r\n                                                    <Typography align=\"center\" style={{padding: 15, backgroundColor: colors.kick_starter_background_color_1, marginBottom: 30}} variant=\"body2\" color=\"inherit\">Only students can post comments.</Typography>\r\n                                            }\r\n\r\n                                            {\r\n                                                !commentsLoaded\r\n                                                    ?\r\n                                                    // comments not loaded yet --> load them and wait for them to be loaded\r\n                                                    <FlexView marginTop={30} hAlignContent=\"center\" width=\"100%\">\r\n                                                        <HashLoader\r\n                                                            color={\r\n                                                                !groupProperties\r\n                                                                    ?\r\n                                                                    colors.primaryColor\r\n                                                                    :\r\n                                                                    groupProperties.settings.primaryColor\r\n                                                            }\r\n                                                        />\r\n                                                    </FlexView>\r\n                                                    :\r\n                                                    (\r\n                                                        sortedComments.length > 0\r\n                                                            ?\r\n                                                            (\r\n                                                                <FlexView className={css(styles.border_box)} style={{padding: 15, backgroundColor: colors.kick_starter_background_color}} column>\r\n                                                                    {\r\n                                                                        sortedComments.map(comment => (\r\n                                                                            (\r\n                                                                                // if the comment is from the current user\r\n                                                                                comment.commentedBy === user.id\r\n                                                                                    ?\r\n                                                                                    <FlexView key={comment.id} column marginTop={12} marginBottom={12} className={css(styles.border_box)} style={{backgroundColor: colors.white, width: \"100%\"}}>\r\n                                                                                        <Typography style={{marginTop: 15, marginBottom: 10}} variant=\"body1\" className={css(styles.gray_text)} align=\"left\">Update your comment</Typography>\r\n                                                                                        <InputBase name=\"currentCommentText\" onChange={this.onTextChanged} value={currentCommentText} fullWidth rows={5} multiline className={css(styles.border_box)}/>\r\n                                                                                        <FlexView marginTop={25} width=\"100%\" hAlignContent=\"right\">\r\n                                                                                            <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onCancelUpdateCurrentComment}>Cancel</Button>\r\n                                                                                            <Button style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" disabled={(currentComment && currentComment.comment === currentCommentText) || currentCommentText.trim().length === 0} onClick={this.onSubmitUpdateCurrentComment}>Update</Button>\r\n                                                                                        </FlexView>\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by group admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by group admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>{reply.text}</Typography>\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                                    :\r\n                                                                                    <FlexView key={comment.id} className={css(styles.border_box)} style={{backgroundColor: colors.white}} column marginTop={12} marginBottom={12}>\r\n                                                                                        {/** Date */}\r\n                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                            {\r\n                                                                                                comment.status === DB_CONST.COMMENT_STATUS_POSTED\r\n                                                                                                    ?\r\n                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                                    :\r\n                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(comment.commentedDate)}`\r\n                                                                                            }\r\n                                                                                        </Typography>\r\n\r\n                                                                                        {/** Comment author */}\r\n                                                                                        {\r\n                                                                                            user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                            && user.superAdmin\r\n                                                                                                ?\r\n                                                                                                <NavLink\r\n                                                                                                    to={\r\n                                                                                                        groupUserName\r\n                                                                                                            ?\r\n                                                                                                            ROUTES.USER_PROFILE\r\n                                                                                                                .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                            :\r\n                                                                                                            ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                .replace(\":userID\", comment.author.id)\r\n                                                                                                    }\r\n                                                                                                >\r\n                                                                                                    <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">by {comment.author.firstName} {comment.author.lastName}</Typography>\r\n                                                                                                </NavLink>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Comment text */}\r\n                                                                                        <Typography style={{marginTop: 12}} variant=\"body1\" align=\"left\">{comment.comment}</Typography>\r\n\r\n                                                                                        {/** Reply button */}\r\n                                                                                        {\r\n                                                                                            (user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                && user.id === projectIssuer.id)\r\n                                                                                            || (\r\n                                                                                                user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                && project.hasOwnProperty('createdByGroupAdmin')\r\n                                                                                                && user.anid === project.anid\r\n                                                                                            )\r\n                                                                                                ?\r\n                                                                                                <FlexView marginTop={25}>\r\n                                                                                                    <Button variant=\"outlined\" size=\"small\" className={css(sharedStyles.no_text_transform)}\r\n                                                                                                        disabled={\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited === null\r\n                                                                                                        }\r\n                                                                                                        onClick={() => this.onToggleReplyToComment(comment, null)}\r\n                                                                                                    >Reply</Button>\r\n                                                                                                </FlexView>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Reply input area */}\r\n                                                                                        {\r\n                                                                                            replyingToComment !== null\r\n                                                                                            && replyingToComment.id === comment.id\r\n                                                                                            && replyEdited === null\r\n                                                                                                ?\r\n                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                :\r\n                                                                                                null\r\n                                                                                        }\r\n\r\n                                                                                        {/** Replies */}\r\n                                                                                        {\r\n                                                                                            comment.replies.map(reply => (\r\n                                                                                                <FlexView key={reply.id} height=\"100%\" width=\"100%\" marginLeft={24} marginTop={35}>\r\n                                                                                                    <Divider style={{backgroundColor: styles.gray_text, height: \"auto\", width: 6}}/>\r\n                                                                                                    <FlexView column marginLeft={10} marginRight={24} width=\"100%\">\r\n                                                                                                        {/** Date */}\r\n                                                                                                        <Typography variant=\"body2\" className={css(styles.gray_text)} align=\"left\">\r\n                                                                                                            {\r\n                                                                                                                reply.status === DB_CONST.COMMENT_REPLY_STATUS_POSTED\r\n                                                                                                                    ?\r\n                                                                                                                    `Posted: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                                    :\r\n                                                                                                                    `Edited: ${utils.dateTimeInReadableFormat(reply.repliedDate)}`\r\n                                                                                                            }\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Reply author */}\r\n                                                                                                        <NavLink\r\n                                                                                                            to={\r\n                                                                                                                reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                    ?\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", reply.author.anid)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", reply.author.anid)\r\n                                                                                                                    :\r\n                                                                                                                    groupUserName\r\n                                                                                                                        ?\r\n                                                                                                                        ROUTES.USER_PROFILE\r\n                                                                                                                            .replace(\":groupUserName\", groupUserName)\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                                        :\r\n                                                                                                                        ROUTES.USER_PROFILE_INVEST_WEST_SUPER\r\n                                                                                                                            .replace(\":userID\", reply.author.id)\r\n                                                                                                            }\r\n                                                                                                        >\r\n                                                                                                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">\r\n                                                                                                                {\r\n                                                                                                                    reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        ?\r\n                                                                                                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                                                                                                        && user.superAdmin\r\n                                                                                                                            ?\r\n                                                                                                                            `by course admin - ${reply.author.email}`\r\n                                                                                                                            :\r\n                                                                                                                            \"by course admin\"\r\n                                                                                                                        :\r\n                                                                                                                        `by ${reply.author.firstName} ${reply.author.lastName}`\r\n                                                                                                                }\r\n                                                                                                            </Typography>\r\n                                                                                                        </NavLink>\r\n\r\n                                                                                                        {/** Reply text */}\r\n                                                                                                        <Typography variant=\"body2\" align=\"left\" style={{marginTop: 12}}>\r\n                                                                                                            {reply.text}\r\n                                                                                                        </Typography>\r\n\r\n                                                                                                        {/** Delete/edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            // allow group admins that created this project,\r\n                                                                                                            // and issuer that created this project and owns this reply\r\n                                                                                                            // to edit/delete this reply\r\n                                                                                                            (\r\n                                                                                                                user.type === DB_CONST.TYPE_ISSUER\r\n                                                                                                                || (user.type === DB_CONST.TYPE_ADMIN && !user.superAdmin)\r\n                                                                                                            )\r\n                                                                                                            && user.id === projectIssuer.id\r\n                                                                                                            && user.id === reply.repliedBy\r\n                                                                                                                ?\r\n                                                                                                                <FlexView marginTop={16}>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"secondary\" onClick={() => this.onDeleteCommentReply(reply)} style={{marginRight: 10}}>Delete<DeleteIcon fontSize=\"small\" style={{marginLeft: 6}}/>\r\n                                                                                                                    </Button>\r\n                                                                                                                    <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} size=\"small\" color=\"primary\" onClick={() => this.onToggleReplyToComment(comment, reply)}>Edit<EditIcon fontSize=\"small\" style={{marginLeft: 6}}/></Button>\r\n                                                                                                                </FlexView>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n\r\n                                                                                                        {/** Reply input area to edit a reply */}\r\n                                                                                                        {\r\n                                                                                                            replyingToComment !== null\r\n                                                                                                            && replyingToComment.id === comment.id\r\n                                                                                                            && replyEdited !== null\r\n                                                                                                            && replyEdited.id === reply.id\r\n                                                                                                                ?\r\n                                                                                                                <CommentReplyInputArea replyText={replyText} replyEdited={replyEdited} onToggleReplyToComment={this.onToggleReplyToComment} onSubmitCommentReply={this.onSubmitCommentReply} onTextChanged={this.onTextChanged}/>\r\n                                                                                                                :\r\n                                                                                                                null\r\n                                                                                                        }\r\n                                                                                                    </FlexView>\r\n                                                                                                </FlexView>\r\n                                                                                            ))\r\n                                                                                        }\r\n                                                                                    </FlexView>\r\n                                                                            )\r\n                                                                        ))\r\n                                                                    }\r\n                                                                </FlexView>\r\n                                                            )\r\n                                                            :\r\n                                                            user.type !== DB_CONST.TYPE_INVESTOR\r\n                                                                ?\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                </FlexView>\r\n                                                                :\r\n                                                                <FlexView hAlignContent=\"center\" vAlignContent=\"center\" column style={{padding: 30, backgroundColor: colors.kick_starter_background_color}}>\r\n                                                                    <Typography variant=\"body2\">No comments yet</Typography>\r\n                                                                    <FlexView marginTop={25} column hAlignContent=\"center\">\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\" fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR                                                                                  \r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n\r\n                                                                        {\r\n                                                                            this.renderInvestorSelfCertifyReminder()\r\n                                                                        }\r\n                                                                    </FlexView>\r\n                                                                </FlexView>\r\n                                                    )\r\n                                            }\r\n                                        </Col>\r\n\r\n                                        <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}} style={{marginTop: 40}}>\r\n\r\n                                            {\r\n                                                user.type === DB_CONST.TYPE_INVESTOR\r\n                                                    ?\r\n                                                    (\r\n                                                        comments.filter(comment => comment.commentedBy === user.id).length === 0\r\n                                                            ?\r\n                                                            <FlexView column>\r\n                                                                <Typography variant=\"subtitle1\" align=\"left\" style={{marginBottom: 25}}>This is your space to offer support and feedback to the issuer. Your identity will not be shared.</Typography>\r\n\r\n                                                                {/** Post a comment - right hand side column - displayed only if there is at least one comment */}\r\n                                                                {\r\n                                                                    commentsLoaded && comments.length > 0\r\n                                                                        ?\r\n                                                                        <div>\r\n                                                                            <Button size=\"small\" onClick={this.onPostACommentClick} variant=\"outlined\" color=\"inherit\"fullWidth={false}\r\n                                                                                disabled={\r\n                                                                                    utils.isProjectLive(project)\r\n                                                                                    && user.type === DB_CONST.TYPE_INVESTOR\r\n                                                                                }\r\n                                                                            >Post a comment</Button>\r\n                                                                        </div>\r\n                                                                        :\r\n                                                                        null\r\n                                                                }\r\n                                                            </FlexView>\r\n                                                            :\r\n                                                            <Typography variant=\"subtitle1\" align=\"left\">You have already commented on this project opportunity. You can only edit your comment.</Typography>\r\n                                                    )\r\n                                                    :\r\n                                                    <Typography variant=\"subtitle1\" align=\"left\">All the comments from students are displayed anonymously here.</Typography>\r\n                                            }\r\n\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Documents */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_DOCUMENTS\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Supporting documents</Typography>\r\n\r\n                                    {\r\n                                        project.Pitch.supportingDocuments && project.Pitch.supportingDocuments.findIndex(document => !document.hasOwnProperty('removed')) !== -1\r\n                                            ?\r\n                                            <DocumentsDownload documents={project.Pitch.supportingDocuments} shouldShowRiskWarningOnDownload={true}/>\r\n                                            :\r\n                                            <Typography variant=\"body1\" color=\"textSecondary\" style={{marginTop: 35}}>No supporting documents uploaded.</Typography>\r\n                                    }\r\n                                </Col>\r\n                    }\r\n\r\n                    {/** Notes */}\r\n                    {\r\n                        mainBody !== MAIN_BODY_NOTES\r\n                            ?\r\n                            null\r\n                            :\r\n                            this.shouldHideInformation()\r\n                                ?\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\r\n                                    {\r\n                                        user.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            <FlexView column marginTop={30} hAlignContent=\"center\">\r\n                                                <Typography align=\"center\" variant=\"h5\">Restricted to {project.group.displayName} members.</Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            <FlexView column marginTop={30}>\r\n                                                <Typography align=\"left\" variant=\"h5\">Restricted to {project.group.displayName} members.\r\n                                                </Typography>\r\n                                                <NavLink\r\n                                                    to={\r\n                                                        groupUserName\r\n                                                            ?\r\n                                                            ROUTES.VIEW_GROUP_DETAILS.replace(\":groupUserName\", groupUserName).replace(\":groupID\", project.group.groupUserName)\r\n                                                            :\r\n                                                            ROUTES.VIEW_GROUP_DETAILS_INVEST_WEST_SUPER.replace(\":groupID\", project.group.groupUserName)\r\n                                                    }\r\n                                                    style={{marginTop: 10}}>\r\n                                                    <Typography variant=\"body1\">Request access</Typography>\r\n                                                </NavLink>\r\n                                            </FlexView>\r\n                                    }\r\n                                </Col>\r\n                                :\r\n                                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}} style={{marginTop: 30}}>\r\n                                    <Typography variant=\"h5\" color=\"inherit\">Extra information</Typography>\r\n\r\n                                    {/** Financial round */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('financialRound')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Will the project seek investment in the future?:&nbsp;&nbsp;\r\n                                                    <b>\r\n                                                        {project.Pitch.financialRound}\r\n                                                    </b>\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n\r\n                                    {/** Details about earlier fundraising rounds */}\r\n                                    {\r\n                                        !project.Pitch.hasOwnProperty('detailsAboutEarlierFundraisingRounds')\r\n                                            ?\r\n                                            null\r\n                                            :\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Details about earlier fundraising rounds:<br/><br/> {project.Pitch.detailsAboutEarlierFundraisingRounds}</Typography>\r\n                                            </FlexView>\r\n                                    }\r\n\r\n                                    {/** QIB - special news */}\r\n                                    {\r\n                                        project.Pitch.hasOwnProperty('qibSpecialNews')\r\n                                        && (\r\n                                            (\r\n                                                (\r\n                                                    groupProperties\r\n                                                    && groupProperties.groupUserName === \"qib\"\r\n                                                )\r\n                                                && (\r\n                                                    (user.type === DB_CONST.TYPE_ADMIN\r\n                                                        && user.anid === groupProperties.anid)\r\n                                                    || (user.type === DB_CONST.TYPE_ISSUER\r\n                                                        && user.id === project.issuerID)\r\n                                                )\r\n                                            )\r\n                                            ||\r\n                                            (\r\n                                                !groupProperties\r\n                                                && user.type === DB_CONST.TYPE_ADMIN\r\n                                                && user.superAdmin\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView className={css(styles.border_box)} style={{backgroundColor: colors.kick_starter_background_color}} column marginTop={30} vAlignContent=\"center\">\r\n                                                <Typography variant=\"body1\" align=\"left\">Special news that Briony should talk about:\r\n                                                    <br/><br/>\r\n                                                    {project.Pitch.qibSpecialNews}\r\n                                                </Typography>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </Col>\r\n                    }\r\n                </Row>\r\n\r\n            </Container>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Prevent the investors from interacting with the offer if they have not self-certified\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderInvestorSelfCertifyReminder = () => {\r\n        const {\r\n            groupUserName,\r\n            user,\r\n            project\r\n        } = this.props;\r\n\r\n        if (user.type !== DB_CONST.TYPE_INVESTOR) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            utils.isProjectLive(project)\r\n                ?\r\n                <FlexView column marginTop={20}>\r\n                    <NavLink\r\n                        to={\r\n                            groupUserName\r\n                                ?\r\n                                `${ROUTES.DASHBOARD_INVESTOR.replace(\":groupUserName\", groupUserName)}?tab=Profile`\r\n                                :\r\n                                `${ROUTES.DASHBOARD_INVESTOR_INVEST_WEST_SUPER}?tab=Profile`\r\n                        }\r\n                        style={{\r\n                            marginTop: 4\r\n                        }}\r\n                    >\r\n                        <Typography variant=\"body2\"><u>Self certify</u></Typography>\r\n                    </NavLink>\r\n                </FlexView>\r\n                :\r\n                null\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                {\r\n                    this.renderPageContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Function to decide if information should be hidden or not\r\n     */\r\n    shouldHideInformation = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn\r\n        } = this.props;\r\n\r\n        // user is an admin\r\n        if (user.type === DB_CONST.TYPE_ADMIN) {\r\n            // user is a super admin\r\n            if (user.superAdmin) {\r\n                return false;\r\n            }\r\n\r\n            // user is a course admin and is the course that owns the project\r\n            if (user.anid === project.anid) {\r\n                return false;\r\n            }\r\n\r\n            // other course admins must go through the checks of project's visibility\r\n            switch (project.visibility) {\r\n                case DB_CONST.PROJECT_VISIBILITY_PUBLIC:\r\n                    return false;\r\n                case DB_CONST.PROJECT_VISIBILITY_RESTRICTED:\r\n                    return true;\r\n                case DB_CONST.PROJECT_VISIBILITY_PRIVATE:\r\n                    return true;\r\n                default:\r\n                    return true;\r\n            }\r\n        }\r\n        // user is not an admin\r\n        else {\r\n            // should not hide any information if the user is an issuer that created this offer\r\n            if (user.type === DB_CONST.TYPE_ISSUER && user.id === project.issuerID) {\r\n                return false;\r\n            }\r\n\r\n            // if somehow groupsUserIsIn is null, information must be hidden\r\n            if (!groupsUserIsIn) {\r\n                return true;\r\n            }\r\n\r\n            // if the project is not a restricted one, should not hide any information\r\n            if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_RESTRICTED) {\r\n                return false;\r\n            }\r\n\r\n            // user is not the member of the group that posted this offer --> hide information\r\n            // otherwise, should not hide information\r\n            return groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render the status for this project\r\n     */\r\n    renderProjectStatus = () => {\r\n        const {\r\n            project\r\n        } = this.props;\r\n\r\n        let stt = {text: '', color: ''};\r\n\r\n        if (utils.isProjectWaitingToGoLive(project)\r\n            || utils.isProjectRejectedToGoLive(project)\r\n            || utils.isProjectSuccessful(project)\r\n            || utils.isProjectFailed(project)\r\n        ) {\r\n            return (\r\n                <FlexView marginTop={30} marginBottom={30}>\r\n                    <Typography variant=\"body1\" color=\"error\" align=\"left\">\r\n                        {\r\n                            utils.isProjectWaitingToGoLive(project)\r\n                                ?\r\n                                \"Offer is being checked.\"\r\n                                :\r\n                                utils.isProjectRejectedToGoLive(project)\r\n                                    ?\r\n                                    \"Offer has been rejected.\"\r\n                                    :\r\n                                    \"Offer closed.\"\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (project.PrimaryOffer) {\r\n            switch (project.PrimaryOffer.status) {\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Offer is in pledge phase</Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.PrimaryOffer.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\">days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PRIMARY_OFFER_STATUS_EXPIRED:\r\n                    stt.text = \"Pledge has expired.\";\r\n                    stt.color = \"primary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        } else {\r\n            switch (project.Pitch.status) {\r\n                case DB_CONST.PITCH_STATUS_ON_GOING:\r\n                    return (\r\n                        <FlexView column marginTop={30} marginBottom={30}>\r\n                            <Typography variant=\"body2\" color=\"primary\" align=\"left\">Project is live\r\n                            </Typography>\r\n                            <Typography variant=\"h5\" color=\"textPrimary\" align=\"left\">{utils.dateDiff(project.Pitch.expiredDate)}</Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\"\r\n                            >days remaining</Typography>\r\n                        </FlexView>\r\n                    );\r\n                case DB_CONST.PITCH_STATUS_ACCEPTED_CREATE_PRIMARY_OFFER:\r\n                    stt.text = \"Awaiting pledge page to be created.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_REJECTED:\r\n                    stt.text = \"Offer failed as its project was rejected.\";\r\n                    stt.color = \"error\";\r\n                    break;\r\n                case DB_CONST.PITCH_STATUS_WAITING_FOR_ADMIN:\r\n                    stt.text = \"project expired. Awaiting Course Admin review.\";\r\n                    stt.color = \"textSecondary\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <FlexView marginTop={30} marginBottom={30}>\r\n                <Typography align=\"left\" variant=\"body1\" color={stt.color}>{stt.text}</Typography>\r\n            </FlexView>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Check whether voting should be disabled or not\r\n     */\r\n    shouldVoteDisabled = () => {\r\n        const {\r\n            project,\r\n            user,\r\n            groupsUserIsIn,\r\n        } = this.props;\r\n\r\n        // do not let the owner of the project vote for themselves\r\n        // also, do not let the admin vote the project\r\n        if (project.issuerID === firebase.auth().currentUser.uid\r\n            || user.type === DB_CONST.TYPE_ADMIN\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        if (!groupsUserIsIn) {\r\n            return true;\r\n        }\r\n\r\n        // user is not in the group that posted the offer\r\n        if (project.visibility !== DB_CONST.PROJECT_VISIBILITY_PUBLIC\r\n            && groupsUserIsIn.findIndex(group => group.anid === project.anid) === -1\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        // do not let issuers vote\r\n        if (user.type === DB_CONST.TYPE_ISSUER) {\r\n            return true;\r\n        }\r\n\r\n        // do not allow investors to vote when the project has expired\r\n        if (project.Pitch.status !== DB_CONST.PITCH_STATUS_ON_GOING) {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Displaying votes (number or percentage depending on the type of user who is viewing it)\r\n     *\r\n     * If an investor is viewing it, percentage should be displayed.\r\n     *\r\n     * If an issuer or admin is viewing it, number should be displayed.\r\n     */\r\n    displayVote = type => {\r\n        const {\r\n            // user,\r\n            votes\r\n        } = this.props;\r\n\r\n        let yesVotes = 0;\r\n        let noVotes = 0;\r\n\r\n        votes.forEach(vote => {\r\n            const voted = vote.voted;\r\n            if (voted !== '') {\r\n                if (voted) {\r\n                    yesVotes += 1;\r\n                } else {\r\n                    noVotes += 1;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (type) {\r\n            return yesVotes;\r\n        } else {\r\n            return noVotes\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Get investor vote\r\n *\r\n * @param votes\r\n * @param user\r\n * @returns {null|*}\r\n */\r\nconst getInvestorVote = (votes, user) => {\r\n    if (votes.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    let investorVoteIndex = votes.findIndex(vote => vote.investorID === user.id);\r\n    // investor has voted\r\n    if (investorVoteIndex !== -1) {\r\n        return votes[investorVoteIndex];\r\n    }\r\n\r\n    return null;\r\n};\r\n\r\n/**\r\n * Comment dialog - displayed when the Investor clicks on the Comment button\r\n */\r\nclass CommentDialog extends Component {\r\n\r\n    onClose = () => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    onCommentTextChanged = event => {\r\n        this.props.onCommentTextChanged(event);\r\n    };\r\n\r\n    onSubmitCommentClick = () => {\r\n        this.props.onSubmitCommentClick();\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            open,\r\n            project,\r\n            commentText,\r\n            commentSubmitClick\r\n        } = this.props;\r\n\r\n        if (!project) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Dialog fullWidth open={open} onClose={this.onClose}>\r\n                <DialogTitle>Make a comment</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText align=\"left\">Please enter your comment here.</DialogContentText>\r\n                    <InputBase error={commentText.trim().length === 0 && commentSubmitClick} name=\"commentText\" value={commentText} onChange={this.onCommentTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                </DialogContent>\r\n                <DialogActions style={{paddingTop: 20, paddingBottom: 20, paddingRight: 24}}>\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" onClick={this.onClose}>Cancel</Button>\r\n                    <Button disabled={commentText.trim().length > 0 && commentSubmitClick} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" onClick={this.onSubmitCommentClick}>Post comment</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Reply input area\r\n */\r\nclass CommentReplyInputArea extends Component {\r\n\r\n    onToggleReplyToComment = (comment, replyEdited) => {\r\n        this.props.onToggleReplyToComment(comment, replyEdited);\r\n    }\r\n\r\n    onSubmitCommentReply = () => {\r\n        this.props.onSubmitCommentReply();\r\n    }\r\n\r\n    onTextChanged = event => {\r\n        this.props.onTextChanged(event);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            replyText\r\n        } = this.props;\r\n\r\n        return (\r\n            <FlexView column marginTop={30} width=\"auto\">\r\n                <InputBase name=\"replyText\" value={replyText} onChange={this.onTextChanged} rows={5} fullWidth multiline className={css(styles.border_box)}/>\r\n                <FlexView marginTop={18} width=\"100%\" hAlignContent=\"right\">\r\n                    <Button size=\"small\" color=\"default\" variant=\"text\" className={css(sharedStyles.no_text_transform)} onClick={() => this.onToggleReplyToComment(null, null)}>Cancel</Button>\r\n                    <Button disabled={replyText.trim().length === 0} style={{marginLeft: 15}} size=\"small\" color=\"inherit\" variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={this.onSubmitCommentReply}>Submit</Button>\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProjectDetailsMain);\r\n\r\n\r\nconst styles = StyleSheet.create({\r\n    gray_text: {\r\n        color: colors.gray_700\r\n    },\r\n\r\n    faq_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        boxShadow: 'none',\r\n        backgroundColor: colors.white,\r\n        marginBottom: 12,\r\n        ':hover': {\r\n            backgroundColor: colors.gray_50\r\n        }\r\n    },\r\n\r\n    border_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 14\r\n    },\r\n\r\n    admin_state_control_box: {\r\n        border: `1px solid ${colors.kick_starter_gray_box_border}`,\r\n        padding: 24,\r\n        backgroundColor: colors.gray_100\r\n    },\r\n\r\n    sticky_body_sections_bar: {\r\n        position: \"sticky\",\r\n        top: 0,\r\n        backgroundColor: colors.white,\r\n        zIndex: 1\r\n    },\r\n\r\n    main_body_section: {\r\n        minHeight: 600,\r\n        padding: 15,\r\n        backgroundColor: colors.white\r\n    },\r\n\r\n    black_text: {\r\n        color: colors.black\r\n    }\r\n});","import React, {Component} from 'react';\nimport {Typography} from '@material-ui/core';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport HashLoader from 'react-spinners/HashLoader';\n\nimport {connect} from 'react-redux';\n\nimport './SystemPublicPagesSharedCSS.scss';\n\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as utils from '../../utils/utils';\nimport * as colors from '../../values/colors';\n\nconst mapStateToProps = state => {\n    return {}\n};\n\nclass PrivacyPolicyPage extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            clubAttributes: null,\n            clubAttributesLoaded: false\n        }\n    }\n\n    componentDidMount() {\n        realtimeDBUtils\n            .loadClubAttributes()\n            .then(clubAttributes => {\n                this.setState({\n                    clubAttributes: clubAttributes,\n                    clubAttributesLoaded: true\n                });\n            });\n    }\n\n    render() {\n        const {\n            clubAttributes,\n            clubAttributesLoaded\n        } = this.state;\n\n        return (\n            <Container\n                fluid\n                style={{\n                    padding: 0\n                }}\n            >\n                {\n                    !clubAttributesLoaded\n                        ?\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <FlexView\n                                    width=\"100%\"\n                                    marginTop={30}\n                                    hAlignContent=\"center\"\n                                >\n                                    <HashLoader\n                                        color={colors.primaryColor}\n                                    />\n                                </FlexView>\n                            </Col>\n                        </Row>\n                        :\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <Row\n                                    noGutters\n                                    style={{\n                                        backgroundColor: colors.gray_100\n                                    }}\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingTop: 30,\n                                            paddingBottom: 30,\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        <Typography\n                                            variant=\"h5\"\n                                            align=\"left\"\n                                        >\n                                            <b>{\"Privacy policy\".toUpperCase()}</b>\n                                        </Typography>\n                                    </Col>\n                                </Row>\n\n                                <Row\n                                    noGutters\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        {\n                                            !clubAttributes.privacyPolicy\n                                                ?\n                                                null\n                                                :\n                                                <FlexView\n                                                    column\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.privacyPolicy.ops)}}\n                                                    marginTop={35}\n                                                />\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                }\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(PrivacyPolicyPage);","import React, {Component} from 'react';\nimport {Typography} from '@material-ui/core';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport HashLoader from 'react-spinners/HashLoader';\n\nimport {connect} from 'react-redux';\n\nimport './SystemPublicPagesSharedCSS.scss';\n\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as utils from '../../utils/utils';\nimport * as colors from '../../values/colors';\n\nconst mapStateToProps = state => {\n    return {}\n};\n\nclass TermsOfUsePage extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            clubAttributes: null,\n            clubAttributesLoaded: false\n        }\n    }\n\n    componentDidMount() {\n        realtimeDBUtils\n            .loadClubAttributes()\n            .then(clubAttributes => {\n                this.setState({\n                    clubAttributes: clubAttributes,\n                    clubAttributesLoaded: true\n                });\n            });\n    }\n\n    render() {\n        const {\n            clubAttributes,\n            clubAttributesLoaded\n        } = this.state;\n\n        return (\n            <Container\n                fluid\n                style={{\n                    padding: 0\n                }}\n            >\n                {\n                    !clubAttributesLoaded\n                        ?\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <FlexView\n                                    width=\"100%\"\n                                    marginTop={30}\n                                    hAlignContent=\"center\"\n                                >\n                                    <HashLoader\n                                        color={colors.primaryColor}\n                                    />\n                                </FlexView>\n                            </Col>\n                        </Row>\n                        :\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <Row\n                                    noGutters\n                                    style={{\n                                        backgroundColor: colors.gray_100\n                                    }}\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingTop: 30,\n                                            paddingBottom: 30,\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        <Typography\n                                            variant=\"h5\"\n                                            align=\"left\"\n                                        >\n                                            <b>{\"Terms of use\".toUpperCase()}</b>\n                                        </Typography>\n                                    </Col>\n                                </Row>\n\n                                <Row\n                                    noGutters\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        {\n                                            !clubAttributes.termsOfUse\n                                                ?\n                                                null\n                                                :\n                                                <FlexView\n                                                    column\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.termsOfUse.ops)}}\n                                                    marginTop={35}\n                                                />\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                }\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(TermsOfUsePage);","import React, {Component} from 'react';\nimport {Typography} from '@material-ui/core';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport HashLoader from 'react-spinners/HashLoader';\n\nimport {connect} from 'react-redux';\n\nimport './SystemPublicPagesSharedCSS.scss';\n\nimport * as utils from '../../utils/utils';\nimport * as colors from '../../values/colors';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\n\nconst mapStateToProps = state => {\n    return {}\n};\n\nclass RiskWarningPage extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            clubAttributes: null,\n            clubAttributesLoaded: false\n        }\n    }\n\n    componentDidMount() {\n        realtimeDBUtils\n            .loadClubAttributes()\n            .then(clubAttributes => {\n                this.setState({\n                    clubAttributes: clubAttributes,\n                    clubAttributesLoaded: true\n                });\n            });\n    }\n\n    render() {\n        const {\n            clubAttributes,\n            clubAttributesLoaded\n        } = this.state;\n\n        return (\n            <Container\n                fluid\n                style={{\n                    padding: 0\n                }}\n            >\n                {\n                    !clubAttributesLoaded\n                        ?\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <FlexView\n                                    width=\"100%\"\n                                    marginTop={30}\n                                    hAlignContent=\"center\"\n                                >\n                                    <HashLoader\n                                        color={colors.primaryColor}\n                                    />\n                                </FlexView>\n                            </Col>\n                        </Row>\n                        :\n                        <Row noGutters>\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <Row\n                                    noGutters\n                                    style={{\n                                        backgroundColor: colors.gray_100\n                                    }}\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingTop: 30,\n                                            paddingBottom: 30,\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        <Typography\n                                            variant=\"h5\"\n                                            align=\"left\"\n                                        >\n                                            <b>{\"Risk warning\".toUpperCase()}</b>\n                                        </Typography>\n                                    </Col>\n                                </Row>\n\n                                <Row noGutters>\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        {\n                                            !clubAttributes.riskWarning\n                                                ?\n                                                null\n                                                :\n                                                <FlexView\n                                                    column\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.riskWarning.ops)}}\n                                                    marginTop={35}\n                                                />\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                }\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(RiskWarningPage);","import React, {Component} from 'react';\nimport {Typography} from '@material-ui/core';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport HashLoader from 'react-spinners/HashLoader';\n\nimport {connect} from 'react-redux';\n\nimport './SystemPublicPagesSharedCSS.scss';\n\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as utils from '../../utils/utils';\nimport * as colors from '../../values/colors';\n\nconst mapStateToProps = state => {\n    return {}\n};\n\nclass CreatePitchTermsAndConditionsPage extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            clubAttributes: null,\n            clubAttributesLoaded: false\n        }\n    }\n\n    componentDidMount() {\n        realtimeDBUtils\n            .loadClubAttributes()\n            .then(clubAttributes => {\n                this.setState({\n                    clubAttributes: clubAttributes,\n                    clubAttributesLoaded: true\n                });\n            });\n    }\n\n    render() {\n        const {\n            clubAttributes,\n            clubAttributesLoaded\n        } = this.state;\n\n        return (\n            <Container\n                fluid\n                style={{\n                    padding: 0\n                }}\n            >\n                {\n                    !clubAttributesLoaded\n                        ?\n                        <Row noGutters>\n                            <Col xs={12} sm={12} md={12} lg={12}>\n                                <FlexView width=\"100%\" marginTop={30} hAlignContent=\"center\">\n                                    <HashLoader color={colors.primaryColor}/>\n                                </FlexView>\n                            </Col>\n                        </Row>\n                        :\n                        <Row noGutters>\n                            <Col xs={12} sm={12} md={12} lg={12}>\n                                <Row noGutters style={{backgroundColor: colors.gray_100}}>\n                                    <Col xs={12} sm={12} md={12} lg={{span: 8, offset: 2}} style={{paddingTop: 30, paddingBottom: 30, paddingLeft: 12, paddingRight: 12}}>\n                                        <Typography variant=\"h5\" align=\"left\">\n                                            <b>{\"Create project terms and conditions\".toUpperCase()}</b>\n                                        </Typography>\n                                    </Col>\n                                </Row>\n\n                                <Row\n                                    noGutters\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        {\n                                            !clubAttributes.createPitchTermsAndConditions\n                                                ?\n                                                null\n                                                :\n                                                <FlexView\n                                                    column\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.createPitchTermsAndConditions.ops)}}\n                                                    marginTop={35}\n                                                />\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                }\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(CreatePitchTermsAndConditionsPage);","import React, {Component} from 'react';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport {\r\n    Button,\r\n    FormControl,\r\n    FormHelperText,\r\n    FormLabel,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport FlexView from 'react-flexview';\r\nimport {css} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport * as colors from '../../values/colors';\r\nimport * as emailUtils from '../../utils/emailUtils';\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\nconst subjects = [\r\n    \"I am an investor\",\r\n    \"I am looking to raise funds\",\r\n    \"I am a potential partner or supplier\",\r\n    \"Other query\"\r\n];\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded,\r\n        authenticating: state.auth.authenticating,\r\n\r\n        clubAttributes: state.manageClubAttributes.clubAttributes,\r\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\r\n\r\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\r\n    }\r\n};\r\n\r\nconst initState = {\r\n    email: '',\r\n    subject: '-',\r\n    name: '',\r\n    phone: '',\r\n    description: '',\r\n\r\n    submitClick: false,\r\n    sending: false,\r\n    error: false,\r\n\r\n    hasSetData: false\r\n};\r\n\r\nclass ContactUs extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            ...initState\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.CONTACT_US : ROUTES.CONTACT_US_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            user,\r\n            userLoaded,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            if (userLoaded) {\r\n                if (user) {\r\n                    if (!this.state.hasSetData) {\r\n                        this.setState({\r\n                            email: user.email,\r\n                            name: user.firstName + \" \" + user.lastName,\r\n                            hasSetData: true\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Submit button is clicked\r\n     */\r\n    onSubmitClick = event => {\r\n        event.preventDefault();\r\n\r\n        const {\r\n            clubAttributes,\r\n            groupProperties,\r\n\r\n            user,\r\n\r\n            setFeedbackSnackbarContent\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description\r\n        } = this.state;\r\n\r\n        if (email.trim().length === 0\r\n            || subject === \"-\"\r\n            || name.trim().length === 0\r\n            || description.trim().length === 0\r\n        ) {\r\n            this.setState({\r\n                submitClick: true\r\n            });\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            sending: true\r\n        });\r\n\r\n        let groupID = groupProperties ? groupProperties.anid : \"InvestWestSupport\";\r\n\r\n        emailUtils\r\n            .sendEmail({\r\n                serverURL: clubAttributes.serverURL,\r\n                emailType: emailUtils.EMAIL_ENQUIRY,\r\n                data: {\r\n                    sender: email.toLowerCase(),\r\n                    receiver: groupID,\r\n                    subject,\r\n                    description,\r\n                    senderName: name,\r\n                    senderPhone: phone\r\n                }\r\n            })\r\n            .then(() => {\r\n                this.setState({\r\n                    ...initState\r\n                });\r\n\r\n                setFeedbackSnackbarContent(\r\n                    \"Your email has been successfully sent.\",\r\n                    \"primary\",\r\n                    \"bottom\"\r\n                );\r\n\r\n                realtimeDBUtils\r\n                    .logContactUsEnquiry({\r\n                        userID: user ? user.id : null,\r\n                        anid: !groupProperties ? \"Teacher super admin\" : groupProperties.anid,\r\n                        email: email.toLowerCase(),\r\n                        name,\r\n                        phone,\r\n                        subject,\r\n                        description\r\n                    })\r\n                    .then(enquiryID => {\r\n                        // track activity for authenticated user\r\n                        if (user) {\r\n                            realtimeDBUtils\r\n                                .trackActivity({\r\n                                    userID: user.id,\r\n                                    activityType: DB_CONST.ACTIVITY_TYPE_POST,\r\n                                    interactedObjectLocation: DB_CONST.CONTACT_US_ENQUIRIES_CHILD,\r\n                                    interactedObjectID: enquiryID,\r\n                                    activitySummary: realtimeDBUtils.ACTIVITY_SUMMARY_TEMPLATE_MADE_AN_ENQUIRY.replace(\"%group%\", groupProperties.displayName)\r\n                                });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        // handle error\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                this.setState({\r\n                    error: true,\r\n                    sending: false\r\n                });\r\n            });\r\n    };\r\n\r\n    /**\r\n     * Handle text changed\r\n     *\r\n     * @param event\r\n     */\r\n    onTextChanged = event => {\r\n        this.setState({\r\n            [event.target.name]: event.target.value\r\n        });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            shouldLoadOtherData,\r\n            groupProperties,\r\n            groupPropertiesLoaded,\r\n\r\n            authenticating,\r\n            userLoaded,\r\n            clubAttributesLoaded\r\n        } = this.props;\r\n\r\n        const {\r\n            email,\r\n            subject,\r\n            name,\r\n            phone,\r\n            description,\r\n            submitClick,\r\n            sending\r\n        } = this.state;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    marginTop={30}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={colors.primaryColor}\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded || !clubAttributesLoaded) {\r\n            return (\r\n                <FlexView\r\n                    width=\"100%\"\r\n                    marginTop={20}\r\n                    hAlignContent=\"center\"\r\n                >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{padding: 0}}>\r\n                <Row noGutters style={{padding: 14}}>\r\n                    <Col xs={12} sm={12} md={{span: 11, offset: 1}} lg={{span: 5, offset: 2}}>\r\n                        <form onSubmit={this.onSubmitClick}>\r\n                            <FlexView column marginTop={40}>\r\n                                <Typography variant=\"h4\">\r\n                                    <b>Contact Us</b>\r\n                                </Typography>\r\n\r\n                                <FlexView width=\"100%\" marginTop={40}>\r\n                                    <FormControl fullWidth required error={submitClick && email.trim().length === 0}>\r\n                                        <FormLabel> Your email address</FormLabel>\r\n                                        <TextField value={email} name=\"email\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && email.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth required error={submitClick && subject === \"-\"}>\r\n                                        <FormLabel>\r\n                                            Subject\r\n                                        </FormLabel>\r\n                                        <Select name=\"subject\" value={subject} variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} input={<OutlinedInput/>} error={submitClick && subject === \"-\"} >\r\n                                            <MenuItem value={\"-\"} key={-1}>\r\n                                                -\r\n                                            </MenuItem>\r\n                                            {\r\n                                                subjects.map((subject, index) => (\r\n                                                    <MenuItem\r\n                                                        value={subject}\r\n                                                        key={index}\r\n                                                    >\r\n                                                        {subject}\r\n                                                    </MenuItem>\r\n                                                ))\r\n                                            }\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Name\r\n                                        </FormLabel>\r\n                                        <TextField value={name} name=\"name\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged} error={submitClick && name.trim().length === 0}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n\r\n                                <FlexView width=\"100%\" marginTop={25}>\r\n                                    <FormControl fullWidth>\r\n                                        <FormLabel>\r\n                                            Phone number\r\n                                        </FormLabel>\r\n                                        <TextField value={phone} name=\"phone\" variant=\"outlined\" margin=\"dense\" onChange={this.onTextChanged}/>\r\n                                    </FormControl>\r\n                                </FlexView>\r\n                            </FlexView>\r\n\r\n                            <FlexView width=\"100%\" marginTop={25}>\r\n                                <FormControl fullWidth required error={submitClick && description.trim().length === 0}>\r\n                                    <FormLabel>\r\n                                        Description\r\n                                    </FormLabel>\r\n                                    <TextField value={description} name=\"description\" variant=\"outlined\" margin=\"dense\" multiline rows={5} rowsMax={5} onChange={this.onTextChanged} error={submitClick && description.trim().length === 0}/>\r\n                                    <FormHelperText>\r\n                                        Please enter the details of your request. A member of our support team will respond as soon as possible.\r\n                                    </FormHelperText>\r\n                                </FormControl>\r\n                            </FlexView>\r\n\r\n                            {\r\n                                sending\r\n                                    ?\r\n                                    <FlexView marginTop={30} width=\"100%\" hAlignContent=\"center\">\r\n                                        <HashLoader\r\n                                            color={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                        />\r\n                                    </FlexView>\r\n                                    :\r\n                                    null\r\n                            }\r\n\r\n                            <Row\r\n                            >\r\n                                <Col xs={12} sm={12} md={4} lg={4} style={{width: \"100%\", marginTop: 50}}>\r\n                                    <FormControl fullWidth>\r\n                                        <Button type=\"submit\" variant=\"contained\" className={css(sharedStyles.no_text_transform)} color=\"primary\" fullWidth>\r\n                                            Submit\r\n                                        </Button>\r\n                                    </FormControl>\r\n                                </Col>\r\n                            </Row>\r\n                        </form>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Row noGutters>\r\n                    <Col xs={12} sm={12} md={12} lg={12}>\r\n                        <Footer/>\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ContactUs);","import React, {Component} from 'react';\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Paper,\r\n    Tab,\r\n    Tabs,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport RestrictedIcon from '@material-ui/icons/VpnLock';\r\nimport PrivateIcon from '@material-ui/icons/LockOutlined';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ContactSupportIcon from '@material-ui/icons/ContactSupport';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\r\n\r\nimport './SystemPublicPagesSharedCSS.scss';\r\n\r\nimport * as ROUTES from '../../router/routes';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\nimport * as colors from '../../values/colors';\r\nimport {AUTH_SUCCESS} from '../signin/Signin';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupUserName: state.manageGroupFromParams.groupUserName,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        authStatus: state.auth.authStatus,\r\n        authenticating: state.auth.authenticating,\r\n        user: state.auth.user,\r\n        userLoaded: state.auth.userLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\r\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\r\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork())\r\n    }\r\n};\r\n\r\nclass HelpPage extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            helpType: DB_CONST.TYPE_INVESTOR,\r\n            autoSwitching: true,\r\n            expandedPanel: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        const {\r\n            setGroupUserNameFromParams,\r\n            setExpectedAndCurrentPathsForChecking,\r\n\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        const match = this.props.match;\r\n\r\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\r\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.HELP : ROUTES.HELP_INVEST_WEST_SUPER, match.path);\r\n\r\n        loadAngelNetwork();\r\n\r\n        this.autoSwitchToAppropriateHelpTab();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        const {\r\n            groupPropertiesLoaded,\r\n            shouldLoadOtherData,\r\n            loadAngelNetwork\r\n        } = this.props;\r\n\r\n        loadAngelNetwork();\r\n\r\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\r\n            this.autoSwitchToAppropriateHelpTab();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Switch to the appropriate Help tab based on user's type\r\n     */\r\n    autoSwitchToAppropriateHelpTab = () => {\r\n        const {\r\n            user\r\n        } = this.props;\r\n\r\n        const {\r\n            helpType,\r\n            autoSwitching\r\n        } = this.state;\r\n\r\n        if (!user) {\r\n            return;\r\n        }\r\n\r\n        if (user.type !== DB_CONST.TYPE_ADMIN) {\r\n            // when the user just opened this Help page\r\n            // detect if the type of the user to automatically switch the Help tab\r\n            // this should only happen once\r\n            if (user.type !== helpType) {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        helpType: user.type,\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            } else {\r\n                if (autoSwitching) {\r\n                    this.setState({\r\n                        autoSwitching: false\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Handle tab changed\r\n     *\r\n     * @param event\r\n     * @param newValue\r\n     */\r\n    handleTabChanged = (event, newValue) => {\r\n        this.setState({\r\n            helpType: newValue,\r\n            expandedPanel: false\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Handle panel changed\r\n     *\r\n     * @param panel\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    handleExpandPanel = panel => (event, isExpanded) => {\r\n        this.setState({\r\n            expandedPanel: isExpanded ? panel : false\r\n        });\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            helpType\r\n        } = this.state;\r\n\r\n        const {\r\n            groupProperties,\r\n            shouldLoadOtherData,\r\n            groupPropertiesLoaded,\r\n\r\n            authStatus,\r\n            authenticating,\r\n            user,\r\n            userLoaded\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader color={colors.primaryColor}/>\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (!shouldLoadOtherData) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        if (authenticating || !userLoaded) {\r\n            return (\r\n                <FlexView marginTop={30} hAlignContent=\"center\">\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            );\r\n        }\r\n\r\n        if (authStatus !== AUTH_SUCCESS\r\n            || !user\r\n        ) {\r\n            return <PageNotFoundWhole/>;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{paddingLeft: 0, paddingRight: 0, paddingBottom: 50}}>\r\n                <Row noGutters style={{marginTop: 40, marginBottom: 60}}>\r\n                    <Col xs={12} sm={12} md={{span: 6, offset: 3}} lg={{span: 4, offset: 4}}>\r\n                        <FlexView width=\"100%\" hAlignContent=\"center\" marginBottom={20}>\r\n                            <ContactSupportIcon\r\n                                style={{\r\n                                    fontSize: \"7em\",\r\n                                    color:\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                }}\r\n                            />\r\n                        </FlexView>\r\n                        <Typography variant=\"h4\" align=\"center\" color=\"primary\">\r\n                            How can we help you?\r\n                        </Typography>\r\n                        {\r\n                            user.type === DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView width=\"100%\" hAlignContent=\"center\" marginTop={40}>\r\n                                    <Paper elevation={2} style={{width: \"100%\"}}>\r\n                                        <Tabs indicatorColor=\"primary\" textColor=\"primary\" variant=\"fullWidth\" value={helpType} onChange={this.handleTabChanged}>\r\n                                            <Tab value={DB_CONST.TYPE_INVESTOR} label=\"Investor\" className={css(sharedStyles.no_text_transform)}/>\r\n                                            <Tab value={DB_CONST.TYPE_ISSUER} label=\"Issuer\" className={css(sharedStyles.no_text_transform)}/>\r\n                                        </Tabs>\r\n                                    </Paper>\r\n                                </FlexView>\r\n                        }\r\n                    </Col>\r\n                </Row>\r\n\r\n                {\r\n                    user.type === DB_CONST.TYPE_ADMIN\r\n                        ?\r\n                        this.renderGroupAdminHelp()\r\n                        :\r\n                        helpType === DB_CONST.TYPE_INVESTOR\r\n                            ?\r\n                            this.renderInvestorHelp()\r\n                            :\r\n                            this.renderIssuerHelp()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Render group admin help\r\n     */\r\n    renderGroupAdminHelp = () => {\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n        /** Group admin guide  */\r\n        return (\r\n            <Container>\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_navigating_invest_west'} onChange={this.handleExpandPanel('group_admin_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                    Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                    tutorial showing the key functions of the site.\r\n                                </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the My dashboard button at the top right of the page. This will take you to your unique dashboard where you can access all the sites functions.</Typography>\r\n                                    <img alt=\"group_admin_help_my_dashboard\" src={require(\"../../img/group_admin_help_my_dashboard.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons; home, settings, change password, audit log, explore projects, explore courses, forums, help and logout</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/group_admin_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView\r\n                                    column\r\n                                >\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your course. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"group_admin_help_notifications\" src={require(\"../../img/group_admin_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Home page */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.4. Home page</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The home page will display all the course management functions, from this page you can manage course members, manage access requests to your course, manage the courses projects and manage course admins.</Typography>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Manage group users */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_user_management'} onChange={this.handleExpandPanel('group_admin_help_user_management')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. User management\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The manage course members tab is used to manage exiting members, invite new users and view details of the courses users. To access this function, click on the manage course members tab from the home page. From this section you can view all user's names, emails, user types, the date invited/requested to join, registration status and the date they registered.</Typography>\r\n                                <img alt=\"group_admin_help_user_management\" src={require(\"../../img/group_admin_help_user_management.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Inviting a new user */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Inviting a new user</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage course members tab you can invite a new user. You will need the users title, first name, last name, email and user type. To invite a new user, click on the Invite new user button.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_01\" src={require(\"../../img/group_admin_help_inviting_a_new_user_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">After clicking the button, enter the users details and select Issuer or Investor. An Issuer is a business owner or entrepreneur who will create their own project. An Investor is someone who is looking to invest in projects and will view projects. Click the send button to send the invite to the users email. If the user does not receive the invitation, you can resend the invite (see resending invites in section 2.2). You may need to ask users to check their junk or spam folder.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_02\" src={require(\"../../img/group_admin_help_inviting_a_new_user_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Resending invites */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Resending invites</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">From the manage course members tab you can resend invites to users who have previously been invited but have not yet registered.  Once in the invitation and registrations tab select the user who has already been invited and click on the resend button. Please remind any user who has not received their invites to check their junk or spam folders in their email account.</Typography>\r\n                                    <img alt=\"group_admin_help_inviting_a_new_user_03\" src={require(\"../../img/group_admin_help_inviting_a_new_user_03.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 3. Manage access requests */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_access_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_access_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Manage access requests\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The access request tab is used to accept or reject investors from joining your course. Other users on the platform can request to join your course to gain access to your courses projects. Click on the access requests tab and this will show any pending requests, from there you can accept or reject individual requests.</Typography>\r\n                                <img alt=\"group_admin_help_manage_access_requests\" src={require(\"../../img/group_admin_help_manage_access_requests.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 4. Manage group members */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_requests'} onChange={this.handleExpandPanel('group_admin_help_manage_group_requests')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Manage course members\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>To manage all members in your course, click manage course members from the home page. The user management page allows you to view and modify course members information; be aware you can only edit the information for invited course members and not external course members who joined the course through an access request.  To view a users information/activity or edit their details click on their name in the list or alternatively you can search by email address.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_requests\" src={require(\"../../img/group_admin_help_manage_group_members.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>If a user needs to be blocked or removed from the platform, please contact us support@investwest.online for assistance.</Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Manage offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_offers'} onChange={this.handleExpandPanel('group_admin_help_manage_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Manage projects\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>From the manage projects tab, you can view and edit all your courses projects. The dropdown will show the projects title, its creator, its fundraising goal, and status.</Typography>\r\n\r\n                                {/** Viewing an project */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Viewing an project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view an project, open the manage projects tab and click on the title of the project or you can also search for an project by name.</Typography>\r\n                                    <img alt=\"group_admin_help_viewing_an_offer\" src={require(\"../../img/group_admin_help_viewing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Accepting and rejecting an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Accepting and rejecting an project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>The Invest West process starts with an issuer creating an project. The new project will appear in your manage projects table, the bell icon will also notify you that an project requires your attention. Newly submitted projects show a status of Submitted. Awaiting course admin review. From this section you can view each project by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer\" src={require(\"../../img/group_admin_help_accept_reject_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>To accept or reject the project scroll down to the bottom of the page and click on the control phases tab. From here you can change the projects default visibility (see what the different levels of visibility mean in section 10.1) as well as accept or reject the project.</Typography>\r\n                                    <img alt=\"group_admin_help_accept_reject_offer_2\" src={require(\"../../img/group_admin_help_accept_reject_2_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.3. Editing an project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a course admin you can edit an projects details if necessary. This can be done in the manage projects tab. To edit an project, you first need to view it by clicking on its title.</Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_01\" src={require(\"../../img/group_admin_help_edit_offer_01.png\").default} className={css(styles.image_style)}\r\n                                    />\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        Then you can click on the edit button on the \"Edit project\" button.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_edit_offer_02\" src={require(\"../../img/group_admin_help_edit_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Temporarily closing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.4. Temporarily closing an project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">As a course admin you can temporarily close any project (stop it being visible to any users). This can be done in the manage projects tab. Select the title of the project (see viewing an project in section 5.1), scroll down the bottom of the page, then click on control phases tab and press the Close temporally button.</Typography>\r\n                                    <img alt=\"group_admin_help_temporarily_closing_an_offer\" src={require(\"../../img/group_admin_help_temporarily_closing_an_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Reopening a temporarily closed offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>5.5. Reopening a temporarily closed project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        If an project has been temporally closed (see temporarily closing an project in\r\n                                        section 5.4), it can be re-opened. This can be done in the manage investment\r\n                                        opportunities tab. Select the title of the project (see viewing an project in\r\n                                        section 5.1), from here scroll down the bottom of the page, then click on\r\n                                        control phases tab and press the \"Open again\" button. Please note, an project can\r\n                                        only be re-opened if it is temporarily closed.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_reopening_a_temporarily_closed_offer\" src={require(\"../../img/group_admin_help_reopening_a_temporarily_closed_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Manage group admins */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_manage_group_admins'} onChange={this.handleExpandPanel('group_admin_help_manage_group_admins')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Manage course admins\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">This page allows you to add another Course Admin to the Course. Please be advised, only add course admins if essential as each new admin will have full administer rights to the course. To add a course admin, click on the mange course admins tab, then click on the Add new course admin button and enter their email address and click the Add button.</Typography>\r\n                                <img alt=\"group_admin_help_manage_group_admins\" src={require(\"../../img/group_admin_help_manage_group_admins.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 7. Explore offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_offers'} onChange={this.handleExpandPanel('group_admin_help_explore_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Exploring projects\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore projects made by other issuers click on the Explore projects button in the navigation bar. This page provides a view how Investors view projects. This page can also be used to give issuers and course admins an idea of how projects are structured.</Typography>\r\n                                <img alt=\"group_admin_help_explore_offers\" src={require(\"../../img/group_admin_help_explore_offers.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Explore groups */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_explore_groups'} onChange={this.handleExpandPanel('group_admin_help_explore_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Exploring courses\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other groups, click on the Explore courses button in the navigation bar. </Typography>\r\n                                <img alt=\"group_admin_help_explore_groups\" src={require(\"../../img/group_admin_help_explore_groups.png\").default} className={css(styles.image_style)}\r\n                                />\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 9. Resources */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_resources'} onChange={this.handleExpandPanel('group_admin_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    9. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore resource on Invest West, click on the Resources button in the navigation bar. From this page you can view a range of information and services applicable to you and your users.</Typography>\r\n                                <img alt=\"group_admin_help_resources\" src={require(\"../../img/group_admin_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 10. Settings */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'group_admin_help_settings'} onChange={this.handleExpandPanel('group_admin_help_settings')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    10. Settings\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The settings page allows you to configure the courses settings. This page allows you to add a course description, change the courses website, alter the colour scheme, manage the default visibility of the course, configure issuer settings and edit the courses FAQs. This page can be accessed by clicking on the settings button in the navigation bar. To view the courses details from the perspective of an external user not in your course click on the View courses public page button.</Typography>\r\n                                <img alt=\"group_admin_help_settings\" src={require(\"../../img/group_admin_help_settings.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Visibility level */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>10.1. Visibility level</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>As the course admin you can set the visibility level for offers created by your course. With Invest west having multiple courses the level of visibility is used to define which of the courses student projects are visible to other users.</Typography>\r\n\r\n                                    {/** Public */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.1. Public</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting Public allows all Invest West users (including users who are not a member of your course) to see an projects full details and also interact with the project. Here is an example of a public project, where all information on the project is visible.</Typography>\r\n                                        <img alt=\"group_admin_help_public_offer\" src={require(\"../../img/group_admin_help_public_offer.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>When an project is public all investors can also see the projects, project deck, documents, comments and extra information.</Typography>\r\n                                    </FlexView>\r\n\r\n                                    {/** Restricted */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.2. Restricted</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">Selecting Restricted allows all Invest West users (including users who are not a member of your course) to see the projects basic information only. Only member of your course will be able to see the projects full details. Here is an example of the same project as above but restricted. Investors who are not members of your course will not be able to see the projects, project deck, documents, comments or extra information. If they want to see this, they will be prompted to join your course.</Typography>\r\n                                        <img alt=\"group_admin_help_restricted_offer\" src={require(\"../../img/group_admin_help_restricted_offer.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n\r\n                                    {/** Private */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                            <b>10.1.3. Private</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            Private allows only members of your course to see the project's information. No\r\n                                            external user will be able to view the project.\r\n                                        </Typography>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 11. Audit log */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_audit_log'} onChange={this.handleExpandPanel('group_admin_help_audit_log')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    11. Audit log\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">The Audit Log is used to monitor all the activities made by the admins of the course.</Typography>\r\n                                <img alt=\"group_admin_help_audit_log\" src={require(\"../../img/group_admin_help_audit_log.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 12. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_password'} onChange={this.handleExpandPanel('group_admin_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    12. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the Forgot your password? button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                <img alt=\"group_admin_help_password\" src={require(\"../../img/group_admin_help_password.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                {/** Changing password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\">\r\n                                        <b>12.1. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To change your password, click on the \"Change password\" button in the navigation\r\n                                        bar. You will need to enter your old password then your new password twice.\r\n                                    </Typography>\r\n                                    <img alt=\"group_admin_help_change_password\" src={require(\"../../img/group_admin_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 13. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'group_admin_help_logging_out'} onChange={this.handleExpandPanel('group_admin_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    13. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"group_admin_help_logging_out\" src={require(\"../../img/group_admin_help_logging_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <Typography variant=\"body1\" align=\"center\" paragraph>Version 1.2.4</Typography>\r\n                </Col>\r\n            </Row>\r\n            </Container>\r\n\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render investor help\r\n     */\r\n    renderInvestorHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row noGutters style={{marginBottom: 50}}>\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_navigating_invest_west'} onChange={this.handleExpandPanel('investor_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>Welcome to Invest West, we are excited to work with you. Here is a basic tutorial showing the key functionalities of the site. </Typography>\r\n\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">When you have logged in you can view your dashboard by clicking the My dashboard button at the top right of the page. This will take you to your unique dashboard where you can access all the sites functionality.</Typography>\r\n                                    <img alt=\"investor_help_my_dashboard\" src={require(\"../../img/investor_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can navigate the site using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three consecutive white lines. On the navigation bar there are nine main buttons home, profile button, my pledges, change password, explore courses, forums button, the contact us button, help and the logout button.</Typography>\r\n                                    <img alt=\"investor_help_navigation_bar\" src={require(\"../../img/investor_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"investor_help_notifications\" src={require(\"../../img/investor_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 2. Offers */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_offers'} onChange={this.handleExpandPanel('investor_help_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. Projects\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\" paragraph>The home page will display all the projects available to you, and their relevant information.</Typography>\r\n\r\n                                {/** Viewing projects */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Viewing projects</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">To view and interact with an project, you need to click on that project. The Icon at the bottom right of each tile shows the visibility of the project. There are three visibility settings\r\n                                        <br/><br/>\r\n                                        <ul>\r\n                                            <li>\r\n                                                <PublicIcon style={{marginRight: 8}}/>\r\n                                                Public projects are viewable to all investors on the system,\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <RestrictedIcon style={{marginRight: 8}}/>\r\n                                                Restricted projects are publicly viewable but with limited information\r\n                                                and\r\n                                            </li>\r\n                                            <br/>\r\n                                            <li>\r\n                                                <PrivateIcon style={{marginRight: 8}}/>\r\n                                                Private projects are only viewable to investors that belong to the\r\n                                                same course as the project.\r\n                                            </li>\r\n                                        </ul>\r\n                                    </Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                 {/** Viewing the project */}\r\n                                 <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Viewing the project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" component=\"legend\">Once viewing an project (see viewing projects in section 2.1), the information about the project can be found down the page. You can see the project, attached documents, comments and see any extra information. To see the project, scroll down to the bottom of the page and click on project tab, this will contain the project information in the form of text or a document; click on the document to download it.</Typography>\r\n                                    <img alt=\"investor_help_viewing_offers\" src={require(\"../../img/investor_help_viewing_offers_campaign.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'investor_help_exploring_groups'} onChange={this.handleExpandPanel('investor_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring courses\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other courses and request to join them by clicking on the Explore courses button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_exploring_groups\" src={require(\"../../img/investor_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                       {/** 4. Resources */}\r\n                       <ExpansionPanel expanded={expandedPanel === 'investor_help_resources'} onChange={this.handleExpandPanel('investor_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resources on Invest West, click on the Resources button in the navigation bar. From this page you can view a range of content for investors, business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"investor_help_resources\" src={require(\"../../img/investor_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 5. Your profile */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_your_profile'} onChange={this.handleExpandPanel('investor_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add your LinkedIn account by inserting a URL to your LinkedIn profile in, dont forget to click the save button after you make any changes. You can also update your profile picture by clicking on the update profile picture button and attaching a photo. To view how users will see your profile click on the view my public profile button in the top right-hand side of the profile page.</Typography>\r\n                                    <img alt=\"investor_help_editing_your_profile\" src={require(\"../../img/investor_help_editing_your_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Setting up a business profile is optional, to do this you need to click on the I want to upload my business profile button.</Typography>\r\n                                    <img alt=\"investor_help_setting_up_business_profile\" src={require(\"../../img/investor_help_setting_up_business_profile.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_password'} onChange={this.handleExpandPanel('investor_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph\r\n                                    >\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the Forgot your password? button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"investor_help_reset_password\" src={require(\"../../img/investor_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password click on the Change password button in the navigation bar. You will need to enter your old password then your new password twice. If you dont know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"investor_help_change_password\" src={require(\"../../img/investor_help_change_password.png\").default}  className={css(styles.image_style)}\r\n                                    />\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                   {/** 7. Support */}\r\n                   <ExpansionPanel expanded={expandedPanel === 'investor_help_support'} onChange={this.handleExpandPanel('investor_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the contact us button in the navigation bar.</Typography>\r\n                                <img alt=\"investor_help_support_01\" src={require(\"../../img/investor_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the contact us button at the top right of the page.</Typography>\r\n                                <img alt=\"investor_help_support_02\" src={require(\"../../img/investor_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'investor_help_logging_out'} onChange={this.handleExpandPanel('investor_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">\r\n                                    To logout press the \"Logout\" button at the bottom of the navigation bar.\r\n                                </Typography>\r\n                                <img alt=\"investor_help_log_out\" src={require(\"../../img/investor_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n                <Typography variant=\"h2\" align=\"left\">\r\n                                    13. Logging out\r\n                                </Typography>\r\n            </Row>\r\n            \r\n        );\r\n    };\r\n\r\n    /**\r\n     * Render issuer help\r\n     */\r\n    renderIssuerHelp = () => {\r\n\r\n        const {\r\n            expandedPanel\r\n        } = this.state;\r\n\r\n        return (\r\n            <Row\r\n                noGutters\r\n                style={{\r\n                    marginBottom: 50\r\n                }}\r\n            >\r\n                <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 6, offset: 3}}>\r\n                    {/** 1. Navigating Invest West */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_navigating_invest_west'} onChange={this.handleExpandPanel('issuer_help_navigating_invest_west')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    1. Navigating Invest West\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** My dashboard */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        Welcome to Invest West, we are excited to work with you. Here is a basic\r\n                                        tutorial showing the key functions of the site.\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.1. My dashboard</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once you have logged in you can view your dashboard by clicking the My dashboard button at the top right of the page. This will take you to your unique dashboard where you can access all the sites functionality. The home page will display all the projects on Invest West.</Typography>\r\n                                    <img alt=\"issuer_help_my_dashboard\" src={require(\"../../img/issuer_help_my_dashboard.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Navigation bar */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.2. Navigation bar</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">Once logged on you can get around using the navigation bar. The navigation bar is always on the left side and can be hidden by pressing the three white lines. On the navigation bar there are nine main buttons; home, profile, change password, explore projects, explore courses, forums, contact us, help and the logout.</Typography>\r\n                                    <img alt=\"issuer_help_navigation_bar\" src={require(\"../../img/issuer_help_navigation_bar.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Notifications */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>1.3. Notifications</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">The bell Icon will notify you of any updates or changes to your account. This can be accessed at the top right of the dashboard.</Typography>\r\n                                    <img alt=\"issuer_help_notifications\" src={require(\"../../img/issuer_help_notifications.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                         {/** 2. My projects */}\r\n                         <ExpansionPanel expanded={expandedPanel === 'issuer_help_my_offers'} onChange={this.handleExpandPanel('issuer_help_my_offers')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    2. My projects\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Creating a new offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.1. Creating a new project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        You need to set up a business profile before you can create your first project (see setting up your business profile in section 5.2). \r\n                                        <br/><br/>\r\n                                        To create a new project, click on the start a new project button located at the top left of the home page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_01\" src={require(\"../../img/issuer_help_create_new_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you have clicked this button you will be taken to the five-step process for creating your project, the sections marked with an Asterix are mandatory and must be filled out. You can save your funding round at any point and return to edit it later by clicking the save button located at the bottom right of the page.</Typography>\r\n                                    <img alt=\"issuer_help_create_new_offer_02\" src={require(\"../../img/issuer_help_create_new_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Once you submit your project you will be notified that it has been successfully uploaded. It will not be published until it has been checked and approved by your Course Administrator. You will be notified once your project is approved (or rejected). If your project is rejected, you will get an email with feedback from your Course Administrator.</Typography>\r\n                                </FlexView>\r\n\r\n                                <br/>\r\n\r\n                                {/** Managing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.2. Managing an project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">You can manage your projects from the My projects page, to view and edit an project click on the projects title.</Typography>\r\n                                    <img alt=\"issuer_help_manage_offer\" src={require(\"../../img/issuer_help_manage_offer.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                                    <br/>\r\n                                {/** Editing an offer */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>2.3. Editing an project</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">\r\n                                        To edit your project, click on the \"Edit project\" button on the projects main page.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_edit_offer\" src={require(\"../../img/issuer_help_edit_offer.png\").default} className={css(styles.image_style)}/>\r\n\r\n                                    {/** Replying to comments */}\r\n                                    <FlexView column>\r\n                                        <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                            <b>2.3.1. Replying to comments</b>\r\n                                        </Typography>\r\n                                        <Typography variant=\"body1\" align=\"left\">If an investor comments on your project you will be notified via the bell icon.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_01\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_01.png\").default} className={css(styles.image_style)}/>\r\n                                        <Typography variant=\"body1\" align=\"left\">From the projects main page scroll down and click on the Investor comments tab, then click on the reply button to reply to the selected comment.</Typography>\r\n                                        <img alt=\"issuer_help_replying_to_comments_in_offer_02\" src={require(\"../../img/issuer_help_replying_to_comments_in_offer_02.png\").default} className={css(styles.image_style)}/>\r\n                                    </FlexView>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                     {/** 3. Exploring groups */}\r\n                     <ExpansionPanel expanded={expandedPanel === 'issuer_help_exploring_groups'} onChange={this.handleExpandPanel('issuer_help_exploring_groups')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    3. Exploring groups\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Exploring groups */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore other courses, click on the Explore projects button in the navigation bar. From this page you can click on specific courses to see the courses details.</Typography>\r\n                                <img alt=\"issuer_help_exploring_groups\" src={require(\"../../img/issuer_help_exploring_groups.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 4. Resources */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_resources'} onChange={this.handleExpandPanel('issuer_help_resources')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    4. Resources\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Resources */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To explore useful resource on Invest West, click on the Resources button in the navigation bar. From this page you can view a range of content for business owners and entrepreneurs.</Typography>\r\n                                <img alt=\"issuer_help_resources\" src={require(\"../../img/issuer_help_resources.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n                      {/** 5. Your profile */}\r\n                      <ExpansionPanel expanded={expandedPanel === 'issuer_help_your_profile'} onChange={this.handleExpandPanel('issuer_help_your_profile')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    5. Your profile\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Editing your profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>Your profile page is used to view or edit information about yourself, add or update your business profile and upload formal documents. To access your profile page, click on the Profile button in the navigation bar. You need to set up a business profile before you can create your first project.</Typography>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.1. Editing your profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">In the profile section you can add in your LinkedIn account by inserting a URL to your LinkedIn profile, dont forget to click the save button after you make any changes. You can also update your profile picture by clicking on the update profile picture button and attaching a photo.</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_01\" src={require(\"../../img/issuer_help_edit_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">To view how investors will see your profile click on the view my public profile button in the top right-hand side of the profile page</Typography>\r\n                                    <img alt=\"issuer_help_edit_profile_02\" src={require(\"../../img/issuer_help_edit_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Setting up your business profile */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"subtitle1\" align=\"left\" paragraph>\r\n                                        <b>5.2. Setting up your business profile</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To take part in invest west activities you will need to set up your business profile. To set this up go to the profile page and scroll down to the business profile section. You will need to fill out all fields with a *.\r\n                                        <br/><br/>\r\n                                        You can enter your registered office manually or search for your address by entering the postcode. The trading address is automatically set to the same as the registered address, if this is not the case for your business uncheck the box and enter in your trading address.\r\n                                    </Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_01\" src={require(\"../../img/issuer_help_setting_business_profile_01.png\").default} className={css(styles.image_style)}/>\r\n                                    <Typography variant=\"body1\" align=\"left\">When adding a director click the add director button, type their full name in the box provide and then click the add button. You must have multiple directors, but you need a minimum of one. Once all the mandatory fields have been completed the Save button will become available and you can click this button to finish setting up your business profile.</Typography>\r\n                                    <img alt=\"issuer_help_setting_business_profile_02\" src={require(\"../../img/issuer_help_setting_business_profile_02.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 6. Password */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_password'} onChange={this.handleExpandPanel('issuer_help_password')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    6. Password\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <FlexView column>\r\n                                {/** Reset password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.1. Resetting your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">If you have forgotten your password or cannot login you can reset your password from the login portal, from there you can click the Forgot your password? button. Once clicked enter your email address and you will be sent a link to reset your password.</Typography>\r\n                                    <img alt=\"issuer_help_reset_password\" src={require(\"../../img/issuer_help_reset_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n\r\n                                {/** Change password */}\r\n                                <FlexView column>\r\n                                    <Typography variant=\"body1\" align=\"left\" paragraph>\r\n                                        <b>6.2. Changing your password</b>\r\n                                    </Typography>\r\n                                    <Typography variant=\"body1\" align=\"left\">To change your password, click on the Change password button in the navigation bar. You will need to enter your old password then your new password twice. If you dont know your password, contact us at (see support in section 7).</Typography>\r\n                                    <img alt=\"issuer_help_change_password\" src={require(\"../../img/issuer_help_change_password.png\").default} className={css(styles.image_style)}/>\r\n                                </FlexView>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n\r\n\r\n                    {/** 7. Support */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_support'} onChange={this.handleExpandPanel('issuer_help_support')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    7. Support\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Support */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">If you have any further questions or problems, you can get in touch with us by clicking on the contact us button in the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_support_01\" src={require(\"../../img/issuer_help_support_01.png\").default} className={css(styles.image_style)}/>\r\n                                <Typography variant=\"body1\" align=\"left\">Additionally, you can also contact us from the login page by clicking on the contact us button at the top right of the page.</Typography>\r\n                                <img alt=\"issuer_help_support_02\" src={require(\"../../img/issuer_help_support_02.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    \r\n\r\n                    {/** 8. Logging out */}\r\n                    <ExpansionPanel expanded={expandedPanel === 'issuer_help_logging_out'} onChange={this.handleExpandPanel('issuer_help_logging_out')}>\r\n                        <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>}>\r\n                            <FlexView column>\r\n                                <Typography variant=\"h6\" align=\"left\">\r\n                                    8. Logging out\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            {/** Logging out */}\r\n                            <FlexView column>\r\n                                <Typography variant=\"body1\" align=\"left\">To logout press the logout button at the bottom of the navigation bar.</Typography>\r\n                                <img alt=\"issuer_help_log_out\" src={require(\"../../img/issuer_help_log_out.png\").default} className={css(styles.image_style)}/>\r\n                            </FlexView>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                </Col>\r\n            </Row>\r\n            \r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(HelpPage);\r\n\r\nconst styles = StyleSheet.create({\r\n    image_style: {\r\n        objectFit: \"contain\"\r\n    }\r\n});","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport React, {FormEvent} from \"react\";\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport firebaseApp from \"../../firebase/firebaseApp.jsx\";\n\nexport enum SignInEvents {\n    ResetAllStates = \"SignInEvents.ResetAllStates\",\n    TextChanged = \"SignInEvents.TextChanged\",\n    TogglePasswordVisibility = \"SignInEvents.TogglePasswordVisibility\",\n    SignInEmailError = \"SignInEvents.SignInEmailError\",\n    SignInPasswordError = \"SignInEvents.SignInPasswordError\",\n    ClearErrors = \"SignInEvents.ClearErrors\",\n    ToggleResetPasswordDialog = \"SignInEvents.ToggleResetPasswordDialog\",\n    ProcessingResetPasswordRequest = \"SignInEvents.ProcessingResetPasswordRequest\",\n    CompleteProcessingResetPasswordRequest = \"SignInEvents.CompleteProcessingResetPasswordRequest\",\n}\n\n\nexport interface SignInAction extends Action {\n}\n\n\n\nexport interface TextChangedAction extends SignInAction {\n    name: string;\n    value: string;\n}\n\nexport interface CompleteProcessingResetPasswordRequestAction extends SignInAction {\n    error?: string;\n}\n\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: TextChangedAction = {\n            type: SignInEvents.TextChanged,\n            name: event.target.name,\n            value: event.target.value\n        }\n        return dispatch(action);\n    }\n}\n\nexport const togglePasswordVisibility: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: SignInEvents.TogglePasswordVisibility\n        });\n    }\n}\n\nexport const onSignInClick: ActionCreator<any> = (event: FormEvent) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            signInEmail,\n            signInPassword\n        } = getState().SignInLocalState;\n\n        event.preventDefault();\n\n        dispatch({\n            type: SignInEvents.ClearErrors\n        });\n\n        const email: string = signInEmail.trim().toLowerCase();\n        const password: string = signInPassword;\n\n        let allowSignIn: boolean = true;\n\n        if (email.length === 0) {\n            dispatch({\n                type: SignInEvents.SignInEmailError\n            });\n            allowSignIn = false;\n        }\n\n        if (password.length === 0) {\n            dispatch({\n                type: SignInEvents.SignInPasswordError\n            });\n            allowSignIn = false;\n        }\n\n        if (!allowSignIn) {\n            return;\n        }\n\n        return dispatch(signIn(email, password));\n    }\n}\n\n  \n\nexport const toggleResetPasswordDialog: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: SignInEvents.ToggleResetPasswordDialog\n        });\n    }\n}\n\nexport const onSendResetPasswordClick: ActionCreator<any> = (email: string) => {\n    return async (dispatch: Dispatch) => {\n        console.log(\"onSendResetPasswordClick\");\n        dispatch({\n            type: SignInEvents.ProcessingResetPasswordRequest\n        });\n\n        const completeAction: CompleteProcessingResetPasswordRequestAction = {\n            type: SignInEvents.CompleteProcessingResetPasswordRequest\n        }\n\n        try {\n            const auth = firebaseApp.auth();\n            await auth.sendPasswordResetEmail(email);\n            dispatch(toggleResetPasswordDialog());\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}","import {\n    CompleteLoadingDataAction,\n    CompleteRemovingAccessRequestAction,\n    CompleteSendingAccessRequestAction,\n    GroupDetailsAction,\n    GroupDetailsEvents\n} from \"./GroupDetailsActions\";\nimport GroupProperties from \"../../models/group_properties\";\nimport {InvitedUserWithProfile} from \"../../models/invited_user\";\nimport {ProjectInstance} from \"../../models/project\";\nimport Error from \"../../models/error\";\nimport {AccessRequestInstance} from \"../../models/access_request\";\n\nexport interface GroupDetailsState {\n    group?: GroupProperties;\n    members?: InvitedUserWithProfile[];\n    offers?: ProjectInstance[];\n    accessRequestsInstances?: AccessRequestInstance[];\n\n    loadingData: boolean;\n    dataLoaded: boolean;\n\n    error?: Error;\n\n    sendingAccessRequest: boolean;\n    errorSendingAccessRequest?: Error;\n\n    removingAccessRequest: boolean;\n    errorRemovingAccessRequest?: Error;\n}\n\nconst initialState: GroupDetailsState = {\n    loadingData: false,\n    dataLoaded: false,\n\n    sendingAccessRequest: false,\n    removingAccessRequest: false\n}\n\nexport const hasNotLoadedData = (state: GroupDetailsState) => {\n    return !state.dataLoaded && !state.loadingData;\n}\n\nexport const isLoadingData = (state: GroupDetailsState) => {\n    return !state.dataLoaded && state.loadingData;\n}\n\nexport const successfullyLoadedData = (state: GroupDetailsState) => {\n    return state.dataLoaded && !state.loadingData && state.group && state.members && state.offers && state.error === undefined;\n}\n\nexport const hasAccessRequestsBeenSatisfied = (state: GroupDetailsState) => {\n    return successfullyLoadedData(state) && state.accessRequestsInstances !== undefined;\n}\n\nexport const hasErrorLoadingData = (state: GroupDetailsState) => {\n    return state.dataLoaded && !state.loadingData && state.error !== undefined;\n}\n\nexport const isSendingAccessRequest = (state: GroupDetailsState) => {\n    return state.sendingAccessRequest;\n}\n\nexport const hasErrorSendingAccessRequest = (state: GroupDetailsState) => {\n    return !isSendingAccessRequest(state) && state.errorSendingAccessRequest !== undefined;\n}\n\nexport const isRemovingAccessRequest = (state: GroupDetailsState) => {\n    return state.removingAccessRequest;\n}\n\nexport const hasErrorRemovingAccessRequest = (state: GroupDetailsState) => {\n    return !isRemovingAccessRequest(state) && state.errorRemovingAccessRequest !== undefined;\n}\n\nconst groupDetailsReducer = (state = initialState, action: GroupDetailsAction) => {\n    switch (action.type) {\n        case GroupDetailsEvents.LoadingData:\n            return {\n                ...initialState,\n                loadingData: true,\n                dataLoaded: false\n            }\n        case GroupDetailsEvents.CompleteLoadingData:\n            const completeLoadingDataAction: CompleteLoadingDataAction = action as CompleteLoadingDataAction;\n            return {\n                ...state,\n                loadingData: false,\n                dataLoaded: true,\n                group: completeLoadingDataAction.group !== undefined\n                    ? JSON.parse(JSON.stringify(completeLoadingDataAction.group))\n                    : state.group,\n                members: completeLoadingDataAction.members !== undefined\n                    ? [...completeLoadingDataAction.members]\n                    : state.members,\n                offers: completeLoadingDataAction.offers !== undefined\n                    ? [...completeLoadingDataAction.offers]\n                    : state.offers,\n                accessRequestsInstances: completeLoadingDataAction.accessRequestInstances !== undefined\n                    ? [...completeLoadingDataAction.accessRequestInstances]\n                    : state.accessRequestsInstances,\n                error: completeLoadingDataAction.error !== undefined\n                    ? {detail: completeLoadingDataAction.error}\n                    : state.error\n            }\n        case GroupDetailsEvents.SendingAccessRequest:\n            return {\n                ...state,\n                sendingAccessRequest: true,\n                errorSendingAccessRequest: undefined\n            }\n        case GroupDetailsEvents.CompleteSendingAccessRequest:\n            const completeSendingAccessRequestAction: CompleteSendingAccessRequestAction = action as CompleteSendingAccessRequestAction;\n            return {\n                ...state,\n                sendingAccessRequest: false,\n                accessRequestsInstances: completeSendingAccessRequestAction.updatedAccessRequestInstances !== undefined\n                    ? [...completeSendingAccessRequestAction.updatedAccessRequestInstances]\n                    : state.accessRequestsInstances,\n                errorSendingAccessRequest: completeSendingAccessRequestAction.error !== undefined\n                    ? {detail: completeSendingAccessRequestAction.error} : state.errorSendingAccessRequest\n            }\n        case GroupDetailsEvents.RemovingAccessRequest:\n            return {\n                ...state,\n                removingAccessRequest: true,\n                errorRemovingAccessRequest: undefined\n            }\n        case GroupDetailsEvents.CompleteRemovingAccessRequest:\n            const completeRemovingAccessRequestAction: CompleteRemovingAccessRequestAction = action as CompleteRemovingAccessRequestAction;\n            return {\n                ...state,\n                removingAccessRequest: false,\n                accessRequestsInstances: completeRemovingAccessRequestAction.updatedAccessRequestInstances !== undefined\n                    ? [...completeRemovingAccessRequestAction.updatedAccessRequestInstances]\n                    : state.accessRequestsInstances,\n                errorRemovingAccessRequest: completeRemovingAccessRequestAction.error !== undefined\n                    ? {detail: completeRemovingAccessRequestAction.error} : state.errorRemovingAccessRequest\n            }\n        default:\n            return state;\n    }\n}\n\nexport default groupDetailsReducer;","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {\n    GroupDetailsState,\n    hasAccessRequestsBeenSatisfied,\n    hasErrorLoadingData,\n    isLoadingData, isRemovingAccessRequest, isSendingAccessRequest,\n    successfullyLoadedData\n} from \"./GroupDetailsReducer\";\nimport {Box, Button, colors, Divider, Paper, Typography, Link} from \"@material-ui/core\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport {RouteParams} from \"../../router/router\";\nimport {Col, Image, Row} from \"react-bootstrap\";\nimport {BeatLoader} from \"react-spinners\";\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport {loadData, removeAccessRequest, sendAccessRequest} from \"./GroupDetailsActions\";\nimport {getGroupLogo} from \"../../models/group_properties\";\nimport {AuthenticationState} from \"../../redux-store/reducers/authenticationReducer\";\nimport Admin, {isAdmin} from \"../../models/admin\";\nimport {dateInReadableFormat} from \"../../utils/utils\";\nimport GroupOfMembership, {getHomeGroup} from \"../../models/group_of_membership\";\nimport {CheckCircle} from \"@material-ui/icons\";\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\nimport * as appColors from \"../../values/colors\";\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\nimport {css} from \"aphrodite\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\nimport Footer from \"../../shared-components/footer/Footer\";\n\ninterface GroupDetailsProps {\n    MediaQueryState: MediaQueryState;\n    ManageGroupUrlState: ManageGroupUrlState;\n    AuthenticationState: AuthenticationState;\n    GroupDetailsLocalState: GroupDetailsState;\n    loadData: (viewedGroupUserName: string) => any;\n    sendAccessRequest: () => any;\n    removeAccessRequest: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState,\n        GroupDetailsLocalState: state.GroupDetailsLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        loadData: (viewedGroupUserName: string) => dispatch(loadData(viewedGroupUserName)),\n        sendAccessRequest: () => dispatch(sendAccessRequest()),\n        removeAccessRequest: () => dispatch(removeAccessRequest())\n    }\n}\n\nclass GroupDetails extends Component<GroupDetailsProps & Readonly<RouteComponentProps<RouteParams>>, any> {\n\n    componentDidMount() {\n        this.props.loadData(this.props.match.params.viewedGroupUserName);\n    }\n\n    render() {\n        const {\n            MediaQueryState,\n            ManageGroupUrlState,\n            AuthenticationState,\n            GroupDetailsLocalState,\n            sendAccessRequest,\n            removeAccessRequest\n        } = this.props;\n\n        const currentUser = AuthenticationState.currentUser;\n\n        if (!currentUser) {\n            return null;\n        }\n\n        const currentAdmin: Admin | null = isAdmin(currentUser);\n\n        // loading\n        if (isLoadingData(GroupDetailsLocalState)) {\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\n                <BeatLoader\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\n                />\n            </Box>;\n        }\n\n        // error\n        if (hasErrorLoadingData(GroupDetailsLocalState) || !successfullyLoadedData(GroupDetailsLocalState)) {\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\n                <Typography variant=\"h5\" color=\"error\" align=\"center\">Error loading page. Please retry.</Typography>\n            </Box>;\n        }\n\n        let groupMember: GroupOfMembership | undefined = undefined;\n        if (!currentAdmin) {\n            groupMember = AuthenticationState.groupsOfMembership.find(\n                groupOfMembership => groupOfMembership.group.anid === GroupDetailsLocalState.group?.anid);\n        }\n\n        let hasRequestedToAccessGroup: boolean = false;\n        if (hasAccessRequestsBeenSatisfied(GroupDetailsLocalState)) {\n            hasRequestedToAccessGroup = GroupDetailsLocalState.accessRequestsInstances\n                ?.findIndex(accessRequestInstance => accessRequestInstance.group.anid === GroupDetailsLocalState.group?.anid) !== -1;\n        }\n\n        // successfully loaded\n        return <Box paddingY={MediaQueryState.isMobile ? \"15px\" : \"40px\"}>\n            {/** Header section */}\n            <Row noGutters>\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\n                    <Box>\n                        <Paper>\n                            <Box padding=\"20px\">\n                                <Row noGutters>\n                                    {/** Logo section */}\n                                    <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 12, order: 1}} lg={{span: 3, order: 1}}>\n                                        <Box display=\"flex\"justifyContent=\"center\" alignItems=\"center\">\n                                            <Link href={GroupDetailsLocalState.group?.website ?? \"\"} target=\"_blank\">\n                                                <Image alt={`${GroupDetailsLocalState.group?.displayName} logo`} src={getGroupLogo(GroupDetailsLocalState.group ?? null) ?? undefined} style={{width: \"100%\", height: \"auto\", padding: 20, objectFit: \"scale-down\"}}/>\n                                            </Link>\n                                        </Box>\n                                    </Col>\n\n                                    {/** Name section */}\n                                    <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} md={{span: 12, order: 2}} lg={{span: 9, order: 2}}>\n                                        <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\n                                            <Typography align=\"center\" variant=\"h4\">{GroupDetailsLocalState.group?.displayName}</Typography>\n\n                                            {/** Home/platform member + joined date (available for investor and issuer) */}\n                                            {\n                                                currentAdmin\n                                                    ? null\n                                                    : !groupMember\n                                                    ? <Box marginTop=\"25px\">\n                                                        {\n                                                            !hasRequestedToAccessGroup\n                                                                ? <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => sendAccessRequest()} disabled={isSendingAccessRequest(GroupDetailsLocalState)}>\n                                                                    {\n                                                                        isSendingAccessRequest(GroupDetailsLocalState)\n                                                                            ? \"Sending request ...\"\n                                                                            : \"Join Course\"\n                                                                    }\n                                                                </Button>\n                                                                : <Button variant=\"outlined\" className={css(sharedStyles.no_text_transform)} onClick={() => removeAccessRequest()} disabled={isRemovingAccessRequest(GroupDetailsLocalState)}>\n                                                                    {\n                                                                        isRemovingAccessRequest(GroupDetailsLocalState)\n                                                                            ? \"Cancelling ...\"\n                                                                            : \"Cancel request\"\n                                                                    }\n                                                                </Button>\n                                                        }\n                                                    </Box>\n                                                    : <Box marginTop=\"25px\">\n                                                        <Box display=\"flex\" flexDirection=\"row\">\n                                                            <CheckCircle fontSize=\"small\" color=\"primary\"/>\n                                                            <Box width=\"6px\"/>\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n                                                                {\n                                                                    getHomeGroup(AuthenticationState.groupsOfMembership)?.group.anid === groupMember.group.anid\n                                                                        ? \"Home member\"\n                                                                        : \"Platform member\"\n                                                                }\n                                                            </Typography>\n                                                        </Box>\n\n\n                                                        <Box marginTop=\"5px\">\n                                                            <Typography variant=\"body1\" align=\"center\" color=\"textSecondary\">\n                                                                Joined\n                                                                on: {dateInReadableFormat(groupMember.joinedDate)}\n                                                            </Typography>\n                                                        </Box>\n                                                    </Box>\n                                            }\n                                        </Box>\n                                    </Col>\n                                </Row>\n                            </Box>\n                        </Paper>\n                    </Box>\n                </Col>\n            </Row>\n\n            {/** About section */}\n            <Row noGutters>\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\n                    <Box marginTop=\"25px\">\n                        <Paper>\n                            <Box padding=\"20px\">\n                                <Typography variant=\"h6\">About</Typography>\n\n                                <Box marginTop=\"18px\" whiteSpace=\"pre-line\">\n                                    <Typography variant=\"body1\" align=\"left\">{GroupDetailsLocalState.group?.description}</Typography>\n                                </Box>\n\n                                <Box marginTop=\"18px\">\n                                    <Typography variant=\"body1\" align=\"left\">For more information, visit us at:&nbsp;\n                                        <CustomLink\n                                            url={GroupDetailsLocalState.group?.website ?? \"\"}\n                                            target=\"_blank\"\n                                            color=\"none\"\n                                            activeColor=\"none\"\n                                            activeUnderline={true}\n                                            component=\"a\"\n                                            childComponent={\n                                                GroupDetailsLocalState.group?.website ?? \"unknown\"\n                                            }/>\n                                    </Typography>\n                                </Box>\n                            </Box>\n                        </Paper>\n                    </Box>\n                </Col>\n            </Row>\n\n            {/** Statistics section */}\n            <Row noGutters>\n                <Col xs={12} sm={12} md={12} lg={{span: 6, offset: 3}}>\n                    <Box marginTop=\"25px\">\n                        <Paper>\n                            <Box padding=\"20px\">\n                                <Typography variant=\"h6\">Statistics</Typography>\n\n                                <Box marginTop=\"20px\" border={`1px solid ${colors.grey[\"300\"]}`} bgcolor={appColors.kick_starter_background_color}>\n                                    <Row>\n                                        <Col xs={12} sm={12} md={6} lg={6}>\n                                            <Box padding=\"18px\">\n                                                <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.members?.length}</Typography>\n                                                    <Box height=\"2px\"/>\n                                                <Typography variant=\"body1\" align=\"left\">Students</Typography>\n                                            </Box>\n                                        </Col>\n\n                                        <Col xs={12} sm={12} md={6} lg={6}>\n                                            <Box display=\"flex\" flexDirection=\"row\">\n                                                <Box>\n                                                    <Divider orientation=\"vertical\"/>\n                                                </Box>\n\n                                                <Box padding=\"18px\">\n                                                    <Typography variant=\"h4\" align=\"left\">{GroupDetailsLocalState.offers?.length}</Typography>\n\n                                                    <Box height=\"2px\"/>\n\n                                                    <Typography variant=\"body1\" align=\"left\">Student projects</Typography>\n                                                </Box>\n                                            </Box>\n                                        </Col>\n                                    </Row>\n                                </Box>\n                            </Box>\n                        </Paper>\n                    </Box>\n                </Col>\n            </Row>\n\n            {/** Footer */}\n            <Row noGutters>\n                <Col xs={12} sm={12} md={12} lg={12}>\n                    <Footer/>\n                </Col>\n            </Row>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupDetails);","import React, {Component} from 'react';\nimport {Typography} from '@material-ui/core';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport HashLoader from 'react-spinners/HashLoader';\n\nimport {connect} from 'react-redux';\n\nimport './SystemPublicPagesSharedCSS.scss';\n\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as utils from '../../utils/utils';\nimport * as colors from '../../values/colors';\n\nconst mapStateToProps = state => {\n    return {}\n};\n\nclass MarketingPreferencesPage extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            clubAttributes: null,\n            clubAttributesLoaded: false\n        }\n    }\n\n    componentDidMount() {\n        realtimeDBUtils\n            .loadClubAttributes()\n            .then(clubAttributes => {\n                this.setState({\n                    clubAttributes: clubAttributes,\n                    clubAttributesLoaded: true\n                });\n            });\n    }\n\n    render() {\n        const {\n            clubAttributes,\n            clubAttributesLoaded\n        } = this.state;\n\n        return (\n            <Container\n                fluid\n                style={{\n                    padding: 0\n                }}\n            >\n                {\n                    !clubAttributesLoaded\n                        ?\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <FlexView\n                                    width=\"100%\"\n                                    marginTop={30}\n                                    hAlignContent=\"center\"\n                                >\n                                    <HashLoader\n                                        color={colors.primaryColor}\n                                    />\n                                </FlexView>\n                            </Col>\n                        </Row>\n                        :\n                        <Row\n                            noGutters\n                        >\n                            <Col\n                                xs={12}\n                                sm={12}\n                                md={12}\n                                lg={12}\n                            >\n                                <Row\n                                    noGutters\n                                    style={{\n                                        backgroundColor: colors.gray_100\n                                    }}\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingTop: 30,\n                                            paddingBottom: 30,\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        <Typography\n                                            variant=\"h5\"\n                                            align=\"left\"\n                                        >\n                                            <b>{\"Marketing preferences\".toUpperCase()}</b>\n                                        </Typography>\n                                    </Col>\n                                </Row>\n\n                                <Row\n                                    noGutters\n                                >\n                                    <Col\n                                        xs={12}\n                                        sm={12}\n                                        md={12}\n                                        lg={{span: 8, offset: 2}}\n                                        style={{\n                                            paddingLeft: 12,\n                                            paddingRight: 12\n                                        }}\n                                    >\n                                        {\n                                            !clubAttributes.marketingPreferences\n                                                ?\n                                                null\n                                                :\n                                                <FlexView\n                                                    column\n                                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(clubAttributes.marketingPreferences.ops)}}\n                                                    marginTop={35}\n                                                />\n                                        }\n                                    </Col>\n                                </Row>\n                            </Col>\n                        </Row>\n                }\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps)(MarketingPreferencesPage);","import React, {Component} from 'react';\nimport {Col, Container, Row} from 'react-bootstrap';\nimport HashLoader from 'react-spinners/HashLoader';\nimport FlexView from \"react-flexview\";\n\nimport {connect} from 'react-redux';\nimport * as manageGroupFromParamsActions from '../../redux-store/actions/manageGroupFromParamsActions';\nimport * as editUserActions from '../../redux-store/actions/editUserActions';\nimport * as activitiesTableActions from '../../redux-store/actions/activitiesTableActions';\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\n\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as ROUTES from '../../router/routes';\nimport * as colors from '../../values/colors';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nimport {AUTH_SUCCESS} from '../signin/Signin';\nimport PageNotFoundWhole from '../../shared-components/page-not-found/PageNotFoundWhole';\nimport Profile from '../../shared-components/profile/Profile';\n\nconst mapStateToProps = state => {\n    return {\n        AuthenticationState: state.AuthenticationState,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n        authStatus: state.auth ? state.auth.authStatus : null,\n        authenticating: state.auth ? state.auth.authenticating : false,\n        admin: state.auth ? state.auth.user : null,\n        adminLoaded: state.auth ? state.auth.userLoaded : false,\n        editUserProfile_userEdited: state.editUser.userEdited,\n        projectsTable_user: state.projectsTable ? state.projectsTable.user : null\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setGroupUserNameFromParams: (groupUserName) => dispatch(manageGroupFromParamsActions.setGroupUserNameFromParams(groupUserName)),\n        setExpectedAndCurrentPathsForChecking: (expectedPath, currentPath) => dispatch(manageGroupFromParamsActions.setExpectedAndCurrentPathsForChecking(expectedPath, currentPath)),\n        loadAngelNetwork: () => dispatch(manageGroupFromParamsActions.loadAngelNetwork()),\n\n        editUserProfile_setOriginalUserAndEditedUser: (user) => dispatch(editUserActions.setOriginalUserAndEditedUser(user)),\n        editUserProfile_startOriginalUserChangedListener: () => dispatch(editUserActions.startOriginalUserChangedListener()),\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\n\n        // projectsTable_setUser: (user) => dispatch(projectsTableActions.setUser(user)),\n        // projectsTable_stopListeningForProjectsChanged: () => dispatch(projectsTableActions.stopListeningForProjectsChanged()),\n        // projectsTable_stopListeningForPledgesChanged: () => dispatch(projectsTableActions.stopListeningForPledgesChanged()),\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor: () => dispatch(projectsTableActions.stopListeningForPledgesMadeByTableInvestor()),\n\n        activitiesTable_setUser: (user) => dispatch(activitiesTableActions.setTableUser(user)),\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\n\n        setFeedbackSnackbarContent: (message, color, position) => dispatch(feedbackSnackbarActions.setFeedbackSnackbarContent(message, color, position))\n    }\n};\n\nclass ProfilePageEditable extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            userToBeEdited: null,\n            userToBeEditedLoaded: false,\n            loadingUserToBeEdited: false\n        }\n    }\n\n    componentDidMount() {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            setGroupUserNameFromParams,\n            setExpectedAndCurrentPathsForChecking,\n            loadAngelNetwork\n        } = this.props;\n\n        const match = this.props.match;\n\n        setGroupUserNameFromParams(match.params.hasOwnProperty('groupUserName') ? match.params.groupUserName : null);\n        setExpectedAndCurrentPathsForChecking(match.params.hasOwnProperty('groupUserName') ? ROUTES.EDIT_USER_PROFILE : ROUTES.EDIT_USER_PROFILE_INVEST_WEST_SUPER, match.path);\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.loadData();\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            admin,\n\n            loadAngelNetwork,\n            editUserProfile_setOriginalUserAndEditedUser,\n            // projectsTable_setUser,\n            activitiesTable_setUser\n        } = this.props;\n\n        const {\n            userToBeEdited\n        } = this.state;\n\n        loadAngelNetwork();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.loadData();\n\n            if (admin && userToBeEdited) {\n                editUserProfile_setOriginalUserAndEditedUser(userToBeEdited);\n\n                // projectsTable_setUser(userToBeEdited);\n\n                activitiesTable_setUser(userToBeEdited);\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        const {\n            editUserProfile_setOriginalUserAndEditedUser,\n\n            // projectsTable_setUser,\n            // projectsTable_stopListeningForProjectsChanged,\n            // projectsTable_stopListeningForPledgesChanged,\n            // projectsTable_stopListeningForPledgesMadeByTableInvestor,\n\n            activitiesTable_setUser,\n            activitiesTable_stopListeningForActivitiesChanged,\n\n            editUserProfile_stopOriginalUserChangedListener\n        } = this.props;\n\n        // when click to go back,\n        // reset the user referenced in edit user profile\n        editUserProfile_setOriginalUserAndEditedUser(null);\n\n        // stop listening for user's profile changes if added\n        editUserProfile_stopOriginalUserChangedListener();\n\n        // reset the user references in projects table\n        // ---> avoid caches\n        // projectsTable_setUser(null);\n        // projectsTable_stopListeningForProjectsChanged();\n        // projectsTable_stopListeningForPledgesChanged();\n        // projectsTable_stopListeningForPledgesMadeByTableInvestor();\n\n        // reset the user references in activities table\n        // ---> avoid caches\n        activitiesTable_setUser(null);\n        activitiesTable_stopListeningForActivitiesChanged();\n    }\n\n    /**\n     * Load data\n     */\n    loadData = () => {\n        // get user's id from the URL\n        const userToBeEditedID = this.props.match.params.userID;\n\n        const {\n            editUserProfile_startOriginalUserChangedListener\n        } = this.props;\n\n        const {\n            userToBeEdited,\n            userToBeEditedLoaded,\n            loadingUserToBeEdited\n        } = this.state;\n\n        if (!userToBeEdited && !userToBeEditedLoaded && !loadingUserToBeEdited) {\n            this.setState({\n                userToBeEditedLoaded: false,\n                loadingUserToBeEdited: true\n            });\n\n            realtimeDBUtils\n                .getUserBasedOnID(userToBeEditedID)\n                .then(user => {\n\n                    realtimeDBUtils\n                        .loadGroupsUserIsIn(userToBeEditedID)\n                        .then(groupsUserIsIn => {\n\n                            user.groupsUserIsIn = groupsUserIsIn;\n\n                            this.setState({\n                                userToBeEdited: JSON.parse(JSON.stringify(user)),\n                                userToBeEditedLoaded: true,\n                                loadingUserToBeEdited: false\n                            });\n\n                            // start listening for user's profile changes\n                            editUserProfile_startOriginalUserChangedListener();\n                        })\n                        .catch(error => {\n                            this.setState({\n                                userToBeEdited: null,\n                                userToBeEditedLoaded: true,\n                                loadingUserToBeEdited: false\n                            });\n                        });\n                })\n                .catch(error => {\n                    this.setState({\n                        userToBeEdited: null,\n                        userToBeEditedLoaded: true,\n                        loadingUserToBeEdited: false\n                    });\n                });\n        }\n    }\n\n    render() {\n        const {\n            groupProperties,\n            shouldLoadOtherData,\n            groupPropertiesLoaded,\n\n            authStatus,\n            authenticating,\n            admin,\n            adminLoaded\n        } = this.props;\n\n        const {\n            userToBeEdited,\n            userToBeEditedLoaded\n        } = this.state;\n\n        if (!groupPropertiesLoaded) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader color={colors.primaryColor}/>\n                </FlexView>\n            );\n        }\n\n        if (!shouldLoadOtherData) {\n            return <PageNotFoundWhole/>;\n        }\n\n        if (authenticating\n            || !adminLoaded\n            || !userToBeEditedLoaded\n        ) {\n            return (\n                <FlexView marginTop={30} hAlignContent=\"center\">\n                    <HashLoader\n                        color={\n                            !groupProperties\n                                ?\n                                colors.primaryColor\n                                :\n                                groupProperties.settings.primaryColor\n                        }\n                    />\n                </FlexView>\n            );\n        }\n\n        if (authStatus !== AUTH_SUCCESS\n            || !admin\n            || (admin && admin.type !== DB_CONST.TYPE_ADMIN)\n            || !userToBeEdited\n        ) {\n            return (\n                <PageNotFoundWhole/>\n            );\n        }\n\n        // the group admins are trying to open this page\n        // to edit profile of a user that is NOT a member of their group\n        if (!admin.superAdmin\n            && userToBeEdited.hasOwnProperty('groupsUserIsIn')\n            && userToBeEdited.groupsUserIsIn.findIndex(group => group.anid === admin.anid) === -1\n        ) {\n            return (\n                <PageNotFoundWhole/>\n            );\n        }\n\n        return (\n            <Container fluid style={{padding: 0}}>\n                {/** Body */}\n                <Row noGutters>\n                    <Col xs={12} sm={12} md={{span: 8, offset: 2}} lg={{span: 8, offset: 2}} style={{marginTop: 30, marginBottom: 30}}>\n                        {\n                            !userToBeEdited\n                                ?\n                                null\n                                :\n                                <Profile/>\n                        }\n                    </Col>\n                </Row>\n            </Container>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePageEditable);","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Image, Row} from \"react-bootstrap\";\r\nimport {Box, Button, colors, Divider, Typography, Link} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport Routes from \"../../router/routes\";\r\nimport {toRGBWithOpacity} from \"../../utils/colorUtils\";\r\n\r\nconst logoHeightMobile: number = 160;\r\nconst logoHeight: number = 220;\r\n\r\ninterface FrontProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState\r\n    }\r\n}\r\n\r\nclass Front extends Component<FrontProps & Readonly<RouteComponentProps<RouteParams>>, any> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{padding: 0, position: \"fixed\", height: \"100% !important\", overflowY: \"auto\", top: 0}}>\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" alignItems=\"center\" paddingX=\"30px\" paddingY=\"20px\">\r\n                        <CustomLink url={Routes.constructContactUsRoute(this.props.match.params)} color=\"black\" activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeUnderline={false} component=\"nav-link\" \r\n                        childComponent={\r\n                                <Typography variant=\"body1\">Contact us</Typography>\r\n                            }/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <Box width=\"35px\"/>\r\n\r\n                        <CustomLink\r\n                            url={\r\n                                isAuthenticating(AuthenticationState)\r\n                                    ? \"\"\r\n                                    : !successfullyAuthenticated(AuthenticationState)\r\n                                    ? Routes.constructSignInRoute(this.props.match.params)\r\n                                    : Routes.constructDashboardRoute(this.props.match.params, ManageGroupUrlState, AuthenticationState)\r\n                            }\r\n                            color=\"black\"\r\n                            activeColor={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            activeUnderline={false}\r\n                            // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                            component=\"a\"\r\n                            childComponent={\r\n                                <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">\r\n                                    {\r\n                                        isAuthenticating(AuthenticationState)\r\n                                            ? \"\"\r\n                                            : !successfullyAuthenticated(AuthenticationState)\r\n                                            ? \"Sign in\"\r\n                                            : \"Dashboard\"\r\n                                    }\r\n                                </Button>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" minHeight=\"100vh\"\r\n                        bgcolor={\r\n                            toRGBWithOpacity(\r\n                                getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                0.12\r\n                            )\r\n                        }\r\n                    >\r\n                        {/* Front page link to website */}\r\n                        <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" justifyContent=\"center\" flexGrow={3} paddingY=\"50px\">\r\n                        <Link href={ManageGroupUrlState.group?.website ?? \"\"} target=\"_blank\">\r\n\r\n                            {\r\n                                isValidatingGroupUrl(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Image\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            !routeContainsGroupName(ManageGroupUrlState)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : getGroupLogo(ManageGroupUrlState.group)\r\n                                        }\r\n                                        style={{\r\n                                            width: \"auto\",\r\n                                            height: MediaQueryState.isMobile ? logoHeightMobile : logoHeight\r\n                                        }}\r\n                                    />\r\n                            }\r\n                            </Link>\r\n\r\n                            <Box height=\"20px\"/>\r\n\r\n                            <Typography color=\"primary\" variant=\"h2\" align=\"center\">\r\n                                {\r\n                                    isValidatingGroupUrl(ManageGroupUrlState)\r\n                                        ? \"\"\r\n                                        : !routeContainsGroupName(ManageGroupUrlState)\r\n                                        ? \"Invest West\"\r\n                                        : ManageGroupUrlState.group?.displayName\r\n                                }\r\n                            </Typography>\r\n\r\n                            {\r\n                                routeContainsGroupName(ManageGroupUrlState)\r\n                                    ? null\r\n                                    : <Box color={colors.blueGrey[\"500\"]} marginTop=\"20px\">\r\n                                        <Typography variant=\"h4\" align=\"center\">Connecting universities and students</Typography>\r\n                                    </Box>\r\n                            }\r\n                        </Box>\r\n\r\n                        <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                            <Image alt=\"front_footer\" src={require(\"../../img/front_page_cover_image.png\").default} style={{objectFit: \"fill\"}}/>\r\n                            <Box height=\"90px\"\r\n                                bgcolor={\r\n                                    toRGBWithOpacity(\r\n                                        getGroupRouteTheme(ManageGroupUrlState).palette.primary.main,\r\n                                        0.75\r\n                                    )\r\n                                }\r\n                            />\r\n                        </Box>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Front);","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport firebase from \"../../firebase/firebaseApp\";\nimport React from \"react\";\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/utils\";\n\nexport enum ResetPasswordEvents {\n    VerifyingCode = \"ResetPasswordEvents.VerifyingCode\",\n    CompleteVerifyingCode = \"ResetPasswordEvents.CompleteVerifyingCode\",\n    TextChanged = \"ResetPasswordEvents.TextChanged\",\n    ConfirmingResetPassword = \"ResetPasswordEvents.ConfirmingResetPassword\",\n    CompleteConfirmingResetPassword = \"ResetPasswordEvents.CompleteConfirmingResetPassword\"\n}\n\nexport interface ResetPasswordAction extends Action {\n\n}\n\nexport interface CompleteVerifyingCodeAction extends ResetPasswordAction {\n    actionCode: string | null;\n    email: string | null;\n    error?: string;\n}\n\nexport interface TextChangedAction extends ResetPasswordAction {\n    name: string;\n    value: string;\n}\n\nexport interface CompleteConfirmingResetPasswordAction extends ResetPasswordAction {\n    error?: string;\n}\n\nexport const verifyCode: ActionCreator<any> = (code: string | null) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        dispatch({\n            type: ResetPasswordEvents.VerifyingCode\n        });\n\n        const completeAction: CompleteVerifyingCodeAction = {\n            type: ResetPasswordEvents.CompleteVerifyingCode,\n            actionCode: null,\n            email: null\n        };\n\n        if (code === null) {\n            completeAction.error = \"Invalid request.\";\n            return dispatch(completeAction);\n        }\n\n        try {\n            completeAction.actionCode = code;\n            completeAction.email = await firebase.auth().verifyPasswordResetCode(code);\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const confirmPasswordReset: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            password,\n            confirmedPassword,\n            actionCode\n        } = getState().ResetPasswordLocalState;\n\n        const completeAction: CompleteConfirmingResetPasswordAction = {\n            type: ResetPasswordEvents.CompleteConfirmingResetPassword\n        };\n\n        if (password.trim().length === 0 || confirmedPassword.trim().length === 0) {\n            completeAction.error = \"Please fill in the required fields.\";\n            return dispatch(completeAction);\n        }\n\n        if (password !== confirmedPassword) {\n            completeAction.error = \"Passwords do not match.\";\n            return dispatch(completeAction);\n        }\n\n        if (password.trim().length < 8) {\n            completeAction.error = \"Password must have at least 8 characters.\";\n            return dispatch(completeAction);\n        }\n\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\n            completeAction.error = \"Please select a stronger password.\";\n            return dispatch(completeAction);\n        }\n\n        dispatch({\n            type: ResetPasswordEvents.ConfirmingResetPassword\n        });\n\n        try {\n            await firebase.auth().confirmPasswordReset(actionCode as string, password);\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = \"Invalid request.\";\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const onTextChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: TextChangedAction = {\n            type: ResetPasswordEvents.TextChanged,\n            name: event.target.name,\n            value: event.target.value\n        }\n        return dispatch(action);\n    }\n}","import {\n    CompleteProcessingResetPasswordRequestAction,\n    SignInAction,\n    SignInEvents,\n    TextChangedAction\n} from \"./SignInActions\";\nimport Error from \"../../models/error\";\n\nexport interface SignInState {\n    signInEmail: string;\n    signInPassword: string;\n    showPassword: boolean;\n\n    errorSignInEmail: boolean;\n    errorSignInPassword: boolean;\n    showResetPasswordDialog: boolean;\n    resetPasswordDialogEmail: string;\n    resetPasswordDialogProcessing: boolean;\n    resetPasswordDialogEmailSent: boolean;\n    resetPasswordDialogError?: Error;\n}\n\nconst initialState: SignInState = {\n    signInEmail: \"\",\n    signInPassword: \"\",\n    showPassword: false,\n    \n    errorSignInEmail: false,\n    errorSignInPassword: false,\n    showResetPasswordDialog: false,\n    resetPasswordDialogEmail: \"\",\n    resetPasswordDialogProcessing: false,\n    resetPasswordDialogEmailSent: false\n}\n\nexport const successfullySentResetPassword = (state: SignInState) => {\n    return state.resetPasswordDialogEmailSent && state.resetPasswordDialogError === undefined;\n}\n\nexport const errorSendingResetPassword = (state: SignInState) => {\n    return state.resetPasswordDialogError !== undefined;\n}\n\nexport const isProcessingResetPasswordRequest = (state: SignInState) => {\n    return state.resetPasswordDialogProcessing;\n}\n\nconst signInReducer = (state: SignInState = initialState, action: SignInAction) => {\n    switch (action.type) {\n        case SignInEvents.ResetAllStates:\n            return {\n                ...initialState\n            }\n        case SignInEvents.TextChanged:\n            const textChangedAction: TextChangedAction = (action as TextChangedAction);\n            return {\n                ...state,\n                [textChangedAction.name]: textChangedAction.value\n            }\n        case SignInEvents.TogglePasswordVisibility:\n            return {\n                ...state,\n                showPassword: !state.showPassword\n            }\n        case SignInEvents.SignInEmailError:\n            return {\n                ...state,\n                errorSignInEmail: true\n            }\n        case SignInEvents.SignInPasswordError:\n            return {\n                ...state,\n                errorSignInPassword: true\n            }           \n        case SignInEvents.ClearErrors:\n            return {\n                ...state,\n                errorSignInEmail: false,\n                errorSignInPassword: false\n            }\n        case SignInEvents.ToggleResetPasswordDialog:\n            return {\n                ...state,\n                showResetPasswordDialog: !state.showResetPasswordDialog,\n                resetPasswordDialogEmail: \"\",\n            }\n        case SignInEvents.ProcessingResetPasswordRequest:\n            return {\n                ...state,\n                resetPasswordDialogProcessing: true,\n                resetPasswordDialogError: undefined\n            }\n        case SignInEvents.CompleteProcessingResetPasswordRequest:\n            const completeAction: CompleteProcessingResetPasswordRequestAction =\n                (action as CompleteProcessingResetPasswordRequestAction);\n            return {\n                ...state,\n                resetPasswordDialogEmailSent: completeAction.error === undefined,\n                resetPasswordDialogError: completeAction.error !== undefined\n                    ? {detail: completeAction.error} : state.resetPasswordDialogError,\n                resetPasswordDialogProcessing: false\n            }\n        default:\n            return state;\n    }\n}\n\nexport default signInReducer;","import React, {Component, FormEvent} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {AnyAction} from \"redux\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Dialog,\r\n    DialogActions,\r\n    DialogContent,\r\n    DialogTitle,\r\n    FormControl,\r\n    IconButton,\r\n    InputAdornment,\r\n    Paper,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport Routes from \"../../router/routes\";\r\nimport {\r\n    errorSendingResetPassword,\r\n    isProcessingResetPasswordRequest,\r\n    SignInState,\r\n    successfullySentResetPassword\r\n} from \"./SignInReducer\";\r\nimport {\r\n    onSendResetPasswordClick,\r\n    onSignInClick,\r\n    onTextChanged,\r\n    togglePasswordVisibility,\r\n    toggleResetPasswordDialog\r\n} from \"./SignInActions\";\r\nimport {\r\n    AuthenticationState,\r\n    hasAuthenticationError,\r\n    isAuthenticating\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {Close} from \"@material-ui/icons\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\nimport '../../shared-js-css-styles/sharedStyles.scss';\r\n\r\ninterface SignInProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    MediaQueryState: MediaQueryState;\r\n    SignInLocalState: SignInState;\r\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    togglePasswordVisibility: () => any;\r\n    onSignInClick: (event: FormEvent) => any;\r\n    toggleResetPasswordDialog: () => any;\r\n    onSendResetPasswordClick: (email: string) => () => Promise<void>;\r\n  }\r\n  \r\n  \r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        SignInLocalState: state.SignInLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\r\n        togglePasswordVisibility: () => dispatch(togglePasswordVisibility()),\r\n        onSignInClick: (event: FormEvent) => dispatch(onSignInClick(event)),\r\n        toggleResetPasswordDialog: () => dispatch(toggleResetPasswordDialog()),\r\n        onSendResetPasswordClick: (email: string) => dispatch(onSendResetPasswordClick(email))\r\n    }\r\n}\r\n\r\nclass SignInNew extends Component<SignInProps & Readonly<RouteComponentProps<RouteParams>>, {}> {\r\n          \r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            onSignInClick,\r\n            togglePasswordVisibility,\r\n            toggleResetPasswordDialog\r\n        } = this.props;\r\n\r\n        return <Box>\r\n            {/** Sign in card */}\r\n            <Row noGutters >\r\n                <Col xs={{span: 12, offset: 0}} md={{span: 6, offset: 3}} lg={{span: 6, offset: 3}} >\r\n                    <Box display=\"flex\" width=\"100%\" justifyContent=\"center\" paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"} paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"} >\r\n                        {/** Sign in card container */}\r\n                        <Paper elevation={0} square className={css(sharedStyles.kick_starter_border_box)} style={{ width: 650, padding: MediaQueryState.isMobile ? 20 : 30 }} >\r\n                            {/** Sign in card header */}\r\n                            <Box display=\"flex\" flexDirection=\"column\" marginBottom=\"35px\" >\r\n                                <Typography variant=\"h4\" align=\"center\" paragraph color=\"primary\">Sign in to your account</Typography>\r\n                                <Typography variant=\"body1\" align=\"center\">Connecting businesses and investors across the South West of England</Typography>\r\n                            </Box>\r\n\r\n                            {/** Display message to inform the user that the reset password email\r\n                             has been successfully sent */}\r\n                            {\r\n                                !successfullySentResetPassword(SignInLocalState)\r\n                                    ? null\r\n                                    : <Box marginBottom=\"35px\" color=\"white\" bgcolor={appColors.dark_green} padding=\"15px\" >\r\n                                        <Typography variant=\"body1\" align=\"left\">An email with password reset instructions has been sent to your email address.</Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Signin error */}\r\n                            {\r\n                                !hasAuthenticationError(AuthenticationState)\r\n                                    ? null\r\n                                    : <Box marginBottom=\"35px\" padding=\"15px\" color=\"white\" bgcolor=\"error.main\" >\r\n                                        <Typography variant=\"body1\" align=\"left\">\r\n                                       {/** {AuthenticationState.error?.detail} */}\r\n                                       Error: Username or password not recognised\r\n                                        </Typography>\r\n                                    </Box>\r\n                            }\r\n\r\n                            {/** Sign in form */}\r\n                            <form onSubmit={onSignInClick}>\r\n                                <Box display=\"flex\" flexDirection=\"column\" >\r\n                                    {/** Email field */}\r\n                                    <FormControl>\r\n                                        <TextField label=\"Email address\" name=\"signInEmail\" value={SignInLocalState.signInEmail} margin=\"normal\" variant=\"outlined\" error={SignInLocalState.errorSignInEmail} onChange={onTextChanged} />\r\n                                    </FormControl>\r\n\r\n                                    {/** Password field */}\r\n                                    <FormControl>\r\n                                        <TextField\r\n                                            label=\"Password\"\r\n                                            name=\"signInPassword\"\r\n                                            type={SignInLocalState.showPassword ? \"text\" : \"password\"}\r\n                                            margin=\"normal\"\r\n                                            variant=\"outlined\"\r\n                                            error={SignInLocalState.errorSignInPassword}\r\n                                            onChange={onTextChanged}\r\n                                            InputProps={{\r\n                                                endAdornment: (\r\n                                                    <InputAdornment position=\"end\" >\r\n                                                        <IconButton edge=\"end\" aria-label=\"Toggle password visibility\" onClick={togglePasswordVisibility} >\r\n                                                            {\r\n                                                                SignInLocalState.showPassword\r\n                                                                    ?\r\n                                                                    <VisibilityOff/>\r\n                                                                    :\r\n                                                                    <Visibility/>\r\n                                                            }\r\n                                                        </IconButton>\r\n                                                    </InputAdornment>\r\n                                                ),\r\n                                            }}\r\n                                        />\r\n                                    </FormControl>\r\n                                    <Box marginTop=\"35px\" marginBottom=\"45px\" >\r\n                                        <Typography variant=\"body1\" align=\"center\" >\r\n                                            By clicking Sign In, you agree to our&nbsp;\r\n                                            <CustomLink url={Routes.nonGroupTermsOfUse} target=\"_blank\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Terms of use\" } />\r\n                                            &nbsp;and&nbsp;\r\n                                            <CustomLink url={Routes.nonGroupPrivacyPolicy} target=\"_blank\" color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Privacy policy\" } />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {\r\n                                        !isAuthenticating(AuthenticationState)\r\n                                            ? null\r\n                                            : <Box display=\"flex\" marginBottom=\"45px\" justifyContent=\"center\" >\r\n                                                <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} />\r\n                                            </Box>\r\n                                    }\r\n\r\n\r\n                                    <FormControl>\r\n                                        <Button type=\"submit\" variant=\"contained\" color=\"primary\" size=\"large\" className={css(sharedStyles.no_text_transform)}>Sign in</Button>\r\n                                    </FormControl>\r\n\r\n                                    {/** Sign up */}\r\n                                    <Box display=\"flex\" marginTop=\"25px\" justifyContent=\"center\" >\r\n                                        <Typography variant=\"body1\" >\r\n                                            Don't have an Student account? &nbsp;\r\n                                            <CustomLink url={Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")} color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main} activeColor=\"none\" activeUnderline component=\"nav-link\" childComponent={ \"Sign up\" } />\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {/** Forgot password */}\r\n                                    <Box display=\"flex\" marginTop=\"16px\" justifyContent=\"center\" onClick={toggleResetPasswordDialog} >\r\n                                        <Typography variant=\"body1\" color=\"primary\" className={css(sharedStyles.nav_link_hover)}>Forgot your password?</Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            </form>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row noGutters>\r\n                <Col xs={12} sm={12} md={12} lg={12}>\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Reset password dialog */}\r\n            <ResetPasswordDialogComponent/>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignInNew);\r\n\r\nclass ResetPasswordDialog extends Component<SignInProps, {}> {\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            SignInLocalState,\r\n            onTextChanged,\r\n            toggleResetPasswordDialog,\r\n            onSendResetPasswordClick\r\n        } = this.props;\r\n\r\n        return <Dialog\r\n            fullWidth\r\n            maxWidth=\"sm\"\r\n            fullScreen={this.props.MediaQueryState.isMobile}\r\n            open={SignInLocalState.showResetPasswordDialog}\r\n            onClose={toggleResetPasswordDialog}\r\n        >\r\n            <DialogTitle>\r\n                <Box display=\"flex\" alignItems=\"center\">\r\n                    <Box display=\"flex\" justifyContent=\"flex-start\" flexGrow={2}>\r\n                        <Typography variant=\"h5\" align=\"left\">Reset Your Password</Typography>\r\n                    </Box>\r\n                    <Box display=\"flex\" justifyContent=\"flex-end\" flexGrow={1}>\r\n                        <IconButton onClick={toggleResetPasswordDialog}>\r\n                            <Close/>\r\n                        </IconButton>\r\n                    </Box>\r\n                </Box>\r\n            </DialogTitle>\r\n\r\n            <DialogContent style={{ padding: 0 }}>\r\n                <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" marginTop=\"15px\" paddingX=\"24px\">\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                        <Typography variant=\"body1\" align=\"left\">Please provide the email address you used when you signed up for your Student account.</Typography>\r\n                        <Box height=\"25px\"/>\r\n                        <Typography variant=\"body1\" align=\"left\">We will send you an email with a link to reset your password. <b>Please note that this link will only be valid for up to 3 hours.</b></Typography>\r\n                    </Box>\r\n\r\n                    <Box height=\"42px\"/>\r\n\r\n                    <Box display=\"flex\" flexDirection=\"column\">\r\n                        {/** Display error */}\r\n                        {\r\n                            !errorSendingResetPassword(SignInLocalState)\r\n                                ? null\r\n                                : <Box width=\"100%\" bgcolor=\"error.main\" padding=\"15px\" marginBottom=\"42px\" color=\"white\">\r\n                                    <Typography variant=\"body1\" align=\"left\">Unable to send request password email.</Typography>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Processing indicator */}\r\n                        {\r\n                            !isProcessingResetPasswordRequest(SignInLocalState)\r\n                                ? null\r\n                                : <Box display=\"flex\" justifyContent=\"center\" marginBottom=\"42px\">\r\n                                    <HashLoader color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}/>\r\n                                </Box>\r\n                        }\r\n\r\n                        {/** Email input */}\r\n                        <TextField name=\"resetPasswordDialogEmail\" value={SignInLocalState.resetPasswordDialogEmail} label=\"Email address\" variant=\"outlined\" fullWidth onChange={onTextChanged}/>\r\n                    </Box>\r\n\r\n                    <Box height=\"25px\"/>\r\n                </Box>\r\n            </DialogContent>\r\n\r\n            <DialogActions>\r\n                <Box display=\"flex\" justifyContent=\"flex-end\" padding=\"8px\">\r\n                    <Button color=\"primary\" variant=\"contained\" size=\"medium\" onClick={() => onSendResetPasswordClick(SignInLocalState.resetPasswordDialogEmail.trim())}  className={css(sharedStyles.no_text_transform)} disabled={SignInLocalState.resetPasswordDialogEmail.trim().length === 0}>Send</Button>\r\n                </Box>\r\n            </DialogActions>\r\n        </Dialog>;\r\n    }\r\n}\r\n\r\nconst ResetPasswordDialogComponent = connect(mapStateToProps, mapDispatchToProps)(ResetPasswordDialog);\r\n\r\n","import React, {Component} from \"react\";\nimport {Col, Container, Row} from \"react-bootstrap\";\nimport {Box, Typography} from \"@material-ui/core\";\nimport * as appColors from \"../../values/colors\";\n\nexport default class PageNotFound extends Component<any, any> {\n    render() {\n        return <Container\n            fluid\n            style={{ padding: 0 }}\n        >\n            <Row noGutters >\n                <Col xs={12} sm={12} md={12} lg={12} >\n                    <Box display=\"flex\" flexDirection=\"column\" width=\"100%\" height=\"100%\" alignItems=\"center\" marginTop=\"120px\" >\n                        <Box color={appColors.primaryColor} >\n                            <Typography variant=\"h1\" align=\"center\" >404 error</Typography>\n                        </Box>\n                        <Box height=\"40px\" />\n                        <Typography variant=\"h2\" align=\"center\" >Page not found</Typography>\n                        <Box height=\"25px\" />\n                        <Typography variant=\"h2\" color=\"textSecondary\" align=\"center\">We're sorry, the page you requested could not be found.</Typography>\n                    </Box>\n                </Col>\n            </Row>\n        </Container>;\n    }\n}","import React from 'react';\n\nclass ErrorBoundary extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            hasError: false,\n            error: null,\n            errorInfo: null\n        };\n    }\n\n    static getDerivedStateFromError(error) {\n        // Update state so that the next render will show the fallback UI.\n        return { hasError: true };\n    }\n\n    componentDidCatch(error, errorInfo) {\n        // Log the error and error info\n        console.error(\"Error caught by ErrorBoundary:\", error);\n        console.error(\"Error info:\", errorInfo);\n\n        // Update state with error details\n        this.setState({\n            error: error,\n            errorInfo: errorInfo\n        });\n\n        // You can also log the error to an error reporting service\n        // logErrorToMyService(error, errorInfo);\n    }\n\n    render() {\n        if (this.state.hasError) {\n            // Render fallback UI when an error occurs\n            return (\n                <div>\n                    <h1>Something went wrong.</h1>\n                    {this.state.error && (\n                        <details style={{ whiteSpace: 'pre-wrap' }}>\n                            <strong>Error:</strong> {this.state.error.toString()}\n                            <br />\n                            {this.state.errorInfo && (\n                                <>\n                                    <strong>Component Stack:</strong>\n                                    <pre>{this.state.errorInfo.componentStack}</pre>\n                                </>\n                            )}\n                        </details>\n                    )}\n                </div>\n            );\n        }\n\n        // Render children when there are no errors\n        return this.props.children;\n    }\n}\n\nexport default ErrorBoundary;\n","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    getGroupRouteTheme,\r\n    isValidatingGroupUrl,\r\n    ManageGroupUrlState,\r\n    routeContainsGroupName,\r\n    successfullyValidatedGroupUrl\r\n} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {\r\n    AuthenticationState,\r\n    isAuthenticating,\r\n    successfullyAuthenticated\r\n} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {Col, Container, Row} from \"react-bootstrap\";\r\nimport * as appColors from \"../../values/colors\";\r\nimport {Box, Button, Divider, Typography} from \"@material-ui/core\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport {getGroupLogo} from \"../../models/group_properties\";\r\nimport Routes from \"../../router/routes\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\n\r\ninterface HeaderProps extends HeaderLocalProps {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n}\r\n\r\ninterface HeaderLocalProps {\r\n    routePath: string;\r\n    homUrl: string;\r\n    dashboardUrl: string;\r\n    signInUrl: string;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        MediaQueryState: state.MediaQueryState,\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        AuthenticationState: state.AuthenticationState\r\n    }\r\n}\r\n\r\nclass Header extends Component<HeaderProps, {}> {\r\n    render() {\r\n        const {\r\n            MediaQueryState,\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            routePath,\r\n            homUrl,\r\n            dashboardUrl,\r\n            signInUrl\r\n        } = this.props;\r\n\r\n        return <Container fluid style={{ padding: 0 }} >\r\n            <Row noGutters style={{ paddingTop: 10, paddingBottom: 10, backgroundColor: appColors.white }}>\r\n                {/** Home/Dashboard */}\r\n                <Col xs={{span: 6, order: 3}} sm={{span: 6, order: 3}} md={{span: 4, order: 1}} lg={{span: 4, order: 1}} >\r\n                    <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" alignItems=\"center\" marginLeft=\"30px\" >\r\n                        {\r\n                            successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={homUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\">Home</Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n\r\n                        {\r\n                            isAuthenticating(AuthenticationState)\r\n                                ? null\r\n                                : !successfullyAuthenticated(AuthenticationState)\r\n                                ? null\r\n                                : <CustomLink\r\n                                    color=\"black\"\r\n                                    activeColor={\r\n                                        Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                            ? appColors.primaryColor\r\n                                            : getGroupRouteTheme(ManageGroupUrlState).palette.primary.main\r\n                                    }\r\n                                    activeUnderline={false}\r\n                                    url={dashboardUrl}\r\n                                    component=\"nav-link\"\r\n                                    childComponent={\r\n                                        <Typography variant=\"body1\">Dashboard</Typography>\r\n                                    }\r\n                                />\r\n                        }\r\n                    </Box>\r\n                </Col>\r\n\r\n                {/** Logo */}\r\n                <Col xs={{span: 12, order: 1}} sm={{span: 12, order: 1}} md={{span: 4, order: 2}} lg={{span: 4, order: 2}}>\r\n                    <Box display=\"flex\" flexDirection=\"column\" justifyContent=\"center\" alignItems=\"center\">\r\n                        <CustomLink\r\n                            color=\"none\"\r\n                            activeColor=\"none\"\r\n                            activeUnderline={false}\r\n                            url={homUrl}\r\n                            component=\"nav-link\"\r\n                            childComponent={\r\n                                <Box display=\"flex\" flexDirection=\"column\" width=\"125px\" height=\"100%\" justifyContent=\"center\" alignItems=\"center\">\r\n                                    <img\r\n                                        alt=\"logo\"\r\n                                        src={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? require(\"../../img/logo.png\").default\r\n                                                : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                ? null\r\n                                                : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                    ? require(\"../../img/logo.png\").default\r\n                                                    : successfullyValidatedGroupUrl(ManageGroupUrlState)\r\n                                                        ? getGroupLogo(ManageGroupUrlState.group)\r\n                                                        : null\r\n                                        }\r\n                                        style={{ width: \"auto\", height: 36, objectFit: \"contain\" }}\r\n                                    />\r\n                                    <Box height=\"3px\" />\r\n                                    <Box\r\n                                        fontWeight=\"fontWeightBold\"\r\n                                        color={\r\n                                            Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                ? appColors.primaryColor\r\n                                                : \"primary.main\"\r\n                                        }\r\n                                    >\r\n                                        <Typography variant=\"body1\" noWrap >\r\n                                            {\r\n                                                Routes.isErrorRoute(routePath) || Routes.isSystemPublicRoute(routePath)\r\n                                                    ? \"Default student\"\r\n                                                    : isValidatingGroupUrl(ManageGroupUrlState)\r\n                                                    ? \"\"\r\n                                                    : !routeContainsGroupName(ManageGroupUrlState)\r\n                                                        ? \"Default student\"\r\n                                                        : ManageGroupUrlState.group?.displayName\r\n                                            }\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </Box>\r\n                            }\r\n                        />\r\n                    </Box>\r\n                </Col>\r\n\r\n                {\r\n                    !MediaQueryState.isMobile\r\n                        ? null\r\n                        : <Col xs={{span: 12, order: 2}} sm={{span: 12, order: 2}} >\r\n                            <Box marginY=\"10px\" >\r\n                                <Divider/>\r\n                            </Box>\r\n                        </Col>\r\n                }\r\n\r\n                {/** Sign in/Avatar */}\r\n                <Col xs={{span: 6, order: 4}} sm={{span: 6, order: 4}} md={{span: 4, order: 3}} lg={{span: 4, order: 3}} >\r\n                    {\r\n                        isAuthenticating(AuthenticationState)\r\n                            ? null\r\n                            : !successfullyAuthenticated(AuthenticationState)\r\n                            ? Routes.isSignInRoute(routePath)\r\n                                ? null\r\n                                : <Box display=\"flex\" flexDirection=\"row\" height=\"100%\" justifyContent=\"flex-end\" alignItems=\"center\" marginRight=\"30px\" >\r\n                                    <CustomLink\r\n                                        color=\"none\"\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline={false}\r\n                                        url={signInUrl}\r\n                                        // TODO: When completely migrate to the new authentication flow, change this component to \"nav-link\"\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            <Button color=\"primary\" className={css(sharedStyles.no_text_transform)} variant=\"contained\" size=\"medium\">Sign in</Button>\r\n                                        }\r\n                                    />\r\n                                </Box>\r\n                            : null\r\n                    }\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Divider */}\r\n            <Row noGutters >\r\n                <Col xs={12} sm={12} md={12} lg={12} >\r\n                    <Divider/>\r\n                </Col>\r\n            </Row>\r\n        </Container>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Header);","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../redux-store/reducers\";\nimport {\n    getGroupRouteTheme,\n    isValidatingGroupUrl,\n    ManageGroupUrlState,\n    successfullyValidatedGroupUrl\n} from \"../redux-store/reducers/manageGroupUrlReducer\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport Routes from \"./routes\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {validateGroupUrl} from \"../redux-store/actions/manageGroupUrlActions\";\nimport {\n    AuthenticationState,\n    authIsNotInitialized,\n    isAuthenticating,\n    successfullyAuthenticated\n} from \"../redux-store/reducers/authenticationReducer\";\nimport {Col, Container, Row} from \"react-bootstrap\";\nimport Header from \"../shared-components/header/Header\";\nimport {signIn, signOut} from \"../redux-store/actions/authenticationActions\";\nimport firebase from \"../firebase/firebaseApp\";\nimport {RouteParams} from \"./router\";\nimport {Box} from \"@material-ui/core\";\nimport {\n    isLoadingSystemAttributes,\n    ManageSystemAttributesState\n} from \"../redux-store/reducers/manageSystemAttributesReducer\";\nimport {loadSystemAttributes} from \"../redux-store/actions/manageSystemAttributesActions\";\nimport User, {isInvestor, isIssuer} from \"../models/user\";\nimport Admin, {isAdmin} from \"../models/admin\";\nimport GroupOfMembership from \"../models/group_of_membership\";\nimport {BarLoader} from \"react-spinners\";\nimport { safeSetItem } from \"../utils/browser\";\n\ninterface GroupRouteProps extends GroupRouteLocalProps {\n    ManageSystemAttributesState: ManageSystemAttributesState;\n    ManageGroupUrlState: ManageGroupUrlState;\n    AuthenticationState: AuthenticationState;\n    loadSystemAttributes: () => any;\n    validateGroupUrl: (path: string, groupUserName: string | null) => any;\n    signIn: () => any;\n    signOut: () => any;\n}\n\ninterface GroupRouteLocalProps {\n    showHeader: boolean;\n    backgroundColor?: string;\n    component: React.ReactNode;\n}\n\ninterface GroupRouteState {\n    navigatingFromSignInOrSignUpToDashboard: boolean;\n    navigatingToSignIn: boolean;\n    navigatingToError: boolean;\n}\n\nconst initialState: GroupRouteState = {\n    navigatingFromSignInOrSignUpToDashboard: false,\n    navigatingToSignIn: false,\n    navigatingToError: false\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ManageSystemAttributesState: state.ManageSystemAttributesState,\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        loadSystemAttributes: () => dispatch(loadSystemAttributes()),\n        validateGroupUrl: (path: string, groupUserName: string | null) => dispatch(validateGroupUrl(path, groupUserName)),\n        signIn: () => dispatch(signIn()),\n        signOut: () => dispatch(signOut())\n    }\n}\n\nclass GroupRoute extends Component<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>, GroupRouteState> {\n    private authListener: firebase.default.Unsubscribe | null;\n    private routePath: string;\n    private routeParams: any;\n\n    constructor(props: GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>) {\n        super(props);\n        this.authListener = null;\n        this.routePath = this.props.match.path;\n        this.routeParams = this.props.match.params;\n        this.state = {\n            ...initialState\n        }\n    }\n\n    componentDidMount() {\n        this.validateRouteAndAuthentication();\n    }\n\n    componentDidUpdate(prevProps: Readonly<GroupRouteProps & Readonly<RouteComponentProps<RouteParams>>>, prevState: Readonly<GroupRouteState>, snapshot?: any) {\n        this.validateRouteAndAuthentication();\n\n        // system attributes are being loaded\n        if (isLoadingSystemAttributes(this.props.ManageSystemAttributesState)) {\n            return;\n        }\n\n        // group url is being validated\n        if (isValidatingGroupUrl(this.props.ManageGroupUrlState)) {\n            return;\n        }\n\n        // invalid group url --> redirect to 404 page\n        if (!successfullyValidatedGroupUrl(this.props.ManageGroupUrlState) && !this.state.navigatingToError) {\n            this.setState({\n                navigatingToError: true\n            });\n            this.props.history.push(Routes.error404);\n            return;\n        }\n\n        // redirect an unauthenticated user to the sign in route if they try to access protected routes\n        if (Routes.isProtectedRoute(this.routePath)\n            && !authIsNotInitialized(this.props.AuthenticationState)\n            && !isAuthenticating(this.props.AuthenticationState)\n            && !successfullyAuthenticated(this.props.AuthenticationState)\n            && !this.state.navigatingToSignIn\n        ) {\n            const { location } = this.props;\n\n            safeSetItem('redirectToAfterAuth', `${location.pathname}${location?.search}`);\n\n            this.setState({\n                navigatingToSignIn: true\n            });\n            this.props.history.push(Routes.constructSignInRoute(this.routeParams));\n        }\n\n        // redirect the user to their dashboard if they are on the sign in/up route and are successfully authenticated\n        if ((Routes.isSignInRoute(this.routePath) || Routes.isSignUpRoute(this.routePath))\n            && successfullyAuthenticated(this.props.AuthenticationState)\n            && !this.state.navigatingFromSignInOrSignUpToDashboard\n        ) {\n            const dashboardRoute: string = Routes.constructDashboardRoute(this.routeParams, this.props.ManageGroupUrlState, this.props.AuthenticationState);\n            this.setState({\n                navigatingFromSignInOrSignUpToDashboard: true\n            });\n            this.props.history.push(dashboardRoute);\n        }\n\n        // redirect the user to 404 page if they are trying to access routes that are not meant for them\n        if (successfullyAuthenticated(this.props.AuthenticationState)) {\n            const currentUser: User | Admin | null = this.props.AuthenticationState.currentUser;\n            if (currentUser) {\n                const currentAdmin: Admin | null = isAdmin(currentUser);\n                let shouldRedirectToError: boolean = false;\n\n                if (Routes.isRouteReservedForSuperAdmin(this.routePath)) {\n                    if (!currentAdmin || (currentAdmin && !currentAdmin.superAdmin)) {\n                        shouldRedirectToError = true;\n                    }\n                } else if (Routes.isGroupAdminRoute(this.routePath)) {\n                    if (!currentAdmin) {\n                        shouldRedirectToError = true;\n                    } else {\n                        const adminGroup: GroupOfMembership = this.props.AuthenticationState.groupsOfMembership[0];\n                        if (adminGroup.group.groupUserName !== this.routeParams.groupUserName) {\n                            shouldRedirectToError = true;\n                        }\n                    }\n                } else if (Routes.isIssuerDashboardRoute(this.routePath)) {\n                    if (!isIssuer(currentUser)) {\n                        shouldRedirectToError = true;\n                    } else if (this.props.AuthenticationState.groupsOfMembership\n                        .filter(groupOfMembership =>\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\n                    ) {\n                        shouldRedirectToError = true;\n                    }\n                } else if (Routes.isInvestorDashboardRoute(this.routePath)) {\n                    if (!isInvestor(currentUser)) {\n                        shouldRedirectToError = true;\n                    } else if (this.props.AuthenticationState.groupsOfMembership\n                        .filter(groupOfMembership =>\n                            groupOfMembership.group.groupUserName === this.routeParams.groupUserName).length === 0\n                    ) {\n                        shouldRedirectToError = true;\n                    }\n                }\n\n                if (shouldRedirectToError && !this.state.navigatingToError) {\n                    this.setState({\n                        navigatingToError: true\n                    });\n                    this.props.history.push(Routes.error404);\n                    return;\n                }\n            }\n        }\n\n        if (!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath) && this.state.navigatingFromSignInOrSignUpToDashboard) {\n            this.setState({\n                navigatingFromSignInOrSignUpToDashboard: false\n            });\n        }\n\n        if (Routes.isSignInRoute(this.routePath) && this.state.navigatingToSignIn) {\n            this.setState({\n                navigatingToSignIn: false\n            });\n        }\n\n        if (Routes.isErrorRoute(this.routePath) && this.state.navigatingToError) {\n            this.setState({\n                navigatingToError: false\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        this.detachAuthListener();\n    }\n\n    render() {\n        const {\n            ManageSystemAttributesState,\n            ManageGroupUrlState,\n            AuthenticationState,\n            showHeader,\n            backgroundColor\n        } = this.props;\n\n        this.updateRouteAndParams();\n\n        if (isLoadingSystemAttributes(ManageSystemAttributesState)\n            || isValidatingGroupUrl(ManageGroupUrlState)\n            || (successfullyValidatedGroupUrl(ManageGroupUrlState) && authIsNotInitialized(AuthenticationState))\n            || ((!Routes.isSignInRoute(this.routePath) && !Routes.isSignUpRoute(this.routePath))\n                && isAuthenticating(AuthenticationState))\n        ) {\n            return (\n                <Box>\n                    <BarLoader\n                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\n                        width=\"100%\"\n                        height={4}\n                    />\n                </Box>\n            );\n        }\n\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState)) {\n            return (\n                <Container\n                    fluid\n                    style={{\n                        padding: 0,\n                        height: backgroundColor !== undefined ? \"100%\" : \"none\",\n                        minHeight: backgroundColor !== undefined ? \"100vh\" : \"none\",\n                        backgroundColor: backgroundColor ?? \"none\"\n                    }}\n                >\n                    {\n                        !showHeader\n                            ? null\n                            : <Row\n                                noGutters\n                            >\n                                <Col\n                                    xs={12}\n                                    sm={12}\n                                    md={12}\n                                    lg={12}\n                                >\n                                    <Header\n                                        routePath={this.routePath}\n                                        homUrl={Routes.constructHomeRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\n                                        dashboardUrl={Routes.constructDashboardRoute(this.routeParams, ManageGroupUrlState, AuthenticationState)}\n                                        signInUrl={Routes.constructSignInRoute(this.routeParams)}\n                                    />\n                                </Col>\n                            </Row>\n                    }\n\n                    <Row\n                        noGutters\n                    >\n                        <Box\n                            width=\"100%\"\n                            height=\"100%\"\n                        >\n                            {\n                                this.props.component\n                            }\n                        </Box>\n                    </Row>\n                </Container>\n            );\n        }\n\n        return null;\n    }\n\n    validateRouteAndAuthentication = () => {\n        this.updateRouteAndParams();\n\n        this.props.loadSystemAttributes();\n\n        this.props.validateGroupUrl(\n            this.routePath, this.routeParams.hasOwnProperty(\"groupUserName\")\n                ? this.routeParams.groupUserName : null\n        );\n\n        this.attachAuthListener();\n    }\n\n    updateRouteAndParams = () => {\n        this.routePath = this.props.match.path;\n        this.routeParams = this.props.match.params;\n    }\n\n    attachAuthListener = () => {\n        const {\n            ManageGroupUrlState\n        } = this.props;\n\n        if (successfullyValidatedGroupUrl(ManageGroupUrlState) && !this.authListener) {\n            this.authListener = firebase.auth().onAuthStateChanged(firebaseUser => {\n                if (firebaseUser) {\n                    this.props.signIn();\n                } else {\n                    this.props.signOut();\n                }\n            });\n        }\n    }\n\n    detachAuthListener = () => {\n        if (this.authListener) {\n            this.authListener();\n            this.authListener = null;\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupRoute);","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport InvitedUser from \"../../models/invited_user\";\nimport UserRepository from \"../../api/repositories/UserRepository\";\nimport React from \"react\";\nimport {checkPasswordStrength, PASSWORD_VERY_WEAK} from \"../../utils/passwordUtils\";\nimport {isValidEmailAddress} from \"../../utils/emailUtils\";\nimport {signIn} from \"../../redux-store/actions/authenticationActions\";\n\nexport enum SignUpEvents {\n    LoadingInvitedUser = \"SignUpEvents.LoadingInvitedUser\",\n    CompleteLoadingInvitedUser = \"SignUpEvents.CompleteLoadingInvitedUser\",\n    InputFieldChanged = \"SignUpEvents.InputFieldChanged\",\n    CreatingAccount = \"SignUpEvents.CreatingAccount\",\n    CompleteCreatingAccount = \"SignUpEvents.CompleteCreatingAccount\"\n}\n\nexport interface SignUpAction extends Action {\n\n}\n\nexport interface CompleteLoadingInvitedUserAction extends SignUpAction {\n    invitedUser?: InvitedUser;\n    error?: string;\n}\n\nexport interface InputFieldChangedAction extends SignUpAction {\n    name: string;\n    value: string | boolean;\n}\n\nexport interface CompleteCreatingAccountAction extends SignUpAction {\n    error?: string;\n}\n\nexport const loadInvitedUser: ActionCreator<any> = (invitedUserID: string) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n\n        const completeAction: CompleteLoadingInvitedUserAction = {\n            type: SignUpEvents.CompleteLoadingInvitedUser\n        };\n\n        try {\n            dispatch({\n                type: SignUpEvents.LoadingInvitedUser\n            });\n\n            const response = await new UserRepository().retrieveInvitedUser(invitedUserID);\n            const invitedUser: InvitedUser = response.data;\n            completeAction.invitedUser = JSON.parse(JSON.stringify(invitedUser));\n            return dispatch(completeAction);\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}\n\nexport const handleInputFieldChanged: ActionCreator<any> = (event: React.ChangeEvent<HTMLInputElement>) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const inputFieldType: string = event.target.type;\n        const inputFieldName: string = event.target.name;\n        const inputFieldValue: string = event.target.value;\n        const inputFieldChecked: boolean = event.target.checked;\n\n        const action: InputFieldChangedAction = {\n            type: SignUpEvents.InputFieldChanged,\n            name: inputFieldName,\n            value: inputFieldType === \"checkbox\" ? inputFieldChecked : inputFieldValue\n        };\n\n        return dispatch(action);\n    }\n}\n\nexport const createAccount: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            invitedUser,\n            userType,\n            title,\n            discover,\n            firstName,\n            lastName,\n            email,\n            confirmedEmail,\n            password,\n            confirmedPassword,\n            acceptMarketingPreferences\n        } = getState().SignUpLocalState;\n\n        const {\n            group\n        } = getState().ManageGroupUrlState;\n\n        const completeAction: CompleteCreatingAccountAction = {\n            type: SignUpEvents.CompleteCreatingAccount\n        };\n\n        // invalid email address\n        if (!isValidEmailAddress(email) || !isValidEmailAddress(confirmedEmail)) {\n            completeAction.error = \"Please enter a valid email address.\";\n            return dispatch(completeAction);\n        }\n\n        // emails not match\n        if (email.trim().toLocaleLowerCase() !== confirmedEmail.trim().toLocaleLowerCase()) {\n            completeAction.error = \"Emails do not match.\";\n            return dispatch(completeAction);\n        }\n\n        // passwords not match\n        if (password !== confirmedPassword) {\n            completeAction.error = \"Passwords do not match.\";\n            return dispatch(completeAction);\n        }\n\n        // password not strong enough\n        if (checkPasswordStrength(password) === PASSWORD_VERY_WEAK) {\n            completeAction.error = \"Password is too weak. Please select a stronger password.\";\n            return dispatch(completeAction);\n        }\n\n        try {\n            dispatch({\n                type: SignUpEvents.CreatingAccount\n            });\n\n            await new UserRepository().signUp({\n                isPublicRegistration: invitedUser === undefined,\n                invitedUserID: invitedUser !== undefined ? invitedUser.id : undefined,\n                userProfile: {\n                    title,\n                    discover,\n                    firstName,\n                    lastName,\n                    email,\n                    type: userType\n                },\n                password,\n                groupID: invitedUser ? invitedUser.invitedBy : group?.anid ?? \"\",\n                acceptMarketingPreferences: acceptMarketingPreferences,\n            });\n\n            dispatch(completeAction);\n            return dispatch(signIn(email, password));\n        } catch (error) {\n            completeAction.error = error.toString();\n            return dispatch(completeAction);\n        }\n    }\n}","import {\n    CompleteConfirmingResetPasswordAction,\n    CompleteVerifyingCodeAction,\n    ResetPasswordAction,\n    ResetPasswordEvents,\n    TextChangedAction\n} from \"./ResetPasswordActions\";\nimport Error from \"../../models/error\";\n\nexport interface ResetPasswordState {\n    verifyingCode: boolean;\n    codeVerified: boolean;\n    actionCode: string | null;\n    email: string | null;\n    errorVerifyingCode?: Error;\n\n    password: string;\n    confirmedPassword: string;\n\n    resettingPassword: boolean;\n    passwordReset: boolean;\n    errorResettingPassword?: Error;\n}\n\nconst initialState: ResetPasswordState = {\n    verifyingCode: false,\n    codeVerified: false,\n    actionCode: null,\n    email: null,\n\n    password: \"\",\n    confirmedPassword: \"\",\n\n    resettingPassword: false,\n    passwordReset: false\n}\n\nexport const isVerifyingCode = (state: ResetPasswordState) => {\n    return state.verifyingCode && !state.codeVerified;\n}\n\nexport const successfullyVerifyingCode = (state: ResetPasswordState) => {\n    return !state.verifyingCode && state.codeVerified && state.email !== null && state.errorVerifyingCode === undefined;\n}\n\nexport const hasErrorVerifyingCode = (state: ResetPasswordState) => {\n    return !state.verifyingCode && state.codeVerified && state.email === null && state.errorVerifyingCode !== undefined;\n}\n\nexport const isResettingPassword = (state: ResetPasswordState) => {\n    return state.resettingPassword && !state.passwordReset;\n}\n\nexport const successfullyResettingPassword = (state: ResetPasswordState) => {\n    return !state.resettingPassword && state.passwordReset && state.errorResettingPassword === undefined;\n}\n\nexport const hasErrorResettingPassword = (state: ResetPasswordState) => {\n    return !state.resettingPassword && !state.passwordReset && state.errorResettingPassword !== undefined;\n}\n\nconst resetPasswordReducer = (state = initialState, action: ResetPasswordAction) => {\n    switch (action.type) {\n        case ResetPasswordEvents.VerifyingCode:\n            return {\n                ...state,\n                verifyingCode: true,\n                codeVerified: false\n            }\n        case ResetPasswordEvents.CompleteVerifyingCode:\n            const completeVerifyingCodeAction: CompleteVerifyingCodeAction = action as CompleteVerifyingCodeAction;\n            return {\n                ...state,\n                verifyingCode: false,\n                codeVerified: true,\n                actionCode: completeVerifyingCodeAction.actionCode,\n                email: completeVerifyingCodeAction.email,\n                errorVerifyingCode: completeVerifyingCodeAction.error !== undefined ? {detail: completeVerifyingCodeAction.error} : state.errorVerifyingCode\n            }\n        case ResetPasswordEvents.TextChanged:\n            const textChangedAction: TextChangedAction = action as TextChangedAction;\n            return {\n                ...state,\n                [textChangedAction.name]: textChangedAction.value\n            }\n        case ResetPasswordEvents.ConfirmingResetPassword:\n            return {\n                ...state,\n                resettingPassword: true,\n                passwordReset: false,\n                errorResettingPassword: undefined\n            }\n        case ResetPasswordEvents.CompleteConfirmingResetPassword:\n            const completeConfirmingResetPasswordAction: CompleteConfirmingResetPasswordAction = action as CompleteConfirmingResetPasswordAction;\n            return {\n                ...state,\n                resettingPassword: false,\n                passwordReset: completeConfirmingResetPasswordAction.error === undefined,\n                errorResettingPassword: completeConfirmingResetPasswordAction.error ? {detail: completeConfirmingResetPasswordAction.error} : state.errorResettingPassword\n            }\n        default:\n            return state;\n    }\n}\n\nexport default resetPasswordReducer;","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { AppState } from \"../../redux-store/reducers\";\nimport { ThunkDispatch } from \"redux-thunk\";\nimport { AnyAction } from \"redux\";\nimport { Box, Button, TextField, Typography } from \"@material-ui/core\";\nimport { Redirect, RouteComponentProps } from \"react-router-dom\";\nimport { RouteParams } from \"../../router/router\";\nimport { Col, Row } from \"react-bootstrap\";\nimport { css } from \"aphrodite\";\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\nimport queryString from \"query-string\";\nimport { confirmPasswordReset, onTextChanged, verifyCode } from \"./ResetPasswordActions\";\nimport {\n    hasErrorResettingPassword,\n    hasErrorVerifyingCode,\n    isResettingPassword,\n    isVerifyingCode,\n    ResetPasswordState,\n    successfullyResettingPassword\n} from \"./ResetPasswordReducer\";\nimport { HashLoader } from \"react-spinners\";\nimport { getGroupRouteTheme, ManageGroupUrlState } from \"../../redux-store/reducers/manageGroupUrlReducer\";\nimport Routes from \"../../router/routes\";\nimport { MediaQueryState } from \"../../redux-store/reducers/mediaQueryReducer\";\n\ninterface ResetPasswordProps {\n    ManageGroupUrlState: ManageGroupUrlState;\n    MediaQueryState: MediaQueryState;\n    ResetPasswordLocalState: ResetPasswordState;\n    verifyCode: (code: string | null) => any;\n    onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\n    confirmPasswordReset: () => any;\n}\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        MediaQueryState: state.MediaQueryState,\n        ResetPasswordLocalState: state.ResetPasswordLocalState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {\n        verifyCode: (code: string | null) => dispatch(verifyCode(code)),\n        onTextChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(onTextChanged(event)),\n        confirmPasswordReset: () => dispatch(confirmPasswordReset())\n    }\n}\n\nclass ResetPassword extends Component<ResetPasswordProps & Readonly<RouteComponentProps<RouteParams>>, any> {\n\n    componentDidMount() {\n        const params = queryString.parse(this.props.location.search);\n        if (params.oobCode) {\n            const actionCode: string | string[] | null | undefined = params.oobCode;\n            if (actionCode) {\n                this.props.verifyCode(actionCode as string);\n            } else {\n                this.props.verifyCode(null);\n            }\n        } else {\n            this.props.verifyCode(null);\n        }\n    }\n\n    render() {\n        const {\n            ManageGroupUrlState,\n            MediaQueryState,\n            ResetPasswordLocalState,\n            onTextChanged,\n            confirmPasswordReset\n        } = this.props;\n\n        // verifying code\n        if (isVerifyingCode(ResetPasswordLocalState)) {\n            return <Box display=\"flex\" justifyContent=\"center\" marginTop=\"50px\">\n                <HashLoader\n                    color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\n                />\n            </Box>;\n        }\n\n        // failed to verify code\n        if (hasErrorVerifyingCode(ResetPasswordLocalState)) {\n            return <Redirect\n                to={Routes.error404}\n            />;\n        }\n\n        // password has been successfully updated\n        if (successfullyResettingPassword(ResetPasswordLocalState)) {\n            return <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" marginTop=\"50px\">\n                <Typography\n                    variant=\"h5\"\n                    color=\"primary\"\n                    align=\"center\"\n                >\n                    Your password has been updated.\n                </Typography>\n            </Box>;\n        }\n\n        return <Box\n            paddingX={MediaQueryState.isMobile ? \"18px\" : \"0px\"}\n            paddingY={MediaQueryState.isMobile ? \"30px\" : \"60px\"}\n        >\n            <Row\n                noGutters\n            >\n                <Col\n                    xs={12}\n                    sm={12}\n                    md={{ span: 6, offset: 3 }}\n                    lg={{ span: 4, offset: 4 }}\n                >\n                    <Box>\n                        <Typography\n                            variant=\"h4\"\n                            align=\"left\"\n                        >\n                            Reset Password\n                        </Typography>\n                        <Box\n                            height=\"40px\"\n                        />\n                        <TextField\n                            required\n                            fullWidth\n                            variant=\"outlined\"\n                            label=\"Password\"\n                            name=\"password\"\n                            type=\"password\"\n                            onChange={onTextChanged}\n                        />\n                        <Box\n                            height=\"25px\"\n                        />\n                        <TextField\n                            required\n                            fullWidth\n                            variant=\"outlined\"\n                            label=\"Confirm Password\"\n                            name=\"confirmedPassword\"\n                            type=\"password\"\n                            onChange={onTextChanged}\n                        />\n                        <Box\n                            height=\"25px\"\n                        />\n                        {\n                            !hasErrorResettingPassword(ResetPasswordLocalState)\n                                ? null\n                                : <Box\n                                    width=\"100%\"\n                                    bgcolor=\"error.main\"\n                                    padding=\"15px\"\n                                    marginBottom=\"20px\"\n                                    color=\"white\"\n                                >\n                                    <Typography\n                                        variant=\"body1\"\n                                        align=\"left\"\n                                    >\n                                        {ResetPasswordLocalState.errorResettingPassword?.detail}\n                                    </Typography>\n                                </Box>\n                        }\n                        {\n                            !isResettingPassword(ResetPasswordLocalState)\n                                ? null\n                                : <Box\n                                    display=\"flex\"\n                                    justifyContent=\"center\"\n                                    marginBottom=\"20px\"\n                                >\n                                    <HashLoader\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\n                                    />\n                                </Box>\n                        }\n                        <Box\n                            height=\"25px\"\n                        />\n                        <Box\n                            display=\"flex\"\n                            justifyContent=\"flex-end\"\n                        >\n                            <Button\n                                variant=\"contained\"\n                                className={css(sharedStyles.no_text_transform)}\n                                color=\"primary\"\n                                size=\"large\"\n                                onClick={() => confirmPasswordReset()}\n                            >\n                                Submit\n                            </Button>\n                        </Box>\n                    </Box>\n                </Col>\n            </Row>\n        </Box>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResetPassword);\n","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {AppState} from \"../../../redux-store/reducers\";\nimport {ThunkDispatch} from \"redux-thunk\";\nimport {AnyAction} from \"redux\";\nimport {resources} from \"../Resources\";\nimport {Redirect} from \"react-router-dom\";\nimport Routes from \"../../../router/routes\";\n\nconst mapStateToProps = (state: AppState) => {\n    return {\n        MediaQueryState: state.MediaQueryState,\n        ManageGroupUrlState: state.ManageGroupUrlState,\n        AuthenticationState: state.AuthenticationState\n    }\n}\n\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\n    return {}\n}\n\nclass ResourceDetail extends Component<any, any> {\n    render() {\n        const resourceName = this.props.match.params.resourceName;\n        const resourceIndex = resources.findIndex(resource => resource.name === resourceName);\n        if (resourceIndex !== -1) {\n            const resource = resources[resourceIndex];\n            return resource.page;\n        }\n\n        return <Redirect to={Routes.error404}/>;\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResourceDetail);","export const PASSWORD_VERY_WEAK = 1;\nexport const PASSWORD_WEAK = 2;\nexport const PASSWORD_GOOD = 3;\nexport const PASSWORD_STRONG = 4;\nexport const PASSWORD_VERY_STRONG = 5;\nconst passwordBlacklist: string[] = [\"12345678\", \"87654321\", \"testPassword\", \"testtest\", \"abcdefgh\", \"password\", \"sunshine\", \"iloveyou\", \"password1\", \"00000000\",\n    \"superman\", \"asdfghjkl\", \"qwertyuiop\", \"1qaz2wsx\", \"1q2w3e4r\", \"qwertyui\", \"asdfghjk\", \"zxcvbnm,\",\n    \"11111111\", \"22222222\", \"33333333\", \"44444444\", \"55555555\", \"66666666\", \"77777777\", \"88888888\", \"99999999\"];\n\n/**\n * This function is used to check the strength of the password.\n *\n * @param {*} password\n */\nexport const checkPasswordStrength = (password: string) => {\n    let strength = 0;\n    const minLength = 8;\n    // If the password length is less than or equal to minLength\n    if (password.length < minLength) {\n        strength = PASSWORD_VERY_WEAK;\n    } else {\n        strength = PASSWORD_GOOD;\n    }\n\n    // If the password length is greater than minLength and contain any lowercase alphabet or any number or any special character\n    if (password.length > minLength && (password.match(/[a-z]/) || password.match(/\\d+/) || password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/))) {\n        // strength = PASSWORD_WEAK;\n    }\n\n    // If the password length is greater than minLength and contain alphabet,number,special character respectively\n    if (password.length > minLength &&\n        ((password.match(/[a-z]/) && password.match(/\\d+/)) || (password.match(/\\d+/)\n            && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) || (password.match(/[a-z]/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)))) {\n        // strength = PASSWORD_GOOD;\n    }\n\n    // If the password length is greater than minLength and must contain alphabets,numbers and special characters\n    if (password.length > minLength && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\n        // strength = PASSWORD_STRONG;\n    }\n\n    // If the password length is greater than 15 and must contain alphabets,numbers and special characters\n    if (password.length > 15 && password.match(/[a-z]/) && password.match(/\\d+/) && password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/)) {\n        // strength = PASSWORD_VERY_STRONG;\n    }\n\n    if (passwordBlacklist.findIndex(badPassword => badPassword.toLowerCase() === password.toLowerCase()) !== -1) {\n        strength = PASSWORD_VERY_WEAK;\n    }\n\n    return strength;\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../reducers\";\n\nconst screenSizeQueries = {\n    mobile: `(min-width: 320px) and (max-width: 480px) and (orientation: portrait), (min-height: 320px) and (max-height: 480px) and (orientation: landscape)`,\n    tablet: `(min-width: 768px) and (max-width: 1024px) and (orientation: portrait), (min-height: 768px) and (max-height: 1024px) and (orientation: landscape)`,\n    laptop: `(min-width: 1200px) and (max-width: 1600px) and (orientation: landscape)`,\n    desktop: `(min-width: 1600px) and (orientation: landscape)`,\n    minHeight: `(min-height: 1200px)`\n}\n\nexport const mobileScreen = window.matchMedia(screenSizeQueries.mobile);\nexport const tabletScreen = window.matchMedia(screenSizeQueries.tablet);\nexport const laptopScreen = window.matchMedia(screenSizeQueries.laptop);\nexport const desktopScreen = window.matchMedia(screenSizeQueries.desktop);\nexport const minHeightScreen = window.matchMedia(screenSizeQueries.minHeight);\n\nexport enum MediaQueryEvents {\n    MediaQueryChanged = \"MediaQueryEvents.MediaQueryChanged\"\n}\n\nexport interface MediaQueryAction extends Action {\n    name: string;\n    value: boolean;\n}\n\nexport const addMediaQueryListeners: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        mobileScreen.addEventListener('change',\n            () => listener(dispatch, 'isMobile', mobileScreen.matches));\n        tabletScreen.addEventListener('change',\n            () => listener(dispatch, 'isTablet', tabletScreen.matches));\n        laptopScreen.addEventListener('change',\n            () => listener(dispatch, 'isLaptop', laptopScreen.matches));\n        desktopScreen.addEventListener('change',\n            () => listener(dispatch, 'isDesktop', desktopScreen.matches));\n        minHeightScreen.addEventListener('change',\n            () => listener(dispatch, 'minHeightScreen', minHeightScreen.matches));\n    }\n};\n\nexport const removeMediaQueryListeners: ActionCreator<any> = () => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        mobileScreen.removeEventListener('change',\n            () => listener(null, null, null));\n\n        tabletScreen.removeEventListener('change',\n            () => listener(null, null, null));\n\n        laptopScreen.removeEventListener('change',\n            () => listener(null, null, null));\n\n        desktopScreen.removeEventListener('change',\n            () => listener(null, null, null));\n\n        minHeightScreen.removeEventListener('change',\n            () => listener(null, null, null));\n    }\n};\n\nconst listener = (dispatch: Dispatch | null, name: string | null, value: boolean | null) => {\n    if (dispatch) {\n        return dispatch({\n            type: MediaQueryEvents.MediaQueryChanged,\n            name,\n            value\n        });\n    }\n};","import {\n    CompleteCreatingAccountAction,\n    CompleteLoadingInvitedUserAction,\n    InputFieldChangedAction,\n    SignUpAction,\n    SignUpEvents\n} from \"./SignUpActions\";\nimport Error from \"../../models/error\";\nimport InvitedUser from \"../../models/invited_user\";\nimport {AuthenticationEvents} from \"../../redux-store/actions/authenticationActions\";\n\nexport interface SignUpState {\n    invitedUser?: InvitedUser;\n    invitedUserLoaded: boolean;\n    loadingInvitedUser: boolean;\n    errorLoadingInvitedUser?: Error;\n\n    userType: number;\n    title: string;\n    discover: string;\n    firstName: string;\n    lastName: string;\n    email: string;\n    confirmedEmail: string;\n    password: string;\n    confirmedPassword: string;\n    acceptMarketingPreferences: boolean;\n\n    creatingAccount: boolean;\n    errorCreatingAccount?: Error;\n}\n\nconst initialState: SignUpState = {\n    invitedUserLoaded: false,\n    loadingInvitedUser: false,\n\n    userType: -1,\n    title: \"-1\",\n    discover: \"-1\",\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n    confirmedEmail: \"\",\n    password: \"\",\n    confirmedPassword: \"\",\n    acceptMarketingPreferences: false,\n\n    creatingAccount: false\n}\n\nexport const isLoadingInvitedUser = (state: SignUpState) => {\n    return !state.invitedUserLoaded && state.loadingInvitedUser;\n}\n\nexport const hasSuccessfullyLoadedInvitedUser = (state: SignUpState) => {\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser !== undefined && state.errorLoadingInvitedUser === undefined;\n}\n\nexport const hasErrorLoadingInvitedUser = (state: SignUpState) => {\n    return state.invitedUserLoaded && !state.loadingInvitedUser && state.invitedUser === undefined && state.errorLoadingInvitedUser !== undefined;\n}\n\nexport const notFoundInvitedUser = (state: SignUpState) => {\n    return hasErrorLoadingInvitedUser(state) && state.errorLoadingInvitedUser && state.errorLoadingInvitedUser.detail.includes(\"404\");\n}\n\nexport const isCreatingAccount = (state: SignUpState) => {\n    return state.creatingAccount;\n}\n\nexport const hasErrorCreatingAccount = (state: SignUpState) => {\n    return !state.creatingAccount && state.errorCreatingAccount !== undefined;\n}\n\nconst signUpReducer = (state = initialState, action: SignUpAction) => {\n    switch (action.type) {\n        case AuthenticationEvents.SignOut:\n            return initialState;\n        case AuthenticationEvents.CompleteAuthentication:\n            return initialState;\n        case SignUpEvents.LoadingInvitedUser:\n            return {\n                ...state,\n                invitedUser: undefined,\n                invitedUserLoaded: false,\n                loadingInvitedUser: true,\n                errorLoadingInvitedUser: undefined\n            }\n        case SignUpEvents.CompleteLoadingInvitedUser:\n            const completeLoadingInvitedUserAction: CompleteLoadingInvitedUserAction = action as CompleteLoadingInvitedUserAction;\n            return {\n                ...state,\n                invitedUser: completeLoadingInvitedUserAction.invitedUser,\n                invitedUserLoaded: true,\n                loadingInvitedUser: false,\n                errorLoadingInvitedUser: completeLoadingInvitedUserAction.error !== undefined\n                    ? {detail: completeLoadingInvitedUserAction.error} : state.errorLoadingInvitedUser,\n                userType: completeLoadingInvitedUserAction.invitedUser\n                    ? completeLoadingInvitedUserAction.invitedUser.type : state.userType,\n                title: completeLoadingInvitedUserAction.invitedUser\n                    ? completeLoadingInvitedUserAction.invitedUser.title : state.title,\n                firstName: completeLoadingInvitedUserAction.invitedUser\n                    ? completeLoadingInvitedUserAction.invitedUser.firstName : state.firstName,\n                lastName: completeLoadingInvitedUserAction.invitedUser\n                    ? completeLoadingInvitedUserAction.invitedUser.lastName : state.lastName,\n                email: completeLoadingInvitedUserAction.invitedUser\n                    ? completeLoadingInvitedUserAction.invitedUser.email : state.email\n            }\n        case SignUpEvents.InputFieldChanged:\n            const inputFieldChangedAction: InputFieldChangedAction = action as InputFieldChangedAction;\n            return {\n                ...state,\n                [inputFieldChangedAction.name]: inputFieldChangedAction.value\n            }\n        case SignUpEvents.CreatingAccount:\n            return {\n                ...state,\n                creatingAccount: true,\n                successfullyCreatedAccount: false,\n                errorCreatingAccount: undefined\n            }\n        case SignUpEvents.CompleteCreatingAccount:\n            const completeCreatingAccountAction: CompleteCreatingAccountAction = action as CompleteCreatingAccountAction;\n            return {\n                ...state,\n                creatingAccount: false,\n                errorCreatingAccount: completeCreatingAccountAction.error\n                    ? {detail: completeCreatingAccountAction.error} : state.errorCreatingAccount\n            }\n        default:\n            return state;\n    }\n}\n\nexport default signUpReducer;","/**\r\n * Invited user interface\r\n */\r\nimport User from \"./user\";\r\nimport GroupProperties from \"./group_properties\";\r\nimport Project from \"./project\";\r\nimport GroupOfMembership from \"./group_of_membership\";\r\nimport Pledge from \"./pledge\";\r\n\r\nexport default interface InvitedUser {\r\n    id: string;\r\n    email: string;\r\n    firstName: string;\r\n    lastName: string;\r\n    title: string;\r\n    type: number;\r\n    status: number;\r\n\r\n    /**\r\n     * id of the group that the user is in\r\n     */\r\n    invitedBy: string;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds):\r\n     *      - indicates the date an unregistered user was invited by [invitedBy] group.\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = \"none\"\r\n     *\r\n     *      - indicates the date an unregistered user used PUBLIC URL to registered to [invitedBy] group\r\n     *          --> [requestedToJoin] = false and [requestedToJoinDate] = date in milliseconds\r\n     *\r\n     * --> \"none\": the user who requested to join the [invitedBy] group from their home group\r\n     */\r\n    invitedDate: number | \"none\";\r\n\r\n    /**\r\n     * this field only exists when the user is a registered user and [officialUserID] must map to a valid User profile\r\n     */\r\n    officialUserID?: string;\r\n\r\n    /**\r\n     * the date the user joined a group either\r\n     *\r\n     * - by invitation (an unregistered user was invited by a group admin)\r\n     *\r\n     * - or by registering via the PUBLIC URL (an unregistered registered to group a group via its public url)\r\n     *\r\n     * - or by requesting to access (the user must send a request access which has to be accepted by the group admins)\r\n     */\r\n    joinedDate?: number;\r\n\r\n    /**\r\n     * can be true or false\r\n     *\r\n     * --> true: the user to requested to join a group from their home group\r\n     *\r\n     * --> false: the other cases specified above\r\n     */\r\n    requestedToJoin?: boolean;\r\n\r\n    /**\r\n     * can be number (date in milliseconds) or string (\"none\")\r\n     *\r\n     * --> date (milliseconds): the user to requested to join a group from their home group or registered to a group\r\n     * via its PUBLIC URL\r\n     *\r\n     * --> \"none\": the user was invited to a group\r\n     */\r\n    requestedToJoinDate?: number | \"none\";\r\n}\r\n\r\n/**\r\n * Invited user with official profile\r\n */\r\nexport interface InvitedUserWithProfile extends InvitedUser {\r\n    profile?: User;\r\n    homeGroup: GroupProperties;\r\n    groupsOfMembership: GroupOfMembership[];\r\n    offersCreated?: Project[]; // for issuers\r\n    pledges?: Pledge[]; // for investors\r\n}\r\n\r\n/**\r\n * An interface that specifies the format of a user in csv\r\n */\r\nexport interface InvitedUserCsv {\r\n    name: string; // user's official profile --> title + first name + last name\r\n    email: string;\r\n    userType: \"investor\" | \"issuer\";\r\n    memberType: \"home\" | \"platform\";\r\n    homeGroup?: string; // specified only when exporting to csv for super admins\r\n    statusInGroup: \"unregistered\" | \"active\"; // this list will be expanded more in the future\r\n    joinedDate: string | undefined;\r\n    offersCreated: string | \"none\" | \"not applicable\"; // none if the issuer has not created any offers, not applicable if the user is not an issuer\r\n    pledges: number | \"not applicable\"; // number of pledges for investor, not applicable if the user is not an issuer\r\n    certifiedDate: string | \"not certified\" | \"not applicable\";\r\n}\r\n\r\n/**\r\n * Check if an invited user a home member in a group\r\n *\r\n * @param user\r\n */\r\nexport const isHomeMember = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    // if either of these 2 fields is undefined, it means the invited user has been invited\r\n    // by a group and not yet registered\r\n    if (user.requestedToJoin === undefined || user.requestedToJoinDate === undefined) {\r\n        return true;\r\n    }\r\n\r\n    // user was invited\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate === \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // user registered via the public url\r\n    if (user.invitedDate !== \"none\" && !user.requestedToJoin && user.requestedToJoinDate !== \"none\") {\r\n        return true;\r\n    }\r\n\r\n    // in other cases, the user is not a home member of the group\r\n    return false;\r\n}\r\n\r\n/**\r\n * Check if an invited user has registered or not\r\n *\r\n * @param user\r\n */\r\nexport const hasRegistered = (user: InvitedUser | InvitedUserWithProfile) => {\r\n    return user.officialUserID !== undefined;\r\n}","import React, {Component} from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppState} from \"../../redux-store/reducers\";\r\nimport {ThunkDispatch} from \"redux-thunk\";\r\nimport {AnyAction} from \"redux\";\r\nimport {\r\n    Box,\r\n    Button,\r\n    Checkbox,\r\n    FormControl,\r\n    InputLabel,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    TextField,\r\n    Typography\r\n} from \"@material-ui/core\";\r\nimport {Col, Row} from \"react-bootstrap\";\r\nimport {css} from \"aphrodite\";\r\nimport sharedStyles from \"../../shared-js-css-styles/SharedStyles\";\r\nimport {UserTitles, HearAbout} from \"../../models/user\";\r\nimport {AuthenticationState, isAuthenticating} from \"../../redux-store/reducers/authenticationReducer\";\r\nimport {RouteComponentProps} from \"react-router-dom\";\r\nimport {RouteParams} from \"../../router/router\";\r\nimport {createAccount, handleInputFieldChanged, loadInvitedUser} from \"./SignUpActions\";\r\nimport {\r\n    hasErrorCreatingAccount,\r\n    hasErrorLoadingInvitedUser,\r\n    isCreatingAccount,\r\n    isLoadingInvitedUser,\r\n    notFoundInvitedUser,\r\n    SignUpState\r\n} from \"./SignUpReducer\";\r\nimport {getGroupRouteTheme, ManageGroupUrlState} from \"../../redux-store/reducers/manageGroupUrlReducer\";\r\nimport {BarLoader} from \"react-spinners\";\r\nimport Routes from \"../../router/routes\";\r\nimport CustomLink from \"../../shared-js-css-styles/CustomLink\";\r\nimport {TYPE_INVESTOR, TYPE_ISSUER} from \"../../firebase/databaseConsts\";\r\nimport {MediaQueryState} from \"../../redux-store/reducers/mediaQueryReducer\";\r\nimport HashLoader from \"react-spinners/HashLoader\";\r\nimport {hasRegistered} from \"../../models/invited_user\";\r\nimport Footer from \"../../shared-components/footer/Footer\";\r\n\r\ninterface SignUpProps {\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    MediaQueryState: MediaQueryState;\r\n    AuthenticationState: AuthenticationState;\r\n    SignUpLocalState: SignUpState;\r\n    loadInvitedUser: (invitedUserID: string) => any;\r\n    handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => any;\r\n    createAccount: () => any;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n    return {\r\n        ManageGroupUrlState: state.ManageGroupUrlState,\r\n        MediaQueryState: state.MediaQueryState,\r\n        AuthenticationState: state.AuthenticationState,\r\n        SignUpLocalState: state.SignUpLocalState\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AnyAction>) => {\r\n    return {\r\n        loadInvitedUser: (invitedUserID: string) => dispatch(loadInvitedUser(invitedUserID)),\r\n        handleInputFieldChanged: (event: React.ChangeEvent<HTMLInputElement>) => dispatch(handleInputFieldChanged(event)),\r\n        createAccount: () => dispatch(createAccount())\r\n    }\r\n}\r\n\r\nclass SignUpNew extends Component<SignUpProps & Readonly<RouteComponentProps<RouteParams>>, {}> {\r\n    // invited user id (optional parameter from the url)\r\n    // if invitedUserId = undefined --> public registration\r\n    private invitedUserId: string | undefined;\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadInvitedUser\r\n        } = this.props;\r\n\r\n        this.invitedUserId = this.props.match.params.id;\r\n        if (this.invitedUserId) {\r\n            loadInvitedUser(this.invitedUserId);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            ManageGroupUrlState,\r\n            AuthenticationState,\r\n            MediaQueryState,\r\n            SignUpLocalState,\r\n            handleInputFieldChanged,\r\n            createAccount\r\n        } = this.props;\r\n\r\n        // invited user ID is specified in the url\r\n        if (this.invitedUserId) {\r\n            // loading invited user\r\n            if (isLoadingInvitedUser(SignUpLocalState)) {\r\n                return (\r\n                    <Box>\r\n                        <BarLoader\r\n                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                            width=\"100%\"\r\n                            height={4}\r\n                        />\r\n                    </Box>\r\n                );\r\n            }\r\n\r\n            // error loading invited user (network error or not found)\r\n            // OR user has already signed up\r\n            if (hasErrorLoadingInvitedUser(SignUpLocalState)\r\n                || (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser))\r\n            ) {\r\n                return <Box\r\n                    marginTop=\"30px\"\r\n                    display=\"flex\"\r\n                    flexDirection=\"column\"\r\n                    alignItems=\"center\"\r\n                >\r\n                    <Typography\r\n                        variant=\"h6\"\r\n                        color=\"error\"\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"This registration URL is not valid.\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"You have already registered. Please sign in.\"\r\n                                // other error\r\n                                : `${SignUpLocalState.errorLoadingInvitedUser?.detail}`\r\n                        }\r\n                    </Typography>\r\n                    <Box\r\n                        height=\"20px\"\r\n                    />\r\n                    <Button\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={() => {\r\n                            // invalid invitedUserID\r\n                            if (notFoundInvitedUser(SignUpLocalState)) {\r\n                                this.props.history.replace(\r\n                                    Routes.constructSignUpRoute(ManageGroupUrlState.groupNameFromUrl ?? \"\")\r\n                                );\r\n                                window.location.reload();\r\n                                return;\r\n                            }\r\n\r\n                            // user has already signed up\r\n                            if (SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)) {\r\n                                this.props.history.push(Routes.constructSignInRoute(this.props.match.params));\r\n                                return;\r\n                            }\r\n\r\n                            // other error\r\n                            window.location.reload();\r\n                        }}\r\n                    >\r\n                        {\r\n                            // invalid invitedUserID\r\n                            notFoundInvitedUser(SignUpLocalState)\r\n                                ? \"Go to public registration\"\r\n                                // user has already signed up\r\n                                : SignUpLocalState.invitedUser && hasRegistered(SignUpLocalState.invitedUser)\r\n                                ? \"Sign in\"\r\n                                // other error\r\n                                : \"Retry\"\r\n                        }\r\n                    </Button>\r\n                </Box>;\r\n            }\r\n        }\r\n\r\n        return <Box>\r\n            {/** Sign up card */}\r\n            <Row noGutters>\r\n                <Col\r\n                    xs={{span: 12, offset: 0}}\r\n                    sm={{span: 12, offset: 0}}\r\n                    md={{span: 8, offset: 2}}\r\n                    lg={{span: 4, offset: 4}}\r\n                >\r\n                    <Box\r\n                        display=\"flex\"\r\n                        width=\"100%\"\r\n                        justifyContent=\"center\"\r\n                        paddingX={MediaQueryState.isMobile ? \"10px\" : \"0px\"}\r\n                        paddingY={MediaQueryState.isMobile ? \"20px\" : \"60px\"}\r\n                    >\r\n                        <Paper\r\n                            elevation={0}\r\n                            square\r\n                            className={css(sharedStyles.kick_starter_border_box)}\r\n                            style={{\r\n                                width: 650,\r\n                                padding: MediaQueryState.isMobile ? 20 : 30\r\n                            }}\r\n                        >\r\n                            <Typography\r\n                                align=\"center\"\r\n                                variant=\"h5\"\r\n                                color=\"primary\"\r\n                            >\r\n                                {`Welcome to ${ManageGroupUrlState.group?.displayName}`}\r\n                            </Typography>\r\n\r\n                            <Box\r\n                                height=\"20px\"\r\n                            />\r\n\r\n                            {/** Hash loader */}\r\n                            {\r\n                                isCreatingAccount(SignUpLocalState) || isAuthenticating(AuthenticationState)\r\n                                    ? <Box\r\n                                        display=\"flex\"\r\n                                        marginY=\"20px\"\r\n                                        justifyContent=\"center\"\r\n                                    >\r\n                                        <HashLoader\r\n                                            color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        />\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** Error message */}\r\n                            {\r\n                                !hasErrorCreatingAccount(SignUpLocalState)\r\n                                    ? <Box\r\n                                        marginY=\"20px\"\r\n                                    >\r\n                                        <Typography\r\n                                            align=\"center\"\r\n                                            variant=\"body1\"\r\n                                            color=\"error\"\r\n                                        >\r\n                                            {SignUpLocalState.errorCreatingAccount?.detail}\r\n                                        </Typography>\r\n                                    </Box>\r\n                                    : null\r\n                            }\r\n\r\n                            {/** User type */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                                disabled={this.invitedUserId !== undefined}\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        What would you like to do?\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"userType\"\r\n                                    value={SignUpLocalState.userType}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value={-1}\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    <MenuItem\r\n                                        key={TYPE_ISSUER}\r\n                                        value={TYPE_ISSUER}\r\n                                    >\r\n                                        Add student project\r\n                                    </MenuItem>\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"30px\"\r\n                            />\r\n\r\n                            {/** Title */}\r\n                            <FormControl\r\n                                required\r\n                                fullWidth\r\n                            >\r\n                                <InputLabel>\r\n                                    <Typography\r\n                                        variant=\"body1\"\r\n                                        color=\"primary\"\r\n                                    >\r\n                                        Title\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"title\"\r\n                                    value={SignUpLocalState.title}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value=\"-1\"\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    {\r\n                                        UserTitles.map((title, index) => (\r\n                                            <MenuItem\r\n                                                key={index}\r\n                                                value={title}\r\n                                            >\r\n                                                {title}\r\n                                            </MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n\r\n                            <Box\r\n                                height=\"25px\"\r\n                            />\r\n\r\n                            {/** Names */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** First name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"First name\"\r\n                                        name=\"firstName\"\r\n                                        value={SignUpLocalState.firstName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Last name */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Last name\"\r\n                                        name=\"lastName\"\r\n                                        value={SignUpLocalState.lastName}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Emails */}\r\n                            <Box\r\n                                marginBottom=\"18px\"\r\n                            >\r\n                                {/** Email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Email\"\r\n                                        name=\"email\"\r\n                                        value={SignUpLocalState.email}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        disabled={this.invitedUserId !== undefined}\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed email */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Re-enter email\"\r\n                                        name=\"confirmedEmail\"\r\n                                        value={SignUpLocalState.confirmedEmail}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Passwords */}\r\n                            <Box>\r\n                                {/** Password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Password\"\r\n                                        name=\"password\"\r\n                                        value={SignUpLocalState.password}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n                                {/** Confirmed password */}\r\n                                <FormControl\r\n                                    required\r\n                                    fullWidth\r\n                                >\r\n                                    <TextField\r\n                                        required\r\n                                        label=\"Confirm password\"\r\n                                        name=\"confirmedPassword\"\r\n                                        value={SignUpLocalState.confirmedPassword}\r\n                                        fullWidth\r\n                                        variant=\"outlined\"\r\n                                        margin=\"dense\"\r\n                                        type=\"password\"\r\n                                        onChange={handleInputFieldChanged}\r\n                                    />\r\n                                </FormControl>\r\n\r\n\r\n                                {/** How did you hear about us */}\r\n                                <Box marginTop=\"28px\"/>\r\n                                <FormControl fullWidth>\r\n                                <InputLabel>\r\n                                    <Typography variant=\"body1\" color=\"primary\">\r\n                                        How did you hear about us?\r\n                                    </Typography>\r\n                                </InputLabel>\r\n                                <Select\r\n                                    name=\"discover\"\r\n                                    value={SignUpLocalState.discover}\r\n                                    // @ts-ignore\r\n                                    onChange={handleInputFieldChanged}\r\n                                    margin=\"dense\"\r\n                                    style={{\r\n                                        marginTop: 25\r\n                                    }}\r\n                                >\r\n                                    <MenuItem\r\n                                        key=\"-1\"\r\n                                        value=\"-1\"\r\n                                    >\r\n                                        Please select\r\n                                    </MenuItem>\r\n                                    {\r\n                                        HearAbout.map((discover, index) => (\r\n                                            <MenuItem\r\n                                                key={index}\r\n                                                value={discover}\r\n                                            >\r\n                                                {discover}\r\n                                            </MenuItem>\r\n                                        ))\r\n                                    }\r\n                                </Select>\r\n                            </FormControl>\r\n                            </Box>\r\n\r\n                            {/** Marketing preferences checkbox */}\r\n                            <Box\r\n                                marginTop=\"28px\"\r\n                            >\r\n                                <FormControl>\r\n                                    <Box\r\n                                        display=\"flex\"\r\n                                        flexDirection=\"row\"\r\n                                        alignItems=\"center\"\r\n                                    >\r\n                                        <Checkbox\r\n                                            name=\"acceptMarketingPreferences\"\r\n                                            color=\"primary\"\r\n                                            checked={SignUpLocalState.acceptMarketingPreferences}\r\n                                            onChange={handleInputFieldChanged}\r\n                                        />\r\n                                        <Typography\r\n                                            variant=\"body1\"\r\n                                        >\r\n                                            Accept&nbsp;\r\n                                            <CustomLink\r\n                                                url={Routes.nonGroupMarketingPreferences}\r\n                                                target=\"_blank\"\r\n                                                color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                                activeColor=\"none\"\r\n                                                activeUnderline\r\n                                                component=\"a\"\r\n                                                childComponent={\r\n                                                    \"marketing preferences\"\r\n                                                }\r\n                                            />\r\n                                            .\r\n                                        </Typography>\r\n                                    </Box>\r\n                                </FormControl>\r\n                            </Box>\r\n\r\n                            {/** T&Cs */}\r\n                            <Box\r\n                                marginTop=\"25px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body1\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    By signing up, you agree to our&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupTermsOfUse}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Terms of use\"\r\n                                        }\r\n                                    />\r\n                                    &nbsp;and&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.nonGroupPrivacyPolicy}\r\n                                        target=\"_blank\"\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"a\"\r\n                                        childComponent={\r\n                                            \"Privacy policy\"\r\n                                        }\r\n                                    />\r\n                                    .\r\n                                </Typography>\r\n                            </Box>\r\n\r\n                            {/** Create Account button */}\r\n                            <Box\r\n                                marginTop=\"40px\"\r\n                                display=\"flex\"\r\n                                justifyContent=\"center\"\r\n                            >\r\n                                <Button\r\n                                    className={css(sharedStyles.no_text_transform)}\r\n                                    color=\"primary\"\r\n                                    variant=\"contained\"\r\n                                    disabled={\r\n                                        SignUpLocalState.userType === -1\r\n                                        || SignUpLocalState.title === \"-1\"\r\n                                        || SignUpLocalState.firstName.trim().length === 0\r\n                                        || SignUpLocalState.lastName.trim().length === 0\r\n                                        || SignUpLocalState.email.trim().length === 0\r\n                                        || SignUpLocalState.confirmedEmail.trim().length === 0\r\n                                        || SignUpLocalState.password.trim().length === 0\r\n                                        || SignUpLocalState.discover === \"-1\"\r\n                                        || SignUpLocalState.confirmedPassword.trim().length === 0\r\n                                    }\r\n                                    onClick={() => createAccount()}\r\n                                >\r\n                                    Create account\r\n                                </Button>\r\n                            </Box>\r\n\r\n                            {/** Sign in if have an account */}\r\n                            <Box\r\n                                marginTop=\"20px\"\r\n                            >\r\n                                <Typography\r\n                                    variant=\"body2\"\r\n                                    align=\"center\"\r\n                                >\r\n                                    Already have an Invest West account?&nbsp;\r\n                                    <CustomLink\r\n                                        url={Routes.constructSignInRoute(this.props.match.params)}\r\n                                        color={getGroupRouteTheme(ManageGroupUrlState).palette.primary.main}\r\n                                        activeColor=\"none\"\r\n                                        activeUnderline\r\n                                        component=\"nav-link\"\r\n                                        childComponent={\r\n                                            \"Sign in\"\r\n                                        }\r\n                                    />\r\n                                </Typography>\r\n                            </Box>\r\n                        </Paper>\r\n                    </Box>\r\n                </Col>\r\n            </Row>\r\n\r\n            {/** Footer */}\r\n            <Row\r\n                noGutters\r\n            >\r\n                <Col\r\n                    xs={12}\r\n                    sm={12}\r\n                    md={12}\r\n                    lg={12}\r\n                >\r\n                    <Footer/>\r\n                </Col>\r\n            </Row>\r\n        </Box>;\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SignUpNew);","import React from \"react\";\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\nimport IssuerDashboard from \"../pages/dashboard-issuer/IssuerDashboard\";\nimport InvestorDashboard from \"../pages/dashboard-investor/InvestorDashboard\";\nimport AdminDashboard from \"../pages/admin/AdminDashboard\";\nimport CreatePitchPage from \"../pages/create-project/CreateProject\";\nimport UserProfile from \"../pages/profile/ProfilePageViewOnly\";\nimport ProjectDetails from \"../pages/project-details/ProjectDetails\";\nimport PrivacyPolicyPage from \"../pages/system-public-pages/PrivacyPolicyPage\";\nimport TermsOfUsePage from \"../pages/system-public-pages/TermsOfUsePage\";\nimport RiskWarningPage from \"../pages/system-public-pages/RiskWarningPage\";\nimport CreatePitchTermsAndConditionsPage from \"../pages/system-public-pages/CreatePitchTermsAndConditionsPage\";\nimport ContactUs from \"../pages/system-public-pages/ContactUs\";\nimport HelpPage from \"../pages/system-public-pages/HelpPage\";\nimport GroupDetails from \"../pages/group-details/GroupDetails\";\nimport MarketingPreferencesPage from \"../pages/system-public-pages/MarketingPreferencesPage\";\nimport ProfilePageEditable from \"../pages/profile/ProfilePageEditable\";\n\nimport Front from \"../pages/front/Front\";\nimport SignIn from \"../pages/signin/SignInNew\";\nimport PageNotFound from \"../shared-components/page-not-found/PageNotFoundNew\";\nimport ErrorBoundary from './ErrorBoundary';\nimport Routes from \"./routes\";\nimport GroupRoute from \"./GroupRoute\";\nimport ResetPassword from \"../pages/reset-password/ResetPassword\";\nimport ResourceDetail from \"../pages/resources/pages/ResourceDetail\";\nimport SignUpNew from \"../pages/signup/SignUpNew\";\nimport {colors} from \"@material-ui/core\";\n\n/**\n * Parameters in the url\n */\nexport interface RouteParams {\n    groupUserName: string;\n\n    [params: string]: string;\n}\n\nconst AppRouter = () => (\n    <BrowserRouter>\n    <ErrorBoundary>\n        <Switch>\n            <Route path={Routes.groupSignUp} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                       // @ts-ignore\n                                                component={<SignUpNew {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupSignUp} exact\n                            // @ts-ignore\n                            render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                                // @ts-ignore\n                                                            component={<SignUpNew {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupFront} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\n            <Route path={Routes.groupFront} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={false} component={<Front {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupSignIn} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                       // @ts-ignore\n                                                component={<SignIn {...props}/>}/>}/>\n            <Route path={Routes.groupSignIn} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                       // @ts-ignore\n                                                component={<SignIn {...props}/>}/>}/>\n            <Route path={Routes.superAdminSignIn} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                       // @ts-ignore\n                                                component={<SignIn {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupAdminDashboard} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={false}\n                                                component={<AdminDashboard {...props}/>}/>}/>\n            <Route path={Routes.groupAdminDashboard} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={false}\n                                                component={<AdminDashboard {...props}/>}/>}/>\n\n            <Route path={Routes.groupIssuerDashboard} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={false}\n                                                component={<IssuerDashboard {...props}/>}/>}/>\n\n            <Route path={Routes.groupInvestorDashboard} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={false}\n                                                component={<InvestorDashboard {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupViewOffer} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ProjectDetails {...props}/>}/>}/>\n            <Route path={Routes.groupViewOffer} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ProjectDetails {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupCreateOffer} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<CreatePitchPage {...props}/>}/>}/>\n            <Route path={Routes.groupCreateOffer} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<CreatePitchPage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupViewGroup} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                       // @ts-ignore\n                                                component={<GroupDetails {...props}/>}/>}/>\n            <Route path={Routes.groupViewGroup} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true} backgroundColor={colors.grey[\"200\"]}\n                       // @ts-ignore\n                                                component={<GroupDetails {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupViewUserProfile} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<UserProfile {...props}/>}/>}/>\n            <Route path={Routes.groupViewUserProfile} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<UserProfile {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupViewResourceDetail} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ResourceDetail {...props}/>}/>}/>\n            <Route path={Routes.groupViewResourceDetail} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ResourceDetail {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupEditUserProfile} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\n            <Route path={Routes.groupEditUserProfile} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ProfilePageEditable {...props}/>}/>}/>\n\n            <Route path={Routes.groupHelp} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<HelpPage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupContactUs} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ContactUs {...props}/>}/>}/>\n            <Route path={Routes.groupContactUs} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<ContactUs {...props}/>}/>}/>\n\n\n\n            <Route path={Routes.nonGroupPrivacyPolicy} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<PrivacyPolicyPage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupTermsOfUse} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<TermsOfUsePage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupRiskWarning} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<RiskWarningPage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupCreatePitchTermsAndConditions} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<CreatePitchTermsAndConditionsPage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupMarketingPreferences} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<MarketingPreferencesPage {...props}/>}/>}/>\n\n            <Route path={Routes.nonGroupAuthAction} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                       // @ts-ignore\n                                                component={<ResetPassword {...props}/>}/>}/>\n\n            <Route path={Routes.error404} exact\n                // @ts-ignore\n                   render={props => <GroupRoute {...props} showHeader={true}\n                                                component={<PageNotFound {...props}/>}/>}/>\n\n            {/** Handle undefined paths */}\n            <Route\n                // @ts-ignore\n                render={props => <GroupRoute {...props} showHeader={true}\n                                             component={<PageNotFound {...props}/>}/>}/>\n\n        </Switch>\n        </ErrorBoundary>\n    </BrowserRouter>\n);\n\nexport default AppRouter;\n","import React, {Component} from 'react';\nimport {\n    IconButton,\n    Snackbar,\n    SnackbarContent\n} from '@material-ui/core';\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport {connect} from 'react-redux';\nimport * as feedbackSnackbarActions from '../../redux-store/actions/feedbackSnackbarActions';\n\nimport * as colors from '../../values/colors';\nimport {SlideTransitionDown, SlideTransitionUp} from '../../shared-js-css-styles/SharedStyles';\n\nconst mapStateToProps = state => {\n    return {\n        group: state.manageGroupFromParams.groupProperties,\n\n        open: state.manageFeedbackSnackbar.open,\n        message: state.manageFeedbackSnackbar.message,\n        color: state.manageFeedbackSnackbar.color,\n        position: state.manageFeedbackSnackbar.position\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        closeFeedbackSnackbar: () => dispatch(feedbackSnackbarActions.closeFeedbackSnackbar()),\n        resetStatesWhenSnackbarClosed: () => dispatch(feedbackSnackbarActions.resetStatesWhenSnackbarClosed())\n    }\n};\n\nclass FeedbackSnackbar extends Component {\n\n    render() {\n        const {\n            group,\n\n            open,\n            message,\n            color,\n            position,\n\n            closeFeedbackSnackbar,\n            resetStatesWhenSnackbarClosed\n        } = this.props;\n\n        return (\n            <Snackbar\n                open={open}\n                anchorOrigin={{\n                    vertical: position === \"\" ? \"bottom\" : position, // default vertical anchor is bottom\n                    horizontal: 'center',\n                }}\n                autoHideDuration={2500}\n                onClose={closeFeedbackSnackbar}\n                onExited={resetStatesWhenSnackbarClosed}\n                TransitionComponent={\n                    position === \"bottom\"\n                        ?\n                        SlideTransitionUp\n                        :\n                        position === \"top\"\n                            ?\n                            SlideTransitionDown\n                            :\n                            null\n                }\n                transitionDuration={{\n                    enter: 130,\n                    exit: 130\n                }}\n            >\n                <SnackbarContent\n                    style={{\n                        backgroundColor:\n                            color === \"primary\"\n                                ?\n                                !group\n                                    ?\n                                    colors.primaryColor\n                                    :\n                                    group.settings.primaryColor\n                                :\n                                color === \"error\"\n                                    ?\n                                    colors.errorColor\n                                    :\n                                    \"\"\n                    }}\n                    message={\n                        <span>\n                            {\n                                color === \"error\"\n                                    ?\n                                    null\n                                    :\n                                    <CheckCircleIcon style={{ marginRight: 8 }}/>\n                            }\n                            {message}\n                        </span>\n                    }\n                    action={[\n                        <IconButton key=\"close\" color=\"inherit\" onClick={closeFeedbackSnackbar}>\n                            <CloseIcon/>\n                        </IconButton>\n                    ]}\n                />\n            </Snackbar>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FeedbackSnackbar);","import firebase from '../../firebase/firebaseApp';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const LOADING_CLUB_ATTRIBUTES = 'LOADING_CLUB_ATTRIBUTES';\nexport const CLUB_ATTRIBUTES_LOADED = 'CLUB_ATTRIBUTES_LOADED';\nexport const loadClubAttributes = () => {\n    return (dispatch, getState) => {\n\n        const {\n            clubAttributesLoaded,\n            clubAttributesBeingLoaded\n        } = getState().manageClubAttributes;\n\n        if (!clubAttributesLoaded && clubAttributesBeingLoaded) {\n            return;\n        }\n\n        dispatch({\n            type: LOADING_CLUB_ATTRIBUTES\n        });\n\n        realtimeDBUtils\n            .loadClubAttributes()\n            .then(clubAttributes => {\n                dispatch({\n                    type: CLUB_ATTRIBUTES_LOADED,\n                    clubAttributes\n                });\n            });\n    }\n};\n\nexport const CLUB_ATTRIBUTES_CHANGED = 'CLUB_ATTRIBUTES_CHANGED';\nexport const startListeningForClubAttributesChanged = () => {\n    return (dispatch, getState) => {\n        let clubAttributesRef = firebase\n            .database()\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\n\n        clubAttributesRef\n            .on('child_changed', snapshot => {\n                dispatch({\n                    type: CLUB_ATTRIBUTES_CHANGED,\n                    key: snapshot.key,\n                    value: snapshot.val()\n                });\n            });\n    }\n};\n\nexport const stopListeningForClubAttributesChanged = () => {\n    return (dispatch, getState) => {\n        let clubAttributesRef = firebase\n            .database()\n            .ref(DB_CONST.CLUB_ATTRIBUTES_CHILD);\n\n        clubAttributesRef.off('child_changed');\n    }\n};","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../reducers\";\nimport {signOut} from \"./authenticationActions\";\nimport {logout} from \"./authActions\";\n\nexport enum ManageSystemIdleTimeEvents {\n    OnActive = \"ManageSystemIdleTimeEvents.OnActive\",\n    OnIdle = \"ManageSystemIdleTimeEvents.OnIdle\"\n}\n\nexport interface ManageSystemIdleTimeAction extends Action {\n\n}\n\n// Called when the user is no longer idle\nexport const onActive: ActionCreator<any> = (event: Event) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch({\n            type: ManageSystemIdleTimeEvents.OnActive\n        });\n    }\n}\n\n// Called when the user is now idle\nexport const onIdle: ActionCreator<any> = (event: Event) => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        dispatch({\n            type: ManageSystemIdleTimeEvents.OnIdle\n        });\n        // TODO: Remove this line when all the components have been migrated to the new authentication flow\n        // @ts-ignore\n        dispatch(logout());\n        return await dispatch(signOut());\n    }\n}","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport firebase from '../../firebase/firebaseApp';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const LOADING_SYSTEM_GROUPS = 'LOADING_SYSTEM_GROUPS';\nexport const FINISHED_LOADING_SYSTEM_GROUPS = 'FINISHED_LOADING_SYSTEM_GROUPS';\nexport const loadGroups = () => {\n    return (dispatch, getState) => {\n        const {\n            loadingGroups,\n            groupsLoaded\n        } = getState().manageSystemGroups;\n\n        if (!loadingGroups && !groupsLoaded) {\n            dispatch({\n                type: LOADING_SYSTEM_GROUPS\n            });\n\n            realtimeDBUtils\n                .loadAngelNetworks({}, realtimeDBUtils.SEARCH_ANGEL_NETWORKS_NONE)\n                .then(groups => {\n                    dispatch({\n                        type: FINISHED_LOADING_SYSTEM_GROUPS,\n                        groups: [...groups]\n                    });\n                })\n                .catch(error => {\n                    // handle error\n                });\n        }\n    }\n};\n\nlet groupsListener = null;\n\nexport const SYSTEM_GROUPS_CHANGED = 'SYSTEM_GROUPS_CHANGED';\nexport const startListeningForSystemGroupsChanged = () => {\n    return (dispatch, getState) => {\n        if (!groupsListener) {\n            groupsListener = firebase\n                .database()\n                .ref(DB_CONST.GROUP_PROPERTIES_CHILD);\n\n            groupsListener\n                .on('child_added', snapshot => {\n                    const group = snapshot.val();\n\n                    let groups = [...getState().manageSystemGroups.systemGroups];\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\n                    if (groupIndex === -1) {\n                        dispatch({\n                            type: SYSTEM_GROUPS_CHANGED,\n                            groups: [...groups, group]\n                        });\n                    }\n                });\n\n            groupsListener\n                .on('child_changed', snapshot => {\n                    const group = snapshot.val();\n\n                    let groups = [...getState().manageSystemGroups.systemGroups];\n                    const groupIndex = groups.findIndex(existingGroup => existingGroup.anid === group.anid);\n                    if (groupIndex !== -1) {\n\n                        groups[groupIndex] = group;\n\n                        dispatch({\n                            type: SYSTEM_GROUPS_CHANGED,\n                            groups: [...groups]\n                        });\n                    }\n                });\n        }\n    }\n}\n\nexport const stopListeningForSystemGroupsChanged = () => {\n    return (dispatch, getState) => {\n        if (groupsListener) {\n            groupsListener.off('child_added');\n            groupsListener.off('child_changed');\n            groupsListener = null;\n        }\n    }\n}","import {ManageSystemIdleTimeAction, ManageSystemIdleTimeEvents} from \"../actions/manageSystemIdleTimeActions\";\nimport {AuthenticationAction, AuthenticationEvents} from \"../actions/authenticationActions\";\n\n// active timeout: 1 hour\nexport const activeTimeOut = 1000 * 60 * 60;\n\nexport interface ManageSystemIdleTimeState {\n    nowIdle: boolean;\n    nowActive: boolean;\n}\n\nconst initialState: ManageSystemIdleTimeState = {\n    nowIdle: false,\n    nowActive: true\n}\n\nexport const isUserNowIdle = (state: ManageSystemIdleTimeState) => {\n    return state.nowIdle && !state.nowActive;\n}\n\nexport const isUserNowActive = (state: ManageSystemIdleTimeState) => {\n    return state.nowActive && !state.nowIdle;\n}\n\nconst manageSystemIdleTimeReducer = (state = initialState, action: ManageSystemIdleTimeAction | AuthenticationAction) => {\n    switch (action.type) {\n        case AuthenticationEvents.SignOut:\n            return initialState;\n        case ManageSystemIdleTimeEvents.OnActive:\n            return {\n                ...state,\n                nowActive: true,\n                nowIdle: false\n            }\n        case ManageSystemIdleTimeEvents.OnIdle:\n            return {\n                ...state,\n                nowActive: false,\n                nowIdle: true\n            }\n        default:\n            return state;\n    }\n}\n\nexport default manageSystemIdleTimeReducer;","import React, {Component} from 'react';\nimport {createMuiTheme, MuiThemeProvider, responsiveFontSizes} from '@material-ui/core/styles';\nimport {MuiPickersUtilsProvider} from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/date-fns';\nimport AppRouter from \"./router/router.tsx\";\n\nimport {connect} from 'react-redux';\nimport * as manageGroupFromParamsActions from './redux-store/actions/manageGroupFromParamsActions';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {AUTH_SUCCESS} from './pages/signin/Signin';\n\nimport FeedbackSnackbar from './shared-components/feedback-snackbar/FeedbackSnackbar';\n\nimport {defaultTheme} from './values/defaultThemes';\nimport firebase from './firebase/firebaseApp';\nimport * as colors from './values/colors';\nimport * as authActions from './redux-store/actions/authActions';\nimport * as clubAttributesActions from './redux-store/actions/clubAttributesActions';\nimport * as mediaQueryActions from './redux-store/actions/mediaQueryActions';\nimport * as invitedUsersActions from './redux-store/actions/invitedUsersActions';\nimport * as manageJoinRequestsActions from './redux-store/actions/manageJoinRequestsActions';\nimport * as activitiesTableActions from './redux-store/actions/activitiesTableActions';\nimport * as groupAdminsTableActions from './redux-store/actions/groupAdminsTableActions';\nimport * as forumsActions from './redux-store/actions/forumsActions';\nimport * as editUserActions from './redux-store/actions/editUserActions';\nimport * as manageSystemGroupsActions from './redux-store/actions/manageSystemGroupsActions';\nimport {signIn} from \"./redux-store/actions/authenticationActions\";\nimport {getGroupRouteTheme} from \"./redux-store/reducers/manageGroupUrlReducer\";\nimport IdleTimer from \"react-idle-timer\";\nimport {activeTimeOut} from \"./redux-store/reducers/manageSystemIdleTimeReducer\";\nimport {onIdle} from \"./redux-store/actions/manageSystemIdleTimeActions\";\n\n// map redux states to props of this component\nconst mapStateToProps = state => {\n    return {\n        ManageGroupUrlState: state.ManageGroupUrlState,\n\n        /**\n         * Old state --------------------------------------------------------------------------------------------------\n         */\n        // angel network loaded from anid from URL params\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\n        groupProperties: state.manageGroupFromParams.groupProperties,\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\n        //--------------------------------------------------------------------------------------------------------------\n\n        // user --------------------------------------------------------------------------------------------------------\n        user: state.auth.user,\n        userLoaded: state.auth.userLoaded,\n        authStatus: state.auth.authStatus,\n        //--------------------------------------------------------------------------------------------------------------\n\n        forums: state.manageForums.forums,\n\n        // club attributes ---------------------------------------------------------------------------------------------\n        clubAttributes: state.manageClubAttributes.clubAttributes,\n        clubAttributesLoaded: state.manageClubAttributes.clubAttributesLoaded,\n        //--------------------------------------------------------------------------------------------------------------\n\n        // system groups -----------------------------------------------------------------------------------------------\n        systemGroups: state.manageSystemGroups.systemGroups,\n        groupsLoaded: state.manageSystemGroups.groupsLoaded,\n        loadingGroups: state.manageSystemGroups.loadingGroups\n        //--------------------------------------------------------------------------------------------------------------\n    }\n};\n\n// map redux dispatch (actions) to props of this component\nconst mapDispatchToProps = dispatch => {\n    return {\n        signIn: () => dispatch(signIn()),\n        onIdle: (event) => dispatch(onIdle(event)),\n\n        /**\n         * Old dispatch ------------------------------------------------------------------------------------------------\n         */\n        startListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.startListeningForAngelNetworkChanged()),\n        stopListeningForAngelNetworkChanged: () => dispatch(manageGroupFromParamsActions.stopListeningForAngelNetworkChanged()),\n\n        // auth functions  ---------------------------------------------------------------------------------------------\n        initializeAuthState: () => dispatch(authActions.initializeAuthState()),\n        getUserProfileAndValidateUser: (uid) => dispatch(authActions.getUserProfileAndValidateUser(uid)),\n        startListeningForUserProfileChanges: () => dispatch(authActions.startListeningForUserProfileChanges()),\n        stopListeningForUserProfileChanges: () => dispatch(authActions.stopListeningForUserProfileChanges()),\n        startListeningForGroupsUserIsIn: () => dispatch(authActions.startListeningForGroupsUserIsIn()),\n        stopListeningForGroupsUserIsIn: () => dispatch(authActions.stopListeningForGroupsUserIsIn()),\n        //--------------------------------------------------------------------------------------------------------------\n\n        // club attributes functions  ----------------------------------------------------------------------------------\n        loadClubAttributes: () => dispatch(clubAttributesActions.loadClubAttributes()),\n        startListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.startListeningForClubAttributesChanged()),\n        stopListeningForClubAttributesChanged: () => dispatch(clubAttributesActions.stopListeningForClubAttributesChanged()),\n        //--------------------------------------------------------------------------------------------------------------\n\n        // media query functions  --------------------------------------------------------------------------------------\n        addMediaQueryListeners: () => dispatch(mediaQueryActions.addMediaQueryListeners()),\n        removeMediaQueryListeners: () => dispatch(mediaQueryActions.removeMediaQueryListeners()),\n        //--------------------------------------------------------------------------------------------------------------\n\n        adminDashboard_stopListeningForInvitedUsersChanged: () => dispatch(invitedUsersActions.stopListeningForInvitedUsersChanged()),\n\n        joinRequestsTable_stopListeningForJoinRequestsChanged: () => dispatch(manageJoinRequestsActions.stopListeningForJoinRequestsChanged()),\n\n        activitiesTable_stopListeningForActivitiesChanged: () => dispatch(activitiesTableActions.stopListeningForActivitiesChanged()),\n\n        groupAdminsTable_stopListeningForGroupAdminsChanged: () => dispatch(groupAdminsTableActions.stopListeningForGroupAdminsChanged()),\n\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\n\n        editUserProfile_stopOriginalUserChangedListener: () => dispatch(editUserActions.stopOriginalUserChangedListener()),\n\n        loadSystemGroups: () => dispatch(manageSystemGroupsActions.loadGroups()),\n        startListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.startListeningForSystemGroupsChanged()),\n        stopListeningForSystemGroupsChanged: () => dispatch(manageSystemGroupsActions.stopListeningForSystemGroupsChanged())\n    }\n};\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.firebaseAuth = firebase.auth();\n        this.authListener = null;\n    }\n\n    componentDidMount() {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData,\n\n            addMediaQueryListeners\n        } = this.props;\n\n        // add media query listeners\n        addMediaQueryListeners();\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.loadClubAttributesIfNotLoaded();\n            this.attachListeners();\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const {\n            groupPropertiesLoaded,\n            shouldLoadOtherData\n        } = this.props;\n\n        if (groupPropertiesLoaded && shouldLoadOtherData) {\n            this.loadClubAttributesIfNotLoaded();\n            this.attachListeners();\n        }\n    }\n\n    componentWillUnmount() {\n        const {\n            removeMediaQueryListeners,\n            stopListeningForAngelNetworkChanged,\n            stopListeningForClubAttributesChanged\n        } = this.props;\n\n        /**\n         * These listeners are global for whole system.\n         * Therefore, they should only be cancelled when the page is destroyed.\n         */\n        // cancel listening for auth state changed\n        this.authListener();\n        this.authListener = null;\n        // remove media query listeners\n        removeMediaQueryListeners();\n        // stop listening for angel network's changes\n        stopListeningForAngelNetworkChanged();\n        // stop listening for club attributes' changes\n        stopListeningForClubAttributesChanged();\n        /**\n         * ////---------------------------------------------------------------------------------------------------------\n         */\n\n        // cancel all other listeners when the page is destroyed\n        this.cancelAllListeners();\n    }\n\n    /**\n     * Cancel all listeners used in the components within the system\n     */\n    cancelAllListeners = () => {\n        const {\n            stopListeningForUserProfileChanges,\n\n            stopListeningForGroupsUserIsIn,\n\n            joinRequestsTable_stopListeningForJoinRequestsChanged,\n\n            adminDashboard_stopListeningForInvitedUsersChanged,\n\n            activitiesTable_stopListeningForActivitiesChanged,\n\n            groupAdminsTable_stopListeningForGroupAdminsChanged,\n\n            stopListeningForForumsChanged,\n            stopListeningForThreadsChanged,\n            stopListeningForThreadRepliesChanged,\n\n            editUserProfile_stopOriginalUserChangedListener,\n\n            stopListeningForSystemGroupsChanged\n        } = this.props;\n        // stop listening for user's profile changes\n        stopListeningForUserProfileChanges();\n        // stop listening for groups user is in changes\n        stopListeningForGroupsUserIsIn();\n\n        // stop listening for join requests changes in the JoinRequests table component\n        joinRequestsTable_stopListeningForJoinRequestsChanged();\n\n        // stop listening for invited users changes in the InvitedUsers component\n        adminDashboard_stopListeningForInvitedUsersChanged();\n\n        // stop listening for activities changes in the ActivitiesTable component\n        activitiesTable_stopListeningForActivitiesChanged();\n\n        // stop listening for group admins changes in the GroupAdminsTable component\n        groupAdminsTable_stopListeningForGroupAdminsChanged();\n\n        // stop listening for forums changes\n        stopListeningForForumsChanged();\n        // stop listening for threads changes\n        stopListeningForThreadsChanged();\n        // stop listening for thread replies changes\n        stopListeningForThreadRepliesChanged();\n\n        // stop listening for edited user's changes\n        // this should get called if the current user and the user being edited are different\n        editUserProfile_stopOriginalUserChangedListener();\n\n        // stop listening for system groups changes\n        stopListeningForSystemGroupsChanged();\n    };\n\n    /**\n     * Load club attributes\n     */\n    loadClubAttributesIfNotLoaded = () => {\n        const {\n            clubAttributesLoaded,\n            clubAttributesBeingLoaded,\n\n            loadClubAttributes\n        } = this.props;\n\n        if (!clubAttributesLoaded && !clubAttributesBeingLoaded) {\n            // load club attributes\n            loadClubAttributes();\n        }\n    };\n\n    /**\n     * Load all the groups in the system\n     * --> This should be done as soon as the user is logged in\n     */\n    loadSystemGroups = () => {\n        const {\n            groupsLoaded,\n            loadingGroups,\n\n            loadSystemGroups\n        } = this.props;\n\n        if (!groupsLoaded && !loadingGroups) {\n            // load system groups\n            loadSystemGroups();\n        }\n    }\n\n    /**\n     * Attach listeners\n     */\n\n    \n    attachListeners = () => {\n        const {\n            authStatus,\n\n            user,\n            userLoaded,\n            clubAttributesLoaded,\n            groupsLoaded,\n\n            initializeAuthState,\n            getUserProfileAndValidateUser,\n            startListeningForClubAttributesChanged,\n            startListeningForUserProfileChanges,\n            startListeningForAngelNetworkChanged,\n            startListeningForGroupsUserIsIn,\n            startListeningForSystemGroupsChanged\n        } = this.props;\n\n        startListeningForAngelNetworkChanged();\n\n        if (user && userLoaded && authStatus === AUTH_SUCCESS) {\n            // start listening for user's profile changes\n            startListeningForUserProfileChanges();\n            // start listening for groups user is in changes\n            startListeningForGroupsUserIsIn();\n\n            if (groupsLoaded) {\n                // start listening for system groups changed\n                startListeningForSystemGroupsChanged();\n            }\n        }\n\n        if (clubAttributesLoaded) {\n            // start listening for club attributes' changes\n            startListeningForClubAttributesChanged();\n        }\n\n        if (!this.authListener) {\n            // listen for auth state changed\n            this.authListener = this.firebaseAuth\n                .onAuthStateChanged(firebaseUser => {\n                    // call this function to always set userLoaded to false when user is signed out\n                    initializeAuthState();\n                    // if user is authenticated\n                    if (firebaseUser) {\n                        getUserProfileAndValidateUser(firebaseUser.uid);\n\n                        // load system groups\n                        this.loadSystemGroups();\n                    }\n                    // user is not authenticated\n                    else {\n                        getUserProfileAndValidateUser(null);\n                        // the listeners used in components within the system must be cancelled\n                        // when the logged in user logs out\n                        this.cancelAllListeners();\n                    }\n                });\n        }\n    };\n    \n\n    getTheme = () => {\n        const {\n            ManageGroupUrlState,\n\n            groupPropertiesLoaded,\n            groupProperties,\n            shouldLoadOtherData\n        } = this.props;\n\n        if (ManageGroupUrlState.group) {\n            return getGroupRouteTheme(ManageGroupUrlState);\n        }\n\n        if (!groupPropertiesLoaded || !shouldLoadOtherData || !groupProperties) {\n            return defaultTheme;\n        }\n\n        return responsiveFontSizes(\n            createMuiTheme({\n                palette: {\n                    primary: {\n                        main: groupProperties.settings.primaryColor\n                    },\n\n                    secondary: {\n                        main: groupProperties.settings.secondaryColor\n                    },\n\n                    text: {\n                        secondary: colors.blue_gray_700,\n                    }\n                },\n                typography: {\n                    fontFamily: \"Muli, sans-serif\"\n                }\n            })\n        );\n    }\n\n    render() {\n        return (\n            <div>\n                <IdleTimer\n                    timeout={activeTimeOut}\n                    onIdle={this.props.onIdle}\n                />\n\n                <MuiThemeProvider\n                    theme={this.getTheme()}\n                >\n                    <MuiPickersUtilsProvider\n                        utils={DateFnsUtils}\n                    >\n                        <AppRouter/>\n\n                        {/** Feedback snackbar */}\n                        <FeedbackSnackbar/>\n                    </MuiPickersUtilsProvider>\n                </MuiThemeProvider>\n            </div>\n        );\n    }\n}\n\n// export the App component using redux connect to hook up states and actions\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {Action, ActionCreator, Dispatch} from \"redux\";\nimport User from \"../../models/user\";\nimport {AppState} from \"../../redux-store/reducers\";\nimport React from \"react\";\n\nexport enum ProfileEvents {\n    SetCopiedUser = \"PersonalDetailsEvents.SetCopiedUser\"\n}\n\nexport interface ProfileAction extends Action {\n\n}\n\nexport interface SetCopiedUserAction extends ProfileAction {\n    copiedUser?: User;\n    firstTimeSetCopiedUser?: true; // true or undefined\n}\n\nexport const setCopiedUser: ActionCreator<any> = (user: User | null, firstTimeSetCopiedUser?: true) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: SetCopiedUserAction = {\n            type: ProfileEvents.SetCopiedUser,\n            copiedUser: user ? JSON.parse(JSON.stringify(user)) : undefined,\n            firstTimeSetCopiedUser\n        };\n        return dispatch(action);\n    }\n}\n\n// These are the input field categories corresponding to different groups of input fields in the Profile page\nexport enum InputCategories {\n    // includes text fields in the Personal details section\n    PersonalDetails = \"InputCategories.PersonalDetails\",\n    // includes text fields in the Business profile section\n    BusinessProfile = \"InputCategories.BusinessProfile\",\n    // includes text fields in the Registered office section (subsection of Business profile)\n    // includes text fields in the Trading address section (subsection of Business profile)\n    // includes text fields in the Director section (subsection of Business profile)\n    Director = \"InputCategories.Director\",\n    // includes all checkboxes in Business profile section\n    BusinessProfileCheckBox = \"InputCategories.BusinessProfileCheckBox\"\n}\n\nexport const handleInputFieldChanged: ActionCreator<any> = (inputCategory: InputCategories, event: React.ChangeEvent<HTMLInputElement>) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        let currentCopiedUser: User | undefined = JSON.parse(JSON.stringify(getState().ProfileLocalState.copiedUser));\n        if (!currentCopiedUser) {\n            return;\n        }\n\n        // let newBusinessProfile: BusinessProfile = getState().ProfileLocalState.BusinessProfileState.newBusinessProfile;\n        //\n        // const inputFieldName: string = event.target.name;\n        // const inputFieldValue: string = event.target.value;\n        // const inputFieldChecked: boolean = event.target.checked;\n        //\n        // switch (inputCategory) {\n        //     case InputCategories.PersonalDetails:\n        //         currentCopiedUser = {\n        //             ...currentCopiedUser,\n        //             [inputFieldName]: inputFieldValue\n        //         }\n        //         return dispatch(setCopiedUser(currentCopiedUser));\n        //     case InputCategories.BusinessProfile:\n        //         if (hasBusinessProfile(currentCopiedUser)) {\n        //             currentCopiedUser = {\n        //                 ...currentCopiedUser,\n        //                 // @ts-ignore\n        //                 BusinessProfile: {\n        //                     ...currentCopiedUser.BusinessProfile,\n        //                     [inputFieldName]: inputFieldValue\n        //                 }\n        //             }\n        //             return dispatch(setCopiedUser(currentCopiedUser));\n        //         } else {\n        //             newBusinessProfile = {\n        //                 ...newBusinessProfile,\n        //                 [inputFieldName]: inputFieldValue\n        //             }\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\n        //                 updatedNewBusinessProfile: newBusinessProfile\n        //             };\n        //             return dispatch(updateNewBusinessProfileAction);\n        //         }\n        //     case InputCategories.RegisteredOffice: {\n        //         if (inputFieldValue === \"none\") {\n        //             return;\n        //         }\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\n        //         if (!foundAddresses) {\n        //             return;\n        //         }\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\n        //         if (index === -1) {\n        //             return;\n        //         }\n        //         if (hasBusinessProfile(currentCopiedUser)) {\n        //             currentCopiedUser = {\n        //                 ...currentCopiedUser,\n        //                 // @ts-ignore\n        //                 BusinessProfile: {\n        //                     ...currentCopiedUser.BusinessProfile,\n        //                     registeredOffice: foundAddresses[index]\n        //                 }\n        //             }\n        //             return dispatch(setCopiedUser(currentCopiedUser));\n        //         } else {\n        //             newBusinessProfile = {\n        //                 ...newBusinessProfile,\n        //                 registeredOffice: foundAddresses[index]\n        //             };\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\n        //                 updatedNewBusinessProfile: newBusinessProfile\n        //             };\n        //             return dispatch(updateNewBusinessProfileAction);\n        //         }\n        //     }\n        //     case InputCategories.TradingAddress: {\n        //         if (inputFieldValue === \"none\") {\n        //             return;\n        //         }\n        //         const foundAddresses: Address[] | undefined = getState().ProfileLocalState.BusinessProfileState.foundAddressesForRegisteredOffice;\n        //         if (!foundAddresses) {\n        //             return;\n        //         }\n        //         const index = foundAddresses.findIndex(address => getFormattedAddress(address) === inputFieldValue);\n        //         if (index === -1) {\n        //             return;\n        //         }\n        //         if (hasBusinessProfile(currentCopiedUser)) {\n        //             currentCopiedUser = {\n        //                 ...currentCopiedUser,\n        //                 // @ts-ignore\n        //                 BusinessProfile: {\n        //                     ...currentCopiedUser.BusinessProfile,\n        //                     tradingAddress: foundAddresses[index]\n        //                 }\n        //             }\n        //             return dispatch(setCopiedUser(currentCopiedUser));\n        //         } else {\n        //             newBusinessProfile = {\n        //                 ...newBusinessProfile,\n        //                 tradingAddress: foundAddresses[index]\n        //             };\n        //             const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = {\n        //                 type: BusinessProfileEvents.NewBusinessProfileChanged,\n        //                 updatedNewBusinessProfile: newBusinessProfile\n        //             };\n        //             return dispatch(updateNewBusinessProfileAction);\n        //         }\n        //     }\n        //     case InputCategories.BusinessProfileCheckBox:\n        //         const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = {\n        //             type: BusinessProfileEvents.CheckBoxChanged,\n        //             name: inputFieldName,\n        //             value: inputFieldChecked\n        //         };\n        //         return dispatch(businessProfileCheckBoxChangedAction);\n        //     default:\n        //         return;\n        // }\n    }\n}","import * as authActions from '../actions/authActions';\nimport {\n    INVALID_AUTH_NONE,\n    AUTH_SUCCESS\n} from '../../pages/signin/Signin';\n\n// auth initial state\nconst initState = {\n    signingIn: false,\n    authenticating: false,\n    authStatus: INVALID_AUTH_NONE,\n\n    preventValidatingUserWhenSigningUp: false,\n\n    user: null,\n    userLoaded: false,\n    userBeingLoaded: false,\n\n    groupsUserIsIn: null,\n    loadingGroupsUserIsIn: false,\n    groupsUserIsInLoaded: false\n};\n\nconst authReducer = (state = initState, action) => {\n\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return {\n                ...initState,\n                authenticating: state.authenticating,\n                authStatus: state.authStatus\n            };\n        case authActions.INITIALIZE_AUTH_STATE:\n            return {\n                ...initState,\n                authenticating: state.authenticating,\n                authStatus: state.authStatus\n            };\n        case authActions.TOGGLE_PREVENT_VALIDATING_USER_WHEN_SIGNING_UP:\n            return {\n                ...state,\n                preventValidatingUserWhenSigningUp: action.shouldPrevent\n            };\n        case authActions.RESET_AUTH_STATUS:\n            return {\n                ...state,\n                authStatus: INVALID_AUTH_NONE\n            };\n        case authActions.SIGNING_IN:\n            return {\n                ...state,\n                singingIn: true\n            };\n        case authActions.AUTHENTICATING:\n            return {\n                ...state,\n                singingIn: false,\n                authenticating: true,\n                authStatus: INVALID_AUTH_NONE,\n                preventValidatingUserWhenSigningUp: false,\n\n                user: null,\n                userLoaded: false,\n                userBeingLoaded: true,\n\n                groupsUserIsIn: null,\n                loadingGroupsUserIsIn: false,\n                groupsUserIsInLoaded: false\n            };\n        case authActions.AUTH_LOADING_GROUPS_USER_IS_IN:\n            return {\n                ...state,\n                groupsUserIsIn: [],\n                loadingGroupsUserIsIn: true,\n                groupsUserIsInLoaded: false\n            };\n        case authActions.AUTH_GROUPS_USER_IS_IN_LOADED:\n            return {\n                ...state,\n                groupsUserIsIn: [...action.groups],\n                loadingGroupsUserIsIn: false,\n                groupsUserIsInLoaded: true\n            };\n        case authActions.FINISHED_AUTHENTICATING:\n            return {\n                ...state,\n                signingIn: false,\n                authenticating: false,\n                authStatus: action.authStatus,\n                preventValidatingUserWhenSigningUp: false,\n\n                user: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.user,\n                userLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? true : state.userLoaded,\n                userBeingLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.userBeingLoaded,\n\n                groupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? null : state.groupsUserIsIn,\n                loadingGroupsUserIsIn: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.loadingGroupsUserIsIn,\n                groupsUserIsInLoaded: (action.authStatus !== AUTH_SUCCESS && action.authStatus !== INVALID_AUTH_NONE) ? false : state.groupsUserIsInLoaded\n            };\n        // set state when finished loading user's profile\n        case authActions.USER_PROFILE_LOADED:\n            return {\n                ...state,\n                user: JSON.parse(JSON.stringify(action.user)),\n                userLoaded: true,\n                userBeingLoaded: false\n            };\n        // when user's profile has changed\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\n            return {\n                ...state,\n                user: JSON.parse(JSON.stringify(action.userChanged))\n            };\n        case authActions.GROUPS_USER_IS_IN_HAVE_CHANGED:\n            return {\n                ...state,\n                groupsUserIsIn: [...action.groups]\n            };\n        default:\n            return state;\n    }\n};\n\nexport default authReducer;\n\n\n","import * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\nimport * as editUserActions from '../actions/editUserActions';\nimport * as editImageActions from '../actions/editImageActions';\nimport * as editVideoActions from '../actions/editVideoActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    BusinessProfile: {\n        companyName: '',\n        sector: 'None',\n        companyWebsite: '',\n\n\n    },\n\n    logoToBeUploaded: null,\n    videoToBeUploaded: null,\n\n    expandBusinessProfileFilling: false // this field is only available for investor\n};\n\nconst createBusinessProfileReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case createBusinessProfileActions.ORDINARY_BUSINESS_PROFILE_FIELDS_CHANGED:\n            return {\n                ...state,\n                BusinessProfile: {\n                    ...state.BusinessProfile,\n                    [action.fieldName]: action.fieldValue\n                }\n            };\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\n            return {\n                ...state,\n                logoToBeUploaded: action.blob\n            };\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\n            return {\n                ...state,\n                videoToBeUploaded: action.video\n            };\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\n            return {\n                ...initState,\n                expandBusinessProfileFilling: state.expandBusinessProfileFilling\n            };\n        case createBusinessProfileActions.TOGGLE_EXPAND_BUSINESS_PROFILE_FILLING_FOR_INVESTOR:\n            return {\n                ...initState,\n                expandBusinessProfileFilling: !state.expandBusinessProfileFilling\n            };\n        default:\n            return state;\n    }\n};\n\nexport default createBusinessProfileReducer;","import * as editUserActions from '../actions/editUserActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    // this variable is to ensure the user's profile won't be able to be edited\n    // by the course admins if they don't belong to that course\n    // if the originalUser has the \"coursesUserIsIn\" property\n    // and the course admins do not belong to the user's home course,\n    // then they won't be able to edit this user's profile.\n    allowEditing: true,\n\n    // original user object\n    originalUser: null,\n    // user edited object\n    userEdited: null,\n\n    // when a new director is being added\n    addNewDirector: false,\n    newDirectorText: ''\n};\n\n// Reducer\nconst editUserReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case editUserActions.SET_ORIGINAL_USER_AND_EDITED_USER:\n            return {\n                ...state,\n                originalUser: action.user,\n                userEdited: action.user,\n                allowEditing: action.allowEditing\n            };\n        case editUserActions.EDIT_PERSONAL_INFORMATION:\n            return {\n                ...state,\n                userEdited: {\n                    ...state.userEdited,\n                    [action.edit.property]: action.edit.value\n                }\n            };\n        case editUserActions.EDIT_ORDINARY_BUSINESS_PROFILE_INFORMATION:\n            return {\n                ...state,\n                userEdited: {\n                    ...state.userEdited,\n                    BusinessProfile: {\n                        ...state.userEdited.BusinessProfile,\n                        [action.edit.property]: action.edit.value\n                    }\n                }\n            };\n        case editUserActions.RESET_PERSONAL_INFORMATION:\n            return {\n                ...state,\n                userEdited: {\n                    ...state.userEdited,\n                    title: state.originalUser.title,\n                    firstName: state.originalUser.firstName,\n                    lastName: state.originalUser.lastName,\n                    email: state.originalUser.email,\n                    linkedin: !state.originalUser.linkedin ? '' : state.originalUser.linkedin\n                }\n            };\n        case editUserActions.RESET_BUSINESS_PROFILE:\n            return {\n                ...state,\n                userEdited: {\n                    ...state.userEdited,\n                    BusinessProfile: JSON.parse(JSON.stringify(state.originalUser.BusinessProfile))\n                }\n            };\n        case authActions.CURRENT_USER_PROFILE_HAS_CHANGED:\n            return {\n                ...state,\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\n            };\n        case editUserActions.EDIT_USER_ORIGINAL_USER_CHANGED:\n            return {\n                ...state,\n                originalUser: JSON.parse(JSON.stringify(action.userChanged)),\n                userEdited: JSON.parse(JSON.stringify(action.userChanged))\n            }\n        default:\n            return state;\n    }\n};\n\nexport default editUserReducer;","import * as editImageActions from '../actions/editImageActions';\nimport * as authActions from '../actions/authActions';\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\nimport {\n    UPLOAD_PROFILE_PICTURE_MODE,\n    UPLOAD_LOGO_MODE\n} from '../../shared-components/uploading-dialog/UploadingDialog';\n\nconst initState = {\n    editImageDialogOpen: false,\n    mode: null,\n\n    imgEditor: null,\n    imgEdited: null, // blob file obtained after editing\n\n    imgZoom: 1,\n\n    imgPreEdited: null, // file chosen from computer or url from previous logos\n    imgPreEditedLoaded: true,\n    imgPreIndex: -1, // index of previous image in the original list (not sorted) on firebase (when choose)\n\n    previousPhotos: null\n};\n\nconst editImageReducer = (state = initState, action) => {\n\n    switch(action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case editImageActions.TOGGLE_EDIT_IMAGE_DIALOG:\n            return {\n                ...state,\n                editImageDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editImageDialogOpen,\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\n                imgPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.imgPreIndex : -1,\n                previousPhotos:\n                    action.mode === UPLOAD_LOGO_MODE\n                        ?\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.logo)\n                            ?\n                            []\n                            :\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.logo))\n                        :\n                        action.mode === UPLOAD_PROFILE_PICTURE_MODE\n                            ?\n                            !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.profilePicture)\n                                ?\n                                []\n                                :\n                                JSON.parse(JSON.stringify(action.user.profilePicture))\n                            :\n                            [],\n                imgEdited: null,\n                imgZoom: 1,\n                imgPreEdited: null,\n                imgPreEditedLoaded: true\n            };\n        case editImageActions.CREATE_BUSINESS_PROFILE_SAVE_EDITED_IMAGE:\n            return {\n                ...initState,\n                mode: state.mode\n            };\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\n            return {\n                ...initState,\n                mode: state.mode\n            };\n        case editImageActions.SET_IMAGE_EDITOR_REFERENCE:\n            return {\n                ...state,\n                imgEditor: action.editor\n            };\n        case editImageActions.LOADING_IMAGE_FILE:\n            return {\n                ...state,\n                imgPreEdited: null,\n                imgPreEditedLoaded: false\n            };\n        case editImageActions.IMAGE_FILES_LOADED:\n            return {\n                ...state,\n                imgPreEdited: window.URL.createObjectURL(action.blob),\n                imgPreEditedLoaded: true,\n                imgPreIndex: -1\n            };\n        case editImageActions.IMAGE_ZOOM_CHANGED:\n            return {\n                ...state,\n                imgZoom: action.zoom\n            };\n        case editImageActions.LOADING_PREVIOUS_IMAGE:\n            return {\n                ...state,\n                imgPreEdited: null,\n                imgPreEditedLoaded: false,\n                imgPreIndex: -1\n            };\n        case editImageActions.FINISHED_LOADING_PREVIOUS_IMAGE:\n            return {\n                ...state,\n                imgPreEdited: window.URL.createObjectURL(action.blob),\n                imgPreEditedLoaded: true,\n                imgPreIndex: state.previousPhotos.length - 1 - action.selectedIndex, // get the original index\n            };\n        case editImageActions.CANCEL_EDITING_CURRENT_IMAGE:\n            return {\n                ...state,\n                imgPreEdited: null,\n                imgPreEditedLoaded: true,\n                imgEdited: null,\n                imgZoom: 1,\n                imgPreIndex: -1\n            };\n        case editImageActions.EDITED_IMAGE_OBTAINED:\n            return {\n                ...state,\n                imgEdited: action.blob\n            };\n        default:\n            return state;\n    }\n};\n\nexport default editImageReducer;","import * as editVideoActions from '../actions/editVideoActions';\nimport * as authActions from '../actions/authActions';\nimport * as createBusinessProfileActions from '../actions/createBusinessProfileActions';\nimport {\n    UPLOAD_VIDEO_MODE\n} from '../../shared-components/uploading-dialog/UploadingDialog';\n\nconst initState = {\n    editVideoDialogOpen: false,\n    mode: null,\n\n    videoTypeSelected: null,\n    videoChosen: null,\n    previousVideos: null,\n    videoPreIndex: -1\n};\n\nconst editVideoReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case editVideoActions.TOGGLE_EDIT_VIDEO_DIALOG:\n            return {\n                ...state,\n                editVideoDialogOpen: action.hasOwnProperty('waitForUploading') && !action.waitForUploading ? false : !state.editVideoDialogOpen,\n                mode: action.hasOwnProperty('mode') ? action.mode : state.mode,\n                videoPreIndex: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoPreIndex : -1,\n                previousVideos:\n                    action.mode === UPLOAD_VIDEO_MODE\n                        ?\n                        !action.hasOwnProperty('user') || (action.hasOwnProperty('user') && !action.user.BusinessProfile.video)\n                            ?\n                            []\n                            :\n                            JSON.parse(JSON.stringify(action.user.BusinessProfile.video))\n                        :\n                        [],\n                videoChosen: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoChosen : null,\n                videoTypeSelected: action.hasOwnProperty('waitForUploading') && action.waitForUploading ? state.videoTypeSelected : null\n            };\n        case editVideoActions.CREATE_BUSINESS_PROFILE_SAVE_VIDEO:\n            return {\n                ...initState,\n                mode: state.mode\n            };\n        case createBusinessProfileActions.CLEAR_FILLED_BUSINESS_PROFILE_INFORMATION:\n            return {\n                ...initState,\n                mode: state.mode\n            };\n        case editVideoActions.VIDEO_TYPE_CHOSEN:\n            return {\n                ...state,\n                videoTypeSelected: action.videoType,\n                videoChosen: null,\n                videoPreIndex: -1\n            };\n        case editVideoActions.VIDEO_URL_CHANGED:\n            return {\n                ...state,\n                videoChosen: action.url\n            };\n        case editVideoActions.VIDEO_FILE_CHANGED:\n            return {\n                ...state,\n                videoChosen: action.blob,\n                videoPreIndex: -1\n            };\n        case editVideoActions.CANCEL_EDITING_CURRENT_VIDEO:\n            return {\n                ...state,\n                videoChosen: null,\n                videoPreIndex: -1\n            };\n        case editVideoActions.PREVIOUS_VIDEO_SELECTED:\n            return {\n                ...state,\n                videoChosen: state.previousVideos[action.selectedIndex].url,\n                videoPreIndex: state.previousVideos.length - 1 - action.selectedIndex,\n                videoTypeSelected: null\n            };\n        default:\n            return state;\n    }\n};\n\nexport default editVideoReducer;","import * as uploadFilesActions from '../actions/uploadFilesActions';\nimport {\n    UPLOAD_LEGAL_DOCUMENTS_MODE,\n    UPLOAD_PITCH_COVER_MODE,\n    UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE,\n    UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\n} from '../../shared-components/uploading-dialog/UploadingDialog';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    mode: null, // file upload mode (e.g. Legal documents, Project cover, Project deck, and Project supporting documents)\n    filesToBeUploaded: {\n        legalDocuments: [],\n        pitchCover: [],\n        pitchPresentationDocument: [],\n        pitchSupportingDocuments: []\n    }, // arrays of files that will be uploaded to Firebase storage\n    filesDBReferences: {\n        legalDocuments: [],\n        pitchCover: [],\n        pitchPresentationDocument: [],\n        pitchSupportingDocuments: []\n    }, // references of the uploaded files in the Firebase realtime DB\n\n    fileUploadErrorMessage: '',\n    fileUploadErrorSnackbarOpen: false\n};\n\nconst uploadFilesReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case uploadFilesActions.DELETE_TO_BE_UPLOADED_FILE:\n            return {\n                ...state,\n                filesToBeUploaded: {\n                    ...state.filesToBeUploaded,\n                    legalDocuments:\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_LEGAL_DOCUMENT\n                            ?\n                            action.updatedFilesToBeUploaded\n                            :\n                            state.filesToBeUploaded.legalDocuments,\n                    pitchCover:\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_COVER\n                            ?\n                            action.updatedFilesToBeUploaded\n                            :\n                            state.filesToBeUploaded.pitchCover,\n                    pitchPresentationDocument:\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_PRESENTATION_DOCUMENT\n                            ?\n                            action.updatedFilesToBeUploaded\n                            :\n                            state.filesToBeUploaded.pitchPresentationDocument,\n                    pitchSupportingDocuments:\n                        action.mode === uploadFilesActions.DELETE_TO_BE_UPLOADED_PITCH_SUPPORTING_DOCUMENT\n                            ?\n                            action.updatedFilesToBeUploaded\n                            :\n                            state.filesToBeUploaded.pitchSupportingDocuments\n                }\n            };\n        case uploadFilesActions.FINISHED_UPLOADING_ALL_FILES:\n            return {\n                ...state,\n                filesToBeUploaded: {\n                    ...state.filesToBeUploaded,\n                    legalDocuments:\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\n                            ?\n                            []\n                            :\n                            state.filesToBeUploaded.legalDocuments,\n                    pitchCover:\n                        action.mode === UPLOAD_PITCH_COVER_MODE\n                            ?\n                            []\n                            :\n                            state.filesToBeUploaded.pitchCover,\n                    pitchPresentationDocument:\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\n                            ?\n                            []\n                            :\n                            state.filesToBeUploaded.pitchPresentationDocument,\n                    pitchSupportingDocuments:\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\n                            ?\n                            []\n                            :\n                            state.filesToBeUploaded.pitchSupportingDocuments\n                },\n                filesDBReferences: {\n                    ...state.filesToBeUploaded,\n                    legalDocuments:\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\n                        && action.hasOwnProperty('waitingForUploadingReferences')\n                        && !action.waitingForUploadingReferences\n                            ?\n                            []\n                            :\n                            state.filesDBReferences.legalDocuments,\n                    pitchCover:\n                        action.mode === UPLOAD_PITCH_COVER_MODE\n                        && action.hasOwnProperty('waitingForUploadingReferences')\n                        && !action.waitingForUploadingReferences\n                            ?\n                            []\n                            :\n                            state.filesDBReferences.pitchCover,\n                    pitchPresentationDocument:\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\n                        && action.hasOwnProperty('waitingForUploadingReferences')\n                        && !action.waitingForUploadingReferences\n                            ?\n                            []\n                            :\n                            state.filesDBReferences.pitchPresentationDocument,\n                    pitchSupportingDocuments:\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\n                        && action.hasOwnProperty('waitingForUploadingReferences')\n                        && !action.waitingForUploadingReferences\n                            ?\n                            []\n                            :\n                            state.filesDBReferences.pitchSupportingDocuments\n                },\n                mode: null,\n                fileUploadErrorMessage: '',\n                fileUploadErrorSnackbarOpen: false\n            };\n        case uploadFilesActions.FILE_UPLOAD_CHANGED:\n            return {\n                ...state,\n                filesToBeUploaded: {\n                    ...state.filesToBeUploaded,\n                    legalDocuments:\n                        action.mode === UPLOAD_LEGAL_DOCUMENTS_MODE\n                            ?\n                            [...state.filesToBeUploaded.legalDocuments, action.fileRead]\n                            :\n                            state.filesToBeUploaded.legalDocuments,\n                    pitchCover:\n                        action.mode === UPLOAD_PITCH_COVER_MODE\n                            ?\n                            [action.fileRead]\n                            :\n                            state.filesToBeUploaded.pitchCover,\n                    pitchPresentationDocument:\n                        action.mode === UPLOAD_PITCH_PRESENTATION_DOCUMENT_MODE\n                            ?\n                            [action.fileRead]\n                            :\n                            state.filesToBeUploaded.pitchPresentationDocument,\n                    pitchSupportingDocuments:\n                        action.mode === UPLOAD_PITCH_SUPPORTING_DOCUMENTS_MODE\n                            ?\n                            [...state.filesToBeUploaded.pitchSupportingDocuments, action.fileRead]\n                            :\n                            state.filesToBeUploaded.pitchSupportingDocuments\n                }\n            };\n        case uploadFilesActions.FILE_UPLOAD_ERROR:\n            return {\n                ...state,\n                fileUploadErrorMessage: action.error,\n                fileUploadErrorSnackbarOpen: true\n            };\n        case uploadFilesActions.CLOSE_FILE_UPLOAD_ERROR_SNACKBAR:\n            return {\n                ...state,\n                fileUploadErrorSnackbarOpen: false\n            };\n        case uploadFilesActions.RESET_ERROR_MESSAGE_WHEN_FILE_UPLOAD_ERROR_SNACKBAR_EXITED:\n            return {\n                ...state,\n                fileUploadErrorMessage: ''\n            };\n        case uploadFilesActions.FINISHED_UPLOADING_A_LEGAL_DOCUMENT:\n            return {\n                ...state,\n                filesDBReferences: {\n                    ...state.filesDBReferences,\n                    legalDocuments: [...state.filesDBReferences.legalDocuments, action.fileDBRef]\n                }\n            };\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_COVER:\n            return {\n                ...state,\n                filesDBReferences: {\n                    ...state.filesDBReferences,\n                    pitchCover: [...state.filesDBReferences.pitchCover, action.fileDBRef]\n                }\n            };\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_PRESENTATION_DOCUMENT:\n            return {\n                ...state,\n                filesDBReferences: {\n                    ...state.filesDBReferences,\n                    pitchPresentationDocument: [...state.filesDBReferences.pitchPresentationDocument, action.fileDBRef]\n                }\n            };\n        case uploadFilesActions.FINISHED_UPLOADING_A_PITCH_SUPPORTING_DOCUMENT:\n            return {\n                ...state,\n                filesDBReferences: {\n                    ...state.filesDBReferences,\n                    pitchSupportingDocuments: [...state.filesDBReferences.pitchSupportingDocuments, action.fileDBRef]\n                }\n            };\n        default:\n            return state;\n    }\n};\n\nexport default uploadFilesReducer;","import * as uploadingStatusActions from '../actions/uploadingStatusActions';\nimport * as authActions from '../actions/authActions';\nimport {\n    UPLOAD_NONE\n} from '../../shared-components/uploading-dialog/UploadingDialog';\nimport {DISMISS_UPLOADING_STATUS} from \"../actions/uploadingStatusActions\";\n\nconst initState = {\n    mode: UPLOAD_NONE,\n    progress: 0\n};\n\nconst uploadingStatusReducer = (state = initState, action) => {\n    switch(action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case uploadingStatusActions.UPLOADING:\n            return {\n                mode: action.mode,\n                progress: action.progress\n            };\n        case DISMISS_UPLOADING_STATUS:\n            return {\n                mode: UPLOAD_NONE,\n                progress: 0\n            };\n        default:\n            return state;\n    }\n};\n\nexport default uploadingStatusReducer;","import * as changePasswordActions from '../actions/changePasswordActions';\nimport * as authActions from '../actions/authActions';\nimport {\n    PASSWORD_CHANGE_NONE,\n    PASSWORD_CHANGE_RE_AUTH\n} from '../../shared-components/change-password/ChangePasswordPage';\n\nconst initState = {\n    currentPassword: '',\n    newPassword: '',\n    newPasswordVerified: '',\n    passwordChangeResponseCode: PASSWORD_CHANGE_NONE\n};\n\nconst changePasswordReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case changePasswordActions.RE_AUTHENTICATING_USER:\n            return {\n                ...state,\n                passwordChangeResponseCode: PASSWORD_CHANGE_RE_AUTH\n            };\n        case changePasswordActions.RESET_CHANGE_PASSWORD:\n            return {\n                ...state,\n                currentPassword: '',\n                newPassword: '',\n                newPasswordVerified: '',\n                passwordChangeResponseCode: action.hasOwnProperty('responseCode') ? action.responseCode : PASSWORD_CHANGE_NONE\n            };\n        case changePasswordActions.CHANGE_PASSWORD_TEXT_CHANGED:\n            return {\n                ...state,\n                [action.name]: action.value\n            };\n        case changePasswordActions.ERROR_CHANGING_PASSWORD:\n            return {\n                ...state,\n                passwordChangeResponseCode: action.errorCode\n            };\n        default:\n            return state;\n    }\n};\n\nexport default changePasswordReducer;","import * as clubAttributesActions from '../actions/clubAttributesActions';\n\nconst initState = {\n    clubAttributes: null,\n    clubAttributesLoaded: false,\n    clubAttributesBeingLoaded: false\n};\n\nconst clubAttributesReducer = (state = initState, action) => {\n    switch (action.type) {\n        case clubAttributesActions.LOADING_CLUB_ATTRIBUTES:\n            return {\n                ...state,\n                clubAttributes: null,\n                clubAttributesLoaded: false,\n                clubAttributesBeingLoaded: true\n            };\n        case clubAttributesActions.CLUB_ATTRIBUTES_LOADED:\n            return {\n                ...state,\n                clubAttributes: JSON.parse(JSON.stringify(action.clubAttributes)),\n                clubAttributesLoaded: true,\n                clubAttributesBeingLoaded: false\n            };\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\n            return {\n                ...state,\n                clubAttributes: {\n                    ...state.clubAttributes,\n                    [action.key]: action.value\n                }\n            };\n        default:\n            return state;\n    }\n};\n\nexport default clubAttributesReducer;","import React, {Component} from 'react';\nimport {Button, TextField, Typography} from '@material-ui/core';\nimport FlexView from 'react-flexview';\nimport {Col, Row} from 'react-bootstrap';\nimport {css} from 'aphrodite';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport {connect} from 'react-redux';\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\n\nconst mapStateToProps = state => {\n    return {\n        createForumName: state.manageForums.createForumName,\n        createForumDesc: state.manageForums.createForumDesc,\n        createForumAuthor: state.manageForums.createForumAuthor,\n        createForumError: state.manageForums.createForumError,\n        forumEdited: state.manageForums.forumEdited\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\n        createNewForum: () => dispatch(forumsActions.createNewForum()),\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\n    }\n};\n\nclass CreateForum extends Component {\n    render() {\n        const {\n            createForumName,\n            createForumDesc,\n            createForumError,\n            forumEdited,\n\n            toggleCreateNewForum,\n            createNewForum,\n            handleForumsInputChanged\n        } = this.props;\n\n        return (\n            <FlexView column >\n                <Typography paragraph variant=\"h6\" color=\"primary\" >\n                    {\n                        forumEdited\n                            ?\n                            \"Edit forum\"\n                            :\n                            \"Create forum\"\n                    }\n                </Typography>\n                {\n                    forumEdited\n                        ?\n                        null\n                        :\n                        <Typography paragraph variant=\"body1\" color=\"textSecondary\" align=\"left\">Forums are made up of individual discussion threads that can be organised around a particular subject. Create forums to organise discussions.</Typography>\n                }\n                <FlexView column marginTop={10} >\n                    <Typography variant=\"subtitle1\">Forum information</Typography>\n                    <TextField\n                        name=\"createForumName\"\n                        label=\"Name\"\n                        required\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        value={createForumName}\n                        error={createForumError && createForumName.trim().length === 0}\n                        onChange={handleForumsInputChanged}\n                    />\n                    <TextField\n                        name=\"createForumDesc\"\n                        label=\"Description\"\n                        placeholder=\"(optional)\"\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        multiline\n                        rows={4}\n                        rowsMax={4}\n                        value={createForumDesc}\n                        onChange={handleForumsInputChanged}\n                    />\n                    <Row noGutters >\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }} >\n                            <FlexView>\n                                {\n                                    !createForumError\n                                        ?\n                                        null\n                                        :\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\">Please enter forum name.</Typography>\n                                }\n                            </FlexView>\n                        </Col>\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }}>\n                            <FlexView hAlignContent=\"right\" >\n                                <FlexView marginRight={5} >\n                                    <Button\n                                        variant=\"outlined\"\n                                        onClick={() => toggleCreateNewForum(false, null)}\n                                        className={css(sharedStyles.no_text_transform)}\n                                    >Cancel</Button>\n                                </FlexView>\n                                <FlexView marginLeft={5} >\n                                    <Button variant=\"contained\" color=\"primary\" onClick={createNewForum} className={css(sharedStyles.no_text_transform)}>Submit</Button>\n                                </FlexView>\n                            </FlexView>\n                        </Col>\n                    </Row>\n                </FlexView>\n            </FlexView>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateForum);","import React, {Component} from 'react';\nimport {Col, Row} from 'react-bootstrap';\nimport FlexView from 'react-flexview';\nimport {Button, TextField, Typography} from '@material-ui/core';\nimport ReactQuill from 'react-quill';\nimport {css} from 'aphrodite';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport {connect} from 'react-redux';\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\n\nconst mapStateToProps = state => {\n    return {\n        createThreadName: state.manageForums.createThreadName,\n        createThreadBriefDesc: state.manageForums.createThreadBriefDesc,\n        createThreadMessage: state.manageForums.createThreadMessage,\n        createThreadError: state.manageForums.createThreadError,\n        threadEdited: state.manageForums.threadEdited\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\n        createNewThread: () => dispatch(forumsActions.createNewThread()),\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor))\n    }\n};\n\nclass CreateThread extends Component {\n\n    /**\n     * Handle react quill changed\n     *\n     * @param field\n     * @returns {Function}\n     */\n    handleQuillChanged = field => (content, delta, source, editor) => {\n        this.props.handleQuillChanged(field, editor);\n    };\n\n    render() {\n        const {\n            createThreadName,\n            createThreadBriefDesc,\n            createThreadMessage,\n            createThreadError,\n            threadEdited,\n\n            toggleCreateNewThread,\n            createNewThread,\n            handleForumsInputChanged\n        } = this.props;\n\n        return (\n            <Row noGutters >\n                <Col xs={12} sm={12} md={12} lg={12} >\n                    <FlexView column >\n                        <Typography paragraph variant=\"h6\" color=\"primary\" >\n                            {\n                                threadEdited\n                                    ?\n                                    \"Edit thread\"\n                                    :\n                                    \"Create thread\"\n                            }\n                        </Typography>\n                        {\n                            threadEdited\n                                ?\n                                null\n                                :\n                                <Typography paragraph variant=\"body1\" color=\"textSecondary\" align=\"left\">A thread is a series of posts related to the same subject. Threads provide an organisational structure within a forum for users to share posts on similar topics. Creating a thread posts the first message.</Typography>\n                        }\n                        <FlexView column marginTop={10} >\n                            <Typography variant=\"body1\">Thread information</Typography>\n\n                            <TextField\n                                name=\"createThreadName\"\n                                label=\"Name\"\n                                required\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                value={createThreadName}\n                                error={createThreadError && createThreadName.trim().length === 0}\n                                onChange={handleForumsInputChanged}\n                            />\n\n                            <TextField\n                                name=\"createThreadBriefDesc\"\n                                label=\"Brief description\"\n                                required\n                                variant=\"outlined\"\n                                margin=\"normal\"\n                                value={createThreadBriefDesc}\n                                error={createThreadError && createThreadBriefDesc.trim().length === 0}\n                                onChange={handleForumsInputChanged}\n                            />\n\n                            <FlexView column marginTop={40} >\n                                <Typography paragraph variant=\"body1\">Thread message</Typography>\n                                <ReactQuill\n                                    placeholder=\"Write your thread message here. Add images for visual effects.\"\n                                    theme=\"snow\"\n                                    value={createThreadMessage}\n                                    onChange={this.handleQuillChanged(forumsActions.THREAD_CONTENT_QUILL)}\n                                    modules={modules}\n                                />\n                            </FlexView>\n                        </FlexView>\n                    </FlexView>\n                </Col>\n                <Col xs={12} sm={12} md={12} lg={12} >\n                    <Row noGutters >\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }}>\n                            <FlexView>\n                                {\n                                    !createThreadError\n                                        ?\n                                        null\n                                        :\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\">Please fill in the required fields.</Typography>\n                                }\n                            </FlexView>\n                        </Col>\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }}>\n                            <FlexView hAlignContent=\"right\">\n                                <FlexView marginRight={5}>\n                                    <Button\n                                        variant=\"outlined\"\n                                        onClick={() => toggleCreateNewThread(false, null)}\n                                        className={css(sharedStyles.no_text_transform)}\n                                    >Cancel</Button>\n                                </FlexView>\n                                <FlexView marginLeft={5} >\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        onClick={createNewThread}\n                                        className={css(sharedStyles.no_text_transform)}\n                                    >Submit</Button>\n                                </FlexView>\n                            </FlexView>\n                        </Col>\n                    </Row>\n                </Col>\n            </Row>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateThread);\n\nconst modules = {\n    toolbar: [\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\n        ['bold', 'italic', 'underline', 'strike'],\n        ['blockquote', 'code-block'],\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\n        [{'script': 'sub'}, {'script': 'super'}],\n        [{'color': []}, {'background': []}],\n        ['link', 'image'],\n        ['clean']\n    ]\n};","import React, {Component} from 'react';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    Divider,\r\n    FormControl,\r\n    IconButton,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport FlexView from 'react-flexview';\r\nimport * as colors from '../../values/colors';\r\nimport * as utils from '../../utils/utils';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {css} from 'aphrodite';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport {SORT_BY_CURRENT_USER, SORT_BY_LAST, SORT_BY_OLDEST} from './Forums';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        threadsTablePage: state.manageForums.threadsTablePage,\r\n        threadsTableRowsPerPage: state.manageForums.threadsTableRowsPerPage,\r\n\r\n        threadsLoadMode: state.manageForums.threadsLoadMode,\r\n        threadsSortedMode: state.manageForums.threadsSortedMode\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleCreateNewThread: (open, threadEdited) => dispatch(forumsActions.toggleCreateNewThread(open, threadEdited)),\r\n        deleteThread: (threadID) => dispatch(forumsActions.deleteThread(threadID)),\r\n        goBackToForumsList: () => dispatch(forumsActions.goBackToForumsList()),\r\n        clickOnAParticularThread: (thread) => dispatch(forumsActions.clickOnAParticularThread(thread)),\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass IndividualForum extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    /**\r\n     * Render threads table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderThreads = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n            forumThreadsLoaded,\r\n            forumThreads,\r\n            threadsSortedMode,\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            toggleCreateNewThread,\r\n            deleteThread,\r\n            clickOnAParticularThread\r\n        } = this.props;\r\n\r\n        if (!forumThreadsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={20} >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedThreads = [];\r\n\r\n        switch (threadsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n                sortedThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread2.dateCreated - thread1.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forumThreads.sort((thread1, thread2) => {\r\n                    return (thread1.dateCreated - thread2.dateCreated);\r\n                });\r\n                sortedThreads = forumThreads;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedThreads.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <Typography variant=\"body1\" align=\"center\" style={{ marginTop: 20, marginBottom: 20 }}>No threads created.</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedThreads\r\n                .slice(threadsTablePage * threadsTableRowsPerPage, threadsTablePage * threadsTableRowsPerPage + threadsTableRowsPerPage)\r\n                .map(thread => (\r\n                        <TableRow\r\n                            key={thread.id}\r\n                            hover\r\n                        >\r\n                            <TableCell>\r\n                                <Typography align=\"left\" variant=\"body2\" >{utils.dateTimeInReadableFormat(thread.dateCreated)}</Typography>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 400 }} >\r\n                                <FlexView column hAlignContent=\"left\" >\r\n                                    <ButtonBase onClick={() => clickOnAParticularThread(thread)} >\r\n                                        <Typography align=\"left\" variant=\"body2\" color=\"primary\" noWrap>{thread.name}</Typography>\r\n                                    </ButtonBase>\r\n                                    {\r\n                                        currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                        && (\r\n                                            !thread.hasOwnProperty('deleted')\r\n                                            || (\r\n                                                thread.hasOwnProperty('deleted')\r\n                                                && thread.deleted === false\r\n                                            )\r\n                                        )\r\n                                            ?\r\n                                            <FlexView marginTop={12} >\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"secondary\"\r\n                                                    onClick={() => deleteThread(thread.id)}\r\n                                                    style={{ marginRight: 10 }}\r\n                                                >Delete\r\n                                                    <DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }}/>\r\n                                                </Button>\r\n                                                <Button\r\n                                                    variant=\"outlined\"\r\n                                                    className={css(sharedStyles.no_text_transform)}\r\n                                                    size=\"small\"\r\n                                                    color=\"primary\"\r\n                                                    onClick={() => toggleCreateNewThread(true, JSON.parse(JSON.stringify(thread)))}\r\n                                                > Edit\r\n                                                    <EditIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                                </Button>\r\n                                            </FlexView>\r\n                                            :\r\n                                            null\r\n                                    }\r\n                                </FlexView>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 400 }} >\r\n                                <Typography align=\"left\" variant=\"body2\" noWrap>{thread.description}</Typography>\r\n                            </TableCell>\r\n                            <TableCell style={{ maxWidth: 200 }} >\r\n                                <Typography align=\"left\" variant=\"body2\" noWrap >\r\n                                    {\r\n                                        thread.author.type !== DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            // normal users\r\n                                            `${thread.author.firstName} ${thread.author.lastName}`\r\n                                            :\r\n                                            thread.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                \"Teacher Super Admin\"\r\n                                                :\r\n                                                // group admins\r\n                                                `${thread.author.groupDetails.displayName} Admin`\r\n                                    }\r\n                                </Typography>\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n\r\n            threadsTablePage,\r\n            threadsTableRowsPerPage,\r\n\r\n            threadsLoadMode,\r\n            threadsSortedMode,\r\n\r\n            toggleCreateNewThread,\r\n            handleForumsInputChanged,\r\n            goBackToForumsList\r\n        } = this.props;\r\n\r\n        let sortedThreads = [...forumThreads];\r\n\r\n        if (threadsSortedMode === SORT_BY_CURRENT_USER) {\r\n            sortedThreads = forumThreads.filter(thread => thread.author.id === currentUser.id);\r\n            sortedThreads.sort((thread1, thread2) => {\r\n                return (thread2.dateCreated - thread1.dateCreated);\r\n            });\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <FlexView vAlignContent=\"center\" >\r\n                    <IconButton color=\"primary\" aria-label=\"Back\" onClick={goBackToForumsList} >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView marginLeft={8} >\r\n                        <Typography color=\"primary\" variant=\"h6\">{`Forum: ${forumSelected.name}`}</Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <FlexView marginTop={12} marginBottom={24} >\r\n                    <Typography variant=\"body2\" align=\"left\" >\r\n                        {\r\n                            !forumSelected.hasOwnProperty('lastEdited')\r\n                                ?\r\n                                `Created on: ${utils.dateTimeInReadableFormat(forumSelected.dateCreated)}`\r\n                                :\r\n                                `Last edited: ${utils.dateTimeInReadableFormat(forumSelected.lastEdited)}`\r\n                        }\r\n                    </Typography>\r\n                </FlexView>\r\n\r\n                <Typography variant=\"body1\" align=\"left\"><b><u>Description:</u></b></Typography>\r\n\r\n                <Typography variant=\"body1\" align=\"left\" style={{ whiteSpace: \"pre-line\", marginTop: 6 }}>{forumSelected.description}</Typography>\r\n\r\n                <Divider style={{ height: 2, marginTop: 35, marginBottom: 35, backgroundColor: colors.blue_gray_100 }} />\r\n\r\n                <FlexView marginBottom={35} >\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        color=\"primary\"\r\n                        className={css(sharedStyles.no_text_transform)}\r\n                        onClick={() => toggleCreateNewThread(true, null)}\r\n                    >\r\n                        <AddIcon fontSize=\"small\" style={{ marginRight: 10 }}/>Create thread\r\n                    </Button>\r\n                </FlexView>\r\n\r\n                {/** Filters */}\r\n                <Container fluid style={{ padding: 0, marginBottom: 40 }} >\r\n                    <Row>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                                ?\r\n                                <Col xs={12} sm={12} md={4} lg={2} >\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Mode</Typography>\r\n                                        <Paper>\r\n                                            <FormControl fullWidth >\r\n                                                <Select\r\n                                                    value={threadsLoadMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput labelWidth={0} name=\"threadsLoadMode\" />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem value={realtimeDBUtils.LOAD_LIVE_THREADS}>Live threads</MenuItem>\r\n                                                    <MenuItem value={realtimeDBUtils.LOAD_DELETED_THREADS}>Deleted threads</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                                :\r\n                                null\r\n                        }\r\n                        <Col xs={12} sm={12} md={4} lg={2} >\r\n                            <FlexView column >\r\n                                <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Sort by</Typography>\r\n                                <Paper>\r\n                                    <FormControl fullWidth >\r\n                                        <Select\r\n                                            value={threadsSortedMode}\r\n                                            onChange={handleForumsInputChanged}\r\n                                            margin=\"dense\"\r\n                                            input={\r\n                                                <OutlinedInput labelWidth={0} name=\"threadsSortedMode\" />\r\n                                            }\r\n                                        >\r\n                                            <MenuItem value={SORT_BY_LAST}>Newest</MenuItem>\r\n                                            <MenuItem value={SORT_BY_CURRENT_USER}>Mine</MenuItem>\r\n                                            <MenuItem value={SORT_BY_OLDEST}>Oldest</MenuItem>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                </Paper>\r\n                            </FlexView>\r\n                        </Col>\r\n                    </Row>\r\n                </Container>\r\n\r\n                {/** Threads table */}\r\n                <Paper style={{ overflowX: \"auto\" }}>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Date</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Thread</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Description</b></Typography>\r\n                                    }\r\n                                />\r\n                                <StyledTableCell\r\n                                    colSpan={1}\r\n                                    cellColor={\r\n                                        !groupProperties\r\n                                            ?\r\n                                            colors.primaryColor\r\n                                            :\r\n                                            groupProperties.settings.primaryColor\r\n                                    }\r\n                                    component={\r\n                                        <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Author</b></Typography>\r\n                                    }\r\n                                />\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {\r\n                                this.renderThreads()\r\n                            }\r\n                        </TableBody>\r\n                        <TableFooter>\r\n                            <TableRow>\r\n                                <TablePagination\r\n                                    style={{\r\n                                        backgroundColor: colors.blue_gray_50\r\n                                    }}\r\n                                    rowsPerPageOptions={[5, 20, 50]}\r\n                                    count={sortedThreads.length}\r\n                                    rowsPerPage={threadsTableRowsPerPage}\r\n                                    page={threadsTablePage}\r\n                                    backIconButtonProps={{\r\n                                        'aria-label': 'Previous Page',\r\n                                    }}\r\n                                    nextIconButtonProps={{\r\n                                        'aria-label': 'Next Page',\r\n                                    }}\r\n                                    SelectProps={{\r\n                                        native: true,\r\n                                    }}\r\n                                    onChangePage={this.tableChangePage('threads')}\r\n                                    onChangeRowsPerPage={this.tableChangeRowsPerPage('threads')}\r\n                                />\r\n                            </TableRow>\r\n                        </TableFooter>\r\n                    </Table>\r\n                </Paper>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualForum);","import React, {Component} from 'react';\n\nimport {css, StyleSheet} from 'aphrodite';\nimport FlexView from 'react-flexview';\nimport {Button, Paper, TextField, Typography} from '@material-ui/core';\nimport ReactQuill from 'react-quill';\nimport {Col, Row} from 'react-bootstrap';\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\n\nimport {connect} from 'react-redux';\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\n\nconst mapStateToProps = state => {\n    return {\n        threadReplySubject: state.manageForums.threadReplySubject,\n        threadReplyMessage: state.manageForums.threadReplyMessage,\n        createThreadReplyError: state.manageForums.createThreadReplyError\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\n        submitThreadReply: () => dispatch(forumsActions.submitThreadReply()),\n        handleQuillChanged: (field, editor) => dispatch(forumsActions.handleQuillChanged(field, editor)),\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event))\n    }\n};\n\nclass CreateReply extends Component {\n\n    /**\n     * Handle react quill changed\n     *\n     * @param field\n     * @returns {Function}\n     */\n    handleQuillChanged = field => (content, delta, source, editor) => {\n        this.props.handleQuillChanged(field, editor);\n    };\n\n    render() {\n        const {\n            threadReplySubject,\n            threadReplyMessage,\n            createThreadReplyError,\n\n            handleForumsInputChanged,\n            submitThreadReply,\n            toggleThreadReply\n        } = this.props;\n\n        return (\n            <Paper style={{ marginTop: 20 }} className={css(styles.thread_reply_style)} >\n                <FlexView column >\n                    <TextField\n                        name=\"threadReplySubject\"\n                        label=\"Subject\"\n                        required\n                        variant=\"outlined\"\n                        margin=\"normal\"\n                        value={threadReplySubject}\n                        error={createThreadReplyError && threadReplySubject.trim().length === 0}\n                        onChange={handleForumsInputChanged}\n                    />\n\n                    <FlexView column marginTop={30} >\n                        <Typography paragraph variant=\"body1\" >Message *</Typography>\n                        <ReactQuill\n                            placeholder=\"Write your reply here. Add images for visual effects.\"\n                            value={threadReplyMessage}\n                            theme=\"snow\"\n                            onChange={this.handleQuillChanged(forumsActions.THREAD_REPLY_CONTENT_QUILL)}\n                            modules={modules}\n                        />\n                    </FlexView>\n\n                    <Row noGutters >\n                        <Col xs={12} sm={12} md={6} lg={8} style={{ marginTop: 30 }}>\n                            <FlexView>\n                                {\n                                    !createThreadReplyError\n                                        ?\n                                        null\n                                        :\n                                        <Typography variant=\"body1\" align=\"left\" color=\"error\" > Please fill in the required fields. </Typography>\n                                }\n                            </FlexView>\n                        </Col>\n                        <Col xs={12} sm={12} md={6} lg={4} style={{ marginTop: 30 }} >\n                            <FlexView hAlignContent=\"right\" >\n                                <FlexView marginRight={5} >\n                                    <Button\n                                        variant=\"outlined\"\n                                        onClick={() => toggleThreadReply(false, null)}\n                                        className={css(sharedStyles.no_text_transform)}\n                                    >Cancel</Button>\n                                </FlexView>\n                                <FlexView marginLeft={5}>\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        onClick={submitThreadReply}\n                                        className={css(sharedStyles.no_text_transform)}\n                                    >Submit</Button>\n                                </FlexView>\n                            </FlexView>\n                        </Col>\n                    </Row>\n                </FlexView>\n            </Paper>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateReply);\n\nconst modules = {\n    toolbar: [\n        [{'header': [1, 2, 3, 4, 5, 6, false]}],\n        ['bold', 'italic', 'underline', 'strike'],\n        ['blockquote', 'code-block'],\n        [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}, {'align': []}],\n        [{'script': 'sub'}, {'script': 'super'}],\n        [{'color': []}, {'background': []}],\n        ['link', 'image'],\n        ['clean']\n    ]\n};\n\nconst styles = StyleSheet.create({\n    thread_reply_style: {\n        padding: 20,\n        marginTop: 10,\n        marginBottom: 10\n    }\n});\n","import React, {Component} from 'react';\r\n\r\nimport {Button, IconButton, Paper, Typography} from '@material-ui/core';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport {css, StyleSheet} from 'aphrodite';\r\nimport FlexView from 'react-flexview';\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport {Image} from 'react-bootstrap';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\nimport sharedStyles from '../../shared-js-css-styles/SharedStyles';\r\n\r\nimport LetterAvatar from '../profile/LetterAvatar';\r\nimport CreateReply from './CreateReply';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\n\r\nconst AVATAR_MAX_HEIGHT = 75;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplyEdited: state.manageForums.threadReplyEdited,\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        toggleThreadReply: (open, threadReplyEdited) => dispatch(forumsActions.toggleThreadReply(open, threadReplyEdited)),\r\n        deleteThreadReply: (threadReplyID) => dispatch(forumsActions.deleteThreadReply(threadReplyID)),\r\n        goBackToThreadsList: () => dispatch(forumsActions.goBackToThreadsList())\r\n    }\r\n};\r\n\r\nclass IndividualThread extends Component {\r\n\r\n    /**\r\n     * Render replies within this thread\r\n     *\r\n     * @returns {*}\r\n     */\r\n    renderReplies = () => {\r\n        const {\r\n            currentUser,\r\n\r\n            forumThreadReplies,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            toggleThreadReply,\r\n            deleteThreadReply\r\n        } = this.props;\r\n\r\n        if (forumThreadReplies.length === 0) {\r\n            return;\r\n        }\r\n\r\n        forumThreadReplies.sort((reply1, reply2) => {\r\n            return (reply2.replyDate - reply1.replyDate);\r\n        });\r\n\r\n        return forumThreadReplies.map(reply => (\r\n            <Paper key={reply.id} className={css(styles.thread_reply_style)} >\r\n                {\r\n                    reply.hasOwnProperty('deleted')\r\n                    && reply.deleted === true\r\n                        ?\r\n                        <FlexView>\r\n                            <Typography variant=\"body1\" align=\"left\"><i>This reply has been removed.</i></Typography>\r\n                        </FlexView>\r\n                        :\r\n                        <FlexView column width=\"100%\" >\r\n                            <FlexView vAlignContent=\"center\" marginBottom={10} width=\"100%\" >\r\n                                {/** Author's avatar */}\r\n                                <FlexView hAlignContent=\"left\" >\r\n                                    {\r\n                                        reply.author.type === DB_CONST.TYPE_ADMIN\r\n                                            ?\r\n                                            reply.author.superAdmin\r\n                                                ?\r\n                                                // super admins\r\n                                                <FlexView\r\n                                                    width={AVATAR_MAX_HEIGHT}\r\n                                                    height={AVATAR_MAX_HEIGHT}\r\n                                                >\r\n                                                    <Image roundedCircle thumbnail src={require('../../img/admin_logo.png').default} style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }} />\r\n                                                </FlexView>\r\n                                                :\r\n                                                // course admins\r\n                                                <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                                    <Image\r\n                                                        roundedCircle\r\n                                                        thumbnail\r\n                                                        src={ utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, reply.author.groupDetails) }\r\n                                                        style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                    />\r\n                                                </FlexView>\r\n                                            :\r\n                                            (\r\n                                                !reply.author.profilePicture\r\n                                                || (reply.author.profilePicture && reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                                    ?\r\n                                                    // normal users with no profile picture\r\n                                                    <LetterAvatar\r\n                                                        firstName={reply.author.firstName}\r\n                                                        lastName={reply.author.lastName}\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                        textVariant=\"h5\"\r\n                                                    />\r\n                                                    :\r\n                                                    // normal users with profile picture\r\n                                                    <FlexView\r\n                                                        width={AVATAR_MAX_HEIGHT}\r\n                                                        height={AVATAR_MAX_HEIGHT}\r\n                                                    >\r\n                                                        <Image\r\n                                                            roundedCircle\r\n                                                            thumbnail\r\n                                                            src={\r\n                                                                reply.author.profilePicture[reply.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                            }\r\n                                                            style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                        />\r\n                                                    </FlexView>\r\n                                            )\r\n                                    }\r\n                                </FlexView>\r\n\r\n                                {/** Author name and dates */}\r\n                                <FlexView column marginLeft={15} hAlignContent=\"left\" >\r\n                                    <Typography variant=\"body1\" align=\"left\" >\r\n                                        <b>\r\n                                            {\r\n                                                reply.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                    ?\r\n                                                    // normal users\r\n                                                    `${reply.author.firstName} ${reply.author.lastName}`\r\n                                                    :\r\n                                                    reply.author.superAdmin\r\n                                                        ?\r\n                                                        // super admins\r\n                                                        \"Teacher Super Admin\"\r\n                                                        :\r\n                                                        // course admins\r\n                                                        `${reply.author.groupDetails.displayName} Admin`\r\n                                            }\r\n                                        </b>\r\n                                    </Typography>\r\n\r\n                                    <Typography variant=\"subtitle2\" align=\"left\" >\r\n                                        {\r\n                                            !reply.hasOwnProperty('lastEdited')\r\n                                                ?\r\n                                                `Replied on: ${utils.dateTimeInReadableFormat(reply.replyDate)}`\r\n                                                :\r\n                                                `Last edited: ${utils.dateTimeInReadableFormat(reply.lastEdited)}`\r\n                                        }\r\n                                    </Typography>\r\n                                </FlexView>\r\n\r\n                                {/** Delete/Edit reply */}\r\n                                {\r\n                                    (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                        && currentUser.superAdmin\r\n                                    ) || currentUser.id === reply.author.id\r\n                                        ?\r\n                                        <FlexView hAlignContent=\"left\" vAlignContent=\"center\" marginLeft={60} >\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"secondary\"\r\n                                                onClick={() => deleteThreadReply(reply.id)}\r\n                                                style={{ marginRight: 10 }}\r\n                                            >Delete<DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                            </Button>\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                                className={css(sharedStyles.no_text_transform)}\r\n                                                size=\"small\"\r\n                                                color=\"primary\"\r\n                                                onClick={() => toggleThreadReply(true, JSON.parse(JSON.stringify(reply)))}\r\n                                            >Edit<EditIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                            </Button>\r\n                                        </FlexView>\r\n                                        :\r\n                                        null\r\n                                }\r\n                            </FlexView>\r\n\r\n                            {\r\n                                !reply.message\r\n                                    ?\r\n                                    null\r\n                                    :\r\n                                    <FlexView column marginTop={15} dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(reply.message.ops)}} />\r\n                            }\r\n\r\n                            {\r\n                                threadInReplyMode\r\n                                && threadReplyEdited\r\n                                && threadReplyEdited.id === reply.id\r\n                                    ?\r\n                                    <CreateReply/>\r\n                                    :\r\n                                    null\r\n                            }\r\n                        </FlexView>\r\n                }\r\n            </Paper>\r\n        ));\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            groupProperties,\r\n\r\n            forumThreadSelected,\r\n            forumThreadRepliesLoaded,\r\n            threadInReplyMode,\r\n            threadReplyEdited,\r\n\r\n            goBackToThreadsList,\r\n            toggleThreadReply\r\n        } = this.props;\r\n\r\n        if (!forumThreadRepliesLoaded) {\r\n            return (\r\n                <FlexView hAlignContent=\"center\" >\r\n                    <HashLoader\r\n                        color={\r\n                            !groupProperties\r\n                                ?\r\n                                colors.primaryColor\r\n                                :\r\n                                groupProperties.settings.primaryColor\r\n                        }\r\n                    />\r\n                </FlexView>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <FlexView column >\r\n                <FlexView vAlignContent=\"center\" marginBottom={24} >\r\n                    <IconButton color=\"primary\" aria-label=\"Back\" onClick={goBackToThreadsList} >\r\n                        <ArrowBackIcon/>\r\n                    </IconButton>\r\n                    <FlexView marginLeft={8} >\r\n                        <Typography color=\"primary\" variant=\"h6\">{`Thread: ${forumThreadSelected.name}`}</Typography>\r\n                    </FlexView>\r\n                </FlexView>\r\n\r\n                <Paper className={css(styles.thread_reply_style)} >\r\n                    <FlexView column >\r\n                        <FlexView vAlignContent=\"center\" marginBottom={10} >\r\n                            {\r\n                                forumThreadSelected.author.type === DB_CONST.TYPE_ADMIN\r\n                                    ?\r\n                                    forumThreadSelected.author.superAdmin\r\n                                        ?\r\n                                        // super admins\r\n                                        <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={require('../../img/admin_logo.png').default}\r\n                                                style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                            />\r\n                                        </FlexView>\r\n                                        :\r\n                                        // course admins\r\n                                        <FlexView\r\n                                            width={AVATAR_MAX_HEIGHT}\r\n                                            height={AVATAR_MAX_HEIGHT}\r\n                                        >\r\n                                            <Image\r\n                                                roundedCircle\r\n                                                thumbnail\r\n                                                src={\r\n                                                    utils.getLogoFromGroup(utils.GET_PLAIN_LOGO, forumThreadSelected.author.groupDetails)\r\n                                                }\r\n                                                style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                            />\r\n                                        </FlexView>\r\n                                    :\r\n                                    (\r\n                                        !forumThreadSelected.author.profilePicture\r\n                                        || (forumThreadSelected.author.profilePicture && forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed')) === -1)\r\n                                            ?\r\n                                            // normal users with no profile picture\r\n                                            <LetterAvatar\r\n                                                firstName={forumThreadSelected.author.firstName}\r\n                                                lastName={forumThreadSelected.author.lastName}\r\n                                                width={AVATAR_MAX_HEIGHT}\r\n                                                height={AVATAR_MAX_HEIGHT}\r\n                                                textVariant=\"h5\"\r\n                                            />\r\n                                            :\r\n                                            // normal users with profile picture\r\n                                            <FlexView width={AVATAR_MAX_HEIGHT} height={AVATAR_MAX_HEIGHT} >\r\n                                                <Image\r\n                                                    roundedCircle\r\n                                                    thumbnail\r\n                                                    src={\r\n                                                        forumThreadSelected.author.profilePicture[forumThreadSelected.author.profilePicture.findIndex(pictureItem => !pictureItem.hasOwnProperty('removed'))].url\r\n                                                    }\r\n                                                    style={{ width: \"100%\", maxHeight: AVATAR_MAX_HEIGHT, objectFit: \"contain\" }}\r\n                                                />\r\n                                            </FlexView>\r\n                                    )\r\n                            }\r\n                            <FlexView column marginLeft={15} marginBottom={10} >\r\n                                <Typography variant=\"body1\" >\r\n                                    <b>\r\n                                        {\r\n                                            forumThreadSelected.author.type !== DB_CONST.TYPE_ADMIN\r\n                                                ?\r\n                                                // normal users\r\n                                                `${forumThreadSelected.author.firstName} ${forumThreadSelected.author.lastName}`\r\n                                                :\r\n                                                forumThreadSelected.author.superAdmin\r\n                                                    ?\r\n                                                    // super admins\r\n                                                    \"Teacher Super Admin\"\r\n                                                    :\r\n                                                    // course admins\r\n                                                    `${forumThreadSelected.author.groupDetails.displayName} Admin`\r\n                                        }\r\n                                    </b>\r\n                                </Typography>\r\n\r\n                                <Typography variant=\"subtitle2\" align=\"left\" >\r\n                                    {\r\n                                        !forumThreadSelected.hasOwnProperty('lastEdited')\r\n                                            ?\r\n                                            `Created on: ${utils.dateTimeInReadableFormat(forumThreadSelected.dateCreated)}`\r\n                                            :\r\n                                            `Last edited: ${utils.dateTimeInReadableFormat(forumThreadSelected.lastEdited)}`\r\n                                    }\r\n                                </Typography>\r\n                            </FlexView>\r\n                        </FlexView>\r\n                        <Typography variant=\"body1\" align=\"left\"><b><u>Description:</u></b></Typography>\r\n                        <Typography variant=\"body1\" align=\"left\" style={{ whiteSpace: \"pre-line\", marginTop: 6, marginBottom: 15 }}>{forumThreadSelected.description}</Typography>\r\n                        {\r\n                            !forumThreadSelected.message\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView\r\n                                    column\r\n                                    dangerouslySetInnerHTML={{__html: utils.convertQuillDeltaToHTML(forumThreadSelected.message.ops)}}\r\n                                    marginTop={25}\r\n                                />\r\n                        }\r\n                        {\r\n                            threadInReplyMode\r\n                                ?\r\n                                null\r\n                                :\r\n                                <FlexView marginTop={25} marginBottom={8} >\r\n                                    <Button\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        variant=\"outlined\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleThreadReply(true, null)}\r\n                                    >Reply</Button>\r\n                                </FlexView>\r\n                        }\r\n                    </FlexView>\r\n                </Paper>\r\n                {\r\n                    !threadInReplyMode\r\n                        ?\r\n                        null\r\n                        :\r\n                        threadReplyEdited\r\n                            ?\r\n                            null\r\n                            :\r\n                            <CreateReply/>\r\n                }\r\n                <FlexView column marginTop={20} >\r\n                    {\r\n                        this.renderReplies()\r\n                    }\r\n                </FlexView>\r\n            </FlexView>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(IndividualThread);\r\n\r\nconst styles = StyleSheet.create({\r\n    thread_reply_style: {\r\n        padding: 20,\r\n        marginTop: 10,\r\n        marginBottom: 10\r\n    }\r\n});","import React, {Component} from 'react';\r\nimport {css} from 'aphrodite';\r\nimport {Col, Container, Row} from 'react-bootstrap';\r\nimport FlexView from 'react-flexview';\r\nimport {\r\n    Button,\r\n    ButtonBase,\r\n    FormControl,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Paper,\r\n    Select,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableFooter,\r\n    TableHead,\r\n    TablePagination,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport EditIcon from '@material-ui/icons/CreateOutlined';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport HashLoader from 'react-spinners/HashLoader';\r\n\r\nimport {connect} from 'react-redux';\r\nimport * as forumsActions from '../../redux-store/actions/forumsActions';\r\nimport CreateForum from './CreateForum';\r\nimport CreateThread from './CreateThread';\r\nimport IndividualForum from './IndividualForum';\r\nimport IndividualThread from './IndividualThread';\r\nimport './Forums.scss';\r\n\r\nimport * as DB_CONST from '../../firebase/databaseConsts';\r\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\r\nimport * as utils from '../../utils/utils';\r\nimport * as colors from '../../values/colors';\r\nimport sharedStyles, {StyledTableCell} from '../../shared-js-css-styles/SharedStyles';\r\n\r\nexport const MODE_FORUMS_MAIN = 0;\r\nexport const MODE_CREATE_FORUM = 1;\r\nexport const MODE_VIEW_FORUM = 2;\r\nexport const MODE_CREATE_THREAD = 3;\r\nexport const MODE_VIEW_THREAD = 4;\r\n\r\nexport const SORT_BY_CURRENT_USER = 0;\r\nexport const SORT_BY_LAST = 1;\r\nexport const SORT_BY_OLDEST = 2;\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        groupPropertiesLoaded: state.manageGroupFromParams.groupPropertiesLoaded,\r\n        groupProperties: state.manageGroupFromParams.groupProperties,\r\n        shouldLoadOtherData: state.manageGroupFromParams.shouldLoadOtherData,\r\n\r\n        currentUser: state.auth.user,\r\n\r\n        modeForums: state.manageForums.modeForums,\r\n\r\n        forumsSortedMode: state.manageForums.forumsSortedMode,\r\n        forumsLoadMode: state.manageForums.forumsLoadMode,\r\n\r\n        forums: state.manageForums.forums,\r\n        forumsLoaded: state.manageForums.forumsLoaded,\r\n\r\n        forumSelected: state.manageForums.forumSelected,\r\n        forumThreads: state.manageForums.forumThreads,\r\n        forumThreadsLoaded: state.manageForums.forumThreadsLoaded,\r\n        forumsTablePage: state.manageForums.forumsTablePage,\r\n        forumsTableRowsPerPage: state.manageForums.forumsTableRowsPerPage,\r\n\r\n        forumThreadSelected: state.manageForums.forumThreadSelected,\r\n        forumThreadReplies: state.manageForums.forumThreadReplies,\r\n        forumThreadRepliesLoaded: state.manageForums.forumThreadRepliesLoaded,\r\n\r\n        threadInReplyMode: state.manageForums.threadInReplyMode,\r\n        threadReplySubject: state.manageForums.threadReplySubject,\r\n        threadReplyMessage: state.manageForums.threadReplyMessage,\r\n        createThreadReplyError: state.manageForums.createThreadReplyError\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        loadForums: (mode) => dispatch(forumsActions.loadForums(mode)),\r\n        startListeningForForumsChanged: () => dispatch(forumsActions.startListeningForForumsChanged()),\r\n        stopListeningForForumsChanged: () => dispatch(forumsActions.stopListeningForForumsChanged()),\r\n        startListeningForThreadsChanged: () => dispatch(forumsActions.startListeningForThreadsChanged()),\r\n        stopListeningForThreadsChanged: () => dispatch(forumsActions.stopListeningForThreadsChanged()),\r\n        startListeningForThreadRepliesChanged: () => dispatch(forumsActions.startListeningForThreadRepliesChanged()),\r\n        stopListeningForThreadRepliesChanged: () => dispatch(forumsActions.stopListeningForThreadRepliesChanged()),\r\n\r\n        toggleCreateNewForum: (open, forumEdited) => dispatch(forumsActions.toggleCreateNewForum(open, forumEdited)),\r\n        clickOnAParticularForum: (forum) => dispatch(forumsActions.clickOnAParticularForum(forum)),\r\n        deleteForum: (forumID) => dispatch(forumsActions.deleteForum(forumID)),\r\n\r\n        handleForumsInputChanged: (event) => dispatch(forumsActions.handleForumsInputChanged(event)),\r\n\r\n        tableChangePage: (table, newPage) => dispatch(forumsActions.changePage(table, newPage)),\r\n        tableChangeRowsPerPage: (table, event) => dispatch(forumsActions.changeRowsPerPage(table, event))\r\n    }\r\n};\r\n\r\nclass Forums extends Component {\r\n\r\n    /**\r\n     * Handle table change page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangePage = table => (event, newPage) => {\r\n        this.props.tableChangePage(table, newPage);\r\n    };\r\n\r\n    /**\r\n     * Handle table change rows per page\r\n     *\r\n     * @param table\r\n     * @returns {function(...[*]=)}\r\n     */\r\n    tableChangeRowsPerPage = table => event => {\r\n        this.props.tableChangeRowsPerPage(table, event);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {\r\n            loadForums\r\n        } = this.props;\r\n\r\n        // load forums when this component is displayed\r\n        loadForums(realtimeDBUtils.LOAD_LIVE_FORUMS);\r\n\r\n        // call add and remove listeners here because when switching to another tab, all the listeners will be removed,\r\n        // but when switching back to the Forums tab, the componentDidUpdate won't be called. As a result, the listeners\r\n        // will not be added according to the state of the forum components.\r\n        // Therefore, we call add and remove listeners explicitly in this componentDidMount to ensure\r\n        // the listeners will be added accordingly to the Forums state.\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        this.addAndRemoveListeners();\r\n    }\r\n\r\n    /**\r\n     * Add and remove listeners accordingly to the Forums state\r\n     */\r\n    addAndRemoveListeners = () => {\r\n        const {\r\n            forums,\r\n            forumsLoaded,\r\n\r\n            forumSelected,\r\n            forumThreads,\r\n            forumThreadsLoaded,\r\n\r\n            forumThreadSelected,\r\n            forumThreadReplies,\r\n            forumThreadRepliesLoaded,\r\n\r\n            startListeningForForumsChanged,\r\n            startListeningForThreadsChanged,\r\n            stopListeningForThreadsChanged,\r\n            startListeningForThreadRepliesChanged,\r\n            stopListeningForThreadRepliesChanged\r\n        } = this.props;\r\n\r\n        // forums have been loaded\r\n        if (forums && forumsLoaded) {\r\n            startListeningForForumsChanged();\r\n        }\r\n\r\n        // if the user is viewing threads of a particular forum\r\n        // and all the threads have been loaded\r\n        if (forumSelected && forumThreads && forumThreadsLoaded) {\r\n            startListeningForThreadsChanged();\r\n        }\r\n\r\n        // remove threads listener when the user is not viewing the threads\r\n        if (!forumSelected && !forumThreadsLoaded) {\r\n            stopListeningForThreadsChanged();\r\n        }\r\n\r\n        // if the user is viewing the replies within a particular thread\r\n        // and all replies have been loaded\r\n        if (forumThreadSelected && forumThreadReplies && forumThreadRepliesLoaded) {\r\n            startListeningForThreadRepliesChanged();\r\n        }\r\n\r\n        // remove replies listener when the user is not viewing the replies\r\n        if (!forumThreadSelected && !forumThreadRepliesLoaded) {\r\n            stopListeningForThreadRepliesChanged();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render content of the Forums tab\r\n     *\r\n     * @returns {null|*}\r\n     */\r\n    renderContent = () => {\r\n        const {\r\n            groupProperties,\r\n\r\n            currentUser,\r\n            modeForums,\r\n\r\n            forums,\r\n\r\n            forumsSortedMode,\r\n            forumsLoadMode,\r\n\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            toggleCreateNewForum,\r\n            handleForumsInputChanged\r\n        } = this.props;\r\n\r\n        if (!currentUser) {\r\n            return null;\r\n        }\r\n\r\n        switch (modeForums) {\r\n            case MODE_FORUMS_MAIN: {\r\n\r\n                let sortedForums = [...forums];\r\n\r\n                if (forumsSortedMode === SORT_BY_CURRENT_USER) {\r\n                    sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                    sortedForums.sort((forum1, forum2) => {\r\n                        return (forum2.dateCreated - forum1.dateCreated)\r\n                    });\r\n                }\r\n\r\n                return (\r\n                    <FlexView column >\r\n                        <Typography variant=\"body2\" color=\"textSecondary\" align=\"left\" >\r\n                            Forums are made up of individual discussion threads that can be organised around a\r\n                            particular subject.\r\n                            Create forums to organise discussions.\r\n                            <br/>\r\n                            <u>Note that all forums are visible across the Student Invest West network.</u>\r\n                        </Typography>\r\n                        <FlexView marginTop={35} marginBottom={35} >\r\n                            <Button\r\n                                color=\"primary\"\r\n                                variant=\"outlined\"\r\n                                className={css(sharedStyles.no_text_transform)}\r\n                                onClick={() => toggleCreateNewForum(true, null)}\r\n                            >\r\n                                <AddIcon fontSize=\"small\" style={{ marginRight: 10 }} />\r\n                                Create forum\r\n                            </Button>\r\n                        </FlexView>\r\n\r\n                        {/** Filters */}\r\n                        <Container fluid style={{ padding: 0, marginBottom: 40 }} >\r\n                            <Row>\r\n                                {\r\n                                    currentUser.type === DB_CONST.TYPE_ADMIN\r\n                                    && currentUser.superAdmin\r\n                                        ?\r\n                                        <Col xs={12} sm={12} md={4} lg={2} >\r\n                                            <FlexView column >\r\n                                                <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Mode</Typography>\r\n                                                <Paper>\r\n                                                    <FormControl fullWidth >\r\n                                                        <Select\r\n                                                            value={forumsLoadMode}\r\n                                                            onChange={handleForumsInputChanged}\r\n                                                            margin=\"dense\"\r\n                                                            input={\r\n                                                                <OutlinedInput labelWidth={0} name=\"forumsLoadMode\" /> }\r\n                                                        >\r\n                                                            <MenuItem value={realtimeDBUtils.LOAD_LIVE_FORUMS}>Live forums</MenuItem>\r\n                                                            <MenuItem value={realtimeDBUtils.LOAD_DELETED_FORUMS}>Deleted forums</MenuItem>\r\n                                                        </Select>\r\n                                                    </FormControl>\r\n                                                </Paper>\r\n                                            </FlexView>\r\n                                        </Col>\r\n                                        :\r\n                                        null\r\n                                }\r\n                                <Col xs={12} sm={12} md={4} lg={2} >\r\n                                    <FlexView column >\r\n                                        <Typography variant=\"body2\" align=\"left\" style={{ marginBottom: 4 }}>Sort by</Typography>\r\n                                        <Paper>\r\n                                            <FormControl fullWidth >\r\n                                                <Select\r\n                                                    value={forumsSortedMode}\r\n                                                    onChange={handleForumsInputChanged}\r\n                                                    margin=\"dense\"\r\n                                                    input={\r\n                                                        <OutlinedInput labelWidth={0} name=\"forumsSortedMode\" />\r\n                                                    }\r\n                                                >\r\n                                                    <MenuItem value={SORT_BY_LAST}>Newest</MenuItem>\r\n                                                    <MenuItem value={SORT_BY_CURRENT_USER}>Mine</MenuItem>\r\n                                                    <MenuItem value={SORT_BY_OLDEST}>Oldest</MenuItem>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </Paper>\r\n                                    </FlexView>\r\n                                </Col>\r\n                            </Row>\r\n                        </Container>\r\n\r\n                        {/** Forums table */}\r\n                        <Paper style={{ overflowX: \"auto\" }} >\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Date</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Forum</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Description</b></Typography>\r\n                                            }\r\n                                        />\r\n                                        <StyledTableCell\r\n                                            colSpan={1}\r\n                                            cellColor={\r\n                                                !groupProperties\r\n                                                    ?\r\n                                                    colors.primaryColor\r\n                                                    :\r\n                                                    groupProperties.settings.primaryColor\r\n                                            }\r\n                                            component={\r\n                                                <Typography align=\"left\" variant=\"body2\" className={css(sharedStyles.white_text)}><b>Author</b></Typography>\r\n                                            }\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {\r\n                                        this.renderForums()\r\n                                    }\r\n                                </TableBody>\r\n                                <TableFooter>\r\n                                    <TableRow>\r\n                                        <TablePagination\r\n                                            style={{\r\n                                                backgroundColor: colors.blue_gray_50\r\n                                            }}\r\n                                            rowsPerPageOptions={[5, 20, 50]}\r\n                                            count={sortedForums.length}\r\n                                            rowsPerPage={forumsTableRowsPerPage}\r\n                                            page={forumsTablePage}\r\n                                            backIconButtonProps={{\r\n                                                'aria-label': 'Previous Page',\r\n                                            }}\r\n                                            nextIconButtonProps={{\r\n                                                'aria-label': 'Next Page',\r\n                                            }}\r\n                                            SelectProps={{\r\n                                                native: true,\r\n                                            }}\r\n                                            onChangePage={this.tableChangePage('forums')}\r\n                                            onChangeRowsPerPage={this.tableChangeRowsPerPage('forums')}\r\n                                        />\r\n                                    </TableRow>\r\n                                </TableFooter>\r\n                            </Table>\r\n                        </Paper>\r\n                    </FlexView>\r\n                );\r\n            }\r\n\r\n            case MODE_CREATE_FORUM:\r\n                return (\r\n                    <CreateForum/>\r\n                );\r\n\r\n            case MODE_VIEW_FORUM:\r\n                return (\r\n                    <IndividualForum/>\r\n                );\r\n\r\n            case MODE_CREATE_THREAD:\r\n                return (\r\n                    <CreateThread/>\r\n                );\r\n\r\n            case MODE_VIEW_THREAD:\r\n                return (\r\n                    <IndividualThread/>\r\n                );\r\n\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Render forums table\r\n     *\r\n     * @returns {*[]}\r\n     */\r\n    renderForums = () => {\r\n        const {\r\n            groupProperties,\r\n            currentUser,\r\n\r\n            forums,\r\n            forumsLoaded,\r\n            forumsSortedMode,\r\n            forumsTablePage,\r\n            forumsTableRowsPerPage,\r\n\r\n            clickOnAParticularForum,\r\n            deleteForum,\r\n            toggleCreateNewForum\r\n        } = this.props;\r\n\r\n        if (!forumsLoaded) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <FlexView hAlignContent=\"center\" marginTop={20} marginBottom={20} >\r\n                            <HashLoader\r\n                                color={\r\n                                    !groupProperties\r\n                                        ?\r\n                                        colors.primaryColor\r\n                                        :\r\n                                        groupProperties.settings.primaryColor\r\n                                }\r\n                            />\r\n                        </FlexView>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        let sortedForums = [];\r\n\r\n        switch (forumsSortedMode) {\r\n            case SORT_BY_CURRENT_USER:\r\n                sortedForums = forums.filter(forum => forum.author.id === currentUser.id);\r\n                sortedForums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                break;\r\n            case SORT_BY_LAST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum2.dateCreated - forum1.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            case SORT_BY_OLDEST:\r\n                forums.sort((forum1, forum2) => {\r\n                    return (forum1.dateCreated - forum2.dateCreated)\r\n                });\r\n                sortedForums = forums;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (sortedForums.length === 0) {\r\n            return (\r\n                <TableRow>\r\n                    <TableCell colSpan={4} >\r\n                        <Typography variant=\"body1\" align=\"center\" style={{ marginTop: 20, marginBottom: 20 }}>No forums created.</Typography>\r\n                    </TableCell>\r\n                </TableRow>\r\n            );\r\n        }\r\n\r\n        return (\r\n            sortedForums\r\n                .slice(forumsTablePage * forumsTableRowsPerPage, forumsTablePage * forumsTableRowsPerPage + forumsTableRowsPerPage)\r\n                .map(forum => (\r\n                        <ForumRow\r\n                            currentUser={currentUser}\r\n                            key={forum.id}\r\n                            forum={forum}\r\n                            onForumClick={clickOnAParticularForum}\r\n                            deleteForum={deleteForum}\r\n                            toggleEditForum={toggleCreateNewForum}\r\n                        />\r\n                    )\r\n                )\r\n        );\r\n    };\r\n\r\n    /**\r\n     * Main render\r\n     *\r\n     * @returns {*}\r\n     */\r\n    render() {\r\n        const {\r\n            groupPropertiesLoaded,\r\n        } = this.props;\r\n\r\n        if (!groupPropertiesLoaded) {\r\n            return null;\r\n        }\r\n\r\n        return (\r\n            <Container fluid style={{ padding: 30 }} >\r\n                {\r\n                    this.renderContent()\r\n                }\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Forums);\r\n\r\n\r\n/**\r\n * Forum row component ------------------------------------------------------------------------------------------------------------------\r\n */\r\nclass ForumRow extends Component {\r\n\r\n    onForumClick = forum => {\r\n        this.props.onForumClick(forum);\r\n    };\r\n\r\n    render() {\r\n\r\n        const {\r\n            currentUser,\r\n            forum,\r\n\r\n            deleteForum,\r\n            toggleEditForum\r\n        } = this.props;\r\n\r\n        return (\r\n            <TableRow hover >\r\n                <TableCell> <Typography align=\"left\" variant=\"body2\">{utils.dateTimeInReadableFormat(forum.dateCreated)}</Typography>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 400 }} >\r\n                    <FlexView column hAlignContent=\"left\" >\r\n                        <ButtonBase onClick={() => this.onForumClick(forum)} >\r\n                            <Typography align=\"left\" variant=\"body2\" color=\"primary\" noWrap>{forum.name}</Typography>\r\n                        </ButtonBase>\r\n                        {\r\n                            currentUser.type === DB_CONST.TYPE_ADMIN\r\n                            && currentUser.superAdmin\r\n                            && (\r\n                                !forum.hasOwnProperty('deleted')\r\n                                || (\r\n                                    forum.hasOwnProperty('deleted')\r\n                                    && forum.deleted === false\r\n                                )\r\n                            )\r\n                                ?\r\n                                <FlexView marginTop={12} >\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"secondary\"\r\n                                        onClick={() => deleteForum(forum.id)}\r\n                                        style={{ marginRight: 10 }}\r\n                                    >Delete\r\n                                        <DeleteIcon fontSize=\"small\" style={{ marginLeft: 6 }} />\r\n                                    </Button>\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        className={css(sharedStyles.no_text_transform)}\r\n                                        size=\"small\"\r\n                                        color=\"primary\"\r\n                                        onClick={() => toggleEditForum(true, JSON.parse(JSON.stringify(forum)))}\r\n                                    >Edit\r\n                                        <EditIcon fontSize=\"small\" style={{ marginLeft: 6 }}/>\r\n                                    </Button>\r\n                                </FlexView>\r\n                                :\r\n                                null\r\n                        }\r\n                    </FlexView>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 400 }}>\r\n                    <Typography variant=\"body2\" align=\"left\" noWrap>{forum.description}</Typography>\r\n                </TableCell>\r\n                <TableCell style={{ maxWidth: 200 }} >\r\n                    <Typography align=\"left\" variant=\"body2\" noWrap >\r\n                        {\r\n                            forum.author.type !== DB_CONST.TYPE_ADMIN\r\n                                ?\r\n                                // normal users\r\n                                `${forum.author.firstName} ${forum.author.lastName}`\r\n                                :\r\n                                forum.author.superAdmin\r\n                                    ?\r\n                                    // super admins\r\n                                    \"Teacher Super Admin\"\r\n                                    :\r\n                                    // group admins\r\n                                    `${forum.author.groupDetails.displayName} Admin`\r\n                        }\r\n                    </Typography>\r\n                </TableCell>\r\n            </TableRow>\r\n        )\r\n    }\r\n}\r\n","import {\n    MODE_CREATE_FORUM,\n    MODE_CREATE_THREAD,\n    MODE_FORUMS_MAIN,\n    MODE_VIEW_FORUM,\n    MODE_VIEW_THREAD,\n    SORT_BY_LAST\n} from '../../shared-components/forums/Forums';\nimport * as forumsActions from '../actions/forumsActions';\nimport * as authActions from '../actions/authActions';\nimport * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\n\nconst initState = {\n    modeForums: MODE_FORUMS_MAIN,\n\n    forumsSortedMode: SORT_BY_LAST,\n    forumsLoadMode: realtimeDBUtils.LOAD_LIVE_FORUMS,\n\n    threadsLoadMode: realtimeDBUtils.LOAD_LIVE_THREADS,\n    threadsSortedMode: SORT_BY_LAST,\n\n    forums: [],\n    forumsLoaded: false,\n\n    forumsTablePage: 0,\n    forumsTableRowsPerPage: 5,\n\n    forumSelected: null,\n    forumThreads: [],\n    forumThreadsLoaded: false,\n\n    forumThreadSelected: null,\n    forumThreadReplies: [],\n    forumThreadRepliesLoaded: false,\n\n    threadsTablePage: 0,\n    threadsTableRowsPerPage: 5,\n\n    createForumName: '',\n    createForumDesc: '',\n    createForumAuthor: null,\n    createForumError: false,\n    forumEdited: null,\n\n    createThreadName: '',\n    createThreadBriefDesc: '',\n    createThreadMessage: {ops: []},\n    createThreadError: false,\n    threadEdited: null,\n\n    threadInReplyMode: false,\n    threadReplyEdited: null,\n    threadReplySubject: '',\n    threadReplyMessage: {ops: []},\n    createThreadReplyError: false\n};\n\nconst forumsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case forumsActions.GO_BACK_TO_FORUMS_MAIN:\n            return {\n                ...initState,\n                forums: state.forums,\n                forumsLoaded: state.forumsLoaded,\n                forumsSortedMode: state.forumsSortedMode,\n                forumsLoadMode: state.forumsLoadMode,\n\n                forumsTablePage: state.forumsTablePage,\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\n            };\n        case forumsActions.LOADING_FORUMS:\n            return {\n                ...state,\n                forums: [],\n                forumsLoaded: false\n            };\n        case forumsActions.FINISHED_LOADING_FORUMS:\n            return {\n                ...state,\n                forums: [...action.forums],\n                forumsLoaded: true\n            };\n        case forumsActions.ERROR_LOADING_FORUMS:\n            return {\n                ...state,\n                forums: [],\n                forumsLoaded: true\n            };\n        case forumsActions.TOGGLE_CREATE_NEW_FORUM:\n            return {\n                ...state,\n                modeForums: action.open\n                    ?\n                    MODE_CREATE_FORUM\n                    :\n                    MODE_FORUMS_MAIN\n                ,\n                forumEdited: action.forumEdited\n                    ?\n                    JSON.parse(JSON.stringify(action.forumEdited))\n                    :\n                    null\n                ,\n                createForumName:\n                    action.forumEdited\n                        ?\n                        action.forumEdited.name\n                        :\n                        ''\n                ,\n                createForumDesc:\n                    action.forumEdited\n                        ?\n                        action.forumEdited.description\n                        :\n                        ''\n                ,\n                createForumError: false,\n                createForumAuthor: null\n            };\n        case forumsActions.ERROR_CREATING_NEW_FORUM:\n            return {\n                ...state,\n                createForumError: true\n            };\n        case forumsActions.FORUMS_INPUT_CHANGED:\n            return {\n                ...state,\n                [action.name]: action.value\n            };\n        case forumsActions.LOADING_THREADS_IN_A_FORUM:\n            return {\n                ...state,\n                modeForums: MODE_VIEW_FORUM,\n                forumSelected: JSON.parse(JSON.stringify(action.forumSelected)),\n                forumThreadsLoaded: false\n            };\n        case forumsActions.FINISHED_LOADING_THREADS_IN_A_FORUM:\n            return {\n                ...state,\n                forumThreads: [...action.threads],\n                forumThreadsLoaded: true\n            };\n        case forumsActions.GO_BACK_TO_FORUMS_LIST:\n            return {\n                ...initState,\n                forums: state.forums,\n                forumsLoaded: state.forumsLoaded,\n                forumsSortedMode: state.forumsSortedMode,\n                forumsLoadMode: state.forumsLoadMode,\n\n                forumsTablePage: state.forumsTablePage,\n                forumsTableRowsPerPage: state.forumsTableRowsPerPage\n            };\n        case forumsActions.TOGGLE_CREATE_NEW_THREAD:\n            return {\n                ...state,\n                modeForums: action.open\n                    ?\n                    MODE_CREATE_THREAD\n                    :\n                    MODE_VIEW_FORUM\n                ,\n                threadEdited: action.threadEdited\n                    ?\n                    JSON.parse(JSON.stringify(action.threadEdited))\n                    :\n                    null\n                ,\n                createThreadName: action.threadEdited\n                    ?\n                    action.threadEdited.name\n                    :\n                    ''\n                ,\n                createThreadBriefDesc: action.threadEdited\n                    ?\n                    action.threadEdited.description\n                    :\n                    ''\n                ,\n                createThreadMessage: action.threadEdited\n                    ?\n                    action.threadEdited.message\n                    :\n                    {ops: []}\n                ,\n                createThreadError: false\n            };\n        case forumsActions.ERROR_CREATING_NEW_THREAD:\n            return {\n                ...state,\n                createThreadError: true\n            };\n        case forumsActions.LOADING_REPLIES_IN_A_THREAD:\n            return {\n                ...state,\n                modeForums: MODE_VIEW_THREAD,\n                forumThreadSelected: JSON.parse(JSON.stringify(action.threadSelected)),\n                forumThreadRepliesLoaded: false\n            };\n        case forumsActions.FINISHED_LOADING_REPLIES_IN_A_THREAD:\n            return {\n                ...state,\n                forumThreadReplies: [...action.replies],\n                forumThreadRepliesLoaded: true\n            };\n        case forumsActions.GO_BACK_TO_THREADS_LIST:\n            return {\n                ...state,\n                modeForums: MODE_VIEW_FORUM,\n                forumThreadSelected: null,\n                forumThreadReplies: [],\n                forumThreadRepliesLoaded: false,\n\n                threadInReplyMode: false,\n                threadReplyMessage: {ops: []}\n            };\n        case forumsActions.TOGGLE_THREAD_REPLY:\n            return {\n                ...state,\n                threadInReplyMode: action.open,\n                threadReplyEdited: JSON.parse(JSON.stringify(action.threadReplyEdited)),\n                threadReplySubject: action.open\n                    ?\n                    action.threadReplyEdited\n                        ?\n                        action.threadReplyEdited.subject\n                        :\n                        `RE: ${state.forumThreadSelected.name}`\n                    :\n                    ''\n                ,\n                threadReplyMessage: action.open\n                    ?\n                    action.threadReplyEdited\n                        ?\n                        action.threadReplyEdited.message\n                        :\n                        {ops: []}\n                    :\n                    {ops: []}\n                ,\n                createThreadReplyError: false\n            };\n        case forumsActions.ERROR_CREATING_THREAD_REPLY:\n            return {\n                ...state,\n                createThreadReplyError: true\n            };\n        case forumsActions.FORUMS_QUILL_CHANGED:\n            return {\n                ...state,\n                createThreadMessage: action.field === forumsActions.THREAD_CONTENT_QUILL ? action.quill : state.createThreadMessage,\n                threadReplyMessage: action.field === forumsActions.THREAD_REPLY_CONTENT_QUILL ? action.quill : state.threadReplyMessage\n            };\n        case forumsActions.FORUMS_CHANGED:\n            return {\n                ...state,\n                forums: [...action.forumsChanged]\n            };\n        case forumsActions.THREADS_CHANGED:\n            return {\n                ...state,\n                forumThreads: [...action.threadsChanged]\n            };\n        case forumsActions.THREAD_REPLIES_CHANGED:\n            return {\n                ...state,\n                forumThreadReplies: [...action.repliesChanged]\n            };\n        case forumsActions.MANAGE_FORUMS_TABLE_PAGE_CHANGED:\n            return {\n                ...state,\n                forumsTablePage: action.table === 'forums' ? action.newPage : state.forumsTablePage,\n                threadsTablePage: action.table === 'threads' ? action.newPage : state.threadsTablePage\n            };\n        case forumsActions.MANAGE_FORUMS_TABLE_ROWS_PER_PAGE_CHANGED:\n            return {\n                ...state,\n                forumsTableRowsPerPage: action.table === 'forums' ? action.value : state.forumsTableRowsPerPage,\n                threadsTableRowsPerPage: action.table === 'threads' ? action.value : state.threadsTableRowsPerPage,\n            };\n        default:\n            return state;\n    }\n};\n\nexport default forumsReducer;","import * as notificationsActions from '../actions/notificationsActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    notificationsAnchorEl: null,\n    notificationBellRef: undefined,\n\n    notifications: [],\n    loadingNotifications: false,\n    notificationsLoaded: false\n};\n\nconst notificationsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case notificationsActions.TOGGLE_NOTIFICATIONS:\n            return {\n                ...state,\n                notificationsAnchorEl: action.notificationsAnchorEl,\n            };\n        case notificationsActions.NOTIFICATIONBELL_REF:\n            return {\n                ...state,\n                notificationBellRef: action.notificationBellRef\n            };\n        case notificationsActions.LOADING_NOTIFICATIONS:\n            return {\n                ...state,\n                loadingNotifications: true,\n                notificationsLoaded: false\n            };\n        case notificationsActions.FINISHED_LOADING_NOTIFICATIONS:\n            return {\n                ...state,\n                loadingNotifications: false,\n                notificationsLoaded: true,\n                notifications: [...action.notifications]\n            };\n        case notificationsActions.NOTIFICATIONS_LIST_CHANGED:\n            return {\n                ...state,\n                notifications: [...action.notifications]\n            };\n        default:\n            return state;\n    }\n};\n\nexport default notificationsReducer;","import * as mediaQueryActions from '../actions/mediaQueryActions';\nimport * as dashboardSidebarActions from '../actions/dashboardSidebarActions';\nimport * as authActions from '../actions/authActions';\nimport {MediaQueryEvents} from \"../actions/mediaQueryActions\";\n\nconst initState = {\n    sidebarDocked: mediaQueryActions.laptopScreen.matches || mediaQueryActions.desktopScreen.matches,\n    sidebarOpen: false\n};\n\nconst dashboardSidebarReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case dashboardSidebarActions.TOGGLE_SIDEBAR:\n            return {\n                ...state,\n                sidebarDocked: action.hasOwnProperty('sidebarDocked') ? action.sidebarDocked : state.sidebarDocked,\n                sidebarOpen: action.sidebarOpen\n            };\n        case MediaQueryEvents.MediaQueryChanged:\n            return {\n                ...state,\n                sidebarDocked:\n                    action.name === 'isLaptop' || action.name === 'isDesktop'\n                        ?\n                        action.value\n                        :\n                        state.sidebarDocked\n                ,\n                sidebarOpen: false\n            };\n        default:\n            return state;\n    }\n};\n\nexport default dashboardSidebarReducer;","import {\n    desktopScreen,\n    laptopScreen,\n    MediaQueryAction,\n    MediaQueryEvents,\n    minHeightScreen,\n    mobileScreen,\n    tabletScreen\n} from \"../actions/mediaQueryActions\";\n\nexport interface MediaQueryState {\n    isMobile: boolean;\n    isTablet: boolean;\n    isLaptop: boolean;\n    isDesktop: boolean;\n    minHeightScreen: boolean;\n}\n\nconst initState: MediaQueryState = {\n    isMobile: mobileScreen.matches,\n    isTablet: tabletScreen.matches,\n    isLaptop: laptopScreen.matches,\n    isDesktop: desktopScreen.matches,\n    minHeightScreen: minHeightScreen.matches\n};\n\nconst mediaQueryReducer = (state = initState, action: MediaQueryAction) => {\n    if (action.type === MediaQueryEvents.MediaQueryChanged) {\n        return {\n            ...state,\n            [action.name]: action.value\n        };\n    } else {\n        return state;\n    }\n};\n\nexport default mediaQueryReducer;","import * as superAdminSettingsActions from '../actions/superAdminSettingsActions';\nimport * as clubAttributesActions from '../actions/clubAttributesActions';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nconst initState = {\n    clubAttributesEdited: null,\n\n    addNewPledgeFAQ: false,\n    addedPledgeQuestion: '',\n    addedPledgeAnswer: '',\n    expandedPledgeFAQ: null,\n    editExpandedPledgeFAQ: false,\n    editedPledgeQuestion: '',\n    editedPledgeAnswer: ''\n};\n\nconst superAdminSettingsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INITIALIZE_CLUB_ATTRIBUTES_EDITED:\n            return {\n                ...state,\n                clubAttributesEdited: JSON.parse(JSON.stringify(action.clubAttributes))\n            };\n        case clubAttributesActions.CLUB_ATTRIBUTES_CHANGED:\n            return {\n                ...state,\n                clubAttributesEdited: {\n                    ...state.clubAttributesEdited,\n                    [action.key]: action.value\n                },\n                expandedPledgeFAQ:\n                    !state.expandedPledgeFAQ\n                        ?\n                        null\n                        :\n                        action.key !== DB_CONST.PLEDGE_FAQS_CHILD\n                            ?\n                            state.expandedPledgeFAQ\n                            :\n                            !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\n                                ?\n                                null\n                                :\n                                !state.expandedPledgeFAQ\n                                    ?\n                                    null\n                                    :\n                                    action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id) === -1\n                                        ?\n                                        state.expandedPledgeFAQ\n                                        :\n                                        action.value[action.value.findIndex(faq => faq.id === state.expandedPledgeFAQ.id)]\n            };\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_INPUT_CHANGED:\n            const isPropertyOfClubAttributes = action.isPropertyOfClubAttributes;\n\n            if (isPropertyOfClubAttributes) {\n                return {\n                    ...state,\n                    clubAttributesEdited: {\n                        ...state.clubAttributesEdited,\n                        [action.name]: action.value\n                    }\n                };\n            } else {\n                return {\n                    ...state,\n                    [action.name]: action.value\n                };\n            }\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_QUILL_EDITOR_CHANGED:\n            return {\n                ...state,\n                clubAttributesEdited: {\n                    ...state.clubAttributesEdited,\n                    [action.fieldName]: action.value\n                }\n            };\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\n            return {\n                ...state,\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\n            };\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\n            return {\n                ...state,\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\n                addedPledgeQuestion: '',\n                addedPledgeAnswer: ''\n            };\n        case superAdminSettingsActions.SUPER_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\n            return {\n                ...state,\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\n            };\n        default:\n            return state;\n    }\n};\n\nexport default superAdminSettingsReducer;","import * as groupAdminSettingsActions from \"../actions/groupAdminSettingsActions\";\nimport * as manageANIDFromParamsActions from \"../actions/manageGroupFromParamsActions\";\nimport * as authActions from \"../actions/authActions\";\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\nimport * as utils from \"../../utils/utils\"\n\nconst initState = {\n    groupAttributesEdited: null,\n\n    website: '',\n    description: '',\n    primaryColor: '',\n    secondaryColor: '',\n\n    addNewPledgeFAQ: false,\n    addedPledgeQuestion: '',\n    addedPledgeAnswer: '',\n    expandedPledgeFAQ: null,\n    editExpandedPledgeFAQ: false,\n    editedPledgeQuestion: '',\n    editedPledgeAnswer: ''\n};\n\nconst groupAdminSettingsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_INITIALIZE_GROUP_ATTRIBUTES_EDITED:\n\n            let groupSettings = JSON.parse(JSON.stringify(action.group.settings));\n            // if the defaultPitchExpiryDate property does not exist,\n            // assign it with an initial value\n            if (!groupSettings.hasOwnProperty('defaultPitchExpiryDate')) {\n                groupSettings.defaultPitchExpiryDate = utils.getDateWithDaysFurtherThanToday(1);\n            }\n\n            return {\n                ...state,\n                groupAttributesEdited: groupSettings,\n                website:  action.group.hasOwnProperty('website') ? action.group.website : '',\n                description: action.group.hasOwnProperty('description') ? action.group.description : '',\n                primaryColor: action.group.settings.primaryColor,\n                secondaryColor: action.group.settings.secondaryColor\n            };\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CHANGED:\n            const isPropertyOfGroupAttributes = action.isPropertyOfGroupAttributes;\n\n            if (isPropertyOfGroupAttributes) {\n                return {\n                    ...state,\n                    groupAttributesEdited: {\n                        ...state.groupAttributesEdited,\n                        [action.name]: action.value\n                    }\n                };\n            }\n            else {\n                return {\n                    ...state,\n                    [action.name]: action.value\n                };\n            }\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\n            if (action.key === 'settings') {\n                return {\n                    ...state,\n                    groupAttributesEdited: JSON.parse(JSON.stringify(action.value)),\n                    primaryColor: action.value.primaryColor,\n                    secondaryColor: action.value.secondaryColor,\n                    expandedPledgeFAQ:\n                        !action.value.hasOwnProperty(DB_CONST.PLEDGE_FAQS_CHILD)\n                            ?\n                            null\n                            :\n                            !state.expandedPledgeFAQ\n                                ?\n                                null\n                                :\n                                action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id) !== -1\n                                    ?\n                                    action.value[DB_CONST.PLEDGE_FAQS_CHILD][action.value[DB_CONST.PLEDGE_FAQS_CHILD].findIndex(pledge => pledge.id === state.expandedPledgeFAQ.id)]\n                                    :\n                                    state.expandedPledgeFAQ\n                }\n            }\n            else {\n                return {\n                    ...state,\n                    [action.key]: action.value\n                }\n            }\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_PLEDGE_FAQ_PANEL_EXPANSION_CHANGED:\n            return {\n                ...state,\n                expandedPledgeFAQ: action.expandedPledgeFAQ,\n                editExpandedPledgeFAQ: action.editExpandedPledgeFAQ\n            };\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_ADD_NEW_PLEDGE_FAQ:\n            return {\n                ...state,\n                addNewPledgeFAQ: !state.addNewPledgeFAQ,\n                addedPledgeQuestion: '',\n                addedPledgeAnswer: ''\n            };\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_TOGGLE_EDIT_EXPANDED_PLEDGE_FAQ:\n            return {\n                ...state,\n                editExpandedPledgeFAQ: !state.editExpandedPledgeFAQ,\n                editedPledgeQuestion: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.question : '',\n                editedPledgeAnswer: !state.editExpandedPledgeFAQ ? state.expandedPledgeFAQ.answer : ''\n            };\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_GROUP_DETAILS:\n            return {\n                ...state,\n                [action.name]: action.value\n            };\n        case groupAdminSettingsActions.GROUP_ADMIN_SETTINGS_CANCEL_EDITING_COLOR:\n            return {\n                ...state,\n                primaryColor: action.field === \"primaryColor\" ? action.color : state.primaryColor,\n                secondaryColor: action.field === \"secondaryColor\" ? action.color : state.secondaryColor\n            };\n        default:\n            return state;\n    }\n};\n\nexport default groupAdminSettingsReducer;","import * as legalDocumentsActions from '../actions/legalDocumentsActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    userID: null,\n\n    legalDocuments: null,\n    legalDocumentsLoaded: false,\n    legalDocumentsBeingLoaded: false\n};\n\nconst legalDocumentsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT: {\n            return initState;\n        }\n        case legalDocumentsActions.LEGAL_DOCUMENTS_SET_USER:\n            return {\n                ...state,\n                userID: action.userID\n            };\n        case legalDocumentsActions.LOADING_LEGAL_DOCUMENTS:\n            return {\n                ...state,\n                legalDocuments: [],\n                legalDocumentsLoaded: false,\n                legalDocumentsBeingLoaded: true\n            };\n        case legalDocumentsActions.FINISHED_LOADING_LEGAL_DOCUMENTS:\n            return {\n                ...state,\n                legalDocuments: action.legalDocuments,\n                legalDocumentsLoaded: true,\n                legalDocumentsBeingLoaded: false\n            };\n        case legalDocumentsActions.LEGAL_DOCUMENTS_CHANGED: {\n            return {\n                ...state,\n                legalDocuments: action.legalDocuments\n            };\n        }\n        default:\n            return state;\n    }\n};\n\nexport default legalDocumentsReducer;\n\n","import * as invitedUsersActions from '../actions/invitedUsersActions';\nimport * as authActions from '../actions/authActions';\nimport {FILTER_GROUP_MEMBERS_ALL, FILTER_REGISTRATION_STATUS_ALL} from '../../pages/admin/components/InvitedUsers';\n\nconst initState = {\n    invitedUsers: [],\n    invitedUsersLoaded: false,\n    invitedUsersBeingLoaded: false,\n\n    invitedUsersPage: 0,\n    invitedUsersRowsPerPage: 5,\n\n    filterRegistrationStatus: FILTER_REGISTRATION_STATUS_ALL,\n    filterUserType: 0, // all user types\n    filterGroup: \"null\", // no group selected --> all\n    filterMembers: FILTER_GROUP_MEMBERS_ALL, // display all members (including home and foreign members) for group admins\n\n    invitedUserSearchText: '',\n    invitedUsersInSearchMode: false,\n\n    requestingCsv: false,\n\n    addingMembersFromOneGroupToAnotherGroup: false,\n\n    matchedInvitedUsers: []\n};\n\nconst invitedUsersReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case invitedUsersActions.LOADING_INVITED_USERS:\n            return {\n                ...state,\n                invitedUsers: [],\n                invitedUsersLoaded: false,\n                invitedUsersBeingLoaded: true\n            };\n        case invitedUsersActions.FINISHED_LOADING_INVITED_USERS:\n            return {\n                ...state,\n                invitedUsers: [...action.invitedUsers],\n                matchedInvitedUsers: [...action.invitedUsers],\n                invitedUsersLoaded: true,\n                invitedUsersBeingLoaded: false\n            };\n        case invitedUsersActions.INVITED_USERS_TOGGLE_SEARCH_MODE:\n            return {\n                ...state,\n                invitedUsersInSearchMode: !state.invitedUsersInSearchMode,\n                invitedUserSearchText: state.invitedUsersInSearchMode ? '' : state.invitedUserSearchText,\n                invitedUsersPage: 0,\n                matchedInvitedUsers: action.matchedInvitedUsers\n            };\n        case invitedUsersActions.INVITED_USERS_SEARCH_VARIABLE_CHANGED:\n            return {\n                ...state,\n                [action.name]: action.value,\n                matchedInvitedUsers: action.matchedInvitedUsers,\n                invitedUsersPage: 0\n            };\n        case invitedUsersActions.INVITED_USERS_CHANGE_PAGE:\n            return {\n                ...state,\n                invitedUsersPage: action.newPage\n            };\n        case invitedUsersActions.INVITED_USERS_CHANGE_ROWS_PER_PAGE:\n            return {\n                ...state,\n                invitedUsersRowsPerPage: parseInt(action.rows, 10),\n                invitedUsersPage: 0\n            };\n        case invitedUsersActions.INVITED_USERS_CHANGED:\n            return {\n                ...state,\n                invitedUsers: action.invitedUsers,\n                matchedInvitedUsers: action.matchedInvitedUsers\n            };\n        case invitedUsersActions.INVITED_USERS_REQUESTING_CSV_STATE_CHANGED:\n            return {\n                ...state,\n                requestingCsv: action.value\n            }\n        case invitedUsersActions.INVITED_USERS_ADDING_MEMBERS_FROM_ONE_GROUP_TO_ANOTHER_GROUP_STATE_CHANGED:\n            return {\n                ...state,\n                addingMembersFromOneGroupToAnotherGroup: action.value\n            }\n        default:\n            return state;\n    }\n};\n\nexport default invitedUsersReducer;","import * as invitationDialogActions from '../actions/invitationDialogActions';\nimport * as DB_CONST from '../../firebase/databaseConsts';\nimport * as authActions from '../actions/authActions';\nimport {\n    SEND_INVITATION_NONE,\n    SEND_INVITATION_SUCCESS\n} from '../../pages/admin/components/InvitationDialog';\n\nconst initState = {\n    invitationDialogOpen: false,\n\n    title: DB_CONST.USER_TITLES[0],\n    firstName: '',\n    lastName: '',\n    email: '',\n    userType: '',\n\n    sendButtonClick: false,\n    sendResult: SEND_INVITATION_NONE,\n    sendStatusExtraInfo: null\n};\n\nconst invitationDialogReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case invitationDialogActions.TOGGLE_INVITATION_DIALOG:\n            return {\n                ...initState,\n                invitationDialogOpen: !state.invitationDialogOpen\n            };\n        case invitationDialogActions.INVITATION_DIALOG_INPUT_CHANGED:\n            return {\n                ...state,\n                [action.event.target.name]: action.event.target.value\n            };\n        case invitationDialogActions.INVITATION_DIALOG_SEND_BUTTON_CLICKED:\n            return {\n                ...state,\n                sendButtonClick: true\n            };\n        case invitationDialogActions.INVITATION_DIALOG_SEND_RESULT_CHANGED:\n            return {\n                ...state,\n                sendResult: action.result,\n\n                title: action.result === SEND_INVITATION_SUCCESS ? DB_CONST.USER_TITLES[0] : state.title,\n                firstName: action.result === SEND_INVITATION_SUCCESS ? '' : state.firstName,\n                lastName: action.result === SEND_INVITATION_SUCCESS ? '' : state.lastName,\n                email: action.result === SEND_INVITATION_SUCCESS ? '' : state.email,\n                userType: action.result === SEND_INVITATION_SUCCESS ? '' : state.userType,\n\n                sendButtonClick: action.result === SEND_INVITATION_SUCCESS ? false : state.sendButtonClick,\n\n                sendStatusExtraInfo: action.extraInfo\n            };\n        default:\n            return state;\n    }\n};\n\nexport default invitationDialogReducer;","import * as addAngelNetworkDialogActions from '../actions/addAngelNetworkDialogActions';\nimport * as authActions from '../actions/authActions';\nimport {\n    ADD_STATUS_NONE,\n    ADD_STATUS_SUCCESSFULLY_ADDED,\n    UPLOAD_PLAIN_LOGO,\n    UPLOAD_NONE,\n    UPLOAD_LOGO_WITH_TEXT\n} from '../../pages/admin/components/AddAngelNetWorkDialog';\nimport * as DB_CONST from \"../../firebase/databaseConsts\";\n\nconst initState = {\n    addAngelNetworkDialogOpen: false,\n\n    angelNetworkName: '',\n    angelNetworkUsername: '',\n    email: '',\n    website: '',\n    primaryColor: '',\n    secondaryColor: '',\n\n    plainLogo: null,\n    loadingPlainLogo: false,\n    logoWithText: null,\n    loadingLogoWithText: false,\n\n    uploadMode: UPLOAD_NONE,\n    uploadProgress: 0,\n\n    imgUploadError: '',\n    imgUploadErrorSnackbarOpen: false,\n\n    addButtonClicked: false,\n    addResult: ADD_STATUS_NONE,\n};\n\nconst addAngelNetworkDialogReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case addAngelNetworkDialogActions.TOGGLE_ADD_ANGEL_NETWORK_DIALOG:\n            return {\n                ...initState,\n                addAngelNetworkDialogOpen: !state.addAngelNetworkDialogOpen\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_DIALOG_INPUT_CHANGED:\n            return {\n                ...state,\n                [action.event.target.name]: action.event.target.value\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_ADD_BUTTON_CLICKED:\n            return {\n                ...state,\n                addButtonClicked: true\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESULT_CHANGED:\n            return {\n                ...state,\n                addResult: action.result,\n\n                angelNetworkName: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkName,\n                angelNetworkUsername: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.angelNetworkUsername,\n                email: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.email,\n                primaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.primaryColor,\n                secondaryColor: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? '' : state.secondaryColor,\n\n                plainLogo: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.plainLogo,\n                logoWithText: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? null : state.logoWithText,\n\n                uploadMode: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? UPLOAD_NONE : action.hasOwnProperty('mode') ? action.mode : state.uploadMode,\n                uploadProgress: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? 0 : action.hasOwnProperty('progress') ? action.progress : state.uploadProgress,\n\n                addButtonClicked: action.result === ADD_STATUS_SUCCESSFULLY_ADDED ? false : state.addButtonClicked\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_LOADING_IMAGE_FILE:\n            return {\n                ...state,\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? null : state.plainLogo,\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? true : state.loadingPlainLogo,\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? null : state.logoWithText,\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? true : state.loadingLogoWithText\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILES_LOADED:\n            return {\n                ...state,\n                plainLogo: action.mode === UPLOAD_PLAIN_LOGO ? action.blob : state.plainLogo,\n                loadingPlainLogo: action.mode === UPLOAD_PLAIN_LOGO ? false : state.loadingPlainLogo,\n                logoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? action.blob : state.logoWithText,\n                loadingLogoWithText: action.mode === UPLOAD_LOGO_WITH_TEXT ? false : state.loadingLogoWithText\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_IMAGE_FILE_ERROR:\n            return {\n                ...state,\n                imgUploadError: `Image is too large. The maximum size is ${DB_CONST.MAX_VIDEO_OR_IMAGE_SIZE_IN_MB}MB.`,\n                imgUploadErrorSnackbarOpen: true\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_RESET_IMAGE_FILE_ERROR_MESSAGE_WHEN_SNACKBAR_EXITED:\n            return {\n                ...state,\n                imgUploadError: ''\n            };\n        case addAngelNetworkDialogActions.ADD_ANGEL_NETWORK_CLOSE_IMAGE_FILE_ERROR_SNACKBAR:\n            return {\n                ...state,\n                imgUploadErrorSnackbarOpen: false\n            };\n        default:\n            return state;\n    }\n};\n\nexport default addAngelNetworkDialogReducer;","import * as manageANIDFromParamsActions from '../actions/manageGroupFromParamsActions';\n\nconst initState = {\n    groupUserName: null,\n    anid: null,\n\n    groupProperties: null,\n    groupPropertiesLoaded: false,\n    angelNetworkBeingLoaded: false,\n\n    expectedPath: null,\n    currentPath: null,\n    shouldLoadOtherData: false\n};\n\nconst manageGroupFromParamsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case manageANIDFromParamsActions.SET_GROUP_USER_NAME_FROM_PARAMS:\n            return {\n                ...state,\n                groupUserName: action.groupUserName,\n                groupProperties: null,\n                groupPropertiesLoaded: false,\n                angelNetworkBeingLoaded: false\n            };\n        case manageANIDFromParamsActions.SET_EXPECTED_AND_CURRENT_PATHS_FOR_CHECKING:\n            return {\n                ...state,\n                expectedPath: action.expectedPath,\n                currentPath: action.currentPath\n            };\n        case manageANIDFromParamsActions.LOADING_ANGEL_NETWORK:\n            return {\n                ...state,\n                groupProperties: null,\n                groupPropertiesLoaded: false,\n                angelNetworkBeingLoaded: true,\n                shouldLoadOtherData: false\n            };\n        case manageANIDFromParamsActions.ANGEL_NETWORK_LOADED:\n            return {\n                ...state,\n                groupProperties: JSON.parse(JSON.stringify(action.angelNetwork)),\n                groupPropertiesLoaded: true,\n                angelNetworkBeingLoaded: false,\n                shouldLoadOtherData: action.shouldLoadOtherData\n            };\n        case manageANIDFromParamsActions.ANGEL_NETWORK_PROPERTIES_CHANGED:\n            return {\n                ...state,\n                groupProperties: {\n                    ...state.groupProperties,\n                    [action.key]: action.value\n                }\n            };\n        default:\n            return state;\n    }\n};\n\nexport default manageGroupFromParamsReducer;\n\n","import * as angelNetworksActions from '../actions/angelNetworksActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    angelNetworks: [],\n    loadingAngelNetworks: false,\n    angelNetworksLoaded: false,\n    page: 0,\n    rowsPerPage: 5,\n\n    searchText: '', // string typed to search angel networks by name\n    inSearchMode: false, // when the search button is clicked --> show X icon to exit search mode\n    matchedAngelNetworks: [] // angel networks that match\n};\n\nconst angelNetworksReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case angelNetworksActions.LOADING_ANGEL_NETWORKS:\n            return {\n                ...state,\n                loadingAngelNetworks: true,\n                angelNetworksLoaded: false,\n                angelNetworks: []\n            };\n        case angelNetworksActions.FINISHED_LOADING_ANGEL_NETWORKS:\n            return {\n                ...state,\n                loadingAngelNetworks: false,\n                angelNetworksLoaded: true,\n                angelNetworks: action.hasOwnProperty('angelNetworks') ? [...action.angelNetworks] : []\n            };\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_PAGE_CHANGED:\n            return {\n                ...state,\n                page: action.newPage\n            };\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_ROWS_PER_PAGE_CHANGED:\n            return {\n                ...state,\n                rowsPerPage: action.value\n            };\n        case angelNetworksActions.ANGEL_NETWORKS_TABLE_INPUT_CHANGED:\n            return {\n                ...state,\n                searchText: action.searchText,\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\n            };\n        case angelNetworksActions.TOGGLE_SEARCH_MODE_IN_ANGEL_NETWORKS_TABLE:\n            return {\n                ...state,\n                inSearchMode: action.enter,\n                searchText: !action.enter ? '' : state.searchText,\n                matchedAngelNetworks: [...action.matchedAngelNetworks]\n            };\n        case angelNetworksActions.ANGEL_NETWORKS_IN_TABLE_CHANGED:\n            return {\n                ...state,\n                angelNetworks: [...action.angelNetworks]\n            };\n        default:\n            return state;\n    }\n};\n\nexport default angelNetworksReducer;","import * as manageJoinRequestsActions from '../actions/manageJoinRequestsActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    joinRequests: [],\n    loadingJoinRequests: false,\n    joinRequestsLoaded: false,\n\n    searchText: '',\n    inSearchMode: false,\n    matchedJoinRequests: [],\n\n    page: 0,\n    rowsPerPage: 5\n};\n\nconst manageJoinRequestsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_LOADING_JOIN_REQUESTS:\n            return {\n                ...state,\n                joinRequests: [],\n                loadingJoinRequests: true,\n                joinRequestsLoaded: false\n            };\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_FINISHED_LOADING_JOIN_REQUESTS:\n            return {\n                ...state,\n                joinRequests: [...action.joinRequests],\n                loadingJoinRequests: false,\n                joinRequestsLoaded: true\n            };\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_PAGE_CHANGED:\n            return {\n                ...state,\n                page: action.newPage\n            };\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_ROWS_PER_PAGE_CHANGED:\n            return {\n                ...state,\n                rowsPerPage: action.value\n            };\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_INPUT_CHANGED:\n            return {\n                ...state,\n                searchText: action.searchText,\n                matchedJoinRequests: action.matchedJoinRequests\n            };\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_TABLE_TOGGLE_SEARCH_MODE:\n            return {\n                ...state,\n                inSearchMode: action.enter,\n                searchText: !action.enter ? '' : state.searchText,\n                matchedJoinRequests: action.matchedJoinRequests\n            };\n        case manageJoinRequestsActions.MANAGE_JOIN_REQUESTS_CHANGED:\n            return {\n                ...state,\n                joinRequests: [...action.joinRequests]\n            };\n        default:\n            return state;\n    }\n};\n\nexport default manageJoinRequestsReducer;","import * as pledgesTableActions from '../actions/pledgesTableActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    project: null,\n\n    pledges: [],\n    pledgesLoaded: false,\n    loadingPledges: false,\n\n    searchText: '',\n    inSearchMode: false,\n    matchedPledges: [],\n\n    page: 0,\n    rowsPerPage: 10\n};\n\nconst pledgesTableReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_SET_PROJECT:\n            return {\n                ...initState,\n                project: JSON.parse(JSON.stringify(action.project))\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_LOADING_PLEDGES:\n            return {\n                ...state,\n                pledges: [],\n                pledgesLoaded: false,\n                loadingPledges: true\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_FINISHED_LOADING_PLEDGES:\n            return {\n                ...state,\n                pledges: [...action.pledges],\n                pledgesLoaded: true,\n                loadingPledges: false\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PAGE_CHANGED:\n            return {\n                ...state,\n                page: action.newPage\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_ROWS_PER_PAGE_CHANGED:\n            return {\n                ...state,\n                rowsPerPage: action.value,\n                page: 0\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_INPUT_CHANGED:\n            return {\n                ...state,\n                searchText: action.searchText,\n                matchedPledges: [...action.matchedPledges]\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_TOGGLE_SEARCH_MODE:\n            return {\n                ...state,\n                inSearchMode: action.enter,\n                searchText: !action.enter ? '' : state.searchText,\n                matchedPledges: [...action.matchedPledges]\n            };\n        case pledgesTableActions.MANAGE_PLEDGES_TABLE_PLEDGES_CHANGED:\n            return {\n                ...state,\n                pledges: [...action.pledges]\n            };\n        default:\n            return state;\n    }\n};\n\nexport default pledgesTableReducer;","import * as feedbackSnackbarActions from '../actions/feedbackSnackbarActions';\n\nconst initState = {\n    open: false,\n    message: '',\n    color: '', // primary or error\n    position: '' // top or bottom\n};\n\nconst feedbackSnackbarReducer = (state = initState, action) => {\n    switch (action.type) {\n        case feedbackSnackbarActions.CLOSE_FEEDBACK_SNACKBAR:\n            return {\n                ...state,\n                open: false\n            };\n        case feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT:\n            return {\n                ...state,\n                open: true,\n                message: action.message,\n                color: action.color,\n                position: action.position\n            };\n        case feedbackSnackbarActions.RESET_STATES_WHEN_SNACKBAR_CLOSED:\n            return {\n                ...initState\n            };\n        default:\n            return state;\n    }\n};\n\nexport default feedbackSnackbarReducer;","import * as activitiesTableActions from '../actions/activitiesTableActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    tableUser: null,\n\n    activities: [],\n    activitiesLoaded: false,\n    loadingActivities: false,\n\n    page: 0,\n    rowsPerPage: 10\n};\n\nconst activitiesTableReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case activitiesTableActions.ACTIVITIES_TABLE_SET_TABLE_USER:\n            return {\n                ...initState,\n                tableUser: JSON.parse(JSON.stringify(action.user))\n            };\n        case activitiesTableActions.ACTIVITIES_TABLE_LOADING_ACTIVITIES:\n            return {\n                ...state,\n                activities: [],\n                activitiesLoaded: false,\n                loadingActivities: true\n            };\n        case activitiesTableActions.ACTIVITIES_TABLE_FINISHED_LOADING_ACTIVITIES:\n            return {\n                ...state,\n                activities: [...action.activities],\n                activitiesLoaded: true,\n                loadingActivities: false\n            };\n        case activitiesTableActions.ACTIVITIES_IN_TABLE_CHANGED:\n            return {\n                ...state,\n                activities: [...action.activities]\n            };\n        case activitiesTableActions.ACTIVITIES_TABLE_PAGE_CHANGED:\n            return {\n                ...state,\n                page: action.newPage\n            };\n        case activitiesTableActions.ACTIVITIES_TABLE_ROWS_PER_PAGE_CHANGED:\n            return {\n                ...state,\n                rowsPerPage: action.value\n            };\n        default:\n            return state;\n    }\n};\n\nexport default activitiesTableReducer;","import * as manageJSONCompareChangesDialogActions from '../actions/manageJSONCompareChangesDialogActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    dialogOpen: false,\n    jsonBefore: {},\n    jsonAfter: {}\n};\n\nconst manageJSONCompareChangesDialogReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_SET_DATA:\n            return {\n                ...state,\n                dialogOpen: true,\n                jsonBefore: JSON.parse(JSON.stringify(action.jsonBefore)),\n                jsonAfter: JSON.parse(JSON.stringify(action.jsonAfter))\n            };\n        case manageJSONCompareChangesDialogActions.JSON_COMPARE_CHANGES_DIALOG_RESET_DATA:\n            return {\n                ...state,\n                dialogOpen: false,\n                jsonBefore: {},\n                jsonAfter: {}\n            };\n        default:\n            return state;\n    }\n};\n\nexport default manageJSONCompareChangesDialogReducer;","import * as groupAdminsTableActions from '../actions/groupAdminsTableActions';\nimport * as authActions from '../actions/authActions';\nimport {ADD_NEW_GROUP_ADMIN_STATUS_NONE} from '../../pages/admin/components/GroupAdminsTable';\n\nconst initState = {\n    tableGroup: null,\n\n    groupAdmins: [],\n    groupAdminsLoaded: false,\n    loadingGroupAdmins: false,\n\n    searchText: '',\n    inSearchMode: false,\n\n    page: 0,\n    rowsPerPage: 10,\n\n    addNewGroupAdminDialogOpen: false,\n    newGroupAdminEmail: '',\n    addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\n};\n\nconst groupAdminsTableReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_SET_GROUP:\n            return {\n                ...initState,\n                tableGroup: JSON.parse(JSON.stringify(action.group))\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_LOADING_GROUP_ADMINS:\n            return {\n                ...state,\n                groupAdmins: [],\n                groupAdminsLoaded: false,\n                loadingGroupAdmins: true\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_FINISHED_LOADING_GROUP_ADMINS:\n            return {\n                ...state,\n                groupAdmins: [...action.groupAdmins],\n                groupAdminsLoaded: true,\n                loadingGroupAdmins: false\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_PAGE_CHANGED:\n            return {\n                ...state,\n                rowsPerPage: action.newPage\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ROWS_PER_PAGE_CHANGED:\n            return {\n                ...state,\n                rowsPerPage: action.value\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_SEARCH_MODE:\n            return {\n                ...state,\n                searchText: state.inSearchMode ? '' : state.searchText,\n                inSearchMode: !state.inSearchMode\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_HANDLE_INPUT_CHANGED:\n            return {\n                ...state,\n                [action.event.target.name]: action.event.target.value\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_TOGGLE_ADD_NEW_GROUP_ADMIN_DIALOG:\n            return {\n                ...state,\n                addNewGroupAdminDialogOpen: !state.addNewGroupAdminDialogOpen,\n                newGroupAdminEmail: '',\n                addNewGroupAdminStatus: ADD_NEW_GROUP_ADMIN_STATUS_NONE\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_CHANGED:\n            return {\n                ...state,\n                groupAdmins: [...action.groupAdmins]\n            };\n        case groupAdminsTableActions.GROUP_ADMINS_TABLE_ADD_NEW_GROUP_STATUS_CHANGED:\n            return {\n                ...state,\n                addNewGroupAdminStatus: action.status\n            };\n        default:\n            return state;\n    }\n};\n\nexport default groupAdminsTableReducer;","import * as createPledgeDialogActions from '../actions/createPledgeDialogActions';\nimport * as authActions from '../actions/authActions';\nimport * as utils from '../../utils/utils';\nimport {CREATE_PLEDGE_STATUS_NONE} from '../../shared-components/create-pledge-dialog/CreatePledgeDialog';\n\nconst initState = {\n    open: false,\n    project: null,\n    postMoneyValuation: '',\n    expiredDate: null,\n    extraNotes: '',\n    createStatus: CREATE_PLEDGE_STATUS_NONE\n};\n\nconst createPledgeDialogReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case createPledgeDialogActions.TOGGLE_CREATE_PLEDGE_DIALOG:\n            return {\n                ...initState,\n                open: !state.open\n            };\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_SET_PROJECT:\n            return {\n                ...state,\n                project: JSON.parse(JSON.stringify(action.project)),\n                postMoneyValuation:\n                    action.project.Pitch.hasOwnProperty('postMoneyValuation')\n                        ?\n                        Number(action.project.Pitch.postMoneyValuation.toFixed(2)).toLocaleString()\n                        :\n                        ''\n                ,\n                expiredDate: utils.getDateWithDaysFurtherThanToday(1),\n                extraNotes: ''\n            };\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_INPUT_CHANGED:\n            return {\n                ...state,\n                [action.event.target.name]: action.event.target.value\n            };\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_HANDLE_DATE_CHANGED:\n            return {\n                ...state,\n                expiredDate:\n                    action.date && action.date === \"Invalid Date\"\n                        ?\n                        NaN\n                        :\n                        action.date === null\n                            ?\n                            null\n                            :\n                            action.date.getTime()\n            };\n        case createPledgeDialogActions.CREATE_PLEDGE_DIALOG_CREATE_STATUS_CHANGED:\n            return {\n                ...state,\n                createStatus: action.status\n            };\n        default:\n            return state;\n    }\n};\n\nexport default createPledgeDialogReducer;","import * as selectProjectVisibilityActions from '../actions/selectProjectVisibilityActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    projectVisibilitySetting: -1,\n    project: null\n};\n\nconst selectProjectVisibilityReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT:\n            return {\n                ...initState,\n                project: JSON.parse(JSON.stringify(action.project))\n            };\n        case selectProjectVisibilityActions.HANDLE_PROJECT_VISIBILITY_SETTING_CHANGED:\n            return {\n                ...state,\n                [action.event.target.name]: action.event.target.value\n            };\n        default:\n            return state;\n    }\n}\n\nexport default selectProjectVisibilityReducer;","import * as manageSystemGroupsActions from '../actions/manageSystemGroupsActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    systemGroups: [],\n    loadingGroups: false,\n    groupsLoaded: false\n};\n\nconst manageSystemGroupsReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case manageSystemGroupsActions.LOADING_SYSTEM_GROUPS:\n            return {\n                ...state,\n                systemGroups: [],\n                loadingGroups: true,\n                groupsLoaded: false\n            };\n        case manageSystemGroupsActions.FINISHED_LOADING_SYSTEM_GROUPS:\n            return {\n                ...state,\n                systemGroups: action.groups,\n                loadingGroups: false,\n                groupsLoaded: true\n            };\n        case manageSystemGroupsActions.SYSTEM_GROUPS_CHANGED:\n            return {\n                ...state,\n                systemGroups: action.groups\n            };\n        default:\n            return state;\n    }\n}\n\nexport default manageSystemGroupsReducer;","import * as realtimeDBUtils from '../../firebase/realtimeDBUtils';\nimport * as feedbackSnackbarActions from './feedbackSnackbarActions';\nimport * as DB_CONST from '../../firebase/databaseConsts';\n\nexport const LOADING_MARKETING_PREFERENCES = 'LOADING_MARKETING_PREFERENCES';\nexport const FINISHED_LOADING_MARKETING_PREFERENCES = 'FINISHED_LOADING_MARKETING_PREFERENCES';\nexport const loadMarketingPreferences = () => {\n    return (dispatch, getState) => {\n\n        const currentUser = getState().auth.user;\n\n        if (currentUser.type === DB_CONST.TYPE_ADMIN) {\n            // do not allow course admins to load marketing preferences\n            if (!currentUser.superAdmin) {\n                return;\n            }\n        }\n\n        dispatch({\n            type: LOADING_MARKETING_PREFERENCES\n        });\n\n        realtimeDBUtils\n            .loadMarketingPreferences(\n                currentUser.type === DB_CONST.TYPE_ADMIN\n                    ?\n                    null\n                    :\n                    currentUser.id\n            )\n            .then(marketingPreferences => {\n                dispatch({\n                    type: FINISHED_LOADING_MARKETING_PREFERENCES,\n                    marketingPreferences\n                });\n            })\n            .catch(error => {\n                dispatch({\n                    type: feedbackSnackbarActions.SET_FEEDBACK_SNACKBAR_CONTENT,\n                    message: \"Error happened. Could not load marketing preferences.\",\n                    color: \"error\",\n                    position: \"bottom\"\n                });\n            });\n    }\n}","import * as manageMarketingPreferencesActions from '../actions/manageMarketingPreferencesActions';\nimport * as authActions from '../actions/authActions';\n\nconst initState = {\n    marketingPreferences: [],\n    loadingMarketingPreferences: false,\n    marketingPreferencesLoaded: false\n};\n\nconst manageMarketingPreferencesReducer = (state = initState, action) => {\n    switch (action.type) {\n        case authActions.LOG_OUT:\n            return initState;\n        case manageMarketingPreferencesActions.LOADING_MARKETING_PREFERENCES:\n            return {\n                ...state,\n                marketingPreferences: [],\n                loadingMarketingPreferences: true,\n                marketingPreferencesLoaded: false\n            };\n        case manageMarketingPreferencesActions.FINISHED_LOADING_MARKETING_PREFERENCES:\n            return {\n                ...state,\n                marketingPreferences: JSON.parse(JSON.stringify(action.marketingPreferences)),\n                loadingMarketingPreferences: false,\n                marketingPreferencesLoaded: true\n            };\n        default:\n            return state;\n    }\n}\n\nexport default manageMarketingPreferencesReducer;","import * as DB_CONST from \"../../firebase/databaseConsts\";\r\nimport * as realtimeDBUtils from \"../../firebase/realtimeDBUtils\";\r\nimport firebase from \"../../firebase/firebaseApp\";\r\nimport * as selectProjectVisibilityActions from \"../actions/selectProjectVisibilityActions\";\r\nimport * as utils from \"../../utils/utils\";\r\nimport * as myUtils from \"../../utils/utils\";\r\nimport {\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n    PITCH_PUBLISH_FALSE_INVALID_FUND,\r\n    PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n    PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n    STEP_ACCEPT_TERMS_AND_CONDITIONS,\r\n    STEP_PITCH_COVER,\r\n    STEP_PITCH_DECK,\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    STEP_PITCH_SUPPORTING_DOCUMENTS,\r\n    PITCH_COVER_FILE_TYPE_SELECTED,\r\n    PITCH_COVER_VIDEO_URL_TYPE_SELECTED\r\n} from \"../../pages/create-project/CreateProject\";\r\nimport * as ROUTES from \"../../router/routes\";\r\n\r\nexport const CREATE_PROJECT_SET_COMPONENT_PROPS = \"CREATE_PROJECT_SET_COMPONENT_PROPS\";\r\nexport const setComponentContext = (context) => {\r\n    return {\r\n        type: CREATE_PROJECT_SET_COMPONENT_PROPS,\r\n        context\r\n    }\r\n}\r\n\r\nexport const CREATE_PROJECT_LOADING_DATA = \"CREATE_PROJECT_LOADING_DATA\";\r\nexport const CREATE_PROJECT_FINISHED_LOADING_DATA = \"CREATE_PROJECT_FINISHED_LOADING_DATA\";\r\n\r\nexport const CREATE_PROJECT_MODE_EDIT = 1;\r\nexport const CREATE_PROJECT_MODE_CREATE_NEW = 2;\r\n\r\n/**\r\n * Load data\r\n *\r\n * @param params\r\n * @returns {Promise<function(...[*]=)>}\r\n */\r\nexport const loadData = async (params) => {\r\n    return (dispatch, getState) => {\r\n        const currentUser = getState().auth.user;\r\n        const groupProperties = getState().manageGroupFromParams.groupProperties;\r\n\r\n        const {\r\n            projectEditedLoaded,\r\n            projectIDToBeLoadedAfterSavingFirstTime\r\n        } = getState().manageCreateProject;\r\n\r\n        if (!currentUser\r\n            ||\r\n            (currentUser && currentUser.type === DB_CONST.TYPE_INVESTOR)\r\n        ) {\r\n            if (!projectEditedLoaded) {\r\n                this.setState({\r\n                    projectEditedLoaded: true\r\n                });\r\n                dispatch({\r\n                    type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                    error: \"Error happened.\"\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        dispatch({\r\n            type: CREATE_PROJECT_LOADING_DATA\r\n        });\r\n\r\n        // in edit mode\r\n        if (params.edit || projectIDToBeLoadedAfterSavingFirstTime) {\r\n            // load the project\r\n            realtimeDBUtils\r\n                .loadAParticularProject(!params.edit ? projectIDToBeLoadedAfterSavingFirstTime : params.edit)\r\n                .then(project => {\r\n\r\n                    // allow the group admin to change the visibility of the project\r\n                    if ((currentUser.type === DB_CONST.TYPE_ADMIN && currentUser.anid === project.anid)\r\n                        && (groupProperties && groupProperties.anid === project.anid)\r\n                    ) {\r\n                        dispatch({\r\n                            type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                            project\r\n                        });\r\n                    }\r\n\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        projectEdited: project,\r\n                        mode: CREATE_PROJECT_MODE_EDIT\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    dispatch({\r\n                        type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                        error: error\r\n                    });\r\n                });\r\n        }\r\n        // in create mode\r\n        else {\r\n            dispatch({\r\n                type: CREATE_PROJECT_FINISHED_LOADING_DATA,\r\n                mode: CREATE_PROJECT_MODE_CREATE_NEW\r\n            });\r\n\r\n            // allow the group admin to change the visibility of the project\r\n            if (currentUser.type === DB_CONST.TYPE_ADMIN\r\n                && (groupProperties && groupProperties.anid === currentUser.anid)\r\n            ) {\r\n                dispatch({\r\n                    type: selectProjectVisibilityActions.SELECT_PROJECT_VISIBILITY_SET_PROJECT,\r\n                    project: null\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Navigate to the same page with active step saved\r\n * This will save the activeStep of the page, so when the user refreshes the page,\r\n * they can still continue with their previous step.\r\n *\r\n * @param activeStep\r\n * @param projectID\r\n */\r\nexport const navigateToTheSamePageWithActiveStepSaved = (activeStep, projectID) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            groupUserName\r\n        } = getState().manageGroupFromParams;\r\n\r\n        const componentContext = getState().manageCreateProject.componentContext;\r\n\r\n        // projectID not null\r\n        // --> still in edit mode\r\n        if (projectID) {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                search: `?edit=${projectID}`,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n        // projectID null --> create mode\r\n        else {\r\n            componentContext.props.history.push({\r\n                pathname:\r\n                    groupUserName\r\n                        ?\r\n                        ROUTES.CREATE_OFFER\r\n                            .replace(\":groupUserName\", groupUserName)\r\n                        :\r\n                        ROUTES.CREATE_OFFER_INVEST_WEST_SUPER,\r\n                state: {\r\n                    activeStep: activeStep\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport const handleMoveToNextStep = (params) => {\r\n    return (dispatch, getState) => {\r\n        const {\r\n            projectEdited,\r\n            progressBeingSaved\r\n        } = getState().manageCreateProject;\r\n\r\n        const {\r\n            activeStep,\r\n\r\n            pitchSector,\r\n            pitchProjectName,\r\n            pitchProjectDescription,\r\n            pitchExpiredDate,\r\n\r\n            pitchCover,\r\n            pitchCoverVideoURL,\r\n            pitchCoverTypeSelected,\r\n            pitchPresentationDocument,\r\n            pitchPresentationText,\r\n\r\n        } = getState().manageCreateProject.createNewPitch;\r\n\r\n        // progress is being saved,\r\n        // we shouldn't let the user click\r\n        if (progressBeingSaved) {\r\n            return;\r\n        }\r\n\r\n        switch (activeStep) {\r\n            // General information\r\n            case STEP_PITCH_GENERAL_INFORMATION:\r\n                // if one of the fields in the General information part is missing, ask the user to fill them\r\n                if (pitchSector === \"-\"\r\n                    || pitchProjectName.trim().length === 0\r\n                    || pitchProjectDescription.trim().length === 0\r\n                    || pitchExpiredDate === null) {\r\n\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_FIELDS_IN_GENERAL_INFORMATION,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n\r\n                    return;\r\n                }\r\n\r\n                // check if the entered date is in a valid format or the entered is less than the minimum date\r\n                if (isNaN(pitchExpiredDate)\r\n                    ||\r\n                    (pitchExpiredDate && (pitchExpiredDate < myUtils.getDateWithDaysFurtherThanToday(0)))\r\n                ) {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            pitchPublishCheck: PITCH_PUBLISH_FALSE_INVALID_DATE,\r\n                            pitchPublishErrorMessageShowed: true\r\n                        }\r\n                    });\r\n                    return;\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch cover\r\n            case STEP_PITCH_COVER:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (\r\n                        (\r\n                            !projectEdited.Pitch.cover\r\n                            ||\r\n                            (projectEdited.Pitch.cover\r\n                                && projectEdited.Pitch.cover.filter(coverItem => !coverItem.hasOwnProperty('removed')).length === 0)\r\n                        )\r\n                        && (\r\n                            !pitchCoverTypeSelected\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                            || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                        )\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not uploaded pitch cover, ask them to upload\r\n                    if (!pitchCoverTypeSelected\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_FILE_TYPE_SELECTED && pitchCover.length === 0)\r\n                        || (pitchCoverTypeSelected === PITCH_COVER_VIDEO_URL_TYPE_SELECTED && pitchCoverVideoURL.trim().length === 0)\r\n                    ) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_COVER,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Pitch deck\r\n            case STEP_PITCH_DECK:\r\n                // in edit mode\r\n                if (params.edit && projectEdited) {\r\n                    if (pitchPresentationDocument.length === 0\r\n                        && pitchPresentationText.ops.length === 0\r\n                        && (\r\n                            !projectEdited.Pitch.presentationDocument\r\n                            ||\r\n                            (\r\n                                projectEdited.Pitch.presentationDocument\r\n                                && projectEdited.Pitch.presentationDocument.filter(document => !document.hasOwnProperty('removed')).length === 0\r\n                            )\r\n                        )\r\n                        && !projectEdited.Pitch.presentationText) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                } else {\r\n                    // if the user has not created their project presentation, ask them to do so by uploading a presentation file or use the text editor provided\r\n                    if (pitchPresentationDocument.length === 0 && pitchPresentationText.ops.length === 0) {\r\n                        this.setState({\r\n                            createNewPitch: {\r\n                                ...this.state.createNewPitch,\r\n                                pitchPublishCheck: PITCH_PUBLISH_FALSE_MISSING_PITCH_PRESENTATION,\r\n                                pitchPublishErrorMessageShowed: true\r\n                            }\r\n                        });\r\n                        return;\r\n                    }\r\n                }\r\n                this.setState({\r\n                    createNewPitch: {\r\n                        ...this.state.createNewPitch,\r\n                        activeStep: activeStep + 1,\r\n                        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                        pitchPublishErrorMessageShowed: false\r\n                    }\r\n                });\r\n                break;\r\n            // Supporting documents\r\n            case STEP_PITCH_SUPPORTING_DOCUMENTS:\r\n                if (projectEdited.status !== DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    // upload the pitch\r\n                    this.uploadProject();\r\n                    return;\r\n                } else {\r\n                    this.setState({\r\n                        createNewPitch: {\r\n                            ...this.state.createNewPitch,\r\n                            activeStep: activeStep + 1,\r\n                            pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n                            pitchPublishErrorMessageShowed: false\r\n                        }\r\n                    });\r\n                }\r\n                break;\r\n            case STEP_ACCEPT_TERMS_AND_CONDITIONS:\r\n                // publish button is clicked and the offer is a draft, detach the listener so that success message can be displayed correctly\r\n                if (projectEdited && projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                    if (this.projectEditedSaveModeRefListener) {\r\n                        this.projectEditedSaveModeRefListener.off('child_changed');\r\n                    }\r\n\r\n                    // upload the project\r\n                    this.uploadProject();\r\n                    this.navigateToTheSamePageWithActiveStepSaved(0, projectEdited.id);\r\n                    return;\r\n                }\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n\r\n        if (params.edit && projectEdited) {\r\n            if (projectEdited.status === DB_CONST.PROJECT_STATUS_DRAFT) {\r\n                // save progress\r\n                this.handleSaveProgressClick();\r\n            } else {\r\n                this.navigateToTheSamePageWithActiveStepSaved(activeStep + 1, projectEdited.id);\r\n            }\r\n        } else {\r\n            // save progress\r\n            this.handleSaveProgressClick();\r\n        }\r\n    }\r\n}\r\n\r\nlet draftProjectListener = null;\r\n\r\nexport const CREATE_PROJECT_DRAFT_PROJECT_CHANGED = \"CREATE_PROJECT_DRAFT_PROJECT_CHANGED\";\r\nexport const startListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        const projectEdited = getState().manageCreateProject.projectEdited;\r\n\r\n        if (utils.isDraftProject(projectEdited)) {\r\n            if (!draftProjectListener) {\r\n                draftProjectListener = firebase\r\n                    .database()\r\n                    .ref(DB_CONST.PROJECTS_CHILD)\r\n                    .orderByKey()\r\n                    .equalTo(projectEdited.id);\r\n\r\n                draftProjectListener\r\n                    .on('child_changed', snapshot => {\r\n\r\n                        let project = snapshot.val();\r\n\r\n                        this.setState({\r\n                            projectEdited: Object.assign({}, project)\r\n                        });\r\n                        dispatch({\r\n                            type: CREATE_PROJECT_DRAFT_PROJECT_CHANGED,\r\n                            projectChanged: project\r\n                        });\r\n                    });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const stopListeningForDraftProjectChanged = () => {\r\n    return (dispatch, getState) => {\r\n        if (draftProjectListener) {\r\n            draftProjectListener.off('child_changed');\r\n            draftProjectListener = null;\r\n        }\r\n    }\r\n}","import * as createProjectActions from '../actions/createProjectActions';\r\nimport * as authActions from '../actions/authActions';\r\nimport {\r\n    STEP_PITCH_GENERAL_INFORMATION,\r\n    PITCH_PUBLISH_CHECK_NONE,\r\n    UPLOAD_NONE\r\n} from '../../pages/create-project/CreateProject';\r\n\r\nconst initState = {\r\n    componentContext: null,\r\n\r\n    recoveredFromPreviousState: false,\r\n\r\n    projectBeforeEdited: null,\r\n    projectEdited: null,\r\n    projectEditedLoaded: false,\r\n\r\n    requestToLoadData: true,\r\n    projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n    saveProgress: false,\r\n    progressBeingSaved: false,\r\n    draftBeingDeleted: false,\r\n\r\n    createNewPitch: {\r\n\r\n        activeStep: STEP_PITCH_GENERAL_INFORMATION,\r\n\r\n        // project sector\r\n        pitchSector: '-',\r\n        // project project name\r\n        pitchProjectName: '',\r\n        pitchProjectDescription: '',\r\n        pitchExpiredDate: null,\r\n\r\n        pitchInvestorsCommitted: '',\r\n\r\n        // project cover (image or video) --- 1 file\r\n        pitchCover: [],\r\n        // project cover - video URL\r\n        pitchCoverVideoURL: '',\r\n        // select between uploading an image or a video ULR -----\r\n        pitchCoverTypeSelected: null,\r\n        // ------------------------------------------------------\r\n        // project supporting documents --- max 10 files\r\n        pitchSupportingDocuments: [],\r\n        // project presentation file (user uploads a file for project presentation) --- 1 file\r\n        pitchPresentationDocument: [],\r\n        // project presentation text (user uses the provided text editor to make project presentation)\r\n        pitchPresentationText: {ops: []},\r\n\r\n        // check for missing fields (or invalid inputs) when the user hits the Next button\r\n        pitchPublishCheck: PITCH_PUBLISH_CHECK_NONE,\r\n\r\n        // these 2 states are used to display popover error message when the Publish button is clicked\r\n        pitchNextStepButtonTarget: null,\r\n        pitchPublishErrorMessageShowed: false,\r\n\r\n        uploadFileProgress: 0,\r\n        uploadFileMode: UPLOAD_NONE,\r\n\r\n        openUploadingProgressDialog: false,\r\n\r\n        snackbarErrorMessage: '',\r\n        errorSnackbarOpen: false,\r\n\r\n        acceptedTermsAndConditions: false,\r\n\r\n        projectID: null // set when project has been successfully published to pass to UploadDialog\r\n    }\r\n};\r\n\r\nconst createProjectReducer = (state = initState, action) => {\r\n    switch (action.type) {\r\n        case authActions.LOG_OUT:\r\n            return initState;\r\n        case createProjectActions.CREATE_PROJECT_SET_COMPONENT_PROPS:\r\n            return {\r\n                ...state,\r\n                componentContext: action.context\r\n            }\r\n        case createProjectActions.CREATE_PROJECT_LOADING_DATA:\r\n            return {\r\n                ...state,\r\n                requestToLoadData: false\r\n            };\r\n        case createProjectActions.CREATE_PROJECT_FINISHED_LOADING_DATA: {\r\n            if (action.hasOwnProperty('error')) {\r\n                return {\r\n                    ...state,\r\n                    projectEditedLoaded: true,\r\n                    projectIDToBeLoadedAfterSavingFirstTime: null\r\n                }\r\n            }\r\n            else {\r\n                // error\r\n                if (!action.hasOwnProperty('mode')) {\r\n                    return initState;\r\n                }\r\n\r\n                switch (action.mode) {\r\n                    case createProjectActions.CREATE_PROJECT_MODE_EDIT: {\r\n                        const project = JSON.parse(JSON.stringify(action.projectEdited));\r\n\r\n                        return {\r\n                            ...state,\r\n                            projectBeforeEdited: project,\r\n                            projectEdited: project,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null,\r\n\r\n                            createNewPitch: {\r\n                                ...state.createNewPitch,\r\n                                // project sector\r\n                                pitchSector:\r\n                                    project.hasOwnProperty('sector')\r\n                                        ?\r\n                                        project.sector\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                // project project name\r\n                                pitchProjectName:\r\n                                    project.hasOwnProperty('projectName')\r\n                                        ?\r\n                                        project.projectName\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchProjectDescription:\r\n                                    project.hasOwnProperty('description')\r\n                                        ?\r\n                                        project.description\r\n                                        :\r\n                                        ''\r\n                                ,\r\n                                pitchExpiredDate:\r\n                                    project.Pitch.hasOwnProperty('expiredDate')\r\n                                        ?\r\n                                        project.Pitch.expiredDate\r\n                                        :\r\n                                        null\r\n                                ,\r\n                                pitchInvestorsCommitted:\r\n                                    project.Pitch.hasOwnProperty('investorsCommitted')\r\n                                        ?\r\n                                        project.Pitch.investorsCommitted\r\n                                        :\r\n                                        ''\r\n                                ,\r\n\r\n                                pitchPresentationText:\r\n                                    !project.Pitch.presentationText\r\n                                        ?\r\n                                        {ops: []}\r\n                                        :\r\n                                        project.Pitch.presentationText\r\n                            }\r\n                        };\r\n                    }\r\n                    case createProjectActions.CREATE_PROJECT_MODE_CREATE_NEW:\r\n                        return {\r\n                            ...state,\r\n                            projectEditedLoaded: true,\r\n                            projectIDToBeLoadedAfterSavingFirstTime: null\r\n                        };\r\n                    default:\r\n                        return initState;\r\n                }\r\n            }\r\n        }\r\n        case createProjectActions.CREATE_PROJECT_DRAFT_PROJECT_CHANGED:\r\n            return {\r\n                ...state,\r\n                projectEdited: JSON.parse(JSON.stringify(action.projectChanged))\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default createProjectReducer;","import {DocumentClickAction, DocumentsDownloadAction, DocumentsDownloadEvents} from \"./DocumentsDownloadActions\";\nimport {PitchDocument} from \"../../models/project\";\n\nexport interface DocumentsDownloadState {\n    selectedDocument?: PitchDocument;\n    openRiskWarningDialog: boolean;\n}\n\nconst initialState: DocumentsDownloadState = {\n    openRiskWarningDialog: false\n}\n\nconst documentsDownloadReducer = (state: DocumentsDownloadState = initialState, action: DocumentsDownloadAction) => {\n    switch (action.type) {\n        case DocumentsDownloadEvents.OpenRiskWarningDialog:\n            const openRiskWarningDialogAction: DocumentClickAction = action as DocumentClickAction;\n            return {\n                ...state,\n                selectedDocument: openRiskWarningDialogAction.selectedDocument,\n                openRiskWarningDialog: true\n            }\n        case DocumentsDownloadEvents.CloseRiskWarningDialog:\n            return {\n                ...state,\n                selectedDocument: undefined,\n                openRiskWarningDialog: false\n            }\n        default:\n            return state;\n    }\n}\n\nexport default documentsDownloadReducer;","import {ProfileAction, setCopiedUser} from \"../../ProfileActions\";\nimport {ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport {openFeedbackSnackbar} from \"../../../feedback-snackbar/FeedbackSnackbarActions\";\nimport {FeedbackSnackbarTypes} from \"../../../feedback-snackbar/FeedbackSnackbarReducer\";\nimport {EditImageDialogModes, isDeletingProfilePicture, isSavingProfilePicture} from \"../../ProfileReducer\";\nimport UserRepository from \"../../../../api/repositories/UserRepository\";\nimport User from \"../../../../models/user\";\nimport {updateUserChanges} from \"../../../../redux-store/actions/authenticationActions\";\nimport FileRepository from \"../../../../api/repositories/FileRepository\";\nimport {getCurrentDate} from \"../../../../utils/utils\";\nimport {PROFILE_PICTURES_CHILD, USERS_CHILD} from \"../../../../firebase/databaseConsts\";\n\nexport enum EditImageDialogEvents {\n    ToggleDialog = \"EditImageDialogEvents.ToggleDialog\",\n    SetEditor = \"EditImageDialogEvents.SetEditor\",\n    ChangeMode = \"EditImageDialogEvents.ChangeMode\",\n    SuccessfullySelectedImage = \"EditImageDialogEvents.SuccessfullySelectedImage\",\n    SliderChanged = \"EditImageDialogEvents.SliderChanged\",\n    SavingImage = \"EditImageDialogEvents.SavingImage\",\n    DeletingImage = \"EditImageDialogEvents.DeletingImage\"\n}\n\nexport interface EditImageDialogAction extends ProfileAction {\n\n}\n\nexport interface ToggleDialogAction extends EditImageDialogAction {\n    // when set (must be a URL), the dialog will be opened in \"Display photo\" mode\n    image?: string;\n}\n\nexport interface SetEditorAction extends EditImageDialogAction {\n    editor: any;\n}\n\nexport interface ChangeModeAction extends EditImageDialogAction {\n    mode: EditImageDialogModes;\n}\n\nexport interface SuccessfullySelectedImageAction extends EditImageDialogAction {\n    selectedImage: File;\n}\n\nexport interface SliderChangedAction extends EditImageDialogAction {\n    name: string;\n    value: number;\n}\n\nexport interface SavingImageAction extends EditImageDialogAction {\n    saving: boolean;\n}\n\nexport interface DeletingImageAction extends EditImageDialogAction {\n    deleting: boolean;\n}\n\nexport const toggleDialog: ActionCreator<any> = (image?: string) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: ToggleDialogAction = {\n            type: EditImageDialogEvents.ToggleDialog,\n            image\n        };\n        dispatch(action);\n        if (image) {\n            dispatch(changeMode(EditImageDialogModes.DisplayPhoto));\n        }\n    }\n}\n\nexport const setEditor: ActionCreator<any> = (editor: any) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: SetEditorAction = {\n            type: EditImageDialogEvents.SetEditor,\n            editor\n        };\n        return dispatch(action);\n    }\n}\n\nexport const changeMode: ActionCreator<any> = (mode: EditImageDialogModes) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: ChangeModeAction = {\n            type: EditImageDialogEvents.ChangeMode,\n            mode\n        };\n        return dispatch(action);\n    }\n}\n\n/**\n * Handle when an image is successfully selected\n *\n * @param files\n */\nexport const handleImageChanged: ActionCreator<any> = (files: File[]) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        // error happened\n        if (files.length === 0) {\n            return;\n        }\n\n        const imageFile: File = files[0];\n        const action: SuccessfullySelectedImageAction = {\n            type: EditImageDialogEvents.SuccessfullySelectedImage,\n            selectedImage: imageFile\n        };\n        dispatch(action);\n        return dispatch(changeMode(EditImageDialogModes.EditPhoto));\n    }\n}\n\n/**\n * Handle when an image is unsuccessfully selected due to oversize, etc.\n *\n * Note: when this event occur, handleImageChanged is also called with files = [].\n *\n * @param error\n * @param file\n */\nexport const handleImageError: ActionCreator<any> = (error: MediaError, file: File) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, error.message))\n    }\n}\n\nexport const handleSliderChanged: ActionCreator<any> = (sliderName: string, value: number) => {\n    return (dispatch: Dispatch, getState: () => AppState) => {\n        const action: SliderChangedAction = {\n            type: EditImageDialogEvents.SliderChanged,\n            name: sliderName,\n            value\n        };\n        return dispatch(action);\n    }\n}\n\n/**\n * Save edited image as a new profile picture\n */\nexport const saveImage: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            copiedUser,\n            EditImageDialogState\n        } = getState().ProfileLocalState;\n\n        const editor: any = EditImageDialogState.editor;\n\n        if (!copiedUser) {\n            return;\n        }\n\n        if (isSavingProfilePicture(EditImageDialogState)) {\n            return;\n        }\n\n        try {\n            // Note: this can only be done if cors is set.\n            // To set cors on Firebase, follow this: https://stackoverflow.com/questions/37760695/firebase-storage-and-access-control-allow-origin/37765371\n            const canvas: HTMLCanvasElement = editor.getImage();\n            // @ts-ignore\n            const editedImageAsBlob: Blob = await new Promise(resolve => canvas.toBlob(resolve));\n\n            const savingImageAction: SavingImageAction = {\n                type: EditImageDialogEvents.SavingImage,\n                saving: true\n            };\n            dispatch(savingImageAction);\n\n            const storageID: number = getCurrentDate();\n            const imageUrl = await new FileRepository().uploadSingleFile({\n                file: editedImageAsBlob,\n                fileName: storageID,\n                storageLocation: `${USERS_CHILD}/${copiedUser.id}/${PROFILE_PICTURES_CHILD}`\n            });\n\n            // update user\n            const response = await new UserRepository().updateUser({\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\n                newProfilePicture: {\n                    storageID,\n                    url: imageUrl\n                }\n            });\n\n            const updatedUser: User = response.data;\n\n            dispatch(toggleDialog());\n            dispatch(updateUserChanges(updatedUser));\n            return dispatch(setCopiedUser(updatedUser));\n        } catch (error) {\n            const errorSavingImageAction: SavingImageAction = {\n                type: EditImageDialogEvents.SavingImage,\n                saving: false\n            };\n            dispatch(errorSavingImageAction);\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not save profile photo.\"));\n        }\n    }\n}\n\n/**\n * Delete current profile picture\n */\nexport const deleteImage: ActionCreator<any> = () => {\n    return async (dispatch: Dispatch, getState: () => AppState) => {\n        const {\n            copiedUser,\n            EditImageDialogState\n        } = getState().ProfileLocalState;\n\n        if (!copiedUser) {\n            return;\n        }\n\n        if (isDeletingProfilePicture(EditImageDialogState)) {\n            return;\n        }\n\n        try {\n            const deletingImageAction: DeletingImageAction = {\n                type: EditImageDialogEvents.DeletingImage,\n                deleting: true\n            };\n            dispatch(deletingImageAction);\n\n            // update user\n            const response = await new UserRepository().updateUser({\n                updatedUser: JSON.parse(JSON.stringify(copiedUser)),\n                removeProfilePicture: true\n            });\n\n            const updatedUser: User = response.data;\n\n            dispatch(changeMode(EditImageDialogModes.AddPhoto));\n            dispatch(updateUserChanges(updatedUser));\n            return dispatch(setCopiedUser(updatedUser));\n        }\n        catch (error) {\n            const deletingImageAction: DeletingImageAction = {\n                type: EditImageDialogEvents.DeletingImage,\n                deleting: false\n            };\n            dispatch(deletingImageAction);\n            return dispatch(openFeedbackSnackbar(FeedbackSnackbarTypes.Error, \"Could not delete profile photo.\"));\n        }\n    }\n}","import {ProfileAction} from \"../../ProfileActions\";\nimport {ActionCreator, Dispatch} from \"redux\";\nimport {AppState} from \"../../../../redux-store/reducers\";\nimport Address from \"../../../../models/address\";\nimport AddressRepository from \"../../../../api/repositories/AddressRepository\";\nimport {AddressStates} from \"../../ProfileReducer\";\n\nexport enum BusinessProfileEvents {\n    NewBusinessProfileChanged = \"BusinessProfileEvents.NewBusinessProfileChanged\",\n    CheckBoxChanged = \"BusinessProfileEvents.CheckBoxChanged\",\n    FindingAddress = \"BusinessProfileEvents.FindingAddress\",\n    FinishedFindingAddress = \"BusinessProfileEvents.FinishedFindingAddress\",\n    ChangeAddressState = \"BusinessProfileEvents.ChangeAddressState\"\n}\n\nexport interface BusinessProfileAction extends ProfileAction {\n\n}\n\nexport interface BusinessProfileCheckBoxChangedAction extends BusinessProfileAction {\n    name: string;\n    value: boolean;\n}","import {ProfileAction, ProfileEvents, SetCopiedUserAction} from \"./ProfileActions\";\nimport User, {BusinessProfile} from \"../../models/user\";\nimport Error from \"../../models/error\";\nimport {\n    ChangeModeAction,\n    DeletingImageAction,\n    EditImageDialogEvents,\n    SavingImageAction,\n    SetEditorAction,\n    SliderChangedAction,\n    SuccessfullySelectedImageAction,\n    ToggleDialogAction\n} from \"./components/edit-image-dialog/EditImageDialogActions\";\nimport {\n    BusinessProfileCheckBoxChangedAction,\n    BusinessProfileEvents,\n} from \"./components/business-profile/BusinessProfileActions\";\nimport Address from \"../../models/address\";\n\n// State for Personal details section\nexport interface PersonalDetailsState {\n\n}\n\nexport enum AddressStates {\n    EnterPostcode = \"AddressFindingStates.EnterPostcode\",\n    FindingAddresses = \"AddressFindingStates.FindingAddresses\",\n    DisplayFoundAddresses = \"AddressFindingStates.DisplayFoundAddresses\"\n}\n\n// State for Business profile section\nexport interface BusinessProfileState {\n    // this state is used to keeping track of the changes in Business profile\n    editedBusinessProfile: BusinessProfile;\n    // find address by postcode state for Registered office section\n    // find address by postcode state for Registered office section\n    // list of addresses found by postcode from Registered office section\n    // list of addresses found by postcode from Trading address section\n    // error finding addresses for Registered office\n    // error finding addresses for Trading address\n}\n\nexport enum EditImageDialogModes {\n    AddPhoto = \"EditImageDialogModes.AddPhoto\",\n    EditPhoto = \"EditImageDialogModes.EditPhoto\",\n    DisplayPhoto = \"EditImageDialogModes.DisplayPhoto\"\n}\n\n// State for Edit Image dialog\nexport interface EditImageDialogState {\n    dialogOpen: boolean;\n    mode: EditImageDialogModes;\n    // reference to the editor\n    editor?: any;\n    rawImage?: File | string;\n    editedImage?: Blob;\n\n    scale: number;\n    rotate: number;\n\n    savingImage: boolean;\n    deletingImage: boolean;\n}\n\n// State for the whole Profile page\nexport interface ProfileState {\n    copiedUser?: User;\n    hasInitiallySetCopiedUser: boolean;\n    PersonalDetailsState: PersonalDetailsState;\n    BusinessProfileState: BusinessProfileState;\n    EditImageDialogState: EditImageDialogState;\n}\n\n// initial state for Personal details section\nconst initialPersonalDetailsState: PersonalDetailsState = {}\n\n// initial state for Business profile section\nconst initialBusinessProfileState: BusinessProfileState = {\n    editedBusinessProfile: {\n        companyName: \"\",\n        companyWebsite: \"\",\n        sector: \"none\",\n        logo: [\n            {\n                storageID: -1,\n                url: \"\"\n            }\n        ]\n    },\n}\n\n// initial state for Edit Image dialog\nconst initialEditImageDialogState: EditImageDialogState = {\n    dialogOpen: false,\n    mode: EditImageDialogModes.AddPhoto,\n\n    scale: 1,\n    rotate: 0,\n\n    savingImage: false,\n    deletingImage: false\n}\n\n// initial state for the whole Profile page\nconst initialState: ProfileState = {\n    hasInitiallySetCopiedUser: false,\n    PersonalDetailsState: initialPersonalDetailsState,\n    BusinessProfileState: initialBusinessProfileState,\n    EditImageDialogState: initialEditImageDialogState\n}\n\nexport const hasInitiallySetCopiedUser = (state: ProfileState) => {\n    return state.hasInitiallySetCopiedUser;\n}\n\nexport const isSavingProfilePicture = (state: EditImageDialogState) => {\n    return state.savingImage;\n}\n\nexport const isDeletingProfilePicture = (state: EditImageDialogState) => {\n    return state.deletingImage;\n}\n\nconst profileReducer = (state = initialState, action: ProfileAction) => {\n    switch (action.type) {\n        case ProfileEvents.SetCopiedUser:\n            const setCopiedUserAction: SetCopiedUserAction = action as SetCopiedUserAction;\n            return {\n                ...state,\n                copiedUser: setCopiedUserAction.copiedUser,\n                hasInitiallySetCopiedUser: setCopiedUserAction.firstTimeSetCopiedUser === true ? true : state.hasInitiallySetCopiedUser\n            }\n        case EditImageDialogEvents.ToggleDialog:\n            const toggleDialogAction: ToggleDialogAction = action as ToggleDialogAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...initialEditImageDialogState,\n                    dialogOpen: !state.EditImageDialogState.dialogOpen,\n                    rawImage: toggleDialogAction.image\n                }\n            }\n        case EditImageDialogEvents.SetEditor:\n            const setEditorAction: SetEditorAction = action as SetEditorAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...state.EditImageDialogState,\n                    editor: setEditorAction.editor\n                }\n            }\n        case EditImageDialogEvents.ChangeMode:\n            const changeModeAction: ChangeModeAction = action as ChangeModeAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...state.EditImageDialogState,\n                    mode: changeModeAction.mode\n                }\n            }\n        case EditImageDialogEvents.SuccessfullySelectedImage:\n            const successfullySelectedImageAction: SuccessfullySelectedImageAction = action as SuccessfullySelectedImageAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...state.EditImageDialogState,\n                    rawImage: successfullySelectedImageAction.selectedImage\n                }\n            }\n        case EditImageDialogEvents.SliderChanged:\n            const sliderChangedAction: SliderChangedAction = action as SliderChangedAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...state.EditImageDialogState,\n                    [sliderChangedAction.name]: sliderChangedAction.value\n                }\n            }\n        case EditImageDialogEvents.SavingImage:\n            const savingImageAction: SavingImageAction = action as SavingImageAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...state.EditImageDialogState,\n                    savingImage: savingImageAction.saving\n                }\n            }\n        case EditImageDialogEvents.DeletingImage:\n            const deletingImageAction: DeletingImageAction = action as DeletingImageAction;\n            return {\n                ...state,\n                EditImageDialogState: {\n                    ...state.EditImageDialogState,\n                    deletingImage: deletingImageAction.deleting\n                }\n            }\n        // case BusinessProfileEvents.NewBusinessProfileChanged:\n        //     const updateNewBusinessProfileAction: UpdateNewBusinessProfileAction = action as UpdateNewBusinessProfileAction;\n        //     return {\n        //         ...state,\n        //         BusinessProfileState: {\n        //             ...state.BusinessProfileState,\n        //             newBusinessProfile: updateNewBusinessProfileAction.updatedNewBusinessProfile\n        //         }\n        //     }\n        case BusinessProfileEvents.CheckBoxChanged:\n            const businessProfileCheckBoxChangedAction: BusinessProfileCheckBoxChangedAction = action as BusinessProfileCheckBoxChangedAction;\n            return {\n                ...state,\n                BusinessProfileState: {\n                    ...state.BusinessProfileState,\n                    [businessProfileCheckBoxChangedAction.name]: businessProfileCheckBoxChangedAction.value\n                }\n            }\n        default:\n            return state;\n    }\n}\n\nexport default profileReducer;","import {combineReducers} from \"redux\";\r\nimport authReducer from './authReducer';\r\nimport createBusinessProfileReducer from './createBusinessProfileReducer';\r\nimport editUserReducer from './editUserReducer';\r\nimport editImageReducer from './editImageReducer';\r\nimport editVideoReducer from './editVideoReducer';\r\nimport uploadFilesReducer from './uploadFilesReducer';\r\nimport uploadingStatusReducer from './uploadingStatusReducer';\r\nimport changePasswordReducer from './changePasswordReducer';\r\nimport clubAttributesReducer from './clubAttributesReducer';\r\nimport forumsReducer from './forumsReducer';\r\nimport notificationsReducer from './notificationsReducer';\r\nimport dashboardSidebarReducer from './dashboardSidebarReducer';\r\nimport mediaQueryReducer, {MediaQueryState} from './mediaQueryReducer';\r\nimport superAdminSettingsReducer from './superAdminSettingsReducer';\r\nimport groupAdminSettingsReducer from './groupAdminSettingsReducer';\r\nimport legalDocumentsReducer from './legalDocumentsReducer';\r\nimport invitedUsersReducer from './invitedUsersReducer';\r\nimport invitationDialogReducer from './invitationDialogReducer';\r\nimport addAngelNetworkDialogReducer from './addAngelNetworkDialogReducer';\r\nimport manageGroupFromParamsReducer from './manageGroupFromParamsReducer';\r\nimport angelNetworksReducer from './angelNetworksReducer';\r\nimport manageJoinRequestsReducer from './manageJoinRequestsReducer';\r\nimport pledgesTableReducer from './pledgesTableReducer';\r\nimport feedbackSnackbarReducer from './feedbackSnackbarReducer';\r\nimport activitiesTableReducer from './activitiesTableReducer';\r\nimport manageJSONCompareChangesDialogReducer from './manageJSONCompareChangesDialogReducer';\r\nimport groupAdminsTableReducer from './groupAdminsTableReducer';\r\nimport createPledgeDialogReducer from './createPledgeDialogReducer';\r\nimport selectProjectVisibilityReducer from './selectProjectVisiblityReducer';\r\nimport manageSystemGroupsReducer from './manageSystemGroupsReducer';\r\nimport manageMarketingPreferencesReducer from './manageMarketingPreferencesReducer';\r\nimport createProjectReducer from './createProjectReducer';\r\nimport manageGroupUrlReducer, {ManageGroupUrlState} from \"./manageGroupUrlReducer\";\r\nimport signInReducer, {SignInState} from \"../../pages/signin/SignInReducer\";\r\nimport authenticationReducer, {AuthenticationState} from \"./authenticationReducer\";\r\nimport manageSystemAttributesReducer, {ManageSystemAttributesState} from \"./manageSystemAttributesReducer\";\r\nimport exploreOffersReducer, {ExploreOffersState} from \"../../shared-components/explore-offers/ExploreOffersReducer\";\r\nimport offersTableReducer, {OffersTableStates} from \"../../shared-components/offers-table/OffersTableReducer\";\r\nimport {ExploreGroupsState} from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport newExploreGroupsReducer from \"../../shared-components/explore-groups/ExploreGroupsReducer\";\r\nimport groupDetailsReducer, {GroupDetailsState} from \"../../pages/group-details/GroupDetailsReducer\";\r\nimport manageSystemIdleTimeReducer, {ManageSystemIdleTimeState} from \"./manageSystemIdleTimeReducer\";\r\nimport resetPasswordReducer, {ResetPasswordState} from \"../../pages/reset-password/ResetPasswordReducer\";\r\nimport resourcesReducer, {ResourcesState} from \"../../pages/resources/ResourcesReducer\";\r\nimport feedbackSnackbarReducerNew, {FeedbackSnackbarState} from \"../../shared-components/feedback-snackbar/FeedbackSnackbarReducer\";\r\nimport documentsDownloadReducer, {DocumentsDownloadState} from \"../../shared-components/documents-download/DocumentsDownloadReducer\";\r\nimport contactPitchOwnerDialogReducer, {ContactPitchOwnerDialogState} from \"../../pages/project-details/components/contact-pitch-owner-dialog/ContactPitchOwnerDialogReducer\";\r\nimport profileReducer, {ProfileState} from \"../../shared-components/profile/ProfileReducer\";\r\nimport signUpReducer, {SignUpState} from \"../../pages/signup/SignUpReducer\";\r\nimport manageSectorsReducer, {ManageSectorsState} from \"../../pages/admin/components/manage-sectors/ManageSectorsReducer\";\r\n\r\nexport interface AppState {\r\n    MediaQueryState: MediaQueryState;\r\n    ManageSystemIdleTimeState: ManageSystemIdleTimeState;\r\n    ManageGroupUrlState: ManageGroupUrlState;\r\n    AuthenticationState: AuthenticationState;\r\n    ManageSystemAttributesState: ManageSystemAttributesState;\r\n\r\n    SignInLocalState: SignInState;\r\n    SignUpLocalState: SignUpState;\r\n    ExploreOffersLocalState: ExploreOffersState;\r\n    OffersTableLocalState: OffersTableStates;\r\n    ExploreGroupsLocalState: ExploreGroupsState;\r\n    GroupDetailsLocalState: GroupDetailsState;\r\n    ResetPasswordLocalState: ResetPasswordState;\r\n    ResourcesLocalState: ResourcesState;\r\n\r\n    FeedbackSnackbarLocalState: FeedbackSnackbarState;\r\n    DocumentsDownloadLocalState: DocumentsDownloadState;\r\n    ContactPitchOwnerDialogLocalState: ContactPitchOwnerDialogState;\r\n\r\n    ManageSectorsLocalState: ManageSectorsState;\r\n\r\n    ProfileLocalState: ProfileState;\r\n\r\n    // mitigation plan for the old states of old reducers\r\n    [oldReducers: string]: any;\r\n}\r\n\r\nconst rootReducer = combineReducers<AppState>({\r\n    MediaQueryState: mediaQueryReducer,\r\n    ManageSystemIdleTimeState: manageSystemIdleTimeReducer,\r\n    ManageGroupUrlState: manageGroupUrlReducer,\r\n    AuthenticationState: authenticationReducer,\r\n    ManageSystemAttributesState: manageSystemAttributesReducer,\r\n\r\n    SignInLocalState: signInReducer,\r\n    SignUpLocalState: signUpReducer,\r\n    ExploreOffersLocalState: exploreOffersReducer,\r\n    OffersTableLocalState: offersTableReducer,\r\n    ExploreGroupsLocalState: newExploreGroupsReducer,\r\n    GroupDetailsLocalState: groupDetailsReducer,\r\n    ResetPasswordLocalState: resetPasswordReducer,\r\n    ResourcesLocalState: resourcesReducer,\r\n\r\n    FeedbackSnackbarLocalState: feedbackSnackbarReducerNew,\r\n    DocumentsDownloadLocalState: documentsDownloadReducer,\r\n    ContactPitchOwnerDialogLocalState: contactPitchOwnerDialogReducer,\r\n\r\n    ManageSectorsLocalState: manageSectorsReducer,\r\n\r\n    ProfileLocalState: profileReducer,\r\n\r\n    // Old reducers --------------------------\r\n    auth: authReducer,\r\n    createBusinessProfile: createBusinessProfileReducer,\r\n    editUser: editUserReducer,\r\n    editImage: editImageReducer,\r\n    editVideo: editVideoReducer,\r\n    uploadFiles: uploadFilesReducer,\r\n    uploadingStatus: uploadingStatusReducer,\r\n    changePassword: changePasswordReducer,\r\n    manageClubAttributes: clubAttributesReducer,\r\n    manageForums: forumsReducer,\r\n    manageNotifications: notificationsReducer,\r\n    dashboardSidebar: dashboardSidebarReducer,\r\n    superAdminSettings: superAdminSettingsReducer,\r\n    groupAdminSettings: groupAdminSettingsReducer,\r\n    legalDocuments: legalDocumentsReducer,\r\n    invitedUsers: invitedUsersReducer,\r\n    manageInvitationDialog: invitationDialogReducer,\r\n    manageAddAngelNetworkDialog: addAngelNetworkDialogReducer,\r\n    manageGroupFromParams: manageGroupFromParamsReducer,\r\n    manageAngelNetworks: angelNetworksReducer,\r\n    manageJoinRequests: manageJoinRequestsReducer,\r\n    managePledgesTable: pledgesTableReducer,\r\n    manageFeedbackSnackbar: feedbackSnackbarReducer,\r\n    manageActivitiesTable: activitiesTableReducer,\r\n    manageJSONCompareChangesDialog: manageJSONCompareChangesDialogReducer,\r\n    manageGroupAdminsTable: groupAdminsTableReducer,\r\n    manageCreatePledgeDialog: createPledgeDialogReducer,\r\n    manageSelectProjectVisibility: selectProjectVisibilityReducer,\r\n    manageSystemGroups: manageSystemGroupsReducer,\r\n    manageMarketingPreferences: manageMarketingPreferencesReducer,\r\n    manageCreateProject: createProjectReducer,\r\n});\r\n\r\nexport default rootReducer;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport {applyMiddleware, createStore, Store} from \"redux\";\nimport rootReducer, {AppState} from \"./redux-store/reducers\";\nimport {Provider} from \"react-redux\";\nimport thunk from \"redux-thunk\";\n\nconst store: Store<AppState> = createStore(rootReducer, applyMiddleware(thunk));\n\nReactDOM.render(\n    <Provider\n        store={store}\n    >\n        <App/>\n    </Provider>,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}